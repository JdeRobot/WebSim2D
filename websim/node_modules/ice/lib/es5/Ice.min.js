var _get=function e(t,n,i){if(t===null)t=Function.prototype;var r=Object.getOwnPropertyDescriptor(t,n);if(r===undefined){var s=Object.getPrototypeOf(t);if(s===null){return undefined}else{return e(s,n,i)}}else if("value"in r){return r.value}else{var a=r.get;if(a===undefined){return undefined}return a.call(i)}};var _slicedToArray=function(){function e(e,t){var n=[];var i=true;var r=false;var s=undefined;try{for(var a=e[Symbol.iterator](),o;!(i=(o=a.next()).done);i=true){n.push(o.value);if(t&&n.length===t)break}}catch(e){r=true;s=e}finally{try{if(!i&&a["return"])a["return"]()}finally{if(r)throw s}}return n}return function(t,n){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,n)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,n,i){if(n)e(t.prototype,n);if(i)e(t,i);return t}}();function _extendableBuiltin9(e){function t(){var t=Reflect.construct(e,Array.from(arguments));Object.setPrototypeOf(t,Object.getPrototypeOf(this));return t}t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(Object.setPrototypeOf){Object.setPrototypeOf(t,e)}else{t.__proto__=e}return t}function _extendableBuiltin7(e){function t(){var t=Reflect.construct(e,Array.from(arguments));Object.setPrototypeOf(t,Object.getPrototypeOf(this));return t}t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(Object.setPrototypeOf){Object.setPrototypeOf(t,e)}else{t.__proto__=e}return t}function _extendableBuiltin5(e){function t(){var t=Reflect.construct(e,Array.from(arguments));Object.setPrototypeOf(t,Object.getPrototypeOf(this));return t}t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(Object.setPrototypeOf){Object.setPrototypeOf(t,e)}else{t.__proto__=e}return t}function _extendableBuiltin3(e){function t(){var t=Reflect.construct(e,Array.from(arguments));Object.setPrototypeOf(t,Object.getPrototypeOf(this));return t}t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(Object.setPrototypeOf){Object.setPrototypeOf(t,e)}else{t.__proto__=e}return t}function _extendableBuiltin(e){function t(){var t=Reflect.construct(e,Array.from(arguments));Object.setPrototypeOf(t,Object.getPrototypeOf(this));return t}t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(Object.setPrototypeOf){Object.setPrototypeOf(t,e)}else{t.__proto__=e}return t}function _possibleConstructorReturn(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function _inherits(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}function _classCallCheck(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}(function(){var e=typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};e.Ice=e.Ice||{};Ice.Slice=Ice.Slice||{};e.IceMX=e.IceMX||{};e.IceSSL=e.IceSSL||{};var t=Ice.Slice;(function(){var e=typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};var t=function(){function t(){_classCallCheck(this,t)}_createClass(t,null,[{key:"module",value:function t(n){var i=e[n];if(i===undefined){i={};e[n]=i}return i}},{key:"require",value:function t(n){return e}},{key:"type",value:function t(n){if(n===undefined){return undefined}var i=n.split(".");var r=e;for(var s=0,a=i.length;s<a;++s){r=r[i[s]];if(r===undefined){return undefined}}return r}}]);return t}();Ice._require=function(){return e};Ice.Slice=Ice.Slice||{};Ice._ModuleRegistry=t})();(function(){var e=Ice._ModuleRegistry;var t=Ice.Slice;var n=function e(t,n){if(t===n){return true}else if(t===null||t===undefined||n===null||n===undefined){return false}else if(t.prototype!==n.prototype){return false}else if(typeof t.equals=="function"){return t.equals(n)}else if(t instanceof Array){return i.equals(t,n,e)}return false};var i=function(){function e(){_classCallCheck(this,e)}_createClass(e,null,[{key:"clone",value:function e(t){if(t===undefined){return t}else if(t===null){return[]}else{return t.slice()}}},{key:"equals",value:function e(t,i,r){if(t.length!=i.length){return false}var s=r||n;for(var a=0;a<t.length;++a){if(!s.call(s,t[a],i[a])){return false}}return true}},{key:"shuffle",value:function e(t){for(var n=t.length;n>1;--n){var i=t[n-1];var r=Math.floor(Math.random()*n);t[n-1]=t[r];t[r]=i}}}]);return e}();i.eq=n;t.defineSequence=function(t,n,i,r,s){var a=null;Object.defineProperty(t,n,{get:function t(){if(a===null){a=Ice.StreamHelpers.generateSeqHelper(e.type(i),r,e.type(s))}return a}})};Ice.ArrayUtil=i})();(function(){var e=function(){function e(t,n){_classCallCheck(this,e);this._name=t;this._value=n}_createClass(e,[{key:"equals",value:function e(t){if(this===t){return true}if(!(t instanceof Object.getPrototypeOf(this).constructor)){return false}return this._value==t._value}},{key:"hashCode",value:function e(){return this._value}},{key:"toString",value:function e(){return this._name}},{key:"name",get:function e(){return this._name}},{key:"value",get:function e(){return this._value}}]);return e}();Ice.EnumBase=e;var t=function(){function e(t){_classCallCheck(this,e);this._enumType=t}_createClass(e,[{key:"write",value:function e(t,n){this._enumType._write(t,n)}},{key:"writeOptional",value:function e(t,n,i){this._enumType._writeOpt(t,n,i)}},{key:"read",value:function e(t){return this._enumType._read(t)}},{key:"readOptional",value:function e(t,n){return this._enumType._readOpt(t,n)}}]);return e}();Ice.EnumHelper=t;var n=Ice.Slice;n.defineEnum=function(n){var i=function(e){_inherits(t,e);function t(e,n){_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return t}(e);var r=[];var s=0;var a=null;for(var o in n){var c=n[o][0];var u=n[o][1];var l=new i(c,u);r[u]=l;if(!a){a=l}Object.defineProperty(i,c,{enumerable:true,value:l});if(u>s){s=u}}Object.defineProperty(i,"minWireSize",{get:function e(){return 1}});i._write=function(e,t){if(t){e.writeEnum(t)}else{e.writeEnum(a)}};i._read=function(e){return e.readEnum(i)};i._writeOpt=function(e,t,n){if(n!==undefined){if(e.writeOptional(t,Ice.OptionalFormat.Size)){i._write(e,n)}}};i._readOpt=function(e,t){return e.readOptionalEnum(t,i)};i._helper=new t(i);Object.defineProperty(i,"valueOf",{value:function e(t){if(t===undefined){return i}return r[t]}});Object.defineProperty(i,"maxValue",{value:s});Object.defineProperty(i.prototype,"maxValue",{value:s});return i}})();(function(){var e=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;_classCallCheck(this,e);if(!Number.isSafeInteger(t)){throw new RangeError(n===undefined?"Number must be a safe integer":"High word must be a safe integer")}if(n===undefined){this.low=t>>>0;this.high=(t-this.low)/e.HIGH_MASK>>>0}else{if(!Number.isSafeInteger(n)){throw new RangeError("Low word must be a safe integer")}if(n<0||n>e.MAX_UINT32){throw new RangeError("Low word must be between 0 and 0xFFFFFFFF")}if(t<0||t>e.MAX_UINT32){throw new RangeError("High word must be between 0 and 0xFFFFFFFF")}this.high=t;this.low=n}}_createClass(e,[{key:"hashCode",value:function e(){return this.low}},{key:"equals",value:function t(n){if(this===n){return true}if(!(n instanceof e)){return false}return this.high===n.high&&this.low===n.low}},{key:"toString",value:function e(){return this.high+":"+this.low}},{key:"toNumber",value:function t(){if((this.high&e.SIGN_MASK)!==0){var n=~this.low>>>0;var i=~this.high>>>0;if(i>e.HIGH_MAX||i==e.HIGH_MAX&&n==e.MAX_UINT32){return Number.NEGATIVE_INFINITY}return-(i*e.HIGH_MASK+n+1)}else{if(this.high>e.HIGH_MAX){return Number.POSITIVE_INFINITY}return this.high*e.HIGH_MASK+this.low}}}]);return e}();e.MAX_UINT32=4294967295;e.SIGN_MASK=2147483648;e.HIGH_MASK=4294967296;e.HIGH_MAX=2097151;Ice.Long=e})();(function(){Ice.AsyncStatus={Queued:0,Sent:1}})();(function(){var e=Ice.Long;var t="BufferOverflowException";var n="BufferUnderflowException";var i="IndexOutOfBoundsException";var r=function(){function r(e){_classCallCheck(this,r);if(e!==undefined){this.b=e;this.v=new DataView(this.b)}else{this.b=null;this.v=null}this._position=0;this._limit=0;this._shrinkCounter=0}_createClass(r,[{key:"empty",value:function e(){return this._limit===0}},{key:"resize",value:function e(t){if(t===0){this.clear()}else if(t>this.capacity){this.reserve(t)}this._limit=t}},{key:"clear",value:function e(){this.b=null;this.v=null;this._position=0;this._limit=0}},{key:"expand",value:function e(t){var n=this.capacity===0?t:this._position+t;if(n>this._limit){this.resize(n)}}},{key:"reset",value:function e(){if(this._limit>0&&this._limit*2<this.capacity){if(++this._shrinkCounter>2){this.reserve(this._limit);this._shrinkCounter=0}}else{this._shrinkCounter=0}this._limit=0;this._position=0}},{key:"reserve",value:function e(t){if(t>this.capacity){var n=Math.max(1024,Math.max(t,2*this.capacity));if(!this.b){this.b=new ArrayBuffer(n)}else{var i=new Uint8Array(n);i.set(new Uint8Array(this.b));this.b=i.buffer}this.v=new DataView(this.b)}else if(t<this.capacity){this.b=this.b.slice(0,this.capacity);this.v=new DataView(this.b)}}},{key:"put",value:function e(n){if(this._position===this._limit){throw new Error(t)}this.v.setUint8(this._position,n);this._position++}},{key:"putAt",value:function e(t,n){if(t>=this._limit){throw new Error(i)}this.v.setUint8(t,n)}},{key:"putArray",value:function e(n){if(!(n instanceof Uint8Array)){throw new TypeError("argument is not a Uint8Array")}if(n.byteLength>0){if(this._position+n.length>this._limit){throw new Error(t)}new Uint8Array(this.b,0,this.b.byteLength).set(n,this._position);this._position+=n.byteLength}}},{key:"putShort",value:function e(n){if(this._position+2>this._limit){throw new Error(t)}this.v.setInt16(this._position,n,true);this._position+=2}},{key:"putInt",value:function e(n){if(this._position+4>this._limit){throw new Error(t)}this.v.setInt32(this._position,n,true);this._position+=4}},{key:"putIntAt",value:function e(t,n){if(t+4>this._limit||t<0){throw new Error(i)}this.v.setInt32(t,n,true)}},{key:"putFloat",value:function e(n){if(this._position+4>this._limit){throw new Error(t)}this.v.setFloat32(this._position,n,true);this._position+=4}},{key:"putDouble",value:function e(n){if(this._position+8>this._limit){throw new Error(t)}this.v.setFloat64(this._position,n,true);this._position+=8}},{key:"putLong",value:function e(n){if(this._position+8>this._limit){throw new Error(t)}this.v.setInt32(this._position,n.low,true);this._position+=4;this.v.setInt32(this._position,n.high,true);this._position+=4}},{key:"writeString",value:function e(t,n){var i=unescape(encodeURIComponent(n));t.writeSize(i.length);t.expand(i.length);this.putString(i,i.length)}},{key:"putString",value:function e(n,i){if(this._position+i>this._limit){throw new Error(t)}for(var r=0;r<i;++r){this.v.setUint8(this._position,n.charCodeAt(r));this._position++}}},{key:"get",value:function e(){if(this._position>=this._limit){throw new Error(n)}var t=this.v.getUint8(this._position);this._position++;return t}},{key:"getAt",value:function e(t){if(t<0||t>=this._limit){throw new Error(i)}return this.v.getUint8(t)}},{key:"getArray",value:function e(t){if(this._position+t>this._limit){throw new Error(n)}var i=this.b.slice(this._position,this._position+t);this._position+=t;return new Uint8Array(i)}},{key:"getArrayAt",value:function e(t,i){if(t+i>this._limit){throw new Error(n)}i=i===undefined?this.b.byteLength-t:i;return new Uint8Array(this.b.slice(t,t+i))}},{key:"getShort",value:function e(){if(this._limit-this._position<2){throw new Error(n)}var t=this.v.getInt16(this._position,true);this._position+=2;return t}},{key:"getInt",value:function e(){if(this._limit-this._position<4){throw new Error(n)}var t=this.v.getInt32(this._position,true);this._position+=4;return t}},{key:"getFloat",value:function e(){if(this._limit-this._position<4){throw new Error(n)}var t=this.v.getFloat32(this._position,true);this._position+=4;return t}},{key:"getDouble",value:function e(){if(this._limit-this._position<8){throw new Error(n)}var t=this.v.getFloat64(this._position,true);this._position+=8;return t}},{key:"getLong",value:function t(){if(this._limit-this._position<8){throw new Error(n)}var i=this.v.getUint32(this._position,true);this._position+=4;var r=this.v.getUint32(this._position,true);this._position+=4;return new e(r,i)}},{key:"getString",value:function e(t){if(this._position+t>this._limit){throw new Error(n)}var i=new DataView(this.b,this._position,t);var r="";for(var s=0;s<t;++s){r+=String.fromCharCode(i.getUint8(s))}this._position+=t;return decodeURIComponent(escape(r))}},{key:"position",get:function e(){return this._position},set:function e(t){if(t>=0&&t<=this._limit){this._position=t}}},{key:"limit",get:function e(){return this._limit},set:function e(t){if(t<=this.capacity){this._limit=t;if(this._position>t){this._position=t}}}},{key:"capacity",get:function e(){return this.b===null?0:this.b.byteLength}},{key:"remaining",get:function e(){return this._limit-this._position}}]);return r}();Ice.Buffer=r})();(function(){Ice.CompactIdRegistry=new Map})();(function(){var e=function e(t,n,i,r){r+="  ";if(n===null){return"\n"+r+t+": (null)"}if(n===undefined){return"\n"+r+t+": (undefined)"}if(t=="stack"||typeof n=="function"){return""}if((typeof n==="undefined"?"undefined":_typeof(n))!="object"){return"\n"+r+t+': "'+n+'"'}if(i.indexOf(n)!=-1){return"\n"+r+t+": (recursive)"}i.push(n);var s="\n"+r+t+":";for(var a in n){if(t.indexOf("_")===0){continue}if(typeof n[a]=="function"){continue}s+=r+e(a,n[a],i,r)}return s};var t=function(e){_inherits(t,e);function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.cause=e;return n}return t}(_extendableBuiltin(Error));Ice.ServantError=t;var n=function(t){_inherits(n,t);function n(e){_classCallCheck(this,n);var t=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));if(e){t.ice_cause=e}return t}_createClass(n,[{key:"ice_name",value:function e(){return this.constructor._id.substr(2)}},{key:"ice_id",value:function e(){return this.constructor._id}},{key:"toString",value:function t(){if(this._inToStringAlready){return""}this._inToStringAlready=true;var n=this.ice_id();for(var i in this){if(i!="_inToStringAlready"){n+=e(i,this[i],[],"")}}if(Ice._printStackTraces===true&&this.stack){n+="\n"+this.stack}this._inToStringAlready=false;return n}}],[{key:"captureStackTrace",value:function e(t){var n=(new Error).stack;if(n!==undefined){Object.defineProperty(t,"stack",{get:function e(){return n}})}}},{key:"_id",get:function e(){return"::Ice::Exception"}}]);return n}(_extendableBuiltin3(Error));Ice.Exception=n;var i=function(e){_inherits(t,e);function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.captureStackTrace(i);return i}_createClass(t,null,[{key:"_id",get:function e(){return"::Ice::LocalException"}}]);return t}(n);Ice.LocalException=i;var r=function(e){_inherits(t,e);function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.captureStackTrace(i);return i}_createClass(t,[{key:"ice_getSlicedData",value:function e(){return null}},{key:"_write",value:function e(t){t.startException(null);s(this,t,this._mostDerivedType());t.endException()}},{key:"_read",value:function e(t){t.startException();a(this,t,this._mostDerivedType());t.endException(false)}},{key:"_usesClasses",value:function e(){return false}},{key:"_mostDerivedType",value:function e(){return Ice.UserException}}],[{key:"_id",get:function e(){return"::Ice::UserException"}}]);return t}(n);Ice.UserException=r;var s=function e(t,n,i){if(i===undefined||i===r){return}n.startSlice(i._id,-1,i._parent===r);if(i.prototype.hasOwnProperty("_writeMemberImpl")){i.prototype._writeMemberImpl.call(t,n)}n.endSlice();e(t,n,i._parent)};var a=function e(t,n,i){if(i===undefined||i===r){return}n.startSlice();if(i.prototype.hasOwnProperty("_readMemberImpl")){i.prototype._readMemberImpl.call(t,n)}n.endSlice();e(t,n,i._parent)};var o=function e(t){t.startException(this._slicedData);s(this,t,this._mostDerivedType());t.endException()};var c=function e(t){t.startException();a(this,t,this._mostDerivedType());this._slicedData=t.endException(true)};var u=function e(){return this._slicedData};Ice.Slice.PreservedUserException=function(e){e.prototype.ice_getSlicedData=u;e.prototype._write=o;e.prototype._read=c}})();(function(){Ice.FormatType=Ice.Slice.defineEnum([["DefaultFormat",0],["CompactFormat",1],["SlicedFormat",2]])})();(function(){var e=function(e){_inherits(t,e);function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));Ice.Exception.captureStackTrace(n);n.message=e;return n}return t}(_extendableBuiltin5(Error));Ice.AssertionFailedException=e;var t=function(){function e(){_classCallCheck(this,e)}_createClass(e,null,[{key:"assert",value:function e(t,n){if(!t){console.log(n===undefined?"assertion failed":n);console.log(Error().stack);throw new Ice.AssertionFailedException(n===undefined?"assertion failed":n)}}}]);return e}();Ice.Debug=t})();(function(){var e=Ice.Debug;Ice.StringUtil=function(){function r(){_classCallCheck(this,r)}_createClass(r,null,[{key:"findFirstOf",value:function e(t,n,i){i=i===undefined?0:i;for(var r=i;r<t.length;r++){var s=t.charAt(r);if(n.indexOf(s)!=-1){return r}}return-1}},{key:"findFirstNotOf",value:function e(t,n,i){i=i===undefined?0:i;for(var r=i;r<t.length;r++){var s=t.charAt(r);if(n.indexOf(s)==-1){return r}}return-1}},{key:"escapeString",value:function n(i,r,s){r=r===undefined?null:r;if(r!==null){for(var a=0;a<r.length;++a){if(r.charCodeAt(a)<32||r.charCodeAt(a)>126){throw new Error("special characters must be in ASCII range 32-126")}}}var o=[];if(s===Ice.ToStringMode.Compat){var c=unescape(encodeURIComponent(i));for(var u=0;u<c.length;++u){var l=c.charCodeAt(u);t(l,o,r,s)}}else{for(var h=0;h<i.length;++h){var f=i.charCodeAt(h);if(s===Ice.ToStringMode.Unicode||f<55296||f>57343){t(f,o,r,s)}else{e.assert(s===Ice.ToStringMode.ASCII&&f>=55296&&f<=57343);if(h+1===i.length){throw new Error("High surrogate without low surrogate")}else{var _=i.codePointAt(h);e.assert(_>65535);h++;o.push("\\U");var d=_.toString(16);for(var p=d.length;p<8;p++){o.push("0")}o.push(d)}}}}return o.join("")}},{key:"unescapeString",value:function t(r,s,a,o){s=s===undefined?0:s;a=a===undefined?r.length:a;o=o===undefined?null:o;e.assert(s>=0&&s<=a&&a<=r.length);if(o!==null){for(var c=0;c<o.length;++c){if(o.charCodeAt(c)<32||o.charCodeAt(c)>126){throw new Error("special characters must be in ASCII range 32-126")}}}var u=r.indexOf("\\",s);if(u==-1||u>=a){u=s;while(u<a){n(r,u++)}return r.substring(s,a)}else{var l=[];while(s<a){s=i(r,s,a,o,l)}return l.join("")}}},{key:"splitString",value:function e(t,n){var i=[];var r="";var s=0;var a=null;while(s<t.length){if(a===null&&(t.charAt(s)==='"'||t.charAt(s)==="'")){a=t.charAt(s++);continue}else if(a===null&&t.charAt(s)==="\\"&&s+1<t.length&&(t.charAt(s+1)==='"'||t.charAt(s+1)==="'")){++s}else if(a!==null&&t.charAt(s)==="\\"&&s+1<t.length&&t.charAt(s+1)===a){++s}else if(a!==null&&t.charAt(s)===a){++s;a=null;continue}else if(n.indexOf(t.charAt(s))!==-1){if(a===null){++s;if(r.length>0){i.push(r);r=""}continue}}if(s<t.length){r+=t.charAt(s++)}}if(r.length>0){i.push(r)}if(a!==null){return null}return i}},{key:"checkQuote",value:function e(t,n){n=n===undefined?0:n;var i=t.charAt(n);if(i=='"'||i=="'"){n++;var r=void 0;while(n<t.length&&(r=t.indexOf(i,n))!=-1){if(t.charAt(r-1)!="\\"){return r}n=r+1}return-1}return 0}},{key:"hashCode",value:function e(t){var n=0;for(var i=0;i<t.length;i++){n=31*n+t.charCodeAt(i)}return n}},{key:"toInt",value:function e(t){var n=parseInt(t,10);if(isNaN(n)){throw new Error("conversion of `"+t+"' to int failed")}return n}}]);return r}();function t(t,n,i,r){switch(t){case 92:{n.push("\\\\");break}case 39:{n.push("\\'");break}case 34:{n.push('\\"');break}case 7:{if(r==Ice.ToStringMode.Compat){n.push("\\007")}else{n.push("\\a")}break}case 8:{n.push("\\b");break}case 12:{n.push("\\f");break}case 10:{n.push("\\n");break}case 13:{n.push("\\r");break}case 9:{n.push("\\t");break}case 11:{if(r==Ice.ToStringMode.Compat){n.push("\\013")}else{n.push("\\v")}break}default:{var s=String.fromCharCode(t);if(i!==null&&i.indexOf(s)!==-1){n.push("\\");n.push(s)}else{if(t<32||t>126){if(r===Ice.ToStringMode.Compat){e.assert(t<256);n.push("\\");var a=t.toString(8);for(var o=a.length;o<3;o++){n.push("0")}n.push(a)}else if(t<32||t==127||r===Ice.ToStringMode.ASCII){n.push("\\u");var c=t.toString(16);for(var u=c.length;u<4;u++){n.push("0")}n.push(c)}else{n.push(s)}}else{n.push(s)}}break}}}function n(e,t){var n=e.charCodeAt(t);if(n<32||n===127){var i=void 0;if(t>0){i="character after `"+e.substring(0,t)+"'"}else{i="first character"}i+=" has invalid ordinal value"+n;throw new Error(i)}return e.charAt(t)}function i(t,i,r,s,a){e.assert(i>=0);e.assert(i<r);e.assert(r<=t.length);if(t.charAt(i)!="\\"){a.push(n(t,i++))}else if(i+1===r){++i;a.push("\\")}else{var o=t.charAt(++i);switch(o){case"\\":case"'":case'"':case"?":{++i;a.push(o);break}case"a":{++i;a.append("");break}case"b":{++i;a.push("\b");break}case"f":{++i;a.push("\f");break}case"n":{++i;a.push("\n");break}case"r":{++i;a.push("\r");break}case"t":{++i;a.push("\t");break}case"v":{++i;a.push("\v");break}case"u":case"U":{var c=0;var u=o==="u";var l=u?4:8;++i;while(l>0&&i<r){var h=t.charCodeAt(i++);if(h>=48&&h<=57){h-=48}else if(h>=97&&h<=102){h+=10-97}else if(h>=65&&h<=70){h+=10-65}else{break}c=c*16+h;--l}if(l>0){throw new Error("Invalid universal character name: too few hex digits")}if(c>=55296&&c<=57343){throw new Error("A universal character name cannot designate a surrogate")}if(u||c<=65535){a.push(String.fromCharCode(c))}else{a.push(String.fromCodePoint(c))}break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"x":{var f=[];var _=true;while(_){var d=0;if(o==="x"){var p=2;++i;while(p>0&&i<r){var v=t.charCodeAt(i++);if(v>=48&&v<=57){v-=48}else if(v>=97&&v<=102){v+=10-97}else if(v>=65&&v<=70){v+=10-65}else{break}d=d*16+v;--p}if(p===2){throw new Error("Invalid \\x escape sequence: no hex digit")}}else{for(var y=0;y<3&&i<r;++y){var g=t.charCodeAt(i++)-"0".charCodeAt(0);if(g<0||g>7){--i;e.assert(y!==0);break}d=d*8+g}if(d>255){throw new Error("octal value \\"+d.toString(8)+" ("+d+") is out of range")}}f.push(String.fromCharCode(d));_=false;if(i+1<r&&t.charAt(i)==="\\"){o=t.charAt(i+1);var I=t.charCodeAt(i+1);if(o==="x"||I>=48&&I<=57){i++;_=true}}}a.push(decodeURIComponent(escape(f.join(""))));break}default:{if(s===null||s.length===0||s.indexOf(o)===-1){a.push("\\")}a.push(n(t,i++));break}}}return i}})();(function(){Ice.ReferenceMode={ModeTwoway:0,ModeOneway:1,ModeBatchOneway:2,ModeDatagram:3,ModeBatchDatagram:4,ModeLast:4}})();(function(){Ice.OptionalFormat=Ice.Slice.defineEnum([["F1",0],["F2",1],["F4",2],["F8",3],["Size",4],["VSize",5],["FSize",6],["Class",7]])})();(function(){var e=Object.defineProperty;var t=Ice.OptionalFormat;var n={};n.FSizeOptHelper=function(){this.writeOptional=function(e,n,i){if(i!==undefined&&e.writeOptional(n,t.FSize)){var r=e.startSize();this.write(e,i);e.endSize(r)}};this.readOptional=function(e,n){var i=void 0;if(e.readOptional(n,t.FSize)){e.skip(4);i=this.read(e)}return i}};n.VSizeOptHelper=function(){this.writeOptional=function(e,n,i){if(i!==undefined&&e.writeOptional(n,t.VSize)){e.writeSize(this.minWireSize);this.write(e,i)}};this.readOptional=function(e,n){var i=void 0;if(e.readOptional(n,t.VSize)){e.skipSize();i=this.read(e)}return i}};n.VSizeContainerOptHelper=function(e){this.writeOptional=function(n,i,r){if(r!==undefined&&n.writeOptional(i,t.VSize)){var s=this.size(r);n.writeSize(s>254?s*e+5:s*e+1);this.write(n,r)}};this.readOptional=function(e,n){var i=void 0;if(e.readOptional(n,t.VSize)){e.skipSize();i=this.read(e)}return i}};n.VSizeContainer1OptHelper=function(){this.writeOptional=function(e,n,i){if(i!==undefined&&e.writeOptional(n,t.VSize)){this.write(e,i)}};this.readOptional=function(e,n){var i=void 0;if(e.readOptional(n,t.VSize)){i=this.read(e)}return i}};var i=function(){function e(){_classCallCheck(this,e)}_createClass(e,[{key:"write",value:function e(t,n){if(n===null||n.length===0){t.writeSize(0)}else{var i=this.elementHelper;t.writeSize(n.length);for(var r=0;r<n.length;++r){i.write(t,n[r])}}}},{key:"read",value:function e(t){var n=this.elementHelper;var i=t.readAndCheckSeqSize(n.minWireSize);var r=[];r.length=i;for(var s=0;s<i;++s){r[s]=n.read(t)}return r}},{key:"size",value:function e(t){return t===null||t===undefined?0:t.length}},{key:"minWireSize",get:function e(){return 1}}]);return e}();var r=new i;r.write=function(e,t){return e.writeByteSeq(t)};r.read=function(e){return e.readByteSeq()};e(r,"elementHelper",{get:function e(){return Ice.ByteHelper}});n.VSizeContainer1OptHelper.call(r);var s=function e(t){var n=t.readAndCheckSeqSize(1);var i=[];i.length=n;var r=this.elementType;var s=function e(n){t.readValue(function(e){return i[n]=e},r)};for(var a=0;a<n;++a){s(a)}return i};n.generateSeqHelper=function(t,a,o){if(t===Ice.ByteHelper){return r}var c=new i;if(a){if(t.minWireSize===1){n.VSizeContainer1OptHelper.call(c)}else{n.VSizeContainerOptHelper.call(c,t.minWireSize)}}else{n.FSizeOptHelper.call(c)}e(c,"elementHelper",{get:function e(){return t}});if(t==Ice.ObjectHelper){e(c,"elementType",{get:function e(){return o}});c.read=s}return c};var a=function(){function e(){_classCallCheck(this,e)}_createClass(e,[{key:"write",value:function e(t,n){if(n===null||n.size===0){t.writeSize(0)}else{var i=this.keyHelper;var r=this.valueHelper;t.writeSize(n.size);var s=true;var a=false;var o=undefined;try{for(var c=n[Symbol.iterator](),u;!(s=(u=c.next()).done);s=true){var l=_slicedToArray(u.value,2),h=l[0],f=l[1];i.write(t,h);r.write(t,f)}}catch(e){a=true;o=e}finally{try{if(!s&&c.return){c.return()}}finally{if(a){throw o}}}}}},{key:"read",value:function e(t){var n=this.mapType;var i=new n;var r=t.readSize();var s=this.keyHelper;var a=this.valueHelper;for(var o=0;o<r;++o){i.set(s.read(t),a.read(t))}return i}},{key:"size",value:function e(t){return t===null||t===undefined?0:t.size}},{key:"minWireSize",get:function e(){return 1}}]);return e}();var o=function e(t){var n=t.readSize();var i=this.mapType;var r=new i;var s=this.valueType;var a=function e(n){t.readValue(function(e){return r.set(n,e)},s)};var o=this.keyHelper;for(var c=0;c<n;++c){a(o.read(t))}return r};n.generateDictHelper=function(t,i,r,s,c){var u=new a;if(r){n.VSizeContainerOptHelper.call(u,t.minWireSize+i.minWireSize)}else{n.FSizeOptHelper.call(u)}e(u,"mapType",{get:function e(){return c}});e(u,"keyHelper",{get:function e(){return t}});e(u,"valueHelper",{get:function e(){return i}});if(i==Ice.ObjectHelper){e(u,"valueType",{get:function e(){return s}});u.read=o}return u};Ice.StreamHelpers=n})();(function(){var e=["::Ice::Object"];Ice.Object=function(){function e(){_classCallCheck(this,e)}_createClass(e,[{key:"ice_isA",value:function e(t,n){return this._iceMostDerivedType()._iceIds.indexOf(t)>=0}},{key:"ice_ping",value:function e(t){}},{key:"ice_ids",value:function e(t){return this._iceMostDerivedType()._iceIds}},{key:"ice_id",value:function e(t){return this._iceMostDerivedType()._iceId}},{key:"toString",value:function e(){return"[object "+this.ice_id()+"]"}},{key:"_iceMostDerivedType",value:function e(){return Ice.Object}},{key:"equals",value:function e(t){return this===t}}],[{key:"_iceImplements",get:function e(){return[]}}]);return e}()})();(function(){function e(){var e=(new Date).getTime();var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+Math.random()*16)%16|0;e=Math.floor(e/16);return(t=="x"?n:n&3|8).toString(16)});return t}Ice.generateUUID=e})();(function(){var e=Ice.StringUtil;var t=function(){function t(){_classCallCheck(this,t)}_createClass(t,null,[{key:"addBoolean",value:function e(t,n){return(t<<5)+t^(n?0:1)}},{key:"addString",value:function t(n,i){if(i!==undefined&&i!==null){n=(n<<5)+n^e.hashCode(i)}return n}},{key:"addNumber",value:function e(t,n){return(t<<5)+t^n}},{key:"addHashable",value:function e(t,n){if(n!==undefined&&n!==null){t=(t<<5)+t^n.hashCode()}return t}},{key:"addArray",value:function e(t,n,i){if(n!==undefined&&n!==null){for(var r=0;r<n.length;++r){t=i(t,n[r])}}return t}}]);return t}();Ice.HashUtil=t})();(function(){var e=Ice._ModuleRegistry;var t=Ice.StringUtil;function n(e,t,n,i,r){for(var s=e._table[r];s!==null;s=s._nextInBucket){if(s._hash===i&&e.keysEqual(t,s._key)){s._value=n;return undefined}}e.add(t,n,i,r);return undefined}function i(e,t){if(e===t){return true}if(e===undefined||e===null||t===undefined||t===null){return false}return e.equals(t)}function r(e,t){return e===t}var s=function(){function e(t,n){_classCallCheck(this,e);var i=void 0,s=void 0,a=void 0;if(typeof t=="function"){s=t;a=n}else if(t instanceof e){i=t;s=i.keyComparator;a=i.valueComparator}this._size=0;this._head=null;this._initialCapacity=32;this._loadFactor=.75;this._table=[];this._keyComparator=typeof s=="function"?s:r;this._valueComparator=typeof a=="function"?a:r;if(i instanceof e&&i._size>0){this._threshold=i._threshold;this._table.length=i._table.length;for(var o=0;o<i._table.length;o++){this._table[o]=null}this.merge(i)}else{this._threshold=this._initialCapacity*this._loadFactor;for(var c=0;c<this._initialCapacity;c++){this._table[c]=null}}}_createClass(e,[{key:"set",value:function e(t,i){var r=this.computeHash(t);var s=this.hashIndex(r.hash,this._table.length);return n(this,r.key,i,r.hash,s)}},{key:"get",value:function e(t){var n=this.computeHash(t);var i=this.findEntry(n.key,n.hash);return i!==undefined?i._value:undefined}},{key:"has",value:function e(t){var n=this.computeHash(t);return this.findEntry(n.key,n.hash)!==undefined}},{key:"delete",value:function e(t){var n=this.computeHash(t);var i=this.hashIndex(n.hash,this._table.length);var r=null;for(var s=this._table[i];s!==null;s=s._nextInBucket){if(s._hash===n.hash&&this.keysEqual(n.key,s._key)){this._size--;if(r!==null){r._nextInBucket=s._nextInBucket}else{this._table[i]=s._nextInBucket}if(s._prev!==null){s._prev._next=s._next}if(s._next!==null){s._next._prev=s._prev}if(this._head===s){this._head=s._next}return s._value}r=s}return undefined}},{key:"clear",value:function e(){for(var t=0;t<this._table.length;++t){this._table[t]=null}this._head=null;this._size=0}},{key:"forEach",value:function e(t,n){n=n===undefined?t:n;for(var i=this._head;i!==null;i=i._next){t.call(n,i._value,i._key)}}},{key:"entries",value:regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(n){while(1){switch(n.prev=n.next){case 0:t=this._head;case 1:if(!(t!==null)){n.next=7;break}n.next=4;return[t._key,t._value];case 4:t=t._next;n.next=1;break;case 7:case"end":return n.stop()}}},e,this)})},{key:"keys",value:regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(n){while(1){switch(n.prev=n.next){case 0:t=this._head;case 1:if(!(t!==null)){n.next=7;break}n.next=4;return t._key;case 4:t=t._next;n.next=1;break;case 7:case"end":return n.stop()}}},e,this)})},{key:"values",value:regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(n){while(1){switch(n.prev=n.next){case 0:t=this._head;case 1:if(!(t!==null)){n.next=7;break}n.next=4;return t._value;case 4:t=t._next;n.next=1;break;case 7:case"end":return n.stop()}}},e,this)})},{key:"equals",value:function t(n,i){var r=this;if(n===null||!(n instanceof e)||this._size!==n._size){return false}var s=i||function(e,t){return r._valueComparator.call(r._valueComparator,e,t)};for(var a=this._head;a!==null;a=a._next){var o=n.findEntry(a._key,a._hash);if(o===undefined||!s(a._value,o._value)){return false}}return true}},{key:"merge",value:function e(t){for(var i=t._head;i!==null;i=i._next){n(this,i._key,i._value,i._hash,this.hashIndex(i._hash,this._table.length))}}},{key:"add",value:function e(t,n,i,r){var s=Object.create(null,{key:{enumerable:true,get:function e(){return this._key}},value:{enumerable:true,get:function e(){return this._value}},next:{enumerable:true,get:function e(){return this._next}},_key:{enumerable:false,writable:true,value:t},_value:{enumerable:false,writable:true,value:n},_prev:{enumerable:false,writable:true,value:null},_next:{enumerable:false,writable:true,value:null},_nextInBucket:{enumerable:false,writable:true,value:null},_hash:{enumerable:false,writable:true,value:i}});s._nextInBucket=this._table[r];this._table[r]=s;s._next=this._head;if(this._head!==null){this._head._prev=s}this._head=s;this._size++;if(this._size>=this._threshold){this.resize(this._table.length*2)}}},{key:"resize",value:function e(t){var n=new Array(t).fill(null);for(var i=this._head;i!==null;i=i._next){var r=this.hashIndex(i._hash,t);i._nextInBucket=n[r];n[r]=i}this._table=n;this._threshold=t*this._loadFactor}},{key:"findEntry",value:function e(t,n){var i=this.hashIndex(n,this._table.length);for(var r=this._table[i];r!==null;r=r._nextInBucket){if(r._hash===n&&this.keysEqual(t,r._key)){return r}}return undefined}},{key:"hashIndex",value:function e(t,n){return t&n-1}},{key:"computeHash",value:function n(i){if(i===0||i===-0){return{key:0,hash:0}}if(i===null){if(e._null===null){var r=Ice.generateUUID();e._null={key:r,hash:t.hashCode(r)}}return e._null}if(i===undefined){throw new Error("cannot compute hash for undefined value")}if(typeof i.hashCode==="function"){return{key:i,hash:i.hashCode()}}var s=typeof i==="undefined"?"undefined":_typeof(i);if(s==="string"||i instanceof String){return{key:i,hash:t.hashCode(i)}}else if(s==="number"||i instanceof Number){if(isNaN(i)){if(e._nan===null){var a=Ice.generateUUID();e._nan={key:a,hash:t.hashCode(a)}}return e._nan}return{key:i,hash:i.toFixed(0)}}else if(s==="boolean"||i instanceof Boolean){return{key:i,hash:i?1:0}}throw new Error("cannot compute hash for value of type "+s)}},{key:"keysEqual",value:function e(t,n){return this._keyComparator.call(this._keyComparator,t,n)}},{key:"size",get:function e(){return this._size}}]);return e}();s.prototype[Symbol.iterator]=s.prototype.entries;Ice.HashMap=s;s.compareEquals=i;s.compareIdentity=r;s._null=null;s._nan=null;var a=Ice.Slice;a.defineDictionary=function(t,n,i,r,a,o,c,u){if(c===undefined){t[n]=Map}else{t[n]=function(e){return new s(e||c)}}var l=null;Object.defineProperty(t,i,{get:function i(){if(l===null){l=Ice.StreamHelpers.generateDictHelper(e.type(r),e.type(a),o,e.type(u),t[n])}return l}})}})();(function(){Ice.Value=function(){function n(){_classCallCheck(this,n)}_createClass(n,[{key:"ice_preMarshal",value:function e(){}},{key:"ice_postUnmarshal",value:function e(){}},{key:"ice_getSlicedData",value:function e(){return null}},{key:"_iceWrite",value:function t(n){n.startValue(null);e(this,n,this._iceMostDerivedType());n.endValue()}},{key:"_iceRead",value:function e(n){n.startValue();t(this,n,this._iceMostDerivedType());n.endValue(false)}}],[{key:"write",value:function e(t,n){t.writeValue(n)}},{key:"writeOptional",value:function e(t,n,i){t.writeOptionalValue(n,i)}},{key:"read",value:function e(t){var n={value:null};t.readValue(function(e){return n.value=e},this);return n}},{key:"readOptional",value:function e(t,n){var i={value:undefined};t.readOptionalValue(n,function(e){return i.value=e},this);return i}}]);return n}();Ice.InterfaceByValue=function(e){_inherits(t,e);function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n._id=e;return n}_createClass(t,[{key:"ice_id",value:function e(){return this._id}},{key:"_iceWrite",value:function e(t){t.startValue(null);t.startSlice(this.ice_id(),-1,true);t.endSlice();t.endValue()}},{key:"_iceRead",value:function e(t){t.startValue();t.startSlice();t.endSlice();t.endValue(false)}}]);return t}(Ice.Value);var e=function e(t,n,i){if(i===undefined||i===Ice.Value){return}n.startSlice(i.ice_staticId(),Object.prototype.hasOwnProperty.call(i,"_iceCompactId")?i._iceCompactId:-1,Object.getPrototypeOf(i)===Ice.Value);if(i.prototype.hasOwnProperty("_iceWriteMemberImpl")){i.prototype._iceWriteMemberImpl.call(t,n)}n.endSlice();e(t,n,Object.getPrototypeOf(i))};var t=function e(t,n,i){if(i===undefined||i===Ice.Value){return}n.startSlice();if(i.prototype.hasOwnProperty("_iceReadMemberImpl")){i.prototype._iceReadMemberImpl.call(t,n)}n.endSlice();e(t,n,Object.getPrototypeOf(i))};function n(t){t.startValue(this._iceSlicedData);e(this,t,this._iceMostDerivedType());t.endValue()}function i(e){e.startValue();t(this,e,this._iceMostDerivedType());this._iceSlicedData=e.endValue(true)}function r(){return this._iceSlicedData}var s=Ice.Slice;s.defineValue=function(e,t,s){var a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;e.prototype.ice_id=function(){return t};e.prototype._iceMostDerivedType=function(){return e};e.ice_staticId=function(){return t};if(s){e.prototype.ice_getSlicedData=r;e.prototype._iceWrite=n;e.prototype._iceRead=i}if(a>0){Ice.CompactIdRegistry.set(a,t)}};s.defineValue(Ice.Value,"::Ice::Object")})();(function(){var e=Ice.ArrayUtil;var t=e.eq;function n(e){if(this===e){return true}if(e===null||e===undefined){return false}if(this.prototype!==e.prototype){return false}for(var n in this){var i=this[n];var r=e[n];if(typeof i=="function"){continue}else if(!t(i,r)){return false}}return true}function i(){var t=new this.constructor;for(var n in this){var i=this[n];if(i===undefined||i===null){t[n]=i}else if(typeof i=="function"){continue}else if(typeof i.clone=="function"){t[n]=i.clone()}else if(i instanceof Array){t[n]=e.clone(i)}else{t[n]=i}}return t}function r(e,t){if(typeof t.hashCode=="function"){return Ice.HashUtil.addHashable(e,t)}else if(t instanceof Array){return Ice.HashUtil.addArray(e,t,r)}else{var n=typeof t==="undefined"?"undefined":_typeof(t);if(t instanceof String||n=="string"){return Ice.HashUtil.addString(e,t)}else if(t instanceof Number||n=="number"){return Ice.HashUtil.addNumber(e,t)}else if(t instanceof Boolean||n=="boolean"){return Ice.HashUtil.addBoolean(e,t)}}}function s(){var e=5381;for(var t in this){var n=this[t];if(n===undefined||n===null||typeof n=="function"){continue}e=r(e,n)}return e}Ice.Slice.defineStruct=function(e,t,r){e.prototype.clone=i;e.prototype.equals=n;if(t){e.prototype.hashCode=s}if(e.prototype._write&&e.prototype._read){e.write=function(t,n){if(!n){if(!e.prototype._nullMarshalValue){e.prototype._nullMarshalValue=new this}n=e.prototype._nullMarshalValue}n._write(t)};e.read=function(e,t){if(!t||!(t instanceof this)){t=new this}t._read(e);return t};if(r){Ice.StreamHelpers.FSizeOptHelper.call(e)}else{Ice.StreamHelpers.VSizeOptHelper.call(e)}}return e}})();(function(){var e=Ice.Buffer;var t="A".charCodeAt(0);var n="a".charCodeAt(0);var i="0".charCodeAt(0);function r(e){if(e<26){return String.fromCharCode(t+e)}if(e<52){return String.fromCharCode(n+(e-26))}if(e<62){return String.fromCharCode(i+(e-52))}if(e==62){return"+"}return"/"}function s(e){if(e>="A"&&e<="Z"){return e.charCodeAt(0)-t}if(e>="a"&&e<="z"){return e.charCodeAt(0)-n+26}if(e>="0"&&e<="9"){return e.charCodeAt(0)-i+52}if(e=="+"){return 62}return 63}var a=function(){function t(){_classCallCheck(this,t)}_createClass(t,null,[{key:"encode",value:function e(t){if(t===null||t.length===0){return""}var n=[];var i=void 0;var s=void 0;var a=void 0;var o=void 0;var c=void 0;var u=void 0;var l=void 0;for(var h=0;h<t.length;h+=3){i=t[h]&255;s=0;a=0;if(h+1<t.length){s=t[h+1]&255}if(h+2<t.length){a=t[h+2]&255}o=i>>2&255;c=((i&3)<<4|s>>4)&255;u=((s&15)<<2|a>>6)&255;l=a&63;n.push(r(o));n.push(r(c));if(h+1<t.length){n.push(r(u))}else{n.push("=")}if(h+2<t.length){n.push(r(l))}else{n.push("=")}}var f=n.join("");var _=[];var d=0;while(f.length-d>76){_.push(f.substring(d,d+76));_.push("\r\n");d+=76}_.push(f.substring(d));return _.join("")}},{key:"decode",value:function n(i){var r=[];for(var a=0;a<i.length;a++){var o=i.charAt(a);if(t.isBase64(o)){r.push(o)}}if(r.length===0){return null}var c=r.length*3/4+1;var u=new e;u.resize(c);var l=void 0;var h=void 0;var f=void 0;var _=void 0;var d=void 0;var p=void 0;var v=void 0;var y=void 0;for(var g=0;g<r.length;g+=4){d="A";p="A";v="A";y="A";d=r[g];if(g+1<r.length){p=r[g+1]}if(g+2<r.length){v=r[g+2]}if(g+3<r.length){y=r[g+3]}l=s(d)&255;h=s(p)&255;f=s(v)&255;_=s(y)&255;u.put(l<<2|h>>4);if(v!="="){u.put((h&15)<<4|f>>2)}if(y!="="){u.put((f&3)<<6|_)}}return u.remaining>0?u.getArrayAt(0,u.position):u.getArrayAt(0)}},{key:"isBase64",value:function e(t){if(t>="A"&&t<="Z"){return true}if(t>="a"&&t<="z"){return true}if(t>="0"&&t<="9"){return true}if(t=="+"){return true}if(t=="/"){return true}if(t=="="){return true}return false}}]);return t}();Ice.Base64=a})();(function(){t.defineSequence(Ice,"BoolSeqHelper","Ice.BoolHelper",true);t.defineSequence(Ice,"ByteSeqHelper","Ice.ByteHelper",true);t.defineSequence(Ice,"ShortSeqHelper","Ice.ShortHelper",true);t.defineSequence(Ice,"IntSeqHelper","Ice.IntHelper",true);t.defineSequence(Ice,"LongSeqHelper","Ice.LongHelper",true);t.defineSequence(Ice,"FloatSeqHelper","Ice.FloatHelper",true);t.defineSequence(Ice,"DoubleSeqHelper","Ice.DoubleHelper",true);t.defineSequence(Ice,"StringSeqHelper","Ice.StringHelper",false);t.defineSequence(Ice,"ObjectSeqHelper","Ice.ObjectHelper",false,"Ice.Value");t.defineSequence(Ice,"ObjectProxySeqHelper","Ice.ObjectPrx",false)})();(function(){Ice.Identity=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,e);this.name=t;this.category=n}_createClass(e,[{key:"_write",value:function e(t){t.writeString(this.name);t.writeString(this.category)}},{key:"_read",value:function e(t){this.name=t.readString();this.category=t.readString()}}],[{key:"minWireSize",get:function e(){return 2}}]);return e}();t.defineStruct(Ice.Identity,true,true);t.defineDictionary(Ice,"ObjectDict","ObjectDictHelper","Ice.Identity","Ice.ObjectHelper",false,Ice.HashMap.compareEquals,"Ice.Value");t.defineSequence(Ice,"IdentitySeqHelper","Ice.Identity",false)})();(function(){})();(function(){function e(){var e=function(){function e(){_classCallCheck(this,e)}_createClass(e,null,[{key:"setTimeout",value:function(e){function t(t,n){return e.apply(this,arguments)}t.toString=function(){return e.toString()};return t}(function(e,t){return setTimeout.apply(null,arguments)})},{key:"clearTimeout",value:function(e){function t(t){return e.apply(this,arguments)}t.toString=function(){return e.toString()};return t}(function(e){return clearTimeout.apply(null,arguments)})},{key:"setInterval",value:function(e){function t(){return e.apply(this,arguments)}t.toString=function(){return e.toString()};return t}(function(){return setInterval.apply(null,arguments)})},{key:"clearInterval",value:function(e){function t(){return e.apply(this,arguments)}t.toString=function(){return e.toString()};return t}(function(){return clearInterval.apply(null,arguments)})}]);return e}();if(typeof setImmediate=="function"){e.setImmediate=function(){return setImmediate.apply(null,arguments)}}else{e.setImmediate=function(){return setTimeout.apply(null,arguments)}}return e}var t=Number.MAX_SAFE_INTEGER||9007199254740991;var n=new Map;var i=0;var r=1;var s=2;var a=3;var o=4;var c=void 0;var u=0;var l=function e(){if(u==t){u=0}return u++};var h=function(){function e(){_classCallCheck(this,e)}_createClass(e,null,[{key:"setTimeout",value:function e(t,r){var s=l();n.set(s,t);c.postMessage({type:i,id:s,ms:r});return s}},{key:"clearTimeout",value:function e(t){n.delete(t);c.postMessage({type:a,id:t})}},{key:"setInterval",value:function e(t,i){var s=l();n.set(s,t);c.postMessage({type:r,id:s,ms:i});return s}},{key:"clearInterval",value:function e(t){n.delete(t);c.postMessage({type:o,id:t})}},{key:"setImmediate",value:function e(t){var i=l();n.set(i,t);c.postMessage({type:s,id:i});return i}},{key:"onmessage",value:function e(t){var i=n.get(t.data.id);if(i!==undefined){i.call();if(t.data.type!==r){n.delete(t.data.id)}}}}]);return e}();var f=function e(){return"("+function(){var e=0;var t=1;var n=2;var i=3;var r=4;var s={};self.onmessage=function(a){if(a.data.type==e){s[a.data.id]=setTimeout(function(){return self.postMessage(a.data)},a.data.ms)}else if(a.data.type==t){s[a.data.id]=setInterval(function(){return self.postMessage(a.data)},a.data.ms)}else if(a.data.type==n){self.postMessage(a.data)}else if(a.data.type==i){clearTimeout(s[a.data.id]);delete s[a.data.id]}else if(a.data.type==r){clearInterval(s[a.data.id]);delete s[a.data.id]}}}.toString()+"());"};if(typeof navigator!=="undefined"&&(navigator.userAgent.indexOf("MSIE")!==-1||navigator.userAgent.match(/Trident.*rv:11\./))){Ice.Timer=e()}else if(typeof WorkerGlobalScope!=="undefined"&&this instanceof WorkerGlobalScope){Ice.Timer=e()}else if(c===undefined){var _=URL.createObjectURL(new Blob([f()],{type:"text/javascript"}));c=new Worker(_);c.onmessage=h.onmessage;Ice.Timer=h}})();(function(){Ice.ProtocolVersion=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;_classCallCheck(this,e);this.major=t;this.minor=n}_createClass(e,[{key:"_write",value:function e(t){t.writeByte(this.major);t.writeByte(this.minor)}},{key:"_read",value:function e(t){this.major=t.readByte();this.minor=t.readByte()}}],[{key:"minWireSize",get:function e(){return 2}}]);return e}();t.defineStruct(Ice.ProtocolVersion,true,false);Ice.EncodingVersion=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;_classCallCheck(this,e);this.major=t;this.minor=n}_createClass(e,[{key:"_write",value:function e(t){t.writeByte(this.major);t.writeByte(this.minor)}},{key:"_read",value:function e(t){this.major=t.readByte();this.minor=t.readByte()}}],[{key:"minWireSize",get:function e(){return 2}}]);return e}();t.defineStruct(Ice.EncodingVersion,true,false)})();(function(){Ice.InitializationException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));i.reason=e;return i}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.LocalException}},{key:"_id",get:function e(){return"::Ice::InitializationException"}}]);return t}(Ice.LocalException);Ice.PluginInitializationException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));i.reason=e;return i}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.LocalException}},{key:"_id",get:function e(){return"::Ice::PluginInitializationException"}}]);return t}(Ice.LocalException);Ice.CollocationOptimizationException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.LocalException}},{key:"_id",get:function e(){return"::Ice::CollocationOptimizationException"}}]);return t}(Ice.LocalException);Ice.AlreadyRegisteredException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i));r.kindOfObject=e;r.id=n;return r}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.LocalException}},{key:"_id",get:function e(){return"::Ice::AlreadyRegisteredException"}}]);return t}(Ice.LocalException);Ice.NotRegisteredException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i));r.kindOfObject=e;r.id=n;return r}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.LocalException}},{key:"_id",get:function e(){return"::Ice::NotRegisteredException"}}]);return t}(Ice.LocalException);Ice.TwowayOnlyException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));i.operation=e;return i}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.LocalException}},{key:"_id",get:function e(){return"::Ice::TwowayOnlyException"}}]);return t}(Ice.LocalException);Ice.CloneNotImplementedException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.LocalException}},{key:"_id",get:function e(){return"::Ice::CloneNotImplementedException"}}]);return t}(Ice.LocalException);Ice.UnknownException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));i.unknown=e;return i}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.LocalException}},{key:"_id",get:function e(){return"::Ice::UnknownException"}}]);return t}(Ice.LocalException);Ice.UnknownLocalException=function(e){_inherits(t,e);function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.UnknownException}},{key:"_id",get:function e(){return"::Ice::UnknownLocalException"}}]);return t}(Ice.UnknownException);Ice.UnknownUserException=function(e){_inherits(t,e);function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.UnknownException}},{key:"_id",get:function e(){return"::Ice::UnknownUserException"}}]);return t}(Ice.UnknownException);Ice.VersionMismatchException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.LocalException}},{key:"_id",get:function e(){return"::Ice::VersionMismatchException"}}]);return t}(Ice.LocalException);Ice.CommunicatorDestroyedException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.LocalException}},{key:"_id",get:function e(){return"::Ice::CommunicatorDestroyedException"}}]);return t}(Ice.LocalException);Ice.ObjectAdapterDeactivatedException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));i.name=e;return i}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.LocalException}},{key:"_id",get:function e(){return"::Ice::ObjectAdapterDeactivatedException"}}]);return t}(Ice.LocalException);Ice.ObjectAdapterIdInUseException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));i.id=e;return i}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.LocalException}},{key:"_id",get:function e(){return"::Ice::ObjectAdapterIdInUseException"}}]);return t}(Ice.LocalException);Ice.NoEndpointException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));i.proxy=e;return i}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.LocalException}},{key:"_id",get:function e(){return"::Ice::NoEndpointException"}}]);return t}(Ice.LocalException);Ice.EndpointParseException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));i.str=e;return i}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.LocalException}},{key:"_id",get:function e(){return"::Ice::EndpointParseException"}}]);return t}(Ice.LocalException);Ice.EndpointSelectionTypeParseException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));i.str=e;return i}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.LocalException}},{key:"_id",get:function e(){return"::Ice::EndpointSelectionTypeParseException"}}]);return t}(Ice.LocalException);Ice.VersionParseException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));i.str=e;return i}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.LocalException}},{key:"_id",get:function e(){return"::Ice::VersionParseException"}}]);return t}(Ice.LocalException);Ice.IdentityParseException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));i.str=e;return i}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.LocalException}},{key:"_id",get:function e(){return"::Ice::IdentityParseException"}}]);return t}(Ice.LocalException);Ice.ProxyParseException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));i.str=e;return i}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.LocalException}},{key:"_id",get:function e(){return"::Ice::ProxyParseException"}}]);return t}(Ice.LocalException);Ice.IllegalIdentityException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new Ice.Identity;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));i.id=e;return i}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.LocalException}},{key:"_id",get:function e(){return"::Ice::IllegalIdentityException"}}]);return t}(Ice.LocalException);Ice.IllegalServantException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));i.reason=e;return i}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.LocalException}},{key:"_id",get:function e(){return"::Ice::IllegalServantException"}}]);return t}(Ice.LocalException);Ice.RequestFailedException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new Ice.Identity;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"";_classCallCheck(this,t);var s=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r));s.id=e;s.facet=n;s.operation=i;return s}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.LocalException}},{key:"_id",get:function e(){return"::Ice::RequestFailedException"}}]);return t}(Ice.LocalException);Ice.ObjectNotExistException=function(e){_inherits(t,e);function t(e,n,i){var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,r))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.RequestFailedException}},{key:"_id",get:function e(){return"::Ice::ObjectNotExistException"}}]);return t}(Ice.RequestFailedException);Ice.FacetNotExistException=function(e){_inherits(t,e);function t(e,n,i){var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,r))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.RequestFailedException}},{key:"_id",get:function e(){return"::Ice::FacetNotExistException"}}]);return t}(Ice.RequestFailedException);Ice.OperationNotExistException=function(e){_inherits(t,e);function t(e,n,i){var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,r))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.RequestFailedException}},{key:"_id",get:function e(){return"::Ice::OperationNotExistException"}}]);return t}(Ice.RequestFailedException);Ice.SyscallException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));i.error=e;return i}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.LocalException}},{key:"_id",get:function e(){return"::Ice::SyscallException"}}]);return t}(Ice.LocalException);Ice.SocketException=function(e){_inherits(t,e);function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.SyscallException}},{key:"_id",get:function e(){return"::Ice::SocketException"}}]);return t}(Ice.SyscallException);Ice.CFNetworkException=function(e){_inherits(t,e);function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));r.domain=n;return r}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.SocketException}},{key:"_id",get:function e(){return"::Ice::CFNetworkException"}}]);return t}(Ice.SocketException);Ice.FileException=function(e){_inherits(t,e);function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));r.path=n;return r}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.SyscallException}},{key:"_id",get:function e(){return"::Ice::FileException"}}]);return t}(Ice.SyscallException);Ice.ConnectFailedException=function(e){_inherits(t,e);function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.SocketException}},{key:"_id",get:function e(){return"::Ice::ConnectFailedException"}}]);return t}(Ice.SocketException);Ice.ConnectionRefusedException=function(e){_inherits(t,e);function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.ConnectFailedException}},{key:"_id",get:function e(){return"::Ice::ConnectionRefusedException"}}]);return t}(Ice.ConnectFailedException);Ice.ConnectionLostException=function(e){_inherits(t,e);function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.SocketException}},{key:"_id",get:function e(){return"::Ice::ConnectionLostException"}}]);return t}(Ice.SocketException);Ice.DNSException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i));r.error=e;r.host=n;return r}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.LocalException}},{key:"_id",get:function e(){return"::Ice::DNSException"}}]);return t}(Ice.LocalException);Ice.OperationInterruptedException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.LocalException}},{key:"_id",get:function e(){return"::Ice::OperationInterruptedException"}}]);return t}(Ice.LocalException);Ice.TimeoutException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.LocalException}},{key:"_id",get:function e(){return"::Ice::TimeoutException"}}]);return t}(Ice.LocalException);Ice.ConnectTimeoutException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.TimeoutException}},{key:"_id",get:function e(){return"::Ice::ConnectTimeoutException"}}]);return t}(Ice.TimeoutException);Ice.CloseTimeoutException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.TimeoutException}},{key:"_id",get:function e(){return"::Ice::CloseTimeoutException"}}]);return t}(Ice.TimeoutException);Ice.ConnectionTimeoutException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.TimeoutException}},{key:"_id",get:function e(){return"::Ice::ConnectionTimeoutException"}}]);return t}(Ice.TimeoutException);Ice.InvocationTimeoutException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.TimeoutException}},{key:"_id",get:function e(){return"::Ice::InvocationTimeoutException"}}]);return t}(Ice.TimeoutException);Ice.InvocationCanceledException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.LocalException}},{key:"_id",get:function e(){return"::Ice::InvocationCanceledException"}}]);return t}(Ice.LocalException);Ice.ProtocolException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));i.reason=e;return i}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.LocalException}},{key:"_id",get:function e(){return"::Ice::ProtocolException"}}]);return t}(Ice.LocalException);Ice.BadMagicException=function(e){_inherits(t,e);function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));r.badMagic=n;return r}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.ProtocolException}},{key:"_id",get:function e(){return"::Ice::BadMagicException"}}]);return t}(Ice.ProtocolException);Ice.UnsupportedProtocolException=function(e){_inherits(t,e);function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new Ice.ProtocolVersion;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:new Ice.ProtocolVersion;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"";_classCallCheck(this,t);var s=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));s.bad=n;s.supported=i;return s}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.ProtocolException}},{key:"_id",get:function e(){return"::Ice::UnsupportedProtocolException"}}]);return t}(Ice.ProtocolException);Ice.UnsupportedEncodingException=function(e){_inherits(t,e);function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new Ice.EncodingVersion;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:new Ice.EncodingVersion;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"";_classCallCheck(this,t);var s=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));s.bad=n;s.supported=i;return s}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.ProtocolException}},{key:"_id",get:function e(){return"::Ice::UnsupportedEncodingException"}}]);return t}(Ice.ProtocolException);Ice.UnknownMessageException=function(e){_inherits(t,e);function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.ProtocolException}},{key:"_id",get:function e(){return"::Ice::UnknownMessageException"}}]);return t}(Ice.ProtocolException);Ice.ConnectionNotValidatedException=function(e){_inherits(t,e);function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.ProtocolException}},{key:"_id",get:function e(){return"::Ice::ConnectionNotValidatedException"}}]);return t}(Ice.ProtocolException);Ice.UnknownRequestIdException=function(e){_inherits(t,e);function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.ProtocolException}},{key:"_id",get:function e(){return"::Ice::UnknownRequestIdException"}}]);return t}(Ice.ProtocolException);Ice.UnknownReplyStatusException=function(e){_inherits(t,e);function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.ProtocolException}},{key:"_id",get:function e(){return"::Ice::UnknownReplyStatusException"}}]);return t}(Ice.ProtocolException);Ice.CloseConnectionException=function(e){_inherits(t,e);function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.ProtocolException}},{key:"_id",get:function e(){return"::Ice::CloseConnectionException"}}]);return t}(Ice.ProtocolException);Ice.ConnectionManuallyClosedException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));i.graceful=e;return i}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.LocalException}},{key:"_id",get:function e(){return"::Ice::ConnectionManuallyClosedException"}}]);return t}(Ice.LocalException);Ice.IllegalMessageSizeException=function(e){_inherits(t,e);function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.ProtocolException}},{key:"_id",get:function e(){return"::Ice::IllegalMessageSizeException"}}]);return t}(Ice.ProtocolException);Ice.CompressionException=function(e){_inherits(t,e);function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.ProtocolException}},{key:"_id",get:function e(){return"::Ice::CompressionException"}}]);return t}(Ice.ProtocolException);Ice.DatagramLimitException=function(e){_inherits(t,e);function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.ProtocolException}},{key:"_id",get:function e(){return"::Ice::DatagramLimitException"}}]);return t}(Ice.ProtocolException);Ice.MarshalException=function(e){_inherits(t,e);function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.ProtocolException}},{key:"_id",get:function e(){return"::Ice::MarshalException"}}]);return t}(Ice.ProtocolException);Ice.ProxyUnmarshalException=function(e){_inherits(t,e);function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.MarshalException}},{key:"_id",get:function e(){return"::Ice::ProxyUnmarshalException"}}]);return t}(Ice.MarshalException);Ice.UnmarshalOutOfBoundsException=function(e){_inherits(t,e);function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.MarshalException}},{key:"_id",get:function e(){return"::Ice::UnmarshalOutOfBoundsException"}}]);return t}(Ice.MarshalException);Ice.NoValueFactoryException=function(e){_inherits(t,e);function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));r.type=n;return r}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.MarshalException}},{key:"_id",get:function e(){return"::Ice::NoValueFactoryException"}}]);return t}(Ice.MarshalException);Ice.UnexpectedObjectException=function(e){_inherits(t,e);function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"";_classCallCheck(this,t);var s=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));s.type=n;s.expectedType=i;return s}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.MarshalException}},{key:"_id",get:function e(){return"::Ice::UnexpectedObjectException"}}]);return t}(Ice.MarshalException);Ice.MemoryLimitException=function(e){_inherits(t,e);function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.MarshalException}},{key:"_id",get:function e(){return"::Ice::MemoryLimitException"}}]);return t}(Ice.MarshalException);Ice.StringConversionException=function(e){_inherits(t,e);function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.MarshalException}},{key:"_id",get:function e(){return"::Ice::StringConversionException"}}]);return t}(Ice.MarshalException);Ice.EncapsulationException=function(e){_inherits(t,e);function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.MarshalException}},{key:"_id",get:function e(){return"::Ice::EncapsulationException"}}]);return t}(Ice.MarshalException);Ice.FeatureNotSupportedException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));i.unsupportedFeature=e;return i}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.LocalException}},{key:"_id",get:function e(){return"::Ice::FeatureNotSupportedException"}}]);return t}(Ice.LocalException);Ice.SecurityException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));i.reason=e;return i}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.LocalException}},{key:"_id",get:function e(){return"::Ice::SecurityException"}}]);return t}(Ice.LocalException);Ice.FixedProxyException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.LocalException}},{key:"_id",get:function e(){return"::Ice::FixedProxyException"}}]);return t}(Ice.LocalException);Ice.ResponseSentException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}_createClass(t,null,[{key:"_parent",get:function e(){return Ice.LocalException}},{key:"_id",get:function e(){return"::Ice::ResponseSentException"}}]);return t}(Ice.LocalException)})();(function(){var e=Ice.StringUtil;var t=Ice.Identity;var n=Ice.IdentityParseException;Ice.stringToIdentity=function(i){var r=new t;var s=-1;var a=0;while((a=i.indexOf("/",a))!==-1){var o=0;while(a-o>0&&i.charAt(a-o-1)=="\\"){o++}if(o%2===0){if(s==-1){s=a}else{throw new n("unescaped backslash in identity `"+i+"'")}}a++}if(s==-1){r.category="";try{r.name=e.unescapeString(i,0,i.length,"/")}catch(e){throw new n("invalid identity name `"+i+"': "+e.toString())}}else{try{r.category=e.unescapeString(i,0,s,"/")}catch(e){throw new n("invalid category in identity `"+i+"': "+e.toString())}if(s+1<i.length){try{r.name=e.unescapeString(i,s+1,i.length,"/")}catch(e){throw new n("invalid name in identity `"+i+"': "+e.toString())}}else{r.name=""}}return r};Ice.identityToString=function(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Ice.ToStringMode.Unicode;if(t.category===null||t.category.length===0){return e.escapeString(t.name,"/",n)}else{return e.escapeString(t.category,"/",n)+"/"+e.escapeString(t.name,"/",n)}};Ice.proxyIdentityCompare=function(e,t){if(e===t){return 0}else if(e===null&&t!==null){return-1}else if(e!==null&&t===null){return 1}else{var n=e.ice_getIdentity();var i=t.ice_getIdentity();var r=n.name.localeCompare(i.name);return r!==0?r:n.category.localeCompare(i.category)}};Ice.proxyIdentityAndFacetCompare=function(e,t){if(e===t){return 0}else if(e===null&&t!==null){return-1}else if(e!==null&&t===null){return 1}else{var n=e.ice_getIdentity();var i=t.ice_getIdentity();var r=n.name.localeCompare(i.name);if(r!==0){return r}r=n.category.localeCompare(i.category);if(r!==0){return r}var s=e.ice_getFacet();var a=t.ice_getFacet();if(s===null&&a===null){return 0}else if(s===null){return-1}else if(a===null){return 1}return s.localeCompare(a)}}})();(function(){var e=function e(){_classCallCheck(this,e);this.typeId="";this.compactId=-1;this.bytes=[];this.instances=[];this.hasOptionalMembers=false;this.isLastSlice=false};Ice.SliceInfo=e;var t=function e(t){_classCallCheck(this,e);this.slices=t};Ice.SlicedData=t;var n=function(e){_inherits(t,e);function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n._unknownTypeId=e;return n}_createClass(t,[{key:"ice_getSlicedData",value:function e(){return this._slicedData}},{key:"ice_id",value:function e(){return this._unknownTypeId}},{key:"_iceWrite",value:function e(t){t.startValue(this._slicedData);t.endValue()}},{key:"_iceRead",value:function e(t){t.startValue();this._slicedData=t.endValue(true)}}]);return t}(Ice.Value);Ice.UnknownSlicedValue=n})();(function(){var e=function(){function e(t){_classCallCheck(this,e);if(t!==undefined&&t.length>0){this._prefix=t+": "}else{this._prefix=""}this._dateformat={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:false}}_createClass(e,[{key:"print",value:function e(t){this.write(t,false)}},{key:"trace",value:function e(t,n){var i=[];i.push("-- ");i.push(this.timestamp());i.push(" ");i.push(this._prefix);i.push(t);i.push(": ");i.push(n);this.write(i.join(""),true)}},{key:"warning",value:function e(t){var n=[];n.push("-! ");n.push(this.timestamp());n.push(" ");n.push(this._prefix);n.push("warning: ");n.push(t);this.write(n.join(""),true)}},{key:"error",value:function e(t){var n=[];n.push("!! ");n.push(this.timestamp());n.push(" ");n.push(this._prefix);n.push("error: ");n.push(t);this.write(n.join(""),true)}},{key:"cloneWithPrefix",value:function t(n){return new e(n)}},{key:"write",value:function e(t,n){if(n){t=t.replace(/\n/g,"\n   ")}console.log(t)}},{key:"timestamp",value:function e(){var t=new Date;return t.toLocaleString("en-US",this._dateformat)+"."+t.getMilliseconds()}}]);return e}();Ice.Logger=e})();(function(){var e=Ice.StringUtil;var t={};Ice.Encoding_1_0=new Ice.EncodingVersion(1,0);Ice.Encoding_1_1=new Ice.EncodingVersion(1,1);Ice.Protocol_1_0=new Ice.ProtocolVersion(1,0);t.headerSize=14;t.magic=new Uint8Array([73,99,101,80]);t.protocolMajor=1;t.protocolMinor=0;t.protocolEncodingMajor=1;t.protocolEncodingMinor=0;t.encodingMajor=1;t.encodingMinor=1;t.requestMsg=0;t.requestBatchMsg=1;t.replyMsg=2;t.validateConnectionMsg=3;t.closeConnectionMsg=4;t.replyOK=0;t.replyUserException=1;t.replyObjectNotExist=2;t.replyFacetNotExist=3;t.replyOperationNotExist=4;t.replyUnknownLocalException=5;t.replyUnknownUserException=6;t.replyUnknownException=7;t.requestHdr=new Uint8Array([t.magic[0],t.magic[1],t.magic[2],t.magic[3],t.protocolMajor,t.protocolMinor,t.protocolEncodingMajor,t.protocolEncodingMinor,t.requestMsg,0,0,0,0,0,0,0,0,0]);t.requestBatchHdr=new Uint8Array([t.magic[0],t.magic[1],t.magic[2],t.magic[3],t.protocolMajor,t.protocolMinor,t.protocolEncodingMajor,t.protocolEncodingMinor,t.requestBatchMsg,0,0,0,0,0,0,0,0,0]);t.replyHdr=new Uint8Array([t.magic[0],t.magic[1],t.magic[2],t.magic[3],t.protocolMajor,t.protocolMinor,t.protocolEncodingMajor,t.protocolEncodingMinor,t.replyMsg,0,0,0,0,0]);t.currentProtocol=new Ice.ProtocolVersion(t.protocolMajor,t.protocolMinor);t.currentProtocolEncoding=new Ice.EncodingVersion(t.protocolEncodingMajor,t.protocolEncodingMinor);t.currentEncoding=new Ice.EncodingVersion(t.encodingMajor,t.encodingMinor);t.checkSupportedProtocol=function(e){if(e.major!==t.currentProtocol.major||e.minor>t.currentProtocol.minor){throw new Ice.UnsupportedProtocolException("",e,t.currentProtocol)}};t.checkSupportedProtocolEncoding=function(e){if(e.major!==t.currentProtocolEncoding.major||e.minor>t.currentProtocolEncoding.minor){throw new Ice.UnsupportedEncodingException("",e,t.currentProtocolEncoding)}};t.checkSupportedEncoding=function(e){if(e.major!==t.currentEncoding.major||e.minor>t.currentEncoding.minor){throw new Ice.UnsupportedEncodingException("",e,t.currentEncoding)}};t.getCompatibleProtocol=function(e){if(e.major!==t.currentProtocol.major){return e}else if(e.minor<t.currentProtocol.minor){return e}else{return t.currentProtocol}};t.getCompatibleEncoding=function(e){if(e.major!==t.currentEncoding.major){return e}else if(e.minor<t.currentEncoding.minor){return e}else{return t.currentEncoding}};t.isSupported=function(e,t){return e.major===t.major&&e.minor<=t.minor};Ice.stringToProtocolVersion=function(e){return new Ice.ProtocolVersion(n(e),i(e))};Ice.stringToEncodingVersion=function(e){return new Ice.EncodingVersion(n(e),i(e))};Ice.protocolVersionToString=function(e){return r(e.major,e.minor)};Ice.encodingVersionToString=function(e){return r(e.major,e.minor)};t.OPTIONAL_END_MARKER=255;t.FLAG_HAS_TYPE_ID_STRING=1<<0;t.FLAG_HAS_TYPE_ID_INDEX=1<<1;t.FLAG_HAS_TYPE_ID_COMPACT=1<<1|1<<0;t.FLAG_HAS_OPTIONAL_MEMBERS=1<<2;t.FLAG_HAS_INDIRECTION_TABLE=1<<3;t.FLAG_HAS_SLICE_SIZE=1<<4;t.FLAG_IS_LAST_SLICE=1<<5;Ice.Protocol=t;function n(t){var n=t.indexOf(".");if(n===-1){throw new Ice.VersionParseException("malformed version value `"+t+"'")}try{var i=e.toInt(t.substring(0,n));if(i<1||i>255){throw new Ice.VersionParseException("range error in version `"+t+"'")}return i}catch(e){throw new Ice.VersionParseException("invalid version value `"+t+"'")}}function i(t){var n=t.indexOf(".");if(n===-1){throw new Ice.VersionParseException("malformed version value `"+t+"'")}try{var i=e.toInt(t.substring(n+1));if(i<0||i>255){throw new Ice.VersionParseException("range error in version `"+t+"'")}return i}catch(e){throw new Ice.VersionParseException("invalid version value `"+t+"'")}}function r(e,t){return e+"."+t}})();(function(){var e=function(){function e(){_classCallCheck(this,e)}_createClass(e,null,[{key:"equals",value:function e(t,n){if(t===n){return true}else if(t.size!=n.size){return false}else{var i=true;var r=false;var s=undefined;try{for(var a=t[Symbol.iterator](),o;!(i=(o=a.next()).done);i=true){var c=_slicedToArray(o.value,2),u=c[0],l=c[1];if(l===undefined){if(!n.has(u)){return false}else if(n.get(u)!==l){return false}}else if(n.get(u)!==l){return false}}}catch(e){r=true;s=e}finally{try{if(!i&&a.return){a.return()}}finally{if(r){throw s}}}}return true}}]);return e}();Ice.MapUtil=e})();(function(){var e=Ice.ReferenceMode;var t=function(){function t(n,i){_classCallCheck(this,t);this._reference=n;this._response=n.getMode()==e.ModeTwoway;this._connection=i}_createClass(t,[{key:"update",value:function e(t,n){try{if(t===this){return n}else if(t.getConnection()===this._connection){return n}}catch(e){}return this}},{key:"sendAsyncRequest",value:function e(t){return t.invokeRemote(this._connection,this._response)}},{key:"asyncRequestCanceled",value:function e(t){return this._connection.asyncRequestCanceled(t)}},{key:"getReference",value:function e(){return this._reference}},{key:"getConnection",value:function e(){return this._connection}}]);return t}();Ice.ConnectionRequestHandler=t})();(function(){Ice.Property=function(){function e(t,n,i){_classCallCheck(this,e);this._pattern=t;this._deprecated=n;this._deprecatedBy=i}_createClass(e,[{key:"pattern",get:function e(){return this._pattern}},{key:"deprecated",get:function e(){return this._deprecated}},{key:"deprecatedBy",get:function e(){return this._deprecatedBy}}]);return e}()})();(function(){var e={};var t=Ice.Property;e.IceProps=[new t("/^Ice.ACM.Client/",true,null),new t("/^Ice.ACM.Server/",true,null),new t("/^Ice.ACM.Timeout/",false,null),new t("/^Ice.ACM.Heartbeat/",false,null),new t("/^Ice.ACM.Close/",false,null),new t("/^Ice.ACM/",false,null),new t("/^Ice.ACM.Client.Timeout/",false,null),new t("/^Ice.ACM.Client.Heartbeat/",false,null),new t("/^Ice.ACM.Client.Close/",false,null),new t("/^Ice.ACM.Client/",false,null),new t("/^Ice.ACM.Server.Timeout/",false,null),new t("/^Ice.ACM.Server.Heartbeat/",false,null),new t("/^Ice.ACM.Server.Close/",false,null),new t("/^Ice.ACM.Server/",false,null),new t("/^Ice.Admin.ACM.Timeout/",false,null),new t("/^Ice.Admin.ACM.Heartbeat/",false,null),new t("/^Ice.Admin.ACM.Close/",false,null),new t("/^Ice.Admin.ACM/",false,null),new t("/^Ice.Admin.AdapterId/",false,null),new t("/^Ice.Admin.Endpoints/",false,null),new t("/^Ice.Admin.Locator.EndpointSelection/",false,null),new t("/^Ice.Admin.Locator.ConnectionCached/",false,null),new t("/^Ice.Admin.Locator.PreferSecure/",false,null),new t("/^Ice.Admin.Locator.LocatorCacheTimeout/",false,null),new t("/^Ice.Admin.Locator.InvocationTimeout/",false,null),new t("/^Ice.Admin.Locator.Locator/",false,null),new t("/^Ice.Admin.Locator.Router/",false,null),new t("/^Ice.Admin.Locator.CollocationOptimized/",false,null),new t("/^Ice.Admin.Locator.Context../",false,null),new t("/^Ice.Admin.Locator/",false,null),new t("/^Ice.Admin.PublishedEndpoints/",false,null),new t("/^Ice.Admin.ReplicaGroupId/",false,null),new t("/^Ice.Admin.Router.EndpointSelection/",false,null),new t("/^Ice.Admin.Router.ConnectionCached/",false,null),new t("/^Ice.Admin.Router.PreferSecure/",false,null),new t("/^Ice.Admin.Router.LocatorCacheTimeout/",false,null),new t("/^Ice.Admin.Router.InvocationTimeout/",false,null),new t("/^Ice.Admin.Router.Locator/",false,null),new t("/^Ice.Admin.Router.Router/",false,null),new t("/^Ice.Admin.Router.CollocationOptimized/",false,null),new t("/^Ice.Admin.Router.Context../",false,null),new t("/^Ice.Admin.Router/",false,null),new t("/^Ice.Admin.ProxyOptions/",false,null),new t("/^Ice.Admin.ThreadPool.Size/",false,null),new t("/^Ice.Admin.ThreadPool.SizeMax/",false,null),new t("/^Ice.Admin.ThreadPool.SizeWarn/",false,null),new t("/^Ice.Admin.ThreadPool.StackSize/",false,null),new t("/^Ice.Admin.ThreadPool.Serialize/",false,null),new t("/^Ice.Admin.ThreadPool.ThreadIdleTime/",false,null),new t("/^Ice.Admin.ThreadPool.ThreadPriority/",false,null),new t("/^Ice.Admin.MessageSizeMax/",false,null),new t("/^Ice.Admin.DelayCreation/",false,null),new t("/^Ice.Admin.Enabled/",false,null),new t("/^Ice.Admin.Facets/",false,null),new t("/^Ice.Admin.InstanceName/",false,null),new t("/^Ice.Admin.Logger.KeepLogs/",false,null),new t("/^Ice.Admin.Logger.KeepTraces/",false,null),new t("/^Ice.Admin.Logger.Properties/",false,null),new t("/^Ice.Admin.ServerId/",false,null),new t("/^Ice.BackgroundLocatorCacheUpdates/",false,null),new t("/^Ice.BatchAutoFlush/",true,null),new t("/^Ice.BatchAutoFlushSize/",false,null),new t("/^Ice.ChangeUser/",false,null),new t("/^Ice.ClassGraphDepthMax/",false,null),new t("/^Ice.ClientAccessPolicyProtocol/",false,null),new t("/^Ice.Compression.Level/",false,null),new t("/^Ice.CollectObjects/",false,null),new t("/^Ice.Config/",false,null),new t("/^Ice.ConsoleListener/",false,null),new t("/^Ice.Default.CollocationOptimized/",false,null),new t("/^Ice.Default.EncodingVersion/",false,null),new t("/^Ice.Default.EndpointSelection/",false,null),new t("/^Ice.Default.Host/",false,null),new t("/^Ice.Default.Locator.EndpointSelection/",false,null),new t("/^Ice.Default.Locator.ConnectionCached/",false,null),new t("/^Ice.Default.Locator.PreferSecure/",false,null),new t("/^Ice.Default.Locator.LocatorCacheTimeout/",false,null),new t("/^Ice.Default.Locator.InvocationTimeout/",false,null),new t("/^Ice.Default.Locator.Locator/",false,null),new t("/^Ice.Default.Locator.Router/",false,null),new t("/^Ice.Default.Locator.CollocationOptimized/",false,null),new t("/^Ice.Default.Locator.Context../",false,null),new t("/^Ice.Default.Locator/",false,null),new t("/^Ice.Default.LocatorCacheTimeout/",false,null),new t("/^Ice.Default.InvocationTimeout/",false,null),new t("/^Ice.Default.Package/",false,null),new t("/^Ice.Default.PreferSecure/",false,null),new t("/^Ice.Default.Protocol/",false,null),new t("/^Ice.Default.Router.EndpointSelection/",false,null),new t("/^Ice.Default.Router.ConnectionCached/",false,null),new t("/^Ice.Default.Router.PreferSecure/",false,null),new t("/^Ice.Default.Router.LocatorCacheTimeout/",false,null),new t("/^Ice.Default.Router.InvocationTimeout/",false,null),new t("/^Ice.Default.Router.Locator/",false,null),new t("/^Ice.Default.Router.Router/",false,null),new t("/^Ice.Default.Router.CollocationOptimized/",false,null),new t("/^Ice.Default.Router.Context../",false,null),new t("/^Ice.Default.Router/",false,null),new t("/^Ice.Default.SlicedFormat/",false,null),new t("/^Ice.Default.SourceAddress/",false,null),new t("/^Ice.Default.Timeout/",false,null),new t("/^Ice.EventLog.Source/",false,null),new t("/^Ice.FactoryAssemblies/",false,null),new t("/^Ice.HTTPProxyHost/",false,null),new t("/^Ice.HTTPProxyPort/",false,null),new t("/^Ice.ImplicitContext/",false,null),new t("/^Ice.InitPlugins/",false,null),new t("/^Ice.IPv4/",false,null),new t("/^Ice.IPv6/",false,null),new t("/^Ice.LogFile/",false,null),new t("/^Ice.LogFile.SizeMax/",false,null),new t("/^Ice.LogStdErr.Convert/",false,null),new t("/^Ice.MessageSizeMax/",false,null),new t("/^Ice.Nohup/",false,null),new t("/^Ice.NullHandleAbort/",false,null),new t("/^Ice.Override.CloseTimeout/",false,null),new t("/^Ice.Override.Compress/",false,null),new t("/^Ice.Override.ConnectTimeout/",false,null),new t("/^Ice.Override.Timeout/",false,null),new t("/^Ice.Override.Secure/",false,null),new t("/^Ice.Package../",false,null),new t("/^Ice.Plugin../",false,null),new t("/^Ice.PluginLoadOrder/",false,null),new t("/^Ice.PreferIPv6Address/",false,null),new t("/^Ice.PreloadAssemblies/",false,null),new t("/^Ice.PrintAdapterReady/",false,null),new t("/^Ice.PrintProcessId/",false,null),new t("/^Ice.PrintStackTraces/",false,null),new t("/^Ice.ProgramName/",false,null),new t("/^Ice.RetryIntervals/",false,null),new t("/^Ice.ServerIdleTime/",false,null),new t("/^Ice.SOCKSProxyHost/",false,null),new t("/^Ice.SOCKSProxyPort/",false,null),new t("/^Ice.StdErr/",false,null),new t("/^Ice.StdOut/",false,null),new t("/^Ice.SyslogFacility/",false,null),new t("/^Ice.ThreadPool.Client.Size/",false,null),new t("/^Ice.ThreadPool.Client.SizeMax/",false,null),new t("/^Ice.ThreadPool.Client.SizeWarn/",false,null),new t("/^Ice.ThreadPool.Client.StackSize/",false,null),new t("/^Ice.ThreadPool.Client.Serialize/",false,null),new t("/^Ice.ThreadPool.Client.ThreadIdleTime/",false,null),new t("/^Ice.ThreadPool.Client.ThreadPriority/",false,null),new t("/^Ice.ThreadPool.Server.Size/",false,null),new t("/^Ice.ThreadPool.Server.SizeMax/",false,null),new t("/^Ice.ThreadPool.Server.SizeWarn/",false,null),new t("/^Ice.ThreadPool.Server.StackSize/",false,null),new t("/^Ice.ThreadPool.Server.Serialize/",false,null),new t("/^Ice.ThreadPool.Server.ThreadIdleTime/",false,null),new t("/^Ice.ThreadPool.Server.ThreadPriority/",false,null),new t("/^Ice.ThreadPriority/",false,null),new t("/^Ice.ToStringMode/",false,null),new t("/^Ice.Trace.Admin.Properties/",false,null),new t("/^Ice.Trace.Admin.Logger/",false,null),new t("/^Ice.Trace.Locator/",false,null),new t("/^Ice.Trace.Network/",false,null),new t("/^Ice.Trace.Protocol/",false,null),new t("/^Ice.Trace.Retry/",false,null),new t("/^Ice.Trace.Slicing/",false,null),new t("/^Ice.Trace.ThreadPool/",false,null),new t("/^Ice.UDP.RcvSize/",false,null),new t("/^Ice.UDP.SndSize/",false,null),new t("/^Ice.TCP.Backlog/",false,null),new t("/^Ice.TCP.RcvSize/",false,null),new t("/^Ice.TCP.SndSize/",false,null),new t("/^Ice.UseApplicationClassLoader/",false,null),new t("/^Ice.UseSyslog/",false,null),new t("/^Ice.Warn.AMICallback/",false,null),new t("/^Ice.Warn.Connections/",false,null),new t("/^Ice.Warn.Datagrams/",false,null),new t("/^Ice.Warn.Dispatch/",false,null),new t("/^Ice.Warn.Endpoints/",false,null),new t("/^Ice.Warn.UnknownProperties/",false,null),new t("/^Ice.Warn.UnusedProperties/",false,null),new t("/^Ice.CacheMessageBuffers/",false,null),new t("/^Ice.ThreadInterruptSafe/",false,null),new t("/^Ice.Voip/",false,null)];e.validProps=[e.IceProps];e.clPropNames=["Ice"];Ice.PropertyNames=e})();(function(){var e=Ice.UnexpectedObjectException;var t=Ice.MemoryLimitException;Ice.ExUtil={throwUOE:function t(n,i){var r=i.ice_id();throw new e("expected element of type `"+n+"' but received '"+r,r,n)},throwMemoryLimitException:function e(n,i){throw new t("requested "+n+" bytes, maximum allowed is "+i+" bytes (see Ice.MessageSizeMax)")}}})();(function(){})();(function(){var e=Ice.CommunicatorDestroyedException;var t=function(){function t(e){_classCallCheck(this,t);this._logger=e;this._destroyed=false;this._tokenId=0;this._tokens=new Map}_createClass(t,[{key:"destroy",value:function e(){var t=this;this._tokens.forEach(function(e,n){return t.cancel(n)});this._destroyed=true;this._tokens.clear()}},{key:"schedule",value:function n(i,r){var s=this;if(this._destroyed){throw new e}var a=this._tokenId++;var o=t.setTimeout(function(){return s.handleTimeout(a)},r);this._tokens.set(a,{callback:i,id:o,isInterval:false});return a}},{key:"scheduleRepeated",value:function n(i,r){var s=this;if(this._destroyed){throw new e}var a=this._tokenId++;var o=t.setInterval(function(){return s.handleInterval(a)},r);this._tokens.set(a,{callback:i,id:o,isInterval:true});return a}},{key:"cancel",value:function e(n){if(this._destroyed){return false}var i=this._tokens.get(n);if(i===undefined){return false}this._tokens.delete(n);if(i.isInterval){t.clearInterval(i.id)}else{t.clearTimeout(i.id)}return true}},{key:"handleTimeout",value:function e(t){if(this._destroyed){return}var n=this._tokens.get(t);if(n!==undefined){this._tokens.delete(t);try{n.callback()}catch(e){this._logger.warning("uncaught exception while executing timer:\n"+e)}}}},{key:"handleInterval",value:function e(t){if(this._destroyed){return}var n=this._tokens.get(t);if(n!==undefined){try{n.callback()}catch(e){this._logger.warning("uncaught exception while executing timer:\n"+e)}}}}]);return t}();t.setTimeout=Ice.Timer.setTimeout;t.clearTimeout=Ice.Timer.clearTimeout;t.setInterval=Ice.Timer.setInterval;t.clearInterval=Ice.Timer.clearInterval;t.setImmediate=Ice.Timer.setImmediate;Ice.Timer=t})();(function(){Ice.EndpointSelectionType=t.defineEnum([["Random",0],["Ordered",1]])})();(function(){var e=function(e){_inherits(t,e);function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(e instanceof Ice.LocalException){n._ex=e}else{Ice.Debug.assert(e instanceof t);n._ex=e._ex}return n}_createClass(t,[{key:"inner",get:function e(){return this._ex}}]);return t}(_extendableBuiltin7(Error));Ice.RetryException=e})();(function(){t.defineDictionary(Ice,"Context","ContextHelper","Ice.StringHelper","Ice.StringHelper",false,undefined,undefined);Ice.OperationMode=t.defineEnum([["Normal",0],["Nonmutating",1],["Idempotent",2]]);Ice.Current=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:new Ice.Identity;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"";var s=arguments.length>4&&arguments[4]!==undefined?arguments[4]:"";var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:Ice.OperationMode.Normal;var o=arguments.length>6&&arguments[6]!==undefined?arguments[6]:null;var c=arguments.length>7&&arguments[7]!==undefined?arguments[7]:0;var u=arguments.length>8&&arguments[8]!==undefined?arguments[8]:new Ice.EncodingVersion;_classCallCheck(this,e);this.adapter=t;this.con=n;this.id=i;this.facet=r;this.operation=s;this.mode=a;this.ctx=o;this.requestId=c;this.encoding=u}return e}();t.defineStruct(Ice.Current,false,true)})();(function(){var e=Ice.Logger;var t=null;Ice.getProcessLogger=function(){if(t===null){t=new e("","")}return t};Ice.setProcessLogger=function(e){t=e}})();(function(){var e=Ice.Debug;var t=Ice.Protocol;var n=Ice.StringUtil;var i=Ice.OperationMode;var r=Ice.Identity;var s=new Map;function a(e,t){var i=Ice.ToStringMode.Unicode;if(t.instance!==null){i=t.instance.toStringMode()}var s=new r;s._read(t);e.push("\nidentity = "+Ice.identityToString(s,i));var a=Ice.StringSeqHelper.read(t);e.push("\nfacet = ");if(a.length>0){e.push(n.escapeString(a[0],"",i))}var o=t.readString();e.push("\noperation = "+o)}function o(e,t){var n=t.readInt();e.push("\nrequest id = "+n);if(n===0){e.push(" (oneway)")}l(e,t)}function c(e,t){var n=t.readInt();e.push("\nnumber of requests = "+n);for(var i=0;i<n;++i){e.push("\nrequest #"+i+":");l(e,t)}}function u(n,i){var r=i.readInt();n.push("\nrequest id = "+r);var s=i.readByte();n.push("\nreply status = "+s+" ");switch(s){case t.replyOK:{n.push("(ok)");break}case t.replyUserException:{n.push("(user exception)");break}case t.replyObjectNotExist:case t.replyFacetNotExist:case t.replyOperationNotExist:{switch(s){case t.replyObjectNotExist:{n.push("(object not exist)");break}case t.replyFacetNotExist:{n.push("(facet not exist)");break}case t.replyOperationNotExist:{n.push("(operation not exist)");break}default:{e.assert(false);break}}a(n,i);break}case t.replyUnknownException:case t.replyUnknownLocalException:case t.replyUnknownUserException:{switch(s){case t.replyUnknownException:{n.push("(unknown exception)");break}case t.replyUnknownLocalException:{n.push("(unknown local exception)");break}case t.replyUnknownUserException:{n.push("(unknown user exception)");break}default:{e.assert(false);break}}var o=i.readString();n.push("\nunknown = "+o);break}default:{n.push("(unknown)");break}}if(s===t.replyOK||s===t.replyUserException){var c=i.skipEncapsulation();if(!c.equals(Ice.Encoding_1_0)){n.push("\nencoding = ");n.push(Ice.encodingVersionToString(c))}}}function l(e,t){a(e,t);var n=t.readByte();e.push("\nmode = "+n+" ");switch(i.valueOf(n)){case i.Normal:{e.push("(normal)");break}case i.Nonmutating:{e.push("(nonmutating)");break}case i.Idempotent:{e.push("(idempotent)");break}default:{e.push("(unknown)");break}}var r=t.readSize();e.push("\ncontext = ");while(r-- >0){var s=t.readString();var o=t.readString();e.push(s+"/"+o);if(r>0){e.push(", ")}}var c=t.skipEncapsulation();if(!c.equals(Ice.Encoding_1_0)){e.push("\nencoding = ");e.push(Ice.encodingVersionToString(c))}}function h(e,t){t.readByte();t.readByte();t.readByte();t.readByte();t.readByte();t.readByte();t.readByte();t.readByte();var n=t.readByte();e.push("\nmessage type = "+n+" ("+_(n)+")");var i=t.readByte();e.push("\ncompression status = "+i+" ");switch(i){case 0:{e.push("(not compressed; do not compress response, if any)");break}case 1:{e.push("(not compressed; compress response, if any)");break}case 2:{e.push("(compressed; compress response, if any)");break}default:{e.push("(unknown)");break}}var r=t.readInt();e.push("\nmessage size = "+r);return n}function f(e,n){var i=h(e,n);switch(i){case t.closeConnectionMsg:case t.validateConnectionMsg:{break}case t.requestMsg:{o(e,n);break}case t.requestBatchMsg:{c(e,n);break}case t.replyMsg:{u(e,n);break}default:{break}}return i}function _(e){switch(e){case t.requestMsg:return"request";case t.requestBatchMsg:return"batch request";case t.replyMsg:return"reply";case t.closeConnectionMsg:return"close connection";case t.validateConnectionMsg:return"validate connection";default:return"unknown"}}var d=function(){function e(){_classCallCheck(this,e)}_createClass(e,null,[{key:"traceSlicing",value:function e(t,n,i,r){if(!s.has(n)){r.trace(i,"unknown "+t+" type `"+n+"'");s.set(n,1)}}},{key:"traceSend",value:function e(t,n,i){if(i.protocol>=1){var r=t.pos;var s=new Ice.InputStream(t.instance,t.getEncoding(),t.buffer);s.pos=0;var a=[];var o=f(a,s);n.trace(i.protocolCat,"sending "+_(o)+" "+a.join(""));t.pos=r}}},{key:"traceRecv",value:function e(t,n,i){if(i.protocol>=1){var r=t.pos;t.pos=0;var s=[];var a=f(s,t);n.trace(i.protocolCat,"received "+_(a)+" "+s.join(""));t.pos=r}}},{key:"traceOut",value:function e(t,n,i,r){if(r.protocol>=1){var s=n.pos;var a=new Ice.InputStream(n.instance,n.getEncoding(),n.buffer);a.pos=0;var o=[];o.push(t);f(o,a);i.trace(r.protocolCat,o.join(""));n.pos=s}}},{key:"traceIn",value:function e(t,n,i,r){if(r.protocol>=1){var s=n.pos;n.pos=0;var a=[];a.push(t);f(a,n);i.trace(r.protocolCat,a.join(""));n.pos=s}}},{key:"dumpStream",value:function t(n){var i=n.pos;n.pos=0;var r=n.readBlob(n.size());e.dumpOctets(r);n.pos=i}},{key:"dumpOctets",value:function e(t){var n=8;var i=[];for(var r=0;r<t.length;r+=n){for(var s=r;s-r<n;s++){if(s<t.length){var a=t[s];if(a<0){a+=256}var o=void 0;if(a<10){o="  "+a}else if(a<100){o=" "+a}else{o=""+a}i.push(o+" ")}else{i.push("    ")}}i.push('"');for(var c=r;c<t.length&&c-r<n;c++){if(t[c]>=32&&t[c]<127){i.push(String.fromCharCode(t[c]))}else{i.push(".")}}i.push('"\n')}console.log(i.join(""))}}]);return e}();Ice.TraceUtil=d})();(function(){var e=Ice.StringUtil;var t=Ice.PropertyNames;var n=Ice.Debug;var i=Ice.getProcessLogger;var r=Ice.InitializationException;var s=0;var a=1;var o=function(){function o(e,t){_classCallCheck(this,o);this._properties=new Map;if(t!==undefined&&t!==null){var n=true;var i=false;var r=undefined;try{for(var s=t._properties[Symbol.iterator](),a;!(n=(a=s.next()).done);n=true){var c=_slicedToArray(a.value,2),u=c[0],l=c[1];this._properties.set(u,{value:l.value,used:false})}}catch(e){i=true;r=e}finally{try{if(!n&&s.return){s.return()}}finally{if(i){throw r}}}}if(e!==undefined&&e!==null){var h=this.parseIceCommandLineOptions(e);e.length=0;for(var f=0;f<h.length;++f){e.push(h[f])}}}_createClass(o,[{key:"getProperty",value:function e(t){return this.getPropertyWithDefault(t,"")}},{key:"getPropertyWithDefault",value:function e(t,n){var i=this._properties.get(t);if(i!==undefined){i.used=true;return i.value}else{return n}}},{key:"getPropertyAsInt",value:function e(t){return this.getPropertyAsIntWithDefault(t,0)}},{key:"getPropertyAsIntWithDefault",value:function e(t,n){var i=this._properties.get(t);if(i!==undefined){i.used=true;return parseInt(i.value)}else{return n}}},{key:"getPropertyAsList",value:function e(t){return this.getPropertyAsListWithDefault(t,0)}},{key:"getPropertyAsListWithDefault",value:function t(n,r){if(r===undefined||r===null){r=[]}var s=this._properties.get(n);if(s!==undefined){s.used=true;var a=e.splitString(s.value,", \t\r\n");if(a===null){i().warning("mismatched quotes in property "+n+"'s value, returning default value");return r}if(a.length===0){a=r}return a}else{return r}}},{key:"getPropertiesForPrefix",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var n=new Map;this._properties.forEach(function(e,i){if(i.indexOf(t)===0){e.used=true;n.set(i,e.value)}});return n}},{key:"setProperty",value:function e(){var s=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";if(s!==null){s=s.trim()}var o=i();if(s===null||s.length===0){throw new r("Attempt to set property with empty key")}var c=s.indexOf(".");if(c!==-1){var u=s.substr(0,c);for(var l=0;l<t.validProps.length;++l){var h=t.validProps[l][0].pattern;c=h.indexOf(".");n.assert(c!=-1);if(h.substring(0,c-1)!=u){continue}var f=false;var _=false;var d=void 0;for(var p=0;p<t.validProps[l][p].length&&!f;++p){h=t.validProps[l][p].pattern();var v=new RegExp(h);f=v.test(s);if(f&&t.validProps[l][p].deprecated){o.warning("deprecated property: "+s);if(t.validProps[l][p].deprecatedBy!==null){s=t.validProps[l][p].deprecatedBy}}if(f){break}else{v=new RegExp(h.toUpperCase());f=v.test(s.toUpperCase());if(f){_=true;d=h.substr(2);d=d.substr(0,d.length-1);d=d.replace(/\\/g,"");break}}}if(!f){o.warning("unknown property: "+s)}else if(_){o.warning("unknown property: `"+s+"'; did you mean `"+d+"'")}}}if(a!==null&&a.length>0){var y=this._properties.get(s);if(y!==undefined){y.value=a}else{this._properties.set(s,{value:a,used:false})}}else{this._properties.delete(s)}}},{key:"getCommandLineOptions",value:function e(){var t=[];this._properties.forEach(function(e,n){t.push("--"+n+"="+e.value)});return t}},{key:"parseCommandLineOptions",value:function e(t,n){var i=this;if(t.length>0&&t.charAt(t.length-1)!="."){t+="."}t="--"+t;var r=[];n.forEach(function(e){if(e.indexOf(t)===0){if(e.indexOf("=")===-1){e+="=1"}i.parseLine(e.substring(2))}else{r.push(e)}});return r}},{key:"parseIceCommandLineOptions",value:function e(n){var i=n.slice();for(var r=0;r<t.clPropNames.length;++r){i=this.parseCommandLineOptions(t.clPropNames[r],i)}return i}},{key:"parse",value:function e(t){var n=this;t.match(/[^\r\n]+/g).forEach(function(e){return n.parseLine(e)})}},{key:"parseLine",value:function e(t){var n="";var r="";var o=s;var c="";var u="";var l=false;for(var h=0;h<t.length;++h){var f=t.charAt(h);switch(o){case s:{switch(f){case"\\":if(h<t.length-1){f=t.charAt(++h);switch(f){case"\\":case"#":case"=":n+=c;c="";n+=f;break;case" ":if(n.length!==0){c+=f}break;default:n+=c;c="";n+="\\";n+=f;break}}else{n+=c;n+=f}break;case" ":case"\t":case"\r":case"\n":if(n.length!==0){c+=f}break;case"=":c="";o=a;break;case"#":l=true;break;default:n+=c;c="";n+=f;break}break}case a:{switch(f){case"\\":if(h<t.length-1){f=t.charAt(++h);switch(f){case"\\":case"#":case"=":r+=r.length===0?u:c;c="";u="";r+=f;break;case" ":c+=f;u+=f;break;default:r+=r.length===0?u:c;c="";u="";r+="\\";r+=f;break}}else{r+=r.length===0?u:c;r+=f}break;case" ":case"\t":case"\r":case"\n":if(r.length!==0){c+=f}break;case"#":l=true;break;default:r+=r.length===0?u:c;c="";u="";r+=f;break}break}}if(l){break}}r+=u;if(o===s&&n.length!==0||o==a&&n.length===0){i().warning('invalid config file entry: "'+t+'"');return}else if(n.length===0){return}this.setProperty(n,r)}},{key:"clone",value:function e(){return new o(null,this)}},{key:"getUnusedProperties",value:function e(){var t=[];this._properties.forEach(function(e,n){if(!e.used){t.push(n)}});return t}}],[{key:"createProperties",value:function e(t,n){return new o(t,n)}}]);return o}();Ice.Properties=o})();(function(){var e=Ice.Debug;var t=Ice.StringUtil;var n=Ice.HashMap;var i=function(){function i(e,t){_classCallCheck(this,i);this._instance=e;this._adapterName=t;this._servantMapMap=new n(n.compareEquals);this._defaultServantMap=new Map;this._locatorMap=new Map}_createClass(i,[{key:"addServant",value:function n(i,r,s){e.assert(this._instance!==null);if(s===null){s=""}var a=this._servantMapMap.get(r);if(a===undefined){a=new Map;this._servantMapMap.set(r,a)}else{if(a.has(s)){var o=new Ice.AlreadyRegisteredException;o.id=Ice.identityToString(r,this._instance.toStringMode());o.kindOfObject="servant";if(s.length>0){o.id+=" -f "+t.escapeString(s,"",this._instance.toStringMode())}throw o}}a.set(s,i)}},{key:"addDefaultServant",value:function t(n,i){e.assert(this._instance!==null);if(this._defaultServantMap.has(i)){var r=new Ice.AlreadyRegisteredException;r.kindOfObject="default servant";r.id=i;throw r}this._defaultServantMap.set(i,n)}},{key:"removeServant",value:function n(i,r){e.assert(this._instance!==null);if(r===null){r=""}var s=this._servantMapMap.get(i);if(s===undefined||!s.has(r)){var a=new Ice.NotRegisteredException;a.id=Ice.identityToString(i,this._instance.toStringMode());a.kindOfObject="servant";if(r.length>0){a.id+=" -f "+t.escapeString(r,"",this._instance.toStringMode())}throw a}var o=s.get(r);s.delete(r);if(s.size===0){this._servantMapMap.delete(i)}return o}},{key:"removeDefaultServant",value:function t(n){e.assert(this._instance!==null);var i=this._defaultServantMap.get(n);if(i===undefined){var r=new Ice.NotRegisteredException;r.kindOfObject="default servant";r.id=n;throw r}this._defaultServantMap.delete(n);return i}},{key:"removeAllFacets",value:function t(n){e.assert(this._instance!==null);var i=this._servantMapMap.get(n);if(i===undefined){var r=new Ice.NotRegisteredException;r.id=Ice.identityToString(n,this._instance.toStringMode());r.kindOfObject="servant";throw r}this._servantMapMap.delete(n);return i}},{key:"findServant",value:function e(t,n){if(n===null){n=""}var i=this._servantMapMap.get(t);var r=null;if(i===undefined){r=this._defaultServantMap.get(t.category);if(r===undefined){r=this._defaultServantMap.get("")}}else{r=i.get(n)}return r===undefined?null:r}},{key:"findDefaultServant",value:function t(n){e.assert(this._instance!==null);var i=this._defaultServantMap.get(n);return i===undefined?null:i}},{key:"findAllFacets",value:function t(n){e.assert(this._instance!==null);var i=this._servantMapMap.get(n);if(i!==undefined){return new Map(i)}return new Map}},{key:"hasServant",value:function t(n){var i=this._servantMapMap.get(n);if(i===undefined){return false}else{e.assert(i.size>0);return true}}},{key:"addServantLocator",value:function n(i,r){e.assert(this._instance!==null);if(this._locatorMap.has(r)){var s=new Ice.AlreadyRegisteredException;s.id=t.escapeString(r,"",this._instance.toStringMode());s.kindOfObject="servant locator";throw s}this._locatorMap.set(r,i)}},{key:"removeServantLocator",value:function n(i){e.assert(this._instance!==null);var r=this._locatorMap.get(i);if(r===undefined){var s=new Ice.NotRegisteredException;s.id=t.escapeString(i,"",this._instance.toStringMode());s.kindOfObject="servant locator";throw s}this._locatorMap.delete(i);return r}},{key:"findServantLocator",value:function e(t){var n=this._locatorMap.get(t);return n===undefined?null:n}},{key:"destroy",value:function t(){e.assert(this._instance!==null);var n=this._instance.initializationData().logger;this._servantMapMap.clear();this._defaultServantMap.clear();var i=new Map(this._locatorMap);this._locatorMap.clear();this._instance=null;var r=true;var s=false;var a=undefined;try{for(var o=i[Symbol.iterator](),c;!(r=(c=o.next()).done);r=true){var u=_slicedToArray(c.value,2),l=u[0],h=u[1];try{h.deactivate(l)}catch(e){n.error("exception during locator deactivation:\nobject adapter: `"+this._adapterName+"'\nlocator category: `"+l+"'\n"+e.toString())}}}catch(e){s=true;a=e}finally{try{if(!r&&o.return){o.return()}}finally{if(s){throw a}}}}}]);return i}();Ice.ServantManager=i})();(function(){var e=Ice.Timer;var t=function(t){_inherits(n,t);function n(e){_classCallCheck(this,n);var t=void 0,i=void 0;var r=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,function(n,r){t=n;i=r;if(e!==undefined){e(n,r)}}));r.resolve=t;r.reject=i;return r}_createClass(n,[{key:"finally",value:function e(t){return this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})})}},{key:"delay",value:function t(i){return this.then(function(t){return new n(function(n,r){return e.setTimeout(function(){return n(t)},i)})},function(t){return new n(function(n,r){return e.setTimeout(function(){return r(t)},i)})})}}],[{key:"delay",value:function t(i,r){return new n(function(t){return e.setTimeout(function(){return t(r)},i)})}},{key:"try",value:function e(t){return n.resolve().then(t)}},{key:Symbol.species,get:function e(){return n}}]);return n}(_extendableBuiltin9(Promise));Ice.Promise=t})();(function(){Ice.SocketOperation={None:0,Read:1,Write:2,Connect:2}})();(function(){var e=function(){function e(t,n,i,r){_classCallCheck(this,e);this._instance=t;this._traceLevel=t.traceLevels().network;this._traceCategory=t.traceLevels().networkCat;this._logger=t.initializationData().logger;this._properties=t.initializationData().properties;this._type=n;this._protocol=i;this._secure=r}_createClass(e,[{key:"traceLevel",value:function e(){return this._traceLevel}},{key:"traceCategory",value:function e(){return this._traceCategory}},{key:"logger",value:function e(){return this._logger}},{key:"protocol",value:function e(){return this._protocol}},{key:"type",value:function e(){return this._type}},{key:"secure",value:function e(){return this._secure}},{key:"properties",value:function e(){return this._properties}},{key:"defaultHost",value:function e(){return this._instance.defaultsAndOverrides().defaultHost}},{key:"defaultSourceAddress",value:function e(){return this._instance.defaultsAndOverrides().defaultSourceAddress}},{key:"defaultEncoding",value:function e(){return this._instance.defaultsAndOverrides().defaultEncoding}},{key:"defaultTimeout",value:function e(){return this._instance.defaultsAndOverrides().defaultTimeout}},{key:"messageSizeMax",value:function e(){return this._instance.messageSizeMax()}}]);return e}();Ice.ProtocolInstance=e})();(function(){var e=Ice._ModuleRegistry;var t=Ice.Debug;var n=Ice.ExUtil;var i=Ice.FormatType;var r=Ice.OptionalFormat;var s=Ice.Protocol;var a=Ice.TraceUtil;var o=Ice.ArrayUtil;var c=Ice.SlicedData;var u={NoSlice:0,ValueSlice:1,ExceptionSlice:2};Number.isNaN=Number.isNaN||function(e){return typeof e==="number"&&isNaN(e)};var l=function e(t,n){_classCallCheck(this,e);this.index=t;this.cb=n};var h=function(){function e(t,n,i,r){_classCallCheck(this,e);this._stream=t;this._encaps=n;this._sliceValues=i;this._valueFactoryManager=r;this._patchMap=null;this._unmarshaledMap=new Map;this._typeIdMap=null;this._typeIdIndex=0;this._valueList=null}_createClass(e,[{key:"readOptional",value:function e(){return false}},{key:"readPendingValues",value:function e(){}},{key:"readTypeId",value:function e(t){if(this._typeIdMap===null){this._typeIdMap=new Map}var n=void 0;if(t){n=this._typeIdMap.get(this._stream.readSize());if(n===undefined){throw new Ice.UnmarshalOutOfBoundsException}}else{n=this._stream.readString();this._typeIdMap.set(++this._typeIdIndex,n)}return n}},{key:"newInstance",value:function e(t){var n=this._valueFactoryManager.find(t);var i=null;if(n!==undefined){i=n(t)}if(i===null||i===undefined){n=this._valueFactoryManager.find("");if(n!==undefined){i=n(t)}}if(i===null||i===undefined){i=this._stream.createInstance(t)}return i}},{key:"addPatchEntry",value:function e(n,i){t.assert(n>0);var r=this._unmarshaledMap.get(n);if(r!==undefined&&r!==null){i.call(null,r);return}if(this._patchMap===null){this._patchMap=new Map}var s=this._patchMap.get(n);if(s===undefined){s=[];this._patchMap.set(n,s)}s.push(i)}},{key:"unmarshal",value:function e(n,i){this._unmarshaledMap.set(n,i);i._iceRead(this._stream);if(this._patchMap!==null){var r=this._patchMap.get(n);if(r!==undefined){t.assert(r.length>0);for(var s=0;s<r.length;++s){r[s](i)}this._patchMap.delete(n)}}if((this._patchMap===null||this._patchMap.size===0)&&this._valueList===null){try{i.ice_postUnmarshal()}catch(e){this._stream.instance.initializationData().logger.warning("exception raised by ice_postUnmarshal:\n"+e.toString())}}else{if(this._valueList===null){this._valueList=[]}this._valueList.push(i);if(this._patchMap===null||this._patchMap.size===0){for(var a=0;a<this._valueList.length;a++){try{this._valueList[a].ice_postUnmarshal()}catch(e){this._stream.instance.initializationData().logger.warning("exception raised by ice_postUnmarshal:\n"+e.toString())}}this._valueList=[]}}}}]);return e}();var f=function(e){_inherits(n,e);function n(e,t,i,r){_classCallCheck(this,n);var s=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t,i,r));s._sliceType=u.NoSlice;return s}_createClass(n,[{key:"readValue",value:function e(n){t.assert(n!==null);var i=this._stream.readInt();if(i>0){throw new Ice.MarshalException("invalid object id")}i=-i;if(i===0){n.call(null,null)}else{this.addPatchEntry(i,n)}}},{key:"throwException",value:function e(){t.assert(this._sliceType===u.NoSlice);var n=this._stream.readBool();this._sliceType=u.ExceptionSlice;this._skipFirstSlice=false;this.startSlice();var i=this._typeId;while(true){var r=this._stream.createUserException(this._typeId);if(r!==null){r._read(this._stream);if(n){this.readPendingValues()}throw r}this.skipSlice();try{this.startSlice()}catch(e){if(e instanceof Ice.UnmarshalOutOfBoundsException){e.reason="unknown exception type `"+i+"'"}throw e}}}},{key:"startInstance",value:function e(n){t.assert(this._sliceType===n);this._skipFirstSlice=true}},{key:"endInstance",value:function e(){if(this._sliceType===u.ValueSlice){this.startSlice();var t=this._stream.readSize();if(t!==0){throw new Ice.MarshalException("invalid Object slice")}this.endSlice()}this._sliceType=u.NoSlice;return null}},{key:"startSlice",value:function e(){if(this._skipFirstSlice){this._skipFirstSlice=false;return this._typeId}if(this._sliceType===u.ValueSlice){var t=this._stream.readBool();this._typeId=this.readTypeId(t)}else{this._typeId=this._stream.readString()}this._sliceSize=this._stream.readInt();if(this._sliceSize<4){throw new Ice.UnmarshalOutOfBoundsException}return this._typeId}},{key:"endSlice",value:function e(){}},{key:"skipSlice",value:function e(){this._stream.traceSkipSlice(this._typeId,this._sliceType);t.assert(this._sliceSize>=4);this._stream.skip(this._sliceSize-4)}},{key:"readPendingValues",value:function e(){var t=void 0;do{t=this._stream.readSize();for(var n=t;n>0;--n){this.readInstance()}}while(t>0);if(this._patchMap!==null&&this._patchMap.size!==0){throw new Ice.MarshalException("index for class received, but no instance")}}},{key:"readInstance",value:function e(){var t=this._stream.readInt();var n=null;if(t<=0){throw new Ice.MarshalException("invalid object id")}this._sliceType=u.ValueSlice;this._skipFirstSlice=false;this.startSlice();var i=this._typeId;while(true){if(this._typeId==Ice.Value.ice_staticId()){throw new Ice.NoValueFactoryException("",i)}n=this.newInstance(this._typeId);if(n){break}if(!this._sliceValues){throw new Ice.NoValueFactoryException("no value factory found and slicing is disabled",this._typeId)}this.skipSlice();this.startSlice()}this.unmarshal(t,n)}}]);return n}(h);var _=function(e){_inherits(n,e);function n(e,t,i,r,s){_classCallCheck(this,n);var a=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t,i,r));a._compactIdResolver=s;a._current=null;a._valueIdIndex=1;return a}_createClass(n,[{key:"readValue",value:function e(t){var n=this._stream.readSize();if(n<0){throw new Ice.MarshalException("invalid object id")}else if(n===0){if(t!==null){t.call(null,null)}}else if(this._current!==null&&(this._current.sliceFlags&s.FLAG_HAS_INDIRECTION_TABLE)!==0){if(t!==null){if(this._current.indirectPatchList===null){this._current.indirectPatchList=[]}this._current.indirectPatchList.push(new l(n-1,t))}}else{this.readInstance(n,t)}}},{key:"throwException",value:function e(){t.assert(this._current===null);this.push(u.ExceptionSlice);this.startSlice();var n=this._current.typeId;while(true){var i=this._stream.createUserException(this._current.typeId);if(i!==null){i._read(this._stream);throw i}this.skipSlice();if((this._current.sliceFlags&s.FLAG_IS_LAST_SLICE)!==0){if(n.indexOf("::")===0){throw new Ice.UnknownUserException(n.substr(2))}throw new Ice.UnknownUserException(n)}this.startSlice()}}},{key:"startInstance",value:function e(n){t.assert(n!==undefined);t.assert(this._current.sliceType!==null&&this._current.sliceType===n);this._current.skipFirstSlice=true}},{key:"endInstance",value:function e(t){var n=null;if(t){n=this.readSlicedData()}if(this._current.slices!==null){this._current.slices.length=0;this._current.indirectionTables.length=0}this._current=this._current.previous;return n}},{key:"startSlice",value:function e(){if(this._current.skipFirstSlice){this._current.skipFirstSlice=false;return this._current.typeId}this._current.sliceFlags=this._stream.readByte();if(this._current.sliceType===u.ValueSlice){if((this._current.sliceFlags&s.FLAG_HAS_TYPE_ID_COMPACT)===s.FLAG_HAS_TYPE_ID_COMPACT){this._current.typeId="";this._current.compactId=this._stream.readSize()}else if((this._current.sliceFlags&(s.FLAG_HAS_TYPE_ID_INDEX|s.FLAG_HAS_TYPE_ID_STRING))!==0){this._current.typeId=this.readTypeId((this._current.sliceFlags&s.FLAG_HAS_TYPE_ID_INDEX)!==0);this._current.compactId=-1}else{this._current.typeId="";this._current.compactId=-1}}else{this._current.typeId=this._stream.readString();this._current.compactId=-1}if((this._current.sliceFlags&s.FLAG_HAS_SLICE_SIZE)!==0){this._current.sliceSize=this._stream.readInt();if(this._current.sliceSize<4){throw new Ice.UnmarshalOutOfBoundsException}}else{this._current.sliceSize=0}return this._current.typeId}},{key:"endSlice",value:function e(){var n=this;if((this._current.sliceFlags&s.FLAG_HAS_OPTIONAL_MEMBERS)!==0){this._stream.skipOptionals()}if((this._current.sliceFlags&s.FLAG_HAS_INDIRECTION_TABLE)!==0){var i=[];var r=this._stream.readAndCheckSeqSize(1);for(var a=0;a<r;++a){i[a]=this.readInstance(this._stream.readSize(),null)}if(i.length===0){throw new Ice.MarshalException("empty indirection table")}if((this._current.indirectPatchList===null||this._current.indirectPatchList.length===0)&&(this._current.sliceFlags&s.FLAG_HAS_OPTIONAL_MEMBERS)===0){throw new Ice.MarshalException("no references to indirection table")}if(this._current.indirectPatchList!==null){this._current.indirectPatchList.forEach(function(e){t.assert(e.index>=0);if(e.index>=i.length){throw new Ice.MarshalException("indirection out of range")}n.addPatchEntry(i[e.index],e.cb)});this._current.indirectPatchList.length=0}}}},{key:"skipSlice",value:function e(){this._stream.traceSkipSlice(this._current.typeId,this._current.sliceType);var n=this._stream.pos;if((this._current.sliceFlags&s.FLAG_HAS_SLICE_SIZE)!==0){t.assert(this._current.sliceSize>=4);this._stream.skip(this._current.sliceSize-4)}else{if(this._current.sliceType===u.ValueSlice){throw new Ice.NoValueFactoryException("no value factory found and compact format prevents slicing "+"(the sender should use the sliced format instead)",this._current.typeId)}else{if(this._current.typeId.indexOf("::")===0){throw new Ice.UnknownUserException(this._current.typeId.substring(2))}else{throw new Ice.UnknownUserException(this._current.typeId)}}}var i=new Ice.SliceInfo;i.typeId=this._current.typeId;i.compactId=this._current.compactId;i.hasOptionalMembers=(this._current.sliceFlags&s.FLAG_HAS_OPTIONAL_MEMBERS)!==0;i.isLastSlice=(this._current.sliceFlags&s.FLAG_IS_LAST_SLICE)!==0;var r=this._stream._buf;var a=r.position;var o=a;if(i.hasOptionalMembers){--o}r.position=n;i.bytes=r.getArray(o-n);r.position=a;if(this._current.slices===null){this._current.slices=[];this._current.indirectionTables=[]}if((this._current.sliceFlags&s.FLAG_HAS_INDIRECTION_TABLE)!==0){var c=this._stream.readAndCheckSeqSize(1);var l=[];for(var h=0;h<c;++h){l[h]=this.readInstance(this._stream.readSize(),null)}this._current.indirectionTables.push(l)}else{this._current.indirectionTables.push(null)}this._current.slices.push(i)}},{key:"readOptional",value:function e(t,n){if(this._current===null){return this._stream.readOptImpl(t,n)}else if((this._current.sliceFlags&s.FLAG_HAS_OPTIONAL_MEMBERS)!==0){return this._stream.readOptImpl(t,n)}return false}},{key:"readInstance",value:function e(n,i){t.assert(n>0);var r=null;if(n>1){if(i!==null){this.addPatchEntry(n,i)}return n}this.push(u.ValueSlice);n=++this._valueIdIndex;this.startSlice();var a=this._current.typeId;while(true){if(this._current.compactId>=0){this._current.typeId="";if(this._compactIdResolver!==null){try{this._current.typeId=this._compactIdResolver.call(null,this._current.compactId)}catch(e){if(!(e instanceof Ice.LocalException)){throw new Ice.MarshalException("exception in CompactIdResolver for ID "+this._current.compactId,e)}throw e}}if(this._current.typeId.length===0){this._current.typeId=this._stream.resolveCompactId(this._current.compactId)}}if(this._current.typeId.length>0){r=this.newInstance(this._current.typeId)}if(r!==null&&r!==undefined){break}if(!this._sliceValues){throw new Ice.NoValueFactoryException("no value factory found and slicing is disabled",this._current.typeId)}this.skipSlice();if((this._current.sliceFlags&s.FLAG_IS_LAST_SLICE)!==0){r=new Ice.UnknownSlicedValue(a);break}this.startSlice()}this.unmarshal(n,r);if(this._current===null&&this._patchMap!==null&&this._patchMap.size!==0){throw new Ice.MarshalException("index for class received, but no instance")}if(i!==null){i.call(null,r)}return n}},{key:"readSlicedData",value:function e(){if(this._current.slices===null){return null}t.assert(this._current.slices.length===this._current.indirectionTables.length);for(var n=0;n<this._current.slices.length;++n){var i=this._current.indirectionTables[n];var r=this._current.slices[n];r.instances=[];if(i){for(var s=0;s<i.length;++s){this.addPatchEntry(i[s],d(r.instances,s,Ice.Value))}}}return new c(o.clone(this._current.slices))}},{key:"push",value:function e(t){if(this._current===null){this._current=new n.InstanceData(null)}else{this._current=!this._current.next?new n.InstanceData(this._current):this._current.next}this._current.sliceType=t;this._current.skipFirstSlice=false}}]);return n}(h);_.InstanceData=function(){function e(t){_classCallCheck(this,e);if(t!==null){t.next=this}this.previous=t;this.next=null;this.sliceType=null;this.skipFirstSlice=false;this.slices=null;this.indirectionTables=null;this.sliceFlags=0;this.sliceSize=0;this.typeId=null;this.compactId=0;this.indirectPatchList=null}return e}();var d=function e(t,i,r){return function(e){if(e!==null&&!(e instanceof r)){n.throwUOE(r.ice_staticId(),e)}t[i]=e}};var p=function(){function e(){_classCallCheck(this,e);this.start=0;this.sz=0;this.encoding=null;this.encoding_1_0=false;this.decoder=null;this.next=null}_createClass(e,[{key:"reset",value:function e(){this.decoder=null}},{key:"setEncoding",value:function e(t){this.encoding=t;this.encoding_1_0=t.equals(Ice.Encoding_1_0)}}]);return e}();var v=function(){function i(e,t,n){_classCallCheck(this,i);var r={instance:null,encoding:null,bytes:null,buffer:null};this._checkArgs([e,t,n],r);this._initialize(r)}_createClass(i,[{key:"_checkArgs",value:function e(t,n){t.forEach(function(e){if(e!==null&&e!==undefined){if(e.constructor===Ice.Communicator){n.instance=e.instance}else if(e.constructor===Ice.Instance){n.instance=e}else if(e.constructor===Ice.EncodingVersion){n.encoding=e}else if(e.constructor===Ice.Buffer){n.buffer=e}else if(e.constructor===Array){n.bytes=e}else{throw new Ice.InitializationException("unknown argument to InputStream constructor")}}});if(n.buffer!==null&&n.bytes!==null){throw new Ice.InitializationException("invalid argument to InputStream constructor")}}},{key:"_initialize",value:function e(t){this._instance=t.instance;this._encoding=t.encoding;this._encapsStack=null;this._encapsCache=null;this._closure=null;this._sliceValues=true;this._startSeq=-1;this._sizePos=-1;this._compactIdResolver=null;if(this._instance!==null){if(this._encoding===null){this._encoding=this._instance.defaultsAndOverrides().defaultEncoding}this._traceSlicing=this._instance.traceLevels().slicing>0;this._valueFactoryManager=this._instance.initializationData().valueFactoryManager;this._logger=this._instance.initializationData().logger}else{if(this._encoding===null){this._encoding=s.currentEncoding}this._traceSlicing=false;this._valueFactoryManager=null;this._logger=null}if(t.bytes!==null){this._buf=new Ice.Buffer(t.bytes)}else if(t.buffer!==null){this._buf=t.buffer}else{this._buf=new Ice.Buffer}}},{key:"reset",value:function e(){this._buf.reset();this.clear()}},{key:"clear",value:function e(){if(this._encapsStack!==null){t.assert(this._encapsStack.next===null);this._encapsStack.next=this._encapsCache;this._encapsCache=this._encapsStack;this._encapsCache.reset();this._encapsStack=null}this._startSeq=-1;this._sliceValues=true}},{key:"swap",value:function e(n){t.assert(this._instance===n._instance);var i=[this._buf,n._buf];n._buf=i[0];this._buf=i[1];var r=[this._encoding,n._encoding];n._encoding=r[0];this._encoding=r[1];var s=[this._traceSlicing,n._traceSlicing];n._traceSlicing=s[0];this._traceSlicing=s[1];var a=[this._closure,n.closure];n._closure=a[0];this._closure=a[1];var o=[this._sliceValues,n._sliceValues];n._sliceValues=o[0];this._sliceValues=o[1];this.resetEncapsulation();n.resetEncapsulation();var c=[this._startSeq,n._startSeq];n._startSeq=c[0];this._startSeq=c[1];var u=[this._minSeqSize,n._minSeqSize];n._minSeqSize=u[0];this._minSeqSize=u[1];var l=[this._sizePos,n._sizePos];n._sizePos=l[0];this._sizePos=l[1];var h=[this._valueFactoryManager,n._valueFactoryManager];n._valueFactoryManager=h[0];this._valueFactoryManager=h[1];var f=[this._logger,n._logger];n._logger=f[0];this._logger=f[1];var _=[this._compactIdResolver,n._compactIdResolver];n._compactIdResolver=_[0];this._compactIdResolver=_[1]}},{key:"resetEncapsulation",value:function e(){this._encapsStack=null}},{key:"resize",value:function e(t){this._buf.resize(t);this._buf.position=t}},{key:"startValue",value:function e(){t.assert(this._encapsStack!==null&&this._encapsStack.decoder!==null);this._encapsStack.decoder.startInstance(u.ValueSlice)}},{key:"endValue",value:function e(n){t.assert(this._encapsStack!==null&&this._encapsStack.decoder!==null);return this._encapsStack.decoder.endInstance(n)}},{key:"startException",value:function e(){t.assert(this._encapsStack!==null&&this._encapsStack.decoder!==null);this._encapsStack.decoder.startInstance(u.ExceptionSlice)}},{key:"endException",value:function e(n){t.assert(this._encapsStack!==null&&this._encapsStack.decoder!==null);return this._encapsStack.decoder.endInstance(n)}},{key:"startEncapsulation",value:function e(){var t=this._encapsCache;if(t!==null){t.reset();this._encapsCache=this._encapsCache.next}else{t=new p}t.next=this._encapsStack;this._encapsStack=t;this._encapsStack.start=this._buf.position;var n=this.readInt();if(n<6){throw new Ice.UnmarshalOutOfBoundsException}if(n-4>this._buf.remaining){throw new Ice.UnmarshalOutOfBoundsException}this._encapsStack.sz=n;var i=new Ice.EncodingVersion;i._read(this);s.checkSupportedEncoding(i);this._encapsStack.setEncoding(i);return i}},{key:"endEncapsulation",value:function e(){t.assert(this._encapsStack!==null);if(!this._encapsStack.encoding_1_0){this.skipOptionals();if(this._buf.position!==this._encapsStack.start+this._encapsStack.sz){throw new Ice.EncapsulationException}}else if(this._buf.position!==this._encapsStack.start+this._encapsStack.sz){if(this._buf.position+1!==this._encapsStack.start+this._encapsStack.sz){throw new Ice.EncapsulationException}try{this._buf.get()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}}var n=this._encapsStack;this._encapsStack=n.next;n.next=this._encapsCache;this._encapsCache=n;this._encapsCache.reset()}},{key:"skipEmptyEncapsulation",value:function e(){var t=this.readInt();if(t<6){throw new Ice.EncapsulationException}if(t-4>this._buf.remaining){throw new Ice.UnmarshalOutOfBoundsException}var n=new Ice.EncodingVersion;n._read(this);s.checkSupportedEncoding(n);if(n.equals(Ice.Encoding_1_0)){if(t!=6){throw new Ice.EncapsulationException}}else{this._buf.position=this._buf.position+t-6}return n}},{key:"readEncapsulation",value:function e(n){t.assert(n!==undefined);var i=this.readInt();if(i<6){throw new Ice.UnmarshalOutOfBoundsException}if(i-4>this._buf.remaining){throw new Ice.UnmarshalOutOfBoundsException}if(n!==null){n._read(this);this._buf.position=this._buf.position-6}else{this._buf.position=this._buf.position-4}try{return this._buf.getArray(i)}catch(e){throw new Ice.UnmarshalOutOfBoundsException}}},{key:"getEncoding",value:function e(){return this._encapsStack!==null?this._encapsStack.encoding:this._encoding}},{key:"getEncapsulationSize",value:function e(){t.assert(this._encapsStack!==null);return this._encapsStack.sz-6}},{key:"skipEncapsulation",value:function e(){var t=this.readInt();if(t<6){throw new Ice.UnmarshalOutOfBoundsException}var n=new Ice.EncodingVersion;n._read(this);try{this._buf.position=this._buf.position+t-6}catch(e){throw new Ice.UnmarshalOutOfBoundsException}return n}},{key:"startSlice",value:function e(){t.assert(this._encapsStack!==null&&this._encapsStack.decoder!==null);return this._encapsStack.decoder.startSlice()}},{key:"endSlice",value:function e(){t.assert(this._encapsStack!==null&&this._encapsStack.decoder!==null);this._encapsStack.decoder.endSlice()}},{key:"skipSlice",value:function e(){t.assert(this._encapsStack!==null&&this._encapsStack.decoder!==null);this._encapsStack.decoder.skipSlice()}},{key:"readPendingValues",value:function e(){if(this._encapsStack!==null&&this._encapsStack.decoder!==null){this._encapsStack.decoder.readPendingValues()}else if(this._encapsStack!==null&&this._encapsStack.encoding_1_0||this._encapsStack===null&&this._encoding.equals(Ice.Encoding_1_0)){this.skipSize()}}},{key:"readSize",value:function e(){try{var t=this._buf.get();if(t===255){var n=this._buf.getInt();if(n<0){throw new Ice.UnmarshalOutOfBoundsException}return n}return t}catch(e){throw new Ice.UnmarshalOutOfBoundsException}}},{key:"readAndCheckSeqSize",value:function e(t){var n=this.readSize();if(n===0){return n}if(this._startSeq===-1||this._buf.position>this._startSeq+this._minSeqSize){this._startSeq=this._buf.position;this._minSeqSize=n*t}else{this._minSeqSize+=n*t}if(this._startSeq+this._minSeqSize>this._buf.limit){throw new Ice.UnmarshalOutOfBoundsException}return n}},{key:"readBlob",value:function e(t){if(this._buf.remaining<t){throw new Ice.UnmarshalOutOfBoundsException}try{return this._buf.getArray(t)}catch(e){throw new Ice.UnmarshalOutOfBoundsException}}},{key:"readOptional",value:function e(n,i){t.assert(this._encapsStack!==null);if(this._encapsStack.decoder!==null){return this._encapsStack.decoder.readOptional(n,i)}return this.readOptImpl(n,i)}},{key:"readOptionalHelper",value:function e(t,n,i){if(this.readOptional(t,n)){return i.call(this)}else{return undefined}}},{key:"readByte",value:function e(){try{return this._buf.get()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}}},{key:"readByteSeq",value:function e(){return this._buf.getArray(this.readAndCheckSeqSize(1))}},{key:"readBool",value:function e(){try{return this._buf.get()===1}catch(e){throw new Ice.UnmarshalOutOfBoundsException}}},{key:"readShort",value:function e(){try{return this._buf.getShort()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}}},{key:"readInt",value:function e(){try{return this._buf.getInt()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}}},{key:"readLong",value:function e(){try{return this._buf.getLong()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}}},{key:"readFloat",value:function e(){try{return this._buf.getFloat()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}}},{key:"readDouble",value:function e(){try{return this._buf.getDouble()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}}},{key:"readString",value:function e(){var t=this.readSize();if(t===0){return""}if(this._buf.remaining<t){throw new Ice.UnmarshalOutOfBoundsException}try{return this._buf.getString(t)}catch(e){throw new Ice.UnmarshalOutOfBoundsException}}},{key:"readProxy",value:function e(t){return this._instance.proxyFactory().streamToProxy(this,t)}},{key:"readOptionalProxy",value:function e(t,n){if(this.readOptional(t,r.FSize)){this.skip(4);return this.readProxy(n)}else{return undefined}}},{key:"readEnum",value:function e(t){var n=void 0;if(this.getEncoding().equals(Ice.Encoding_1_0)){if(t.maxValue<127){n=this.readByte()}else if(t.maxValue<32767){n=this.readShort()}else{n=this.readInt()}}else{n=this.readSize()}var i=t.valueOf(n);if(i===undefined){throw new Ice.MarshalException("enumerator value "+n+" is out of range")}return i}},{key:"readOptionalEnum",value:function e(t,n){if(this.readOptional(t,r.Size)){return this.readEnum(n)}else{return undefined}}},{key:"readValue",value:function e(t,i){this.initEncaps();this._encapsStack.decoder.readValue.call(this._encapsStack.decoder,t===null?null:function(e){if(e!==null&&!(e instanceof i)){n.throwUOE(i.ice_staticId(),e)}t(e)})}},{key:"readOptionalValue",value:function e(t,n,i){if(this.readOptional(t,r.Class)){this.readValue(n,i)}else{n(undefined)}}},{key:"throwException",value:function e(){this.initEncaps();this._encapsStack.decoder.throwException()}},{key:"readOptImpl",value:function e(t,n){if(this.isEncoding_1_0()){return false}while(true){if(this._buf.position>=this._encapsStack.start+this._encapsStack.sz){return false}var i=this.readByte();if(i===s.OPTIONAL_END_MARKER){this._buf.position-=1;return false}var a=r.valueOf(i&7);var o=i>>3;if(o===30){o=this.readSize()}if(o>t){var c=o<30?1:o<255?2:6;this._buf.position-=c;return false}else if(o<t){this.skipOptional(a)}else{if(a!==n){throw new Ice.MarshalException("invalid optional data member `"+o+"': unexpected format")}return true}}}},{key:"skipOptional",value:function e(t){switch(t){case r.F1:this.skip(1);break;case r.F2:this.skip(2);break;case r.F4:this.skip(4);break;case r.F8:this.skip(8);break;case r.Size:this.skipSize();break;case r.VSize:this.skip(this.readSize());break;case r.FSize:this.skip(this.readInt());break;case r.Class:this.readValue(null,Ice.Value);break}}},{key:"skipOptionals",value:function e(){while(true){if(this._buf.position>=this._encapsStack.start+this._encapsStack.sz){return}var t=this.readByte();var n=t<0?t+256:t;if(n===s.OPTIONAL_END_MARKER){return}var i=r.valueOf(n&7);if(n>>3===30){this.skipSize()}this.skipOptional(i)}}},{key:"skip",value:function e(t){if(t>this._buf.remaining){throw new Ice.UnmarshalOutOfBoundsException}this._buf.position+=t}},{key:"skipSize",value:function e(){var t=this.readByte();if(t===255){this.skip(4)}}},{key:"isEmpty",value:function e(){return this._buf.empty()}},{key:"expand",value:function e(t){this._buf.expand(t)}},{key:"createInstance",value:function t(n){var i=null;try{var r=n.length>2?n.substr(2).replace(/::/g,"."):"";var s=e.type(r);if(s!==undefined){i=new s}}catch(e){throw new Ice.NoValueFactoryException("no value factory",n,e)}return i}},{key:"createUserException",value:function t(n){var i=null,r=void 0;try{var s=n.length>2?n.substr(2).replace(/::/g,"."):"";var a=e.type(s);if(a!==undefined){i=new a}}catch(e){throw new Ice.MarshalException(e)}return i}},{key:"resolveCompactId",value:function e(t){var n=Ice.CompactIdRegistry.get(t);return n===undefined?"":n}},{key:"isEncoding_1_0",value:function e(){return this._encapsStack!==null?this._encapsStack.encoding_1_0:this._encoding.equals(Ice.Encoding_1_0)}},{key:"initEncaps",value:function e(){if(this._encapsStack===null){this._encapsStack=this._encapsCache;if(this._encapsStack!==null){this._encapsCache=this._encapsCache.next}else{this._encapsStack=new p}this._encapsStack.setEncoding(this._encoding);this._encapsStack.sz=this._buf.limit}if(this._encapsStack.decoder===null){if(this._encapsStack.encoding_1_0){this._encapsStack.decoder=new f(this,this._encapsStack,this._sliceValues,this._valueFactoryManager)}else{this._encapsStack.decoder=new _(this,this._encapsStack,this._sliceValues,this._valueFactoryManager,this._compactIdResolver)}}}},{key:"traceSkipSlice",value:function e(t,n){if(this._traceSlicing&&this._logger!==null){a.traceSlicing(n===u.ExceptionSlice?"exception":"object",t,"Slicing",this._logger)}}},{key:"valueFactoryManager",get:function e(){return this._valueFactoryManager},set:function e(t){this._valueFactoryManager=t!==undefined?t:null}},{key:"logger",get:function e(){return this._logger},set:function e(t){this._logger=t!==undefined?t:null}},{key:"compactIdResolver",get:function e(){return this._compactIdResolver},set:function e(t){this._compactIdResolver=t!==undefined?t:null}},{key:"sliceValues",get:function e(){return this._sliceValues},set:function e(t){this._sliceValues=t}},{key:"traceSlicing",get:function e(){return this._traceSlicing},set:function e(t){this._traceSlicing=t}},{key:"pos",get:function e(){return this._buf.position},set:function e(t){this._buf.position=t}},{key:"size",get:function e(){return this._buf.limit}},{key:"instance",get:function e(){return this._instance}},{key:"closure",get:function e(){return this._type},set:function e(t){this._type=t}},{key:"buffer",get:function e(){return this._buf}}]);return i}();var y=function(){function e(t,n){_classCallCheck(this,e);this._stream=t;this._encaps=n;this._marshaledMap=new Map;this._typeIdMap=null;this._typeIdIndex=0}_createClass(e,[{key:"writeOptional",value:function e(){return false}},{key:"writePendingValues",value:function e(){return undefined}},{key:"registerTypeId",value:function e(t){if(this._typeIdMap===null){this._typeIdMap=new Map}var n=this._typeIdMap.get(t);if(n!==undefined){return n}else{this._typeIdMap.set(t,++this._typeIdIndex);return-1}}}]);return e}();var g=function(e){_inherits(n,e);function n(e,t){_classCallCheck(this,n);var i=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));i._sliceType=u.NoSlice;i._writeSlice=0;i._valueIdIndex=0;i._toBeMarshaledMap=new Map;return i}_createClass(n,[{key:"writeValue",value:function e(n){t.assert(n!==undefined);if(n!==null){this._stream.writeInt(-this.registerValue(n))}else{this._stream.writeInt(0)}}},{key:"writeUserException",value:function e(n){t.assert(n!==null&&n!==undefined);var i=n._usesClasses();this._stream.writeBool(i);n._write(this._stream);if(i){this.writePendingValues()}}},{key:"startInstance",value:function e(t){this._sliceType=t}},{key:"endInstance",value:function e(){if(this._sliceType===u.ValueSlice){this.startSlice(Ice.Value.ice_staticId(),-1,true);this._stream.writeSize(0);this.endSlice()}this._sliceType=u.NoSlice}},{key:"startSlice",value:function e(t){if(this._sliceType===u.ValueSlice){var n=this.registerTypeId(t);if(n<0){this._stream.writeBool(false);this._stream.writeString(t)}else{this._stream.writeBool(true);this._stream.writeSize(n)}}else{this._stream.writeString(t)}this._stream.writeInt(0);this._writeSlice=this._stream.pos}},{key:"endSlice",value:function e(){var t=this._stream.pos-this._writeSlice+4;this._stream.rewriteInt(t,this._writeSlice-4)}},{key:"writePendingValues",value:function e(){var t=this;var n=function e(n,i){t._stream.writeInt(n);try{i.ice_preMarshal()}catch(e){t._stream.instance.initializationData().logger.warning("exception raised by ice_preMarshal:\n"+e.toString())}i._iceWrite(t._stream)};while(this._toBeMarshaledMap.size>0){this._toBeMarshaledMap.forEach(function(e,n){return t._marshaledMap.set(n,e)});var i=this._toBeMarshaledMap;this._toBeMarshaledMap=new Map;this._stream.writeSize(i.size);i.forEach(n)}this._stream.writeSize(0)}},{key:"registerValue",value:function e(n){t.assert(n!==null);var i=this._toBeMarshaledMap.get(n);if(i!==undefined){return i}i=this._marshaledMap.get(n);if(i!==undefined){return i}this._toBeMarshaledMap.set(n,++this._valueIdIndex);return this._valueIdIndex}}]);return n}(y);var I=function(e){_inherits(n,e);function n(e,t){_classCallCheck(this,n);var i=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));i._current=null;i._valueIdIndex=1;return i}_createClass(n,[{key:"writeValue",value:function e(n){t.assert(n!==undefined);if(n===null){this._stream.writeSize(0)}else if(this._current!==null&&this._encaps.format===i.SlicedFormat){if(this._current.indirectionTable===null){this._current.indirectionTable=[];this._current.indirectionMap=new Map}var r=this._current.indirectionMap.get(n);if(r===undefined){this._current.indirectionTable.push(n);var s=this._current.indirectionTable.length;this._current.indirectionMap.set(n,s);this._stream.writeSize(s)}else{this._stream.writeSize(r)}}else{this.writeInstance(n)}}},{key:"writePendingValues",value:function e(){return undefined}},{key:"writeUserException",value:function e(n){t.assert(n!==null&&n!==undefined);n._write(this._stream)}},{key:"startInstance",value:function e(t,i){if(this._current===null){this._current=new n.InstanceData(null)}else{this._current=this._current.next===null?new n.InstanceData(this._current):this._current.next}this._current.sliceType=t;this._current.firstSlice=true;if(i!==null&&i!==undefined){this.writeSlicedData(i)}}},{key:"endInstance",value:function e(){this._current=this._current.previous}},{key:"startSlice",value:function e(n,r,a){t.assert((this._current.indirectionTable===null||this._current.indirectionTable.length===0)&&(this._current.indirectionMap===null||this._current.indirectionMap.size===0));this._current.sliceFlagsPos=this._stream.pos;this._current.sliceFlags=0;if(this._encaps.format===i.SlicedFormat){this._current.sliceFlags|=s.FLAG_HAS_SLICE_SIZE}if(a){this._current.sliceFlags|=s.FLAG_IS_LAST_SLICE}this._stream.writeByte(0);if(this._current.sliceType===u.ValueSlice){if(this._encaps.format===i.SlicedFormat||this._current.firstSlice){if(r>=0){this._current.sliceFlags|=s.FLAG_HAS_TYPE_ID_COMPACT;this._stream.writeSize(r)}else{var o=this.registerTypeId(n);if(o<0){this._current.sliceFlags|=s.FLAG_HAS_TYPE_ID_STRING;this._stream.writeString(n)}else{this._current.sliceFlags|=s.FLAG_HAS_TYPE_ID_INDEX;this._stream.writeSize(o)}}}}else{this._stream.writeString(n)}if((this._current.sliceFlags&s.FLAG_HAS_SLICE_SIZE)!==0){this._stream.writeInt(0)}this._current.writeSlice=this._stream.pos;this._current.firstSlice=false}},{key:"endSlice",value:function e(){var n=this;if((this._current.sliceFlags&s.FLAG_HAS_OPTIONAL_MEMBERS)!==0){this._stream.writeByte(s.OPTIONAL_END_MARKER)}if((this._current.sliceFlags&s.FLAG_HAS_SLICE_SIZE)!==0){var r=this._stream.pos-this._current.writeSlice+4;this._stream.rewriteInt(r,this._current.writeSlice-4)}if(this._current.indirectionTable!==null&&this._current.indirectionTable.length!==0){t.assert(this._encaps.format===i.SlicedFormat);this._current.sliceFlags|=s.FLAG_HAS_INDIRECTION_TABLE;this._stream.writeSize(this._current.indirectionTable.length);this._current.indirectionTable.forEach(function(e){return n.writeInstance(e)});this._current.indirectionTable.length=0;this._current.indirectionMap.clear()}this._stream.rewriteByte(this._current.sliceFlags,this._current.sliceFlagsPos)}},{key:"writeOptional",value:function e(t,n){if(this._current===null){return this._stream.writeOptImpl(t,n)}if(this._stream.writeOptImpl(t,n)){this._current.sliceFlags|=s.FLAG_HAS_OPTIONAL_MEMBERS;return true}return false}},{key:"writeSlicedData",value:function e(n){var r=this;t.assert(n!==null&&n!==undefined);if(this._encaps.format!==i.SlicedFormat){return}n.slices.forEach(function(e){r.startSlice(e.typeId,e.compactId,e.isLastSlice);r._stream.writeBlob(e.bytes);if(e.hasOptionalMembers){r._current.sliceFlags|=s.FLAG_HAS_OPTIONAL_MEMBERS}if(e.instances!==null&&e.instances.length>0){if(r._current.indirectionTable===null){r._current.indirectionTable=[];r._current.indirectionMap=new Map}e.instances.forEach(function(e){return r._current.indirectionTable.push(e)})}r.endSlice()})}},{key:"writeInstance",value:function e(n){t.assert(n!==null&&n!==undefined);var i=this._marshaledMap.get(n);if(i!==undefined){this._stream.writeSize(i);return}this._marshaledMap.set(n,++this._valueIdIndex);try{n.ice_preMarshal()}catch(e){this._stream.instance.initializationData().logger.warning("exception raised by ice_preMarshal:\n"+e.toString())}this._stream.writeSize(1);n._iceWrite(this._stream)}}]);return n}(y);I.InstanceData=function(){function e(n){_classCallCheck(this,e);t.assert(n!==undefined);if(n!==null){n.next=this}this.previous=n;this.next=null;this.sliceType=null;this.firstSlice=false;this.sliceFlags=0;this.writeSlice=0;this.sliceFlagsPos=0;this.indirectionTable=null;this.indirectionMap=null}return e}();var m=function(){function e(){_classCallCheck(this,e);this.start=0;this.format=i.DefaultFormat;this.encoding=null;this.encoding_1_0=false;this.encoder=null;this.next=null}_createClass(e,[{key:"reset",value:function e(){this.encoder=null}},{key:"setEncoding",value:function e(t){this.encoding=t;this.encoding_1_0=t.equals(Ice.Encoding_1_0)}}]);return e}();var k=function(){function e(t,n){_classCallCheck(this,e);this._instance=null;this._encoding=null;if(t!==undefined&&t!==null){if(t.constructor==Ice.Communicator){this._instance=t.instance}else if(t.constructor==Ice.Instance){this._instance=t}else if(t.constructor==Ice.EncodingVersion){this._encoding=t}else{throw new Ice.InitializationException("unknown argument to OutputStream constructor")}}if(n!==undefined&&n!==null){if(n.constructor==Ice.EncodingVersion){this._encoding=n}else{throw new Ice.InitializationException("unknown argument to OutputStream constructor")}}this._buf=new Ice.Buffer;this._closure=null;this._encapsStack=null;this._encapsCache=null;if(this._instance!==null){if(this._encoding===null){this._encoding=this._instance.defaultsAndOverrides().defaultEncoding}this._format=this._instance.defaultsAndOverrides().defaultFormat}else{if(this._encoding===null){this._encoding=s.currentEncoding}this._format=i.CompactFormat}}_createClass(e,[{key:"reset",value:function e(){this._buf.reset();this.clear()}},{key:"clear",value:function e(){if(this._encapsStack!==null){t.assert(this._encapsStack.next);this._encapsStack.next=this._encapsCache;this._encapsCache=this._encapsStack;this._encapsCache.reset();this._encapsStack=null}}},{key:"finished",value:function e(){return this.prepareWrite().getArray(this.size)}},{key:"swap",value:function e(n){t.assert(this._instance===n._instance);var i=[this._buf,n._buf];n._buf=i[0];this._buf=i[1];var r=[this._encoding,n._encoding];n._encoding=r[0];this._encoding=r[1];var s=[this._closure,n._closure];n._closure=s[0];this._closure=s[1];this.resetEncapsulation();n.resetEncapsulation()}},{key:"resetEncapsulation",value:function e(){this._encapsStack=null}},{key:"resize",value:function e(t){this._buf.resize(t);this._buf.position=t}},{key:"prepareWrite",value:function e(){this._buf.position=0;return this._buf}},{key:"startValue",value:function e(n){t.assert(this._encapsStack!==null&&this._encapsStack.encoder!==null);this._encapsStack.encoder.startInstance(u.ValueSlice,n)}},{key:"endValue",value:function e(){t.assert(this._encapsStack!==null&&this._encapsStack.encoder!==null);this._encapsStack.encoder.endInstance()}},{key:"startException",value:function e(n){t.assert(this._encapsStack!==null&&this._encapsStack.encoder!==null);this._encapsStack.encoder.startInstance(u.ExceptionSlice,n)}},{key:"endException",value:function e(){t.assert(this._encapsStack!==null&&this._encapsStack.encoder!==null);this._encapsStack.encoder.endInstance()}},{key:"startEncapsulation",value:function e(t,n){if(t===undefined){if(this._encapsStack!==null){t=this._encapsStack.encoding;n=this._encapsStack.format}else{t=this._encoding;n=i.DefaultFormat}}s.checkSupportedEncoding(t);var r=this._encapsCache;if(r!==null){r.reset();this._encapsCache=this._encapsCache.next}else{r=new m}r.next=this._encapsStack;this._encapsStack=r;this._encapsStack.format=n;this._encapsStack.setEncoding(t);this._encapsStack.start=this._buf.limit;this.writeInt(0);this._encapsStack.encoding._write(this)}},{key:"endEncapsulation",value:function e(){t.assert(this._encapsStack);var n=this._encapsStack.start;var i=this._buf.limit-n;this._buf.putIntAt(n,i);var r=this._encapsStack;this._encapsStack=r.next;r.next=this._encapsCache;this._encapsCache=r;this._encapsCache.reset()}},{key:"writeEmptyEncapsulation",value:function e(t){s.checkSupportedEncoding(t);this.writeInt(6);t._write(this)}},{key:"writeEncapsulation",value:function e(t){if(t.length<6){throw new Ice.EncapsulationException}this.expand(t.length);this._buf.putArray(t)}},{key:"getEncoding",value:function e(){return this._encapsStack!==null?this._encapsStack.encoding:this._encoding}},{key:"startSlice",value:function e(n,i,r){t.assert(this._encapsStack!==null&&this._encapsStack.encoder!==null);this._encapsStack.encoder.startSlice(n,i,r)}},{key:"endSlice",value:function e(){t.assert(this._encapsStack!==null&&this._encapsStack.encoder!==null);this._encapsStack.encoder.endSlice()}},{key:"writePendingValues",value:function e(){if(this._encapsStack!==null&&this._encapsStack.encoder!==null){this._encapsStack.encoder.writePendingValues()}else if(this._encapsStack!==null&&this._encapsStack.encoding_1_0||this._encapsStack===null&&this._encoding.equals(Ice.Encoding_1_0)){this.writeSize(0)}}},{key:"writeSize",value:function e(t){if(t>254){this.expand(5);this._buf.put(255);this._buf.putInt(t)}else{this.expand(1);this._buf.put(t)}}},{key:"startSize",value:function e(){var t=this._buf.position;this.writeInt(0);return t}},{key:"endSize",value:function e(n){t.assert(n>=0);this.rewriteInt(this._buf.position-n-4,n)}},{key:"writeBlob",value:function e(t){if(t===null){return}this.expand(t.length);this._buf.putArray(t)}},{key:"writeOptional",value:function e(n,i){t.assert(this._encapsStack!==null);if(this._encapsStack.encoder!==null){return this._encapsStack.encoder.writeOptional(n,i)}return this.writeOptImpl(n,i)}},{key:"writeOptionalHelper",value:function e(t,n,i,r){if(r!==undefined){if(this.writeOptional(t,n)){i.call(this,r)}}}},{key:"writeByte",value:function e(t){this.expand(1);this._buf.put(t)}},{key:"rewriteByte",value:function e(t,n){this._buf.putAt(n,t)}},{key:"writeByteSeq",value:function e(t){if(t===null||t.length===0){this.writeSize(0)}else{this.writeSize(t.length);this.expand(t.length);this._buf.putArray(t)}}},{key:"writeBool",value:function e(t){this.expand(1);this._buf.put(t?1:0)}},{key:"rewriteBool",value:function e(t,n){this._buf.putAt(n,t?1:0)}},{key:"writeShort",value:function e(t){this.expand(2);this._buf.putShort(t)}},{key:"writeInt",value:function e(t){this.expand(4);this._buf.putInt(t)}},{key:"rewriteInt",value:function e(t,n){this._buf.putIntAt(n,t)}},{key:"writeLong",value:function e(t){this.expand(8);this._buf.putLong(t)}},{key:"writeFloat",value:function e(t){this.expand(4);this._buf.putFloat(t)}},{key:"writeDouble",value:function e(t){this.expand(8);this._buf.putDouble(t)}},{key:"writeString",value:function e(t){if(t===null||t.length===0){this.writeSize(0)}else{this._buf.writeString(this,t)}}},{key:"writeProxy",value:function e(t){if(t!==null){t._write(this)}else{var n=new Ice.Identity;n._write(this)}}},{key:"writeOptionalProxy",value:function e(t,n){if(n!==undefined){if(this.writeOptional(t,r.FSize)){var i=this.startSize();this.writeProxy(n);this.endSize(i)}}}},{key:"writeEnum",value:function e(t){if(this.isEncoding_1_0()){if(t.maxValue<127){this.writeByte(t.value)}else if(t.maxValue<32767){this.writeShort(t.value)}else{this.writeInt(t.value)}}else{this.writeSize(t.value)}}},{key:"writeValue",value:function e(t){this.initEncaps();this._encapsStack.encoder.writeValue(t)}},{key:"writeOptionalValue",value:function e(t,n){if(n!==undefined){if(this.writeOptional(t,r.Class)){this.writeValue(n)}}}},{key:"writeUserException",value:function e(t){this.initEncaps();this._encapsStack.encoder.writeUserException(t)}},{key:"writeOptImpl",value:function e(t,n){if(this.isEncoding_1_0()){return false}var i=n.value;if(t<30){i|=t<<3;this.writeByte(i)}else{i|=240;this.writeByte(i);this.writeSize(t)}return true}},{key:"isEmpty",value:function e(){return this._buf.empty()}},{key:"expand",value:function e(t){this._buf.expand(t)}},{key:"isEncoding_1_0",value:function e(){return this._encapsStack?this._encapsStack.encoding_1_0:this._encoding.equals(Ice.Encoding_1_0)}},{key:"initEncaps",value:function e(){if(!this._encapsStack){this._encapsStack=this._encapsCache;if(this._encapsStack){this._encapsCache=this._encapsCache.next}else{this._encapsStack=new m}this._encapsStack.setEncoding(this._encoding)}if(this._encapsStack.format===i.DefaultFormat){this._encapsStack.format=this._instance.defaultsAndOverrides().defaultFormat}if(!this._encapsStack.encoder){if(this._encapsStack.encoding_1_0){this._encapsStack.encoder=new g(this,this._encapsStack)}else{this._encapsStack.encoder=new I(this,this._encapsStack)}}}},{key:"format",get:function e(){return this._format},set:function e(t){this._format=t}},{key:"pos",get:function e(){return this._buf.position},set:function e(t){this._buf.position=t}},{key:"size",get:function e(){return this._buf.limit}},{key:"instance",get:function e(){return this._instance}},{key:"closure",get:function e(){return this._closure},set:function e(t){this._closure=t}},{key:"buffer",get:function e(){return this._buf}}]);return e}();var w=function e(t,n,i,r,s,a){var o=function(){function e(){_classCallCheck(this,e)}_createClass(e,null,[{key:"write",value:function e(n,i){return t.call(n,i)}},{key:"read",value:function e(t){return n.call(t)}},{key:"writeOptional",value:function e(n,i,s){n.writeOptionalHelper(i,r,t,s)}},{key:"readOptional",value:function e(t,i){return t.readOptionalHelper(i,r,n)}},{key:"minWireSize",get:function e(){return i}}]);return e}();if(s!==undefined&&a!==undefined){o.validate=function(e){return e>=s&&e<=a}}return o};var C=v.prototype;var S=k.prototype;var x=0;var E=255;var b=-32768;var O=32767;var P=0;var M=4294967295;var A=-2147483648;var T=2147483647;var R=-3.4028234664e38;var F=3.4028234664e38;Ice.ByteHelper=w(S.writeByte,C.readByte,1,Ice.OptionalFormat.F1,x,E);Ice.ShortHelper=w(S.writeShort,C.readShort,2,Ice.OptionalFormat.F2,b,O);Ice.IntHelper=w(S.writeInt,C.readInt,4,Ice.OptionalFormat.F4,A,T);Ice.FloatHelper=w(S.writeFloat,C.readFloat,4,Ice.OptionalFormat.F4,R,F);Ice.FloatHelper.validate=function(e){return Number.isNaN(e)||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY||e>=R&&e<=F};Ice.DoubleHelper=w(S.writeDouble,C.readDouble,8,Ice.OptionalFormat.F8,-Number.MAX_VALUE,Number.MAX_VALUE);Ice.DoubleHelper.validate=function(e){return Number.isNaN(e)||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY||e>=-Number.MAX_VALUE&&e<=Number.MAX_VALUE};Ice.BoolHelper=w(S.writeBool,C.readBool,1,Ice.OptionalFormat.F1);Ice.LongHelper=w(S.writeLong,C.readLong,8,Ice.OptionalFormat.F8);Ice.LongHelper.validate=function(e){return e.low>=P&&e.low<=M&&e.high>=P&&e.high<=M};Ice.StringHelper=w(S.writeString,C.readString,1,Ice.OptionalFormat.VSize);Ice.ObjectHelper=function(){function e(){_classCallCheck(this,e)}_createClass(e,null,[{key:"write",value:function e(t,n){t.writeValue(n)}},{key:"read",value:function e(t){var n=void 0;t.readValue(function(e){return n=e},Ice.Value);return n}},{key:"writeOptional",value:function e(t,n,i){t.writeOptionalValue(n,Ice.OptionalFormat.Class,S.writeValue,i)}},{key:"readOptional",value:function e(t,n){var i=void 0;t.readOptionalValue(n,function(e){return i=e},Ice.Value);return i}},{key:"minWireSize",get:function e(){return 1}}]);return e}();Ice.InputStream=v;Ice.OutputStream=k})();(function(){var e=function(e){_inherits(t,e);function t(e,n,i,r,s){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));a._communicator=e;a._instance=e!==null?e.instance:null;a._operation=n;a._connection=i;a._proxy=r;a._adapter=s;return a}_createClass(t,[{key:"communicator",get:function e(){return this._communicator}},{key:"connection",get:function e(){return this._connection}},{key:"proxy",get:function e(){return this._proxy}},{key:"adapter",get:function e(){return this._adapter}},{key:"operation",get:function e(){return this._operation}}]);return t}(Ice.Promise);Ice.AsyncResultBase=e})();(function(){var e=Ice.AsyncStatus;var t=Ice.ConnectionRequestHandler;var n=Ice.Debug;var i=Ice.RetryException;var r=Ice.ReferenceMode;var s=Ice.LocalException;var a=function(){function a(e,t){_classCallCheck(this,a);this._reference=e;this._response=e.getMode()===r.ModeTwoway;this._proxy=t;this._proxies=[];this._initialized=false;this._connection=null;this._exception=null;this._requests=[]}_createClass(a,[{key:"connect",value:function e(t){if(!this.initialized()){this._proxies.push(t)}return this._requestHandler?this._requestHandler:this}},{key:"update",value:function e(t,n){return t===this?n:this}},{key:"sendAsyncRequest",value:function t(n){if(!this._initialized){n.cancelable(this)}if(!this.initialized()){this._requests.push(n);return e.Queued}return n.invokeRemote(this._connection,this._response)}},{key:"asyncRequestCanceled",value:function e(t,i){if(this._exception!==null){return}if(!this.initialized()){for(var r=0;r<this._requests.length;r++){if(this._requests[r]===t){t.completedEx(i);this._requests.splice(r,1);return}}n.assert(false)}this._connection.asyncRequestCanceled(t,i)}},{key:"getReference",value:function e(){return this._reference}},{key:"getConnection",value:function e(){if(this._exception!==null){throw this._exception}else{return this._connection}}},{key:"setConnection",value:function e(t){var i=this;n.assert(this._exception===null&&this._connection===null);this._connection=t;var r=this._reference.getRouterInfo();if(r!==null){r.addProxy(this._proxy).then(function(){return i.flushRequests()},function(e){return i.setException(e)});return}this.flushRequests()}},{key:"setException",value:function e(t){var i=this;n.assert(!this._initialized&&this._exception===null);this._exception=t;this._proxies.length=0;this._proxy=null;try{this._reference.getInstance().requestHandlerFactory().removeRequestHandler(this._reference,this)}catch(e){}this._requests.forEach(function(e){if(e!==null){e.completedEx(i._exception)}});this._requests.length=0}},{key:"initialized",value:function e(){if(this._initialized){n.assert(this._connection!==null);return true}else{if(this._exception!==null){if(this._connection!==null){return true}throw this._exception}else{return this._initialized}}}},{key:"flushRequests",value:function e(){var r=this;n.assert(this._connection!==null&&!this._initialized);var a=null;this._requests.forEach(function(e){try{e.invokeRemote(r._connection,r._response)}catch(t){if(t instanceof i){a=t.inner;r._reference.getInstance().requestHandlerFactory().removeRequestHandler(r._reference,r);e.retryException(t.inner)}else{n.assert(t instanceof s);a=t;e.out.completedEx(t)}}});this._requests.length=0;if(this._reference.getCacheConnection()&&a===null){this._requestHandler=new t(this._reference,this._connection);this._proxies.forEach(function(e){return e._updateRequestHandler(r,r._requestHandler)})}n.assert(!this._initialized);this._exception=a;this._initialized=this._exception===null;this._reference.getInstance().requestHandlerFactory().removeRequestHandler(this._reference,this);this._proxies.length=0;this._proxy=null}}]);return a}();Ice.ConnectRequestHandler=a})();(function(){var e=Ice.OutputStream;var t=Ice.Debug;var n=Ice.Protocol;var i=20+8;var r=function(){function r(t,s){_classCallCheck(this,r);this._batchStreamInUse=false;this._batchRequestNum=0;this._batchStream=new e(t,n.currentProtocolEncoding);this._batchStream.writeBlob(n.requestBatchHdr);this._batchMarker=this._batchStream.size;this._exception=null;this._maxSize=t.batchAutoFlushSize();if(this._maxSize>0&&s){var a=t.initializationData().properties.getPropertyAsIntWithDefault("Ice.UDP.SndSize",65535-i);if(a<this._maxSize){this._maxSize=a}}}_createClass(r,[{key:"prepareBatchRequest",value:function e(t){if(this._exception){throw this._exception}this._batchStream.swap(t)}},{key:"finishBatchRequest",value:function e(n,i,r){this._batchStream.swap(n);try{if(this._maxSize>0&&this._batchStream.size>=this._maxSize){i.ice_flushBatchRequests()}t.assert(this._batchMarker<this._batchStream.size);this._batchMarker=this._batchStream.size;++this._batchRequestNum}finally{this._batchStream.resize(this._batchMarker)}}},{key:"abortBatchRequest",value:function e(t){this._batchStream.swap(t);this._batchStream.resize(this._batchMarker)}},{key:"swap",value:function e(t){if(this._batchRequestNum===0){return 0}var i=null;if(this._batchMarker<this._batchStream.size){var r=this._batchStream.size-this._batchMarker;this._batchStream.pos=this._batchMarker;i=this._batchStream.buffer.getArray(r);this._batchStream.resize(this._batchMarker)}var s=this._batchRequestNum;this._batchStream.swap(t);this._batchRequestNum=0;this._batchStream.writeBlob(n.requestBatchHdr);this._batchMarker=this._batchStream.size;if(i!==null){this._batchStream.writeBlob(i)}return s}},{key:"destroy",value:function e(t){this._exception=t}},{key:"isEmpty",value:function e(){return this._batchStream.size===n.requestBatchHdr.length}}]);return r}();Ice.BatchRequestQueue=r})();(function(){t.defineSequence(Ice,"EndpointSeqHelper","Ice.ObjectHelper",false,"Ice.Endpoint")})();(function(){var e=function(){function e(t,n,i,r){_classCallCheck(this,e);this._instance=t;this._queue=n;this._outAsync=i}_createClass(e,[{key:"run",value:function e(){this._outAsync.retry();this._queue.remove(this)}},{key:"destroy",value:function e(){try{this._outAsync.abort(new Ice.CommunicatorDestroyedException)}catch(e){}}},{key:"asyncRequestCanceled",value:function e(t,n){if(this._queue.cancel(this)){if(this._instance.traceLevels().retry>=1){this._instance.initializationData().logger.trace(this._instance.traceLevels().retryCat,"operation retry canceled\n"+n.toString())}this._outAsync.completedEx(n)}}}]);return e}();var t=function(){function t(e){_classCallCheck(this,t);this._instance=e;this._requests=[]}_createClass(t,[{key:"add",value:function t(n,i){if(this._instance===null){throw new Ice.CommunicatorDestroyedException}var r=new e(this._instance,this,n);n.cancelable(r);r.token=this._instance.timer().schedule(function(){return r.run()},i);this._requests.push(r)}},{key:"destroy",value:function e(){var t=this;this._requests.forEach(function(e){t._instance.timer().cancel(e.token);e.destroy()});this._requests=[];this._instance=null}},{key:"remove",value:function e(t){var n=this._requests.indexOf(t);if(n>=0){this._requests.splice(n,1)}}},{key:"cancel",value:function e(t){var n=this._requests.indexOf(t);if(n>=0){this._requests.splice(n,1);return this._instance.timer().cancel(t.token)}return false}}]);return t}();Ice.RetryQueue=t})();(function(){var e=Ice.Debug;var t=Ice.HashMap;var n=function(){function n(i){_classCallCheck(this,n);this._router=i;e.assert(this._router!==null);this._clientEndpoints=null;this._adapter=null;this._identities=new t(t.compareEquals);this._evictedIdentities=[];this._hasRoutingTable=false}_createClass(n,[{key:"destroy",value:function e(){this._clientEndpoints=[];this._adapter=null;this._identities.clear()}},{key:"equals",value:function e(t){if(this===t){return true}if(t instanceof n){return this._router.equals(t._router)}return false}},{key:"hashCode",value:function e(){return this._router.hashCode()}},{key:"getRouter",value:function e(){return this._router}},{key:"getClientEndpoints",value:function e(){var t=this;var n=new Ice.Promise;if(this._clientEndpoints!==null){n.resolve(this._clientEndpoints)}else{this._router.getClientProxy().then(function(e){return t.setClientEndpoints(e[0],e[1]!==undefined?e[1]:true,n)}).catch(n.reject)}return n}},{key:"getServerEndpoints",value:function e(){return this._router.getServerProxy().then(function(e){if(e===null){throw new Ice.NoEndpointException}e=e.ice_router(null);return e._getReference().getEndpoints()})}},{key:"addProxy",value:function t(n){var i=this;e.assert(n!==null);if(!this._hasRoutingTable){return Ice.Promise.resolve()}else if(this._identities.has(n.ice_getIdentity())){return Ice.Promise.resolve()}else{return this._router.addProxies([n]).then(function(e){i.addAndEvictProxies(n,e)})}}},{key:"setAdapter",value:function e(t){this._adapter=t}},{key:"getAdapter",value:function e(){return this._adapter}},{key:"clearCache",value:function e(t){this._identities.delete(t.getIdentity())}},{key:"setClientEndpoints",value:function e(t,n,i){var r=this;if(this._clientEndpoints===null){this._hasRoutingTable=n;if(t===null){this._clientEndpoints=this._router._getReference().getEndpoints();i.resolve(this._clientEndpoints)}else{t=t.ice_router(null);this._router.ice_getConnection().then(function(e){r._clientEndpoints=t.ice_timeout(e.timeout())._getReference().getEndpoints();i.resolve(r._clientEndpoints)}).catch(i.reject)}}else{i.resolve(this._clientEndpoints)}}},{key:"addAndEvictProxies",value:function e(t,n){var i=this;var r=this._evictedIdentities.findIndex(function(e){return e.equals(t.ice_getIdentity())});if(r>=0){this._evictedIdentities.splice(r,1)}else{this._identities.set(t.ice_getIdentity(),1)}n.forEach(function(e){i._identities.delete(e.ice_getIdentity())})}}]);return n}();Ice.RouterInfo=n})();(function(){var e=Ice.AsyncResultBase;var t=Ice.Debug;var n=Ice.Protocol;var i=Ice.UserException;var r=Ice.OutputStream;var s=function(e){_inherits(s,e);function s(e,t,i,a,o,c){_classCallCheck(this,s);var u=_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e,t,i,a,o));u._completed=c;u._is=null;u._os=e!==null?new r(u._instance,n.currentProtocolEncoding):null;u._state=0;u._exception=null;u._sentSynchronously=false;return u}_createClass(s,[{key:"cancel",value:function e(){this.cancelWithException(new Ice.InvocationCanceledException)}},{key:"isCompleted",value:function e(){return(this._state&s.Done)>0}},{key:"isSent",value:function e(){return(this._state&s.Sent)>0}},{key:"throwLocalException",value:function e(){if(this._exception!==null){throw this._exception}}},{key:"sentSynchronously",value:function e(){return this._sentSynchronously}},{key:"markSent",value:function e(n){t.assert((this._state&s.Done)===0);this._state|=s.Sent;if(n){this._state|=s.Done|s.OK;this._cancellationHandler=null;this.resolve()}}},{key:"markFinished",value:function e(n,i){t.assert((this._state&s.Done)===0);this._state|=s.Done;if(n){this._state|=s.OK}this._cancellationHandler=null;if(i){i(this)}else{this.resolve()}}},{key:"markFinishedEx",value:function e(n){t.assert((this._state&s.Done)===0);this._exception=n;this._state|=s.Done;this._cancellationHandler=null;this.reject(n)}},{key:"cancelWithException",value:function e(t){this._cancellationException=t;if(this._cancellationHandler){this._cancellationHandler.asyncRequestCanceled(this,t)}}},{key:"cancelable",value:function e(t){if(this._cancellationException){try{throw this._cancellationException}finally{this._cancellationException=null}}this._cancellationHandler=t}},{key:"getOs",value:function e(){return this._os}},{key:"startReadParams",value:function e(){this._is.startEncapsulation();return this._is}},{key:"endReadParams",value:function e(){this._is.endEncapsulation()}},{key:"readEmptyParams",value:function e(){this._is.skipEmptyEncapsulation()}},{key:"throwUserException",value:function e(){t.assert((this._state&s.Done)!==0);if((this._state&s.OK)===0){try{this._is.startEncapsulation();this._is.throwException()}catch(e){if(e instanceof i){this._is.endEncapsulation()}throw e}}}}]);return s}(e);s.OK=1;s.Done=2;s.Sent=4;Ice.AsyncResult=s})();(function(){var e=Ice.AsyncStatus;var t=Ice.AsyncResult;var n=Ice.InputStream;var i=Ice.OutputStream;var r=Ice.Debug;var s=Ice.RetryException;var a=Ice.Protocol;var o=Ice.Identity;var c=function(e){_inherits(t,e);function t(e,n,r,s,o){_classCallCheck(this,t);var c=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,s,o));c._os=new i(c._instance,a.currentProtocolEncoding);return c}_createClass(t,[{key:"getOs",value:function e(){return this._os}},{key:"sent",value:function e(){this.markSent(true)}},{key:"completedEx",value:function e(t){this.markFinishedEx(t)}}]);return t}(t);var u=function(t){_inherits(n,t);function n(e,t){_classCallCheck(this,n);var i=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e.ice_getCommunicator(),t,null,e,null));i._mode=null;i._cnt=0;i._sent=false;i._handler=null;return i}_createClass(n,[{key:"completedEx",value:function e(t){try{this._instance.retryQueue().add(this,this.handleException(t))}catch(t){this.markFinishedEx(t)}}},{key:"retryException",value:function e(t){try{this._proxy._updateRequestHandler(this._handler,null);this._instance.retryQueue().add(this,0)}catch(t){this.completedEx(t)}}},{key:"retry",value:function e(){this.invokeImpl(false)}},{key:"abort",value:function e(t){this.markFinishedEx(t)}},{key:"invokeImpl",value:function t(n){var i=this;try{if(n){var r=this._proxy._getReference().getInvocationTimeout();if(r>0){this._timeoutToken=this._instance.timer().schedule(function(){i.cancelWithException(new Ice.InvocationTimeoutException)},r)}}while(true){try{this._sent=false;this._handler=this._proxy._getRequestHandler();if((this._handler.sendAsyncRequest(this)&e.Sent)>0){if(n){this._sentSynchronously=true}}return}catch(e){if(e instanceof s){this._proxy._updateRequestHandler(this._handler,null)}else{var a=this.handleException(e);if(a>0){this._instance.retryQueue().add(this,a);return}}}}}catch(e){this.markFinishedEx(e)}}},{key:"markSent",value:function e(t){this._sent=true;if(t){if(this._timeoutToken){this._instance.timer().cancel(this._timeoutToken)}}_get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"markSent",this).call(this,t)}},{key:"markFinishedEx",value:function e(t){if(this._timeoutToken){this._instance.timer().cancel(this._timeoutToken)}_get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"markFinishedEx",this).call(this,t)}},{key:"handleException",value:function e(t){var n={value:0};this._cnt=this._proxy._handleException(t,this._handler,this._mode,this._sent,n,this._cnt);return n.value}}]);return n}(c);var l=function(e){_inherits(i,e);function i(e,t,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t));r._encoding=a.getCompatibleEncoding(r._proxy._getReference().getEncoding());r._completed=n;return r}_createClass(i,[{key:"prepare",value:function e(t,n,r){a.checkSupportedProtocol(a.getCompatibleProtocol(this._proxy._getReference().getProtocol()));this._mode=n;if(r===null){r=i._emptyContext}if(this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram()){this._proxy._getBatchRequestQueue().prepareBatchRequest(this._os)}else{this._os.writeBlob(a.requestHdr)}var s=this._proxy._getReference();s.getIdentity()._write(this._os);var o=s.getFacet();if(o===null||o.length===0){Ice.StringSeqHelper.write(this._os,null)}else{Ice.StringSeqHelper.write(this._os,[o])}this._os.writeString(this._operation);this._os.writeByte(n.value);if(r!==undefined){if(r!==null&&!(r instanceof Map)){throw new Error("illegal context value, expecting null or Map")}Ice.ContextHelper.write(this._os,r)}else{var c=s.getInstance().getImplicitContext();var u=s.getContext();if(c===null){Ice.ContextHelper.write(this._os,u)}else{c.write(u,this._os)}}}},{key:"sent",value:function e(){this.markSent(!this._proxy.ice_isTwoway())}},{key:"invokeRemote",value:function e(t,n){return t.sendAsyncRequest(this,n,0)}},{key:"abort",value:function e(t){if(this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram()){this._proxy._getBatchRequestQueue().abortBatchRequest(this._os)}_get(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"abort",this).call(this,t)}},{key:"invoke",value:function e(){if(this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram()){this._sentSynchronously=true;this._proxy._getBatchRequestQueue().finishBatchRequest(this._os,this._proxy,this._operation);this.markFinished(true);return}this.invokeImpl(true)}},{key:"completed",value:function e(t){r.assert(this._proxy.ice_isTwoway());var i=void 0;try{if(this._is===null){this._is=new n(this._instance,a.currentProtocolEncoding)}this._is.swap(t);i=this._is.readByte();switch(i){case a.replyOK:case a.replyUserException:{break}case a.replyObjectNotExist:case a.replyFacetNotExist:case a.replyOperationNotExist:{var s=new o;s._read(this._is);var c=Ice.StringSeqHelper.read(this._is);var u=void 0;if(c.length>0){if(c.length>1){throw new Ice.MarshalException}u=c[0]}else{u=""}var l=this._is.readString();var h=null;switch(i){case a.replyObjectNotExist:{h=new Ice.ObjectNotExistException;break}case a.replyFacetNotExist:{h=new Ice.FacetNotExistException;break}case a.replyOperationNotExist:{h=new Ice.OperationNotExistException;break}default:{r.assert(false);break}}h.id=s;h.facet=u;h.operation=l;throw h}case a.replyUnknownException:case a.replyUnknownLocalException:case a.replyUnknownUserException:{var f=this._is.readString();var _=null;switch(i){case a.replyUnknownException:{_=new Ice.UnknownException;break}case a.replyUnknownLocalException:{_=new Ice.UnknownLocalException;break}case a.replyUnknownUserException:{_=new Ice.UnknownUserException;break}default:{r.assert(false);break}}_.unknown=f;throw _}default:{throw new Ice.UnknownReplyStatusException}}this.markFinished(i==a.replyOK,this._completed)}catch(e){this.completedEx(e)}}},{key:"startWriteParams",value:function e(t){this._os.startEncapsulation(this._encoding,t);return this._os}},{key:"endWriteParams",value:function e(){this._os.endEncapsulation()}},{key:"writeEmptyParams",value:function e(){this._os.writeEmptyEncapsulation(this._encoding)}},{key:"startReadParams",value:function e(){this._is.startEncapsulation();return this._is}},{key:"endReadParams",value:function e(){this._is.endEncapsulation()}},{key:"readEmptyParams",value:function e(){this._is.skipEmptyEncapsulation()}},{key:"throwUserException",value:function e(){r.assert((this._state&t.Done)!==0);if((this._state&t.OK)===0){try{this._is.startEncapsulation();this._is.throwException()}catch(e){if(e instanceof Ice.UserException){this._is.endEncapsulation()}throw e}}}}]);return i}(u);l._emptyContext=new Map;var h=function(t){_inherits(n,t);function n(e,t){_classCallCheck(this,n);var i=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));i._batchRequestNum=e._getBatchRequestQueue().swap(i._os);return i}_createClass(n,[{key:"invokeRemote",value:function t(n,i){if(this._batchRequestNum===0){this.sent();return e.Sent}return n.sendAsyncRequest(this,i,this._batchRequestNum)}},{key:"invoke",value:function e(){a.checkSupportedProtocol(a.getCompatibleProtocol(this._proxy._getReference().getProtocol()));this.invokeImpl(true)}}]);return n}(u);var f=function(t){_inherits(n,t);function n(e,t){_classCallCheck(this,n);return _possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t))}_createClass(n,[{key:"invokeRemote",value:function t(n,i){this.markFinished(true,function(e){return e.resolve(n)});return e.Sent}},{key:"invoke",value:function e(){this.invokeImpl(true)}}]);return n}(u);var _=function(t){_inherits(n,t);function n(e,t,i){_classCallCheck(this,n);return _possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,i,e,null,null))}_createClass(n,[{key:"invoke",value:function t(){try{var n=this._connection.getBatchRequestQueue().swap(this._os);var i=void 0;if(n===0){this.sent();i=e.Sent}else{i=this._connection.sendAsyncRequest(this,false,n)}if((i&e.Sent)>0){this._sentSynchronously=true}}catch(e){this.completedEx(e)}}}]);return n}(c);var d=function(t){_inherits(n,t);function n(e,t){_classCallCheck(this,n);return _possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,"heartbeat",e,null,null))}_createClass(n,[{key:"invoke",value:function t(){try{this._os.writeBlob(a.magic);a.currentProtocol._write(this._os);a.currentProtocolEncoding._write(this._os);this._os.writeByte(a.validateConnectionMsg);this._os.writeByte(0);this._os.writeInt(a.headerSize);var n=this._connection.sendAsyncRequest(this,false,0);if((n&e.Sent)>0){this._sentSynchronously=true}}catch(e){this.completedEx(e)}}}]);return n}(c);Ice.OutgoingAsync=l;Ice.ProxyFlushBatch=h;Ice.ProxyGetConnection=f;Ice.ConnectionFlushBatch=_;Ice.HeartbeatAsync=d})();(function(){var e=Ice.ArrayUtil;var t=Ice.AsyncResultBase;var n=Ice.AsyncResult;var i=Ice.Debug;var r=Ice.FormatType;var s=Ice.OutgoingAsync;var a=Ice.ProxyFlushBatch;var o=Ice.ProxyGetConnection;var c=Ice.ReferenceMode;var u=Ice.OperationMode;var l=function(){function n(){_classCallCheck(this,n);this._reference=null;this._requestHandler=null}_createClass(n,[{key:"hashCode",value:function e(t){return this._reference.hashCode()}},{key:"ice_getCommunicator",value:function e(){return this._reference.getCommunicator()}},{key:"toString",value:function e(){return this._reference.toString()}},{key:"ice_getIdentity",value:function e(){return this._reference.getIdentity().clone()}},{key:"ice_identity",value:function e(t){if(t===undefined||t===null||t.name.length===0){throw new Ice.IllegalIdentityException}if(t.equals(this._reference.getIdentity())){return this}else{var i=new n;i._setup(this._reference.changeIdentity(t));return i}}},{key:"ice_getContext",value:function e(){return new Map(this._reference.getContext())}},{key:"ice_context",value:function e(t){return this._newInstance(this._reference.changeContext(t))}},{key:"ice_getFacet",value:function e(){return this._reference.getFacet()}},{key:"ice_facet",value:function e(t){if(t===undefined||t===null){t=""}if(t===this._reference.getFacet()){return this}else{var i=new n;i._setup(this._reference.changeFacet(t));return i}}},{key:"ice_getAdapterId",value:function e(){return this._reference.getAdapterId()}},{key:"ice_adapterId",value:function e(t){if(t===undefined||t===null){t=""}if(t===this._reference.getAdapterId()){return this}else{return this._newInstance(this._reference.changeAdapterId(t))}}},{key:"ice_getEndpoints",value:function t(){return e.clone(this._reference.getEndpoints())}},{key:"ice_endpoints",value:function t(n){if(n===undefined||n===null){n=[]}if(e.equals(n,this._reference.getEndpoints())){return this}else{return this._newInstance(this._reference.changeEndpoints(n))}}},{key:"ice_getLocatorCacheTimeout",value:function e(){return this._reference.getLocatorCacheTimeout()}},{key:"ice_locatorCacheTimeout",value:function e(t){if(t<-1){throw new Error("invalid value passed to ice_locatorCacheTimeout: "+t)}if(t===this._reference.getLocatorCacheTimeout()){return this}else{return this._newInstance(this._reference.changeLocatorCacheTimeout(t))}}},{key:"ice_getInvocationTimeout",value:function e(){return this._reference.getInvocationTimeout()}},{key:"ice_invocationTimeout",value:function e(t){if(t<1&&t!==-1){throw new Error("invalid value passed to ice_invocationTimeout: "+t)}if(t===this._reference.getInvocationTimeout()){return this}else{return this._newInstance(this._reference.changeInvocationTimeout(t))}}},{key:"ice_isConnectionCached",value:function e(){return this._reference.getCacheConnection()}},{key:"ice_connectionCached",value:function e(t){if(t===this._reference.getCacheConnection()){return this}else{return this._newInstance(this._reference.changeCacheConnection(t))}}},{key:"ice_getEndpointSelection",value:function e(){return this._reference.getEndpointSelection()}},{key:"ice_endpointSelection",value:function e(t){if(t===this._reference.getEndpointSelection()){return this}else{return this._newInstance(this._reference.changeEndpointSelection(t))}}},{key:"ice_isSecure",value:function e(){return this._reference.getSecure()}},{key:"ice_secure",value:function e(t){if(t===this._reference.getSecure()){return this}else{return this._newInstance(this._reference.changeSecure(t))}}},{key:"ice_getEncodingVersion",value:function e(){return this._reference.getEncoding().clone()}},{key:"ice_encodingVersion",value:function e(t){if(t.equals(this._reference.getEncoding())){return this}else{return this._newInstance(this._reference.changeEncoding(t))}}},{key:"ice_isPreferSecure",value:function e(){return this._reference.getPreferSecure()}},{key:"ice_preferSecure",value:function e(t){if(t===this._reference.getPreferSecure()){return this}else{return this._newInstance(this._reference.changePreferSecure(t))}}},{key:"ice_getRouter",value:function e(){var t=this._reference.getRouterInfo();return t!==null?t.getRouter():null}},{key:"ice_router",value:function e(t){var n=this._reference.changeRouter(t);if(n.equals(this._reference)){return this}else{return this._newInstance(n)}}},{key:"ice_getLocator",value:function e(){var t=this._reference.getLocatorInfo();return t!==null?t.getLocator():null}},{key:"ice_locator",value:function e(t){var n=this._reference.changeLocator(t);if(n.equals(this._reference)){return this}else{return this._newInstance(n)}}},{key:"ice_isTwoway",value:function e(){return this._reference.getMode()===c.ModeTwoway}},{key:"ice_twoway",value:function e(){if(this._reference.getMode()===c.ModeTwoway){return this}else{return this._newInstance(this._reference.changeMode(c.ModeTwoway))}}},{key:"ice_isOneway",value:function e(){return this._reference.getMode()===c.ModeOneway}},{key:"ice_oneway",value:function e(){if(this._reference.getMode()===c.ModeOneway){return this}else{return this._newInstance(this._reference.changeMode(c.ModeOneway))}}},{key:"ice_isBatchOneway",value:function e(){return this._reference.getMode()===c.ModeBatchOneway}},{key:"ice_batchOneway",value:function e(){if(this._reference.getMode()===c.ModeBatchOneway){return this}else{return this._newInstance(this._reference.changeMode(c.ModeBatchOneway))}}},{key:"ice_isDatagram",value:function e(){return this._reference.getMode()===c.ModeDatagram}},{key:"ice_datagram",value:function e(){if(this._reference.getMode()===c.ModeDatagram){return this}else{return this._newInstance(this._reference.changeMode(c.ModeDatagram))}}},{key:"ice_isBatchDatagram",value:function e(){return this._reference.getMode()===c.ModeBatchDatagram}},{key:"ice_batchDatagram",value:function e(){if(this._reference.getMode()===c.ModeBatchDatagram){return this}else{return this._newInstance(this._reference.changeMode(c.ModeBatchDatagram))}}},{key:"ice_timeout",value:function e(t){if(t<1&&t!==-1){throw new Error("invalid value passed to ice_timeout: "+t)}var n=this._reference.changeTimeout(t);if(n.equals(this._reference)){return this}else{return this._newInstance(n)}}},{key:"ice_getTimeout",value:function e(){return this._reference.getTimeout()}},{key:"ice_fixed",value:function e(t){if(t===null){throw new Error("invalid null connection passed to ice_fixed")}if(!(t instanceof Ice.ConnectionI)){throw new Error("invalid connection passed to ice_fixed")}var n=this._reference.changeConnection(t);if(n.equals(this._reference)){return this}else{return this._newInstance(n)}}},{key:"ice_getConnectionId",value:function e(){return this._reference.getConnectionId()}},{key:"ice_connectionId",value:function e(t){var n=this._reference.changeConnectionId(t);if(n.equals(this._reference)){return this}else{return this._newInstance(n)}}},{key:"ice_getConnection",value:function e(){var t=new o(this,"ice_getConnection");try{t.invoke()}catch(e){t.abort(e)}return t}},{key:"ice_getCachedConnection",value:function e(){return this._requestHandler?this._requestHandler.getConnection():null}},{key:"ice_flushBatchRequests",value:function e(){var t=new a(this,"ice_flushBatchRequests");try{t.invoke()}catch(e){t.abort(e)}return t}},{key:"equals",value:function e(t){if(this===t){return true}if(t instanceof n){return this._reference.equals(t._reference)}return false}},{key:"_write",value:function e(t){this._reference.getIdentity()._write(t);this._reference.streamWrite(t)}},{key:"_getReference",value:function e(){return this._reference}},{key:"_copyFrom",value:function e(t){i.assert(this._reference===null);i.assert(this._requestHandler===null);this._reference=t._reference;this._requestHandler=t._requestHandler}},{key:"_handleException",value:function e(t,n,i,r,s,a){this._updateRequestHandler(n,null);if(t instanceof Ice.LocalException&&(!r||i==u.Nonmutating||i==u.Idempotent||t instanceof Ice.CloseConnectionException||t instanceof Ice.ObjectNotExistException)){try{return this._reference.getInstance().proxyFactory().checkRetryAfterException(t,this._reference,s,a)}catch(e){if(e instanceof Ice.CommunicatorDestroyedException){throw t}else{throw e}}}else{throw t}}},{key:"_checkAsyncTwowayOnly",value:function e(t){if(!this.ice_isTwoway()){throw new Ice.TwowayOnlyException(t)}}},{key:"_getRequestHandler",value:function e(){if(this._reference.getCacheConnection()){if(this._requestHandler){return this._requestHandler}}return this._reference.getRequestHandler(this)}},{key:"_getBatchRequestQueue",value:function e(){if(!this._batchRequestQueue){this._batchRequestQueue=this._reference.getBatchRequestQueue()}return this._batchRequestQueue}},{key:"_setRequestHandler",value:function e(t){if(this._reference.getCacheConnection()){if(!this._requestHandler){this._requestHandler=t}return this._requestHandler}return t}},{key:"_updateRequestHandler",value:function e(t,n){if(this._reference.getCacheConnection()&&t!==null){if(this._requestHandler&&this._requestHandler!==n){this._requestHandler=this._requestHandler.update(t,n)}}}},{key:"_setup",value:function e(t){i.assert(this._reference===null);this._reference=t}},{key:"_newInstance",value:function e(t){var n=new this.constructor;n._setup(t);return n}},{key:"ice_instanceof",value:function e(t){if(t){if(this instanceof t){return true}return this.constructor._instanceof(t)}return false}}],[{key:"_invoke",value:function e(t,n,i,r,a,o,c,u,l){var h=this;if(c!==null||u.length>0){t._checkAsyncTwowayOnly(n)}var f=new s(t,n,function(e){h._completed(e,c,u)});try{f.prepare(n,i,a);if(o===null){f.writeEmptyParams()}else{var _=f.startWriteParams(r);o.call(null,_,l);f.endWriteParams()}f.invoke()}catch(e){f.abort(e)}return f}},{key:"_completed",value:function e(t,n,i){if(!this._check(t,i)){return}try{if(n===null){t.readEmptyParams();t.resolve()}else{t.resolve(n(t))}}catch(e){this.dispatchLocalException(t,e);return}}},{key:"_check",value:function e(t,n){try{t.throwUserException()}catch(e){if(e instanceof Ice.UserException){if(n!==null){for(var i=0;i<n.length;++i){if(e instanceof n[i]){t.reject(e);return false}}}t.reject(new Ice.UnknownUserException(e.ice_id()));return false}else{t.reject(e);return false}}return true}},{key:"dispatchLocalException",value:function e(t,n){t.reject(n)}},{key:"checkedCast",value:function e(n,i,r){var s=this;var a=null;if(n===undefined||n===null){a=new t(null,"checkedCast",null,null,null);a.resolve(null)}else{if(i!==undefined){n=n.ice_facet(i)}a=new t(n.ice_getCommunicator(),"checkedCast",null,n,null);n.ice_isA(this.ice_staticId(),r).then(function(e){if(e){var t=new s;t._copyFrom(n);a.resolve(t)}else{a.resolve(null)}}).catch(function(e){if(e instanceof Ice.FacetNotExistException){a.resolve(null)}else{a.reject(e)}})}return a}},{key:"uncheckedCast",value:function e(t,n){var i=null;if(t!==undefined&&t!==null){i=new this;if(n!==undefined){t=t.ice_facet(n)}i._copyFrom(t)}return i}},{key:"write",value:function e(t,n){t.writeProxy(n)}},{key:"read",value:function e(t){return t.readProxy(this)}},{key:"writeOptional",value:function e(t,n,i){t.writeOptionalProxy(n,i)}},{key:"readOptional",value:function e(t,n){return t.readOptionalProxy(n,this)}},{key:"_instanceof",value:function e(t){if(t===this){return true}for(var n in this._implements){if(this._implements[n]._instanceof(t)){return true}}return false}},{key:"ice_staticId",value:function e(){return this._id}},{key:"minWireSize",get:function e(){return 2}},{key:"_implements",get:function e(){return[]}}]);return n}();Ice.ObjectPrx=l})();(function(){Object.defineProperty(Ice,"TCPEndpointType",{value:1});Object.defineProperty(Ice,"SSLEndpointType",{value:2});Object.defineProperty(Ice,"UDPEndpointType",{value:3});Object.defineProperty(Ice,"WSEndpointType",{value:4});Object.defineProperty(Ice,"WSSEndpointType",{value:5});Object.defineProperty(Ice,"BTEndpointType",{value:6});Object.defineProperty(Ice,"BTSEndpointType",{value:7});Object.defineProperty(Ice,"iAPEndpointType",{value:8});Object.defineProperty(Ice,"iAPSEndpointType",{value:9});Ice.EndpointInfo=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;_classCallCheck(this,e);this.underlying=t;this.timeout=n;this.compress=i}return e}();Ice.IPEndpointInfo=function(e){_inherits(t,e);function t(e,n,i){var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"";var s=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:"";_classCallCheck(this,t);var o=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i));o.host=r;o.port=s;o.sourceAddress=a;return o}return t}(Ice.EndpointInfo);Ice.TCPEndpointInfo=function(e){_inherits(t,e);function t(e,n,i,r,s,a){_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,r,s,a))}return t}(Ice.IPEndpointInfo);Ice.UDPEndpointInfo=function(e){_inherits(t,e);function t(e,n,i,r,s,a){var o=arguments.length>6&&arguments[6]!==undefined?arguments[6]:"";var c=arguments.length>7&&arguments[7]!==undefined?arguments[7]:0;_classCallCheck(this,t);var u=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,r,s,a));u.mcastInterface=o;u.mcastTtl=c;return u}return t}(Ice.IPEndpointInfo);Ice.WSEndpointInfo=function(e){_inherits(t,e);function t(e,n,i){var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"";_classCallCheck(this,t);var s=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i));s.resource=r;return s}return t}(Ice.EndpointInfo);Ice.OpaqueEndpointInfo=function(e){_inherits(t,e);function t(e,n,i){var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:new Ice.EncodingVersion;var s=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i));a.rawEncoding=r;a.rawBytes=s;return a}return t}(Ice.EndpointInfo)})();(function(){var e=Ice._ModuleRegistry;var t=[Ice.ByteHelper,Ice.BoolHelper,Ice.ShortHelper,Ice.IntHelper,Ice.LongHelper,Ice.FloatHelper,Ice.DoubleHelper,Ice.StringHelper,Ice.Value,Ice.ObjectPrx];function n(n){var i=n[0];var r=typeof i==="undefined"?"undefined":_typeof(i);if(r==="number"){i=t[n[0]]}else if(r==="string"){i=e.type(i)}return{type:i,isObject:n[1]===true,tag:n[2]}}function i(e,t){var i={};i.name=e;i.servantMethod=t[0]?t[0]:e;i.mode=t[1]?Ice.OperationMode.valueOf(t[1]):Ice.OperationMode.Normal;i.sendMode=t[2]?Ice.OperationMode.valueOf(t[2]):Ice.OperationMode.Normal;i.format=t[3]?Ice.FormatType.valueOf(t[3]):Ice.FormatType.DefaultFormat;var r=void 0;if(t[4]){r=n(t[4]);r.pos=0}i.returns=r;var s=[];var a=[];if(t[5]){for(var o=0;o<t[5].length;++o){var c=n(t[5][o]);c.pos=o;s.push(c);if(c.tag){a.push(c)}}}a.sort(function(e,t){return e.tag-t.tag});i.inParams=s;i.inParamsOpt=a;var u=[];var l=[];if(t[6]){var h=r?1:0;for(var f=0;f<t[6].length;++f){var _=n(t[6][f]);_.pos=f+h;u.push(_);if(_.tag){l.push(_)}}}if(r&&r.tag){l.push(r)}l.sort(function(e,t){return e.tag-t.tag});i.outParams=u;i.outParamsOpt=l;var d=[];if(t[7]){for(var p=0;p<t[7].length;++p){d.push(t[7][p])}}i.exceptions=d;i.sendsClasses=t[8]===true;i.returnsClasses=t[9]===true;return i}var r=function(){function e(t){_classCallCheck(this,e);this.raw=t;this.parsed={}}_createClass(e,[{key:"find",value:function e(t){var n=this.parsed[t];if(n===undefined&&this.raw[t]!==undefined){n=i(t,this.raw[t]);this.parsed[t]=n}return n}}]);return e}();function s(e,t,n,i,r,s,a){var o=function t(n,i){if(i){if(n.isObject){e.readOptionalValue(n.tag,function(e){return s[n.pos+a]=e},n.type)}else{s[n.pos+a]=n.type.readOptional(e,n.tag)}}else{if(n.isObject){e.readValue(function(e){return s[n.pos+a]=e},n.type)}else{s[n.pos+a]=n.type.read(e)}}};for(var c=0;c<n.length;++c){if(!n[c].tag){o(n[c],false)}}if(t){o(t,false)}for(var u=0;u<i.length;++u){o(i[u],true)}if(r){e.readPendingValues()}}function a(e,t,n,i,r,s){for(var a=0;a<i.length;++a){var o=i[a];if(!o.tag){o.type.write(e,t[o.pos])}}if(n){n.type.write(e,t[n.pos])}for(var c=0;c<r.length;++c){var u=r[c];u.type.writeOptional(e,u.tag,t[u.pos])}if(s){e.writePendingValues()}}function o(e,t,n,i){var r=e[t.servantMethod];if(r===undefined||typeof r!=="function"){throw new Ice.UnknownException("servant for identity "+i.adapter.getCommunicator().identityToString(i.id)+" does not define operation `"+t.servantMethod+"'")}var o=[];if(t.inParams.length===0){n.readEmptyParams()}else{var c=n.startReadParams();s(c,undefined,t.inParams,t.inParamsOpt,t.sendsClasses,o,0);n.endReadParams()}o.push(i);n.setFormat(t.format);var u=function e(i){var r=t.outParams.length+(t.returns?1:0);if(r>1&&!(i instanceof Array)){throw new Ice.MarshalException("operation `"+t.servantMethod+"' should return an array")}else if(r===1){i=[i]}if(t.returns===undefined&&t.outParams.length===0){if(i&&i.length>0){throw new Ice.MarshalException("operation `"+t.servantMethod+"' shouldn't return any value")}else{n.writeEmptyParams()}}else{var s=void 0;if(t.returns&&!t.returns.tag){s=t.returns}var o=n.startWriteParams();a(o,i,s,t.outParams,t.outParamsOpt,t.returnsClasses);n.endWriteParams()}};var l=r.apply(e,o);if(l instanceof Promise){return l.then(u)}else{u(l);return null}}function c(e,t,n){var i=void 0;for(var r=0;i===undefined&&r<e.length;++r){var s=e[r];i=s[t];if(i===undefined){if(n.indexOf(s)===-1){n.push(s)}if(s._iceImplements){i=c(s._iceImplements,t,n)}}}return i}var u="_iceD_";function l(e,t){var n=u+t;var i=e[n];var r=void 0;if(i===undefined){r=[];var s=e;while(s&&i===undefined){if(s._iceImplements){i=c(s._iceImplements,n,r)}s=Object.getPrototypeOf(s)}if(i!==undefined){e[n]=i}}if(i===undefined){var a=void 0;if(e._iceOps){a=e._iceOps.find(t)}var l=void 0;if(a===undefined){var h=Object.getPrototypeOf(e);while(a===undefined&&h){if(h._iceOps){if((a=h._iceOps.find(t))!==undefined){l=h}}h=Object.getPrototypeOf(h)}for(var f=0;a===undefined&&f<r.length;++f){var _=r[f];if(_._iceOps){if((a=_._iceOps.find(t))!==undefined){l=_}}}}if(a!==undefined){i=function e(t,n,i){return o(t,a,n,i)};e[n]=i;if(l){l[n]=i}}}return i}function h(e,t,n){var r=n[0]?n[0]:t;var o=null;e.prototype[r]=function(){var e=arguments;if(o===null){o=i(t,n)}var r=e[o.inParams.length];var c=null;if(o.inParams.length>0){c=function e(t,n){for(var i=0;i<o.inParams.length;++i){var r=o.inParams[i];var s=n[r.pos];if(!r.tag||s!==undefined){if(typeof r.type.validate==="function"){if(!r.type.validate(s)){throw new Ice.MarshalException("invalid value for argument "+(i+1)+" in operation `"+o.servantMethod+"'")}}}}a(t,n,undefined,o.inParams,o.inParamsOpt,o.sendsClasses)}}var u=null;if(o.returns||o.outParams.length>0){u=function e(t){var n=[];var i=t.startReadParams();var r=void 0;if(o.returns&&!o.returns.tag){r=o.returns}s(i,r,o.outParams,o.outParamsOpt,o.returnsClasses,n,0);t.endReadParams();return n.length==1?n[0]:n}}return Ice.ObjectPrx._invoke(this,o.name,o.sendMode,o.format,r,c,u,o.exceptions,Array.prototype.slice.call(e))}}var f=Ice.Slice;f.defineOperations=function(e,t,n,i,s){if(s){e._iceOps=new r(s)}e.prototype._iceDispatch=function(t,n){var i=l(e,n.operation);if(i===undefined||typeof i!=="function"){throw new Ice.OperationNotExistException(n.id,n.facet,n.operation)}return i.call(i,this,t,n)};e.prototype._iceMostDerivedType=function(){return e};Object.defineProperty(e,"_iceIds",{get:function e(){return n}});Object.defineProperty(e,"_iceId",{get:function e(){return n[i]}});e.ice_staticId=function(){return e._iceId};if(t!==undefined){if(s){for(var a in s){h(t,a,s[a])}}if(t._implements){for(var o in t._implements){var c=t._implements[o].prototype;for(var u in c){if(typeof c[u]=="function"&&t.prototype[u]===undefined){t.prototype[u]=c[u]}}}}Object.defineProperty(t,"_id",{get:function e(){return n[i]}})}};f.defineOperations(Ice.Object,Ice.ObjectPrx,["::Ice::Object"],0,{ice_ping:[,1,1,,,,,],ice_isA:[,1,1,,[1],[[7]],,],ice_id:[,1,1,,[7],,,],ice_ids:[,1,1,,["Ice.StringSeqHelper"],,,]})})();(function(){var e=Ice.HashMap;var t=Ice.Debug;var n=function e(t,n){_classCallCheck(this,e);this.time=t;this.endpoints=n};var i=function e(t,n){_classCallCheck(this,e);this.time=t;this.reference=n};var r=function(){function r(){_classCallCheck(this,r);this._adapterEndpointsTable=new Map;this._objectTable=new e(e.compareEquals)}_createClass(r,[{key:"clear",value:function e(){this._adapterEndpointsTable.clear();this._objectTable.clear()}},{key:"getAdapterEndpoints",value:function e(t,n,i){if(n===0){i.value=false;return null}var r=this._adapterEndpointsTable.get(t);if(r!==undefined){i.value=this.checkTTL(r.time,n);return r.endpoints}i.value=false;return null}},{key:"addAdapterEndpoints",value:function e(t,i){this._adapterEndpointsTable.set(t,new n(Date.now(),i))}},{key:"removeAdapterEndpoints",value:function e(t){var n=this._adapterEndpointsTable.get(t);this._adapterEndpointsTable.delete(t);return n!==undefined?n.endpoints:null}},{key:"getObjectReference",value:function e(t,n,i){if(n===0){i.value=false;return null}var r=this._objectTable.get(t);if(r!==undefined){i.value=this.checkTTL(r.time,n);return r.reference}i.value=false;return null}},{key:"addObjectReference",value:function e(t,n){this._objectTable.set(t,new i(Date.now(),n))}},{key:"removeObjectReference",value:function e(t){var n=this._objectTable.get(t);this._objectTable.delete(t);return n!==undefined?n.reference:null}},{key:"checkTTL",value:function e(n,i){t.assert(i!==0);if(i<0){return true}else{return Date.now()-n<=i*1e3}}}]);return r}();Ice.LocatorTable=r})();(function(){var e=function(){function e(){_classCallCheck(this,e)}_createClass(e,[{key:"toString",value:function e(){return this.protocol()+this.options()}},{key:"initWithOptions",value:function e(t){var n=[];var i="`"+this.protocol();for(var r=0;r<t.length;++r){if(t[r].search(/[ \t\n\r]+/)!==-1){i+=' "'+t[r]+'"'}else{i+=" "+t[r]}}i+="'";for(var s=0;s<t.length;){var a=t[s++];if(a.length<2||a.charAt(0)!="-"){n.push(a);continue}var o=null;if(s<t.length&&t[s].charAt(0)!="-"){o=t[s++]}if(!this.checkOption(a,o,i)){n.push(a);if(o!==null){n.push(o)}}}t.length=0;for(var c=0;c<n.length;c++){t.push(n[c])}}},{key:"equals",value:function t(n){if(!(n instanceof e)){return false}return this.compareTo(n)===0}},{key:"checkOption",value:function e(){return false}}]);return e}();Ice.EndpointI=e})();(function(){var e=function e(t,n){_classCallCheck(this,e);this.host=t;this.port=n};Ice.Address=e})();(function(){var e=Ice.Address;var t=Ice.HashUtil;var n=Ice.StringUtil;var i=Ice.EndpointParseException;var r=function(r){_inherits(s,r);function s(e,t,n,i,r){_classCallCheck(this,s);var a=_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this));a._instance=e;a._host=t===undefined?null:t;a._port=n===undefined?null:n;a._sourceAddr=i===undefined?null:i;a._connectionId=r===undefined?"":r;return a}_createClass(s,[{key:"streamWrite",value:function e(t){t.startEncapsulation();this.streamWriteImpl(t);t.endEncapsulation()}},{key:"getInfo",value:function e(){var t=new Ice.IPEndpointInfo;this.fillEndpointInfo(t);return t}},{key:"type",value:function e(){return this._instance.type()}},{key:"protocol",value:function e(){return this._instance.protocol()}},{key:"secure",value:function e(){return this._instance.secure()}},{key:"connectionId",value:function e(){return this._connectionId}},{key:"changeConnectionId",value:function e(t){if(t===this._connectionId){return this}else{return this.createEndpoint(this._host,this._port,t)}}},{key:"hashCode",value:function e(){if(this._hashCode===undefined){this._hashCode=this.hashInit(5381)}return this._hashCode}},{key:"options",value:function e(){var t="";if(this._host!==null&&this._host.length>0){t+=" -h ";var n=this._host.indexOf(":")!=-1;if(n){t+='"'}t+=this._host;if(n){t+='"'}}t+=" -p "+this._port;if(this._sourceAddr!==null&&this._sourceAddr.length>0){t+=" --sourceAddr "+this._sourceAddr}return t}},{key:"compareTo",value:function e(t){if(this===t){return 0}if(t===null){return 1}if(!(t instanceof s)){return this.type()<t.type()?-1:1}if(this._port<t._port){return-1}else if(t._port<this._port){return 1}if(this._host!=t._host){return this._host<t._host?-1:1}if(this._sourceAddr!=t._sourceAddr){return this._sourceAddr<t._sourceAddr?-1:1}if(this._connectionId!=t._connectionId){return this._connectionId<t._connectionId?-1:1}return 0}},{key:"getAddress",value:function t(){return new e(this._host,this._port)}},{key:"toConnectorString",value:function e(){return this._host+":"+this._port}},{key:"streamWriteImpl",value:function e(t){t.writeString(this._host);t.writeInt(this._port)}},{key:"hashInit",value:function e(n){n=t.addNumber(n,this.type());n=t.addString(n,this._host);n=t.addNumber(n,this._port);n=t.addString(n,this._sourceAddr);n=t.addString(n,this._connectionId);return n}},{key:"fillEndpointInfo",value:function e(t){var n=this;t.type=function(){return n.type()};t.datagram=function(){return n.datagram()};t.secure=function(){return n.secure()};t.host=this._host;t.port=this._port;t.sourceAddress=this._sourceAddr}},{key:"initWithOptions",value:function e(t,n){_get(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"initWithOptions",this).call(this,t);if(this._host===null||this._host.length===0){this._host=this._instance.defaultHost()}else if(this._host=="*"){if(n){this._host=""}else{throw new i("`-h *' not valid for proxy endpoint `"+this+"'")}}if(this._host===null){this._host=""}if(this._sourceAddr===null){if(!n){this._sourceAddr=this._instance.defaultSourceAddress()}}else if(n){throw new i("`--sourceAddress not valid for object adapter endpoint `"+this+"'")}}},{key:"initWithStream",value:function e(t){this._host=t.readString();this._port=t.readInt()}},{key:"checkOption",value:function e(t,r,s){if(t==="-h"){if(r===null){throw new i("no argument provided for -h option in endpoint "+s)}this._host=r}else if(t==="-p"){if(r===null){throw new i("no argument provided for -p option in endpoint "+s)}try{this._port=n.toInt(r)}catch(e){throw new i("invalid port value `"+r+"' in endpoint "+s)}if(this._port<0||this._port>65535){throw new i("port value `"+r+"' out of range in endpoint "+s)}}else if(t==="--sourceAddress"){if(r===null){throw new i("no argument provided for --sourceAddress option in endpoint "+s)}this._sourceAddr=r}else{return false}return true}}]);return s}(Ice.EndpointI);Ice.IPEndpointI=r})();(function(){IceSSL.EndpointInfo=function(e){_inherits(t,e);function t(e,n,i){_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i))}return t}(Ice.EndpointInfo)})();(function(){Ice.ToStringMode=Ice.Slice.defineEnum([["Unicode",0],["ASCII",1],["Compat",2]])})();(function(){Ice.TraceLevels=function(e){var t="Network";var n="Protocol";var i="Retry";var r="Locator";var s="Slicing";var a="Ice.Trace.";var o=e.getPropertyAsInt(a+t);var c=e.getPropertyAsInt(a+n);var u=e.getPropertyAsInt(a+i);var l=e.getPropertyAsInt(a+r);var h=e.getPropertyAsInt(a+s);e.getPropertyAsInt(a+"ThreadPool");return function(){function e(){_classCallCheck(this,e)}_createClass(e,null,[{key:"network",get:function e(){return o}},{key:"networkCat",get:function e(){return t}},{key:"protocol",get:function e(){return c}},{key:"protocolCat",get:function e(){return n}},{key:"retry",get:function e(){return u}},{key:"retryCat",get:function e(){return i}},{key:"location",get:function e(){return l}},{key:"locationCat",get:function e(){return r}},{key:"slicing",get:function e(){return h}},{key:"slicingCat",get:function e(){return s}}]);return e}()}})();(function(){var e=["::Ice::Object","::Ice::Router"];Ice.Router=function(e){_inherits(t,e);function t(){_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return t}(Ice.Object);Ice.RouterPrx=function(e){_inherits(t,e);function t(){_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return t}(Ice.ObjectPrx);t.defineOperations(Ice.Router,Ice.RouterPrx,e,1,{getClientProxy:[,2,1,,[9],,[[1,,1]],,,],getServerProxy:[,2,1,,[9],,,,,],addProxies:[,2,2,,["Ice.ObjectProxySeqHelper"],[["Ice.ObjectProxySeqHelper"]],,,,]});var n=["::Ice::Object","::Ice::RouterFinder"];Ice.RouterFinder=function(e){_inherits(t,e);function t(){_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return t}(Ice.Object);Ice.RouterFinderPrx=function(e){_inherits(t,e);function t(){_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return t}(Ice.ObjectPrx);t.defineOperations(Ice.RouterFinder,Ice.RouterFinderPrx,n,1,{getRouter:[,,,,["Ice.RouterPrx"],,,,,]})})();(function(){var e=["::Ice::Object","::Ice::Process"];Ice.Process=function(e){_inherits(t,e);function t(){_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return t}(Ice.Object);Ice.ProcessPrx=function(e){_inherits(t,e);function t(){_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return t}(Ice.ObjectPrx);t.defineOperations(Ice.Process,Ice.ProcessPrx,e,1,{shutdown:[,,,,,,,,,],writeMessage:[,,,,,[[7],[3]],,,,]})})();(function(){Ice.AdapterNotFoundException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}_createClass(t,[{key:"_mostDerivedType",value:function e(){return Ice.AdapterNotFoundException}}],[{key:"_parent",get:function e(){return Ice.UserException}},{key:"_id",get:function e(){return"::Ice::AdapterNotFoundException"}}]);return t}(Ice.UserException);Ice.InvalidReplicaGroupIdException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}_createClass(t,[{key:"_mostDerivedType",value:function e(){return Ice.InvalidReplicaGroupIdException}}],[{key:"_parent",get:function e(){return Ice.UserException}},{key:"_id",get:function e(){return"::Ice::InvalidReplicaGroupIdException"}}]);return t}(Ice.UserException);Ice.AdapterAlreadyActiveException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}_createClass(t,[{key:"_mostDerivedType",value:function e(){return Ice.AdapterAlreadyActiveException}}],[{key:"_parent",get:function e(){return Ice.UserException}},{key:"_id",get:function e(){return"::Ice::AdapterAlreadyActiveException"}}]);return t}(Ice.UserException);Ice.ObjectNotFoundException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}_createClass(t,[{key:"_mostDerivedType",value:function e(){return Ice.ObjectNotFoundException}}],[{key:"_parent",get:function e(){return Ice.UserException}},{key:"_id",get:function e(){return"::Ice::ObjectNotFoundException"}}]);return t}(Ice.UserException);Ice.ServerNotFoundException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}_createClass(t,[{key:"_mostDerivedType",value:function e(){return Ice.ServerNotFoundException}}],[{key:"_parent",get:function e(){return Ice.UserException}},{key:"_id",get:function e(){return"::Ice::ServerNotFoundException"}}]);return t}(Ice.UserException);var e=["::Ice::Locator","::Ice::Object"];Ice.Locator=function(e){_inherits(t,e);function t(){_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return t}(Ice.Object);Ice.LocatorPrx=function(e){_inherits(t,e);function t(){_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return t}(Ice.ObjectPrx);t.defineOperations(Ice.Locator,Ice.LocatorPrx,e,0,{findObjectById:[,2,1,,[9],[[Ice.Identity]],,[Ice.ObjectNotFoundException],,],findAdapterById:[,2,1,,[9],[[7]],,[Ice.AdapterNotFoundException],,],getRegistry:[,2,1,,["Ice.LocatorRegistryPrx"],,,,,]});var n=["::Ice::LocatorRegistry","::Ice::Object"];Ice.LocatorRegistry=function(e){_inherits(t,e);function t(){_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return t}(Ice.Object);Ice.LocatorRegistryPrx=function(e){_inherits(t,e);function t(){_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return t}(Ice.ObjectPrx);t.defineOperations(Ice.LocatorRegistry,Ice.LocatorRegistryPrx,n,0,{setAdapterDirectProxy:[,2,2,,,[[7],[9]],,[Ice.AdapterAlreadyActiveException,Ice.AdapterNotFoundException],,],setReplicatedAdapterDirectProxy:[,2,2,,,[[7],[7],[9]],,[Ice.AdapterAlreadyActiveException,Ice.AdapterNotFoundException,Ice.InvalidReplicaGroupIdException],,],setServerProcessProxy:[,2,2,,,[[7],["Ice.ProcessPrx"]],,[Ice.ServerNotFoundException],,]});var i=["::Ice::LocatorFinder","::Ice::Object"];Ice.LocatorFinder=function(e){_inherits(t,e);function t(){_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return t}(Ice.Object);Ice.LocatorFinderPrx=function(e){_inherits(t,e);function t(){_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return t}(Ice.ObjectPrx);t.defineOperations(Ice.LocatorFinder,Ice.LocatorFinderPrx,i,0,{getLocator:[,,,,["Ice.LocatorPrx"],,,,,]})})();(function(){Ice.CompressBatch=t.defineEnum([["Yes",0],["No",1],["BasedOnProxy",2]]);Ice.ConnectionInfo=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"";_classCallCheck(this,e);this.underlying=t;this.incoming=n;this.adapterName=i;this.connectionId=r}return e}();Ice.ACMClose=t.defineEnum([["CloseOff",0],["CloseOnIdle",1],["CloseOnInvocation",2],["CloseOnInvocationAndIdle",3],["CloseOnIdleForceful",4]]);Ice.ACMHeartbeat=t.defineEnum([["HeartbeatOff",0],["HeartbeatOnDispatch",1],["HeartbeatOnIdle",2],["HeartbeatAlways",3]]);Ice.ACM=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Ice.ACMClose.CloseOff;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:Ice.ACMHeartbeat.HeartbeatOff;_classCallCheck(this,e);this.timeout=t;this.close=n;this.heartbeat=i}return e}();t.defineStruct(Ice.ACM,true,true);Ice.ConnectionClose=t.defineEnum([["Forcefully",0],["Gracefully",1],["GracefullyWithWait",2]]);Ice.IPConnectionInfo=function(e){_inherits(t,e);function t(e,n,i,r){var s=arguments.length>4&&arguments[4]!==undefined?arguments[4]:"";var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:-1;var o=arguments.length>6&&arguments[6]!==undefined?arguments[6]:"";var c=arguments.length>7&&arguments[7]!==undefined?arguments[7]:-1;_classCallCheck(this,t);var u=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,r));u.localAddress=s;u.localPort=a;u.remoteAddress=o;u.remotePort=c;return u}return t}(Ice.ConnectionInfo);Ice.TCPConnectionInfo=function(e){_inherits(t,e);function t(e,n,i,r,s,a,o,c){var u=arguments.length>8&&arguments[8]!==undefined?arguments[8]:0;var l=arguments.length>9&&arguments[9]!==undefined?arguments[9]:0;_classCallCheck(this,t);var h=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,r,s,a,o,c));h.rcvSize=u;h.sndSize=l;return h}return t}(Ice.IPConnectionInfo);Ice.UDPConnectionInfo=function(e){_inherits(t,e);function t(e,n,i,r,s,a,o,c){var u=arguments.length>8&&arguments[8]!==undefined?arguments[8]:"";var l=arguments.length>9&&arguments[9]!==undefined?arguments[9]:-1;var h=arguments.length>10&&arguments[10]!==undefined?arguments[10]:0;var f=arguments.length>11&&arguments[11]!==undefined?arguments[11]:0;_classCallCheck(this,t);var _=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,r,s,a,o,c));_.mcastAddress=u;_.mcastPort=l;_.rcvSize=h;_.sndSize=f;return _}return t}(Ice.IPConnectionInfo);t.defineDictionary(Ice,"HeaderDict","HeaderDictHelper","Ice.StringHelper","Ice.StringHelper",false,undefined,undefined);Ice.WSConnectionInfo=function(e){_inherits(t,e);function t(e,n,i,r){var s=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,r));a.headers=s;return a}return t}(Ice.ConnectionInfo)})();(function(){var e=Ice.AlreadyRegisteredException;var t=function(){function t(){_classCallCheck(this,t);this._factoryMap=new Map}_createClass(t,[{key:"add",value:function t(n,i){if(this._factoryMap.has(i)){throw new e("value factory",i)}this._factoryMap.set(i,n)}},{key:"find",value:function e(t){return this._factoryMap.get(t)}},{key:"destroy",value:function e(){this._factoryMap=new Map}}]);return t}();Ice.ValueFactoryManagerI=t})();(function(){IceSSL.ConnectionInfo=function(e){_inherits(t,e);function t(e,n,i,r){var s=arguments.length>4&&arguments[4]!==undefined?arguments[4]:"";var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null;var o=arguments.length>6&&arguments[6]!==undefined?arguments[6]:false;_classCallCheck(this,t);var c=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,r));c.cipher=s;c.certs=a;c.verified=o;return c}return t}(Ice.ConnectionInfo)})();(function(){var e=Ice._ModuleRegistry.module("IceSSL");var t=navigator.userAgent.indexOf("Edge/")===-1&&navigator.userAgent.indexOf("Chrome/")!==-1;var n=/^((?!chrome).)*safari/i.test(navigator.userAgent);var i=Ice.Debug;var r=Ice.SocketOperation;var s=Ice.Timer;var a=0;var o=1;var c=2;var u=3;var l=4;var h=function(){function h(e){_classCallCheck(this,h);this._readBuffers=[];this._readPosition=0;this._maxSendPacketSize=e.properties().getPropertyAsIntWithDefault("Ice.TCP.SndSize",512*1024);this._writeReadyTimeout=0}_createClass(h,[{key:"writeReadyTimeout",value:function e(){var t=Math.round(this._writeReadyTimeout);this._writeReadyTimeout+=this._writeReadyTimeout>=5?5:.2;return Math.min(t,25)}},{key:"setCallbacks",value:function e(t,n,i){this._connectedCallback=t;this._bytesAvailableCallback=n;this._bytesWrittenCallback=i}},{key:"initialize",value:function e(t,n){var s=this;try{if(this._exception){throw this._exception}if(this._state===a){this._state=o;this._fd=new WebSocket(this._url,"ice.zeroc.com");this._fd.binaryType="arraybuffer";this._fd.onopen=function(e){return s.socketConnected(e)};this._fd.onmessage=function(e){return s.socketBytesAvailable(e.data)};this._fd.onclose=function(e){return s.socketClosed(e)};return r.Connect}else if(this._state===o){this._desc=f(this._addr);this._state=c}}catch(e){if(!this._exception){this._exception=_(this._state,e)}throw this._exception}i.assert(this._state===c);return r.None}},{key:"register",value:function e(){var t=this;this._registered=true;if(this._hasBytesAvailable||this._exception){this._hasBytesAvailable=false;s.setTimeout(function(){return t._bytesAvailableCallback()},0)}}},{key:"unregister",value:function e(){this._registered=false}},{key:"close",value:function e(){if(this._fd===null){i.assert(this._exception);return}if((t||n)&&this._fd.readyState===WebSocket.CONNECTING){this._state=u;return}i.assert(this._fd!==null);try{this._state=l;this._fd.close()}catch(e){throw _(this._state,e)}finally{this._fd=null}}},{key:"write",value:function e(t){var r=this;if(this._exception){throw this._exception}else if(t.remaining===0){return true}i.assert(this._fd);var a=function e(){if(r._fd){var n=r._maxSendPacketSize>0&&t.remaining>r._maxSendPacketSize?r._maxSendPacketSize:t.remaining;if(r._fd.bufferedAmount+n<=r._maxSendPacketSize){r._bytesWrittenCallback(0,0)}else{s.setTimeout(e,r.writeReadyTimeout())}}};while(true){var o=this._maxSendPacketSize>0&&t.remaining>this._maxSendPacketSize?this._maxSendPacketSize:t.remaining;if(t.remaining===0){break}i.assert(o>0);if(this._fd.bufferedAmount+o>this._maxSendPacketSize){s.setTimeout(a,this.writeReadyTimeout());return false}this._writeReadyTimeout=0;var c=t.b.slice(t.position,t.position+o);this._fd.send(c);t.position+=o;if(n&&t.remaining>0){s.setTimeout(a,this.writeReadyTimeout());return false}}return true}},{key:"read",value:function e(t,n){if(this._exception){throw this._exception}n.value=false;if(this._readBuffers.length===0){return false}var r=this._readBuffers[0].byteLength-this._readPosition;i.assert(r>0);while(t.remaining>0){if(r>t.remaining){r=t.remaining}new Uint8Array(t.b).set(new Uint8Array(this._readBuffers[0],this._readPosition,r),t.position);t.position+=r;this._readPosition+=r;if(this._readPosition===this._readBuffers[0].byteLength){this._readPosition=0;this._readBuffers.shift();if(this._readBuffers.length===0){break}else{r=this._readBuffers[0].byteLength}}}n.value=this._readBuffers.byteLength>0;return t.remaining===0}},{key:"type",value:function e(){return this._secure?"wss":"ws"}},{key:"getInfo",value:function t(){i.assert(this._fd!==null);var n=new Ice.WSConnectionInfo;var r=new Ice.TCPConnectionInfo;r.localAddress="";r.localPort=-1;r.remoteAddress=this._addr.host;r.remotePort=this._addr.port;n.underlying=this._secure?new e.ConnectionInfo(r,r.timeout,r.compress):r;n.rcvSize=-1;n.sndSize=this._maxSendPacketSize;n.headers={};return n}},{key:"checkSendSize",value:function e(t){}},{key:"setBufferSize",value:function e(t,n){this._maxSendPacketSize=n}},{key:"toString",value:function e(){return this._desc}},{key:"socketConnected",value:function e(t){if(this._state==u){this.close();return}i.assert(this._connectedCallback!==null);this._connectedCallback()}},{key:"socketBytesAvailable",value:function e(t){i.assert(this._bytesAvailableCallback!==null);if(t.byteLength>0){this._readBuffers.push(t);if(this._registered){this._bytesAvailableCallback()}else if(!this._hasBytesAvailable){this._hasBytesAvailable=true}}}},{key:"socketClosed",value:function e(t){if(this._state==u){this.close();return}this._exception=_(this._state,t);if(this._state<c){this._connectedCallback()}else if(this._registered){this._bytesAvailableCallback()}}}],[{key:"createOutgoing",value:function e(t,n,i,r){var s=new h(t);var o=n?"wss":"ws";o+="://"+i.host;if(i.port!==80){o+=":"+i.port}o+=r?r:"/";s._url=o;s._fd=null;s._addr=i;s._desc="local address = <not available>\nremote address = "+i.host+":"+i.port;s._state=a;s._secure=n;s._exception=null;return s}}]);return h}();function f(e){return"local address = <not available>\nremote address = "+e.host+":"+e.port}function _(e,t){if(e<c){return new Ice.ConnectFailedException(t.code,t)}else{if(t.code===1e3||t.code===1006){return new Ice.ConnectionLostException}return new Ice.SocketException(t.code,t)}}Ice.WSTransceiver=h})();(function(){var e=Ice.OutputStream;var t=Ice.Current;var n=Ice.Debug;var i=Ice.Context;var r=Ice.Identity;var s=Ice.Protocol;var a=Ice.StringUtil;var o=function(){function o(e,n,i,s,a){_classCallCheck(this,o);this._instance=e;this._response=s;this._connection=n;this._format=Ice.FormatType.DefaultFormat;this._current=new t;this._current.id=new r;this._current.adapter=i;this._current.con=this._connection;this._current.requestId=a;this._servant=null;this._locator=null;this._cookie={value:null};this._os=null;this._is=null}_createClass(o,[{key:"startWriteParams",value:function t(){if(!this._response){throw new Ice.MarshalException("can't marshal out parameters for oneway dispatch")}n.assert(this._current.encoding!==null);this._os=new e(this._instance,s.currentProtocolEncoding);this._os.writeBlob(s.replyHdr);this._os.writeInt(this._current.requestId);this._os.writeByte(0);this._os.startEncapsulation(this._current.encoding,this._format);return this._os}},{key:"endWriteParams",value:function e(){if(this._response){this._os.endEncapsulation()}}},{key:"writeEmptyParams",value:function t(){if(this._response){n.assert(this._current.encoding!==null);this._os=new e(this._instance,s.currentProtocolEncoding);this._os.writeBlob(s.replyHdr);this._os.writeInt(this._current.requestId);this._os.writeByte(s.replyOK);this._os.writeEmptyEncapsulation(this._current.encoding)}}},{key:"writeParamEncaps",value:function t(i,r){if(this._response){n.assert(this._current.encoding!==null);this._os=new e(this._instance,s.currentProtocolEncoding);this._os.writeBlob(s.replyHdr);this._os.writeInt(this._current.requestId);this._os.writeByte(r?s.replyOK:s.replyUserException);if(i===null||i.length===0){this._os.writeEmptyEncapsulation(this._current.encoding)}else{this._os.writeEncapsulation(i)}}}},{key:"setFormat",value:function e(t){this._format=t}},{key:"warning",value:function e(t){n.assert(this._instance!==null);var i=[];i.push("dispatch exception:");i.push("\nidentity: "+Ice.identityToString(this._current.id,this._instance.toStringMode()));i.push("\nfacet: "+a.escapeString(this._current.facet,"",this._instance.toStringMode()));i.push("\noperation: "+this._current.operation);if(this._connection!==null){try{for(var r=this._connection.getInfo();r;r=r.underlying){if(r instanceof Ice.IPConnectionInfo){i.push("\nremote host: "+r.remoteAddress+" remote port: "+r.remotePort)}}}catch(e){}}if(t.stack){i.push("\n");i.push(t.stack)}this._instance.initializationData().logger.warning(i.join(""))}},{key:"handleException",value:function t(i,r){n.assert(this._connection!==null);var a=this._instance.initializationData().properties;if(i instanceof Ice.RequestFailedException){if(i.id===null){i.id=this._current.id}if(i.facet===null){i.facet=this._current.facet}if(i.operation===null||i.operation.length===0){i.operation=this._current.operation}if(a.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>1){this.warning(i)}if(this._response){this._os=new e(this._instance,s.currentProtocolEncoding);this._os.writeBlob(s.replyHdr);this._os.writeInt(this._current.requestId);if(i instanceof Ice.ObjectNotExistException){this._os.writeByte(s.replyObjectNotExist)}else if(i instanceof Ice.FacetNotExistException){this._os.writeByte(s.replyFacetNotExist)}else if(i instanceof Ice.OperationNotExistException){this._os.writeByte(s.replyOperationNotExist)}else{n.assert(false)}i.id._write(this._os);if(i.facet===null||i.facet.length===0){Ice.StringSeqHelper.write(this._os,null)}else{Ice.StringSeqHelper.write(this._os,[i.facet])}this._os.writeString(i.operation);this._connection.sendResponse(this._os)}else{this._connection.sendNoResponse()}}else if(i instanceof Ice.UnknownLocalException){if(a.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0){this.warning(i)}if(this._response){this._os=new e(this._instance,s.currentProtocolEncoding);this._os.writeBlob(s.replyHdr);this._os.writeInt(this._current.requestId);this._os.writeByte(s.replyUnknownLocalException);this._os.writeString(i.unknown);this._connection.sendResponse(this._os)}else{this._connection.sendNoResponse()}}else if(i instanceof Ice.UnknownUserException){if(a.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0){this.warning(i)}if(this._response){this._os=new e(this._instance,s.currentProtocolEncoding);this._os.writeBlob(s.replyHdr);this._os.writeInt(this._current.requestId);this._os.writeByte(s.replyUnknownUserException);this._os.writeString(i.unknown);this._connection.sendResponse(this._os)}else{this._connection.sendNoResponse()}}else if(i instanceof Ice.UnknownException){if(a.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0){this.warning(i)}if(this._response){this._os=new e(this._instance,s.currentProtocolEncoding);this._os.writeBlob(s.replyHdr);this._os.writeInt(this._current.requestId);this._os.writeByte(s.replyUnknownException);this._os.writeString(i.unknown);this._connection.sendResponse(this._os)}else{this._connection.sendNoResponse()}}else if(i instanceof Ice.LocalException){if(a.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0){this.warning(i)}if(this._response){this._os=new e(this._instance,s.currentProtocolEncoding);this._os.writeBlob(s.replyHdr);this._os.writeInt(this._current.requestId);this._os.writeByte(s.replyUnknownLocalException);var o=[i.ice_id()];if(i.stack){o.push("\n");o.push(i.stack)}this._os.writeString(o.join(""));this._connection.sendResponse(this._os)}else{this._connection.sendNoResponse()}}else if(i instanceof Ice.UserException){if(this._response){this._os=new e(this._instance,s.currentProtocolEncoding);this._os.writeBlob(s.replyHdr);this._os.writeInt(this._current.requestId);this._os.writeByte(s.replyUserException);this._os.startEncapsulation(this._current.encoding,this._format);this._os.writeUserException(i);this._os.endEncapsulation();this._connection.sendResponse(this._os)}else{this._connection.sendNoResponse()}}else{if(a.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0){this.warning(i)}if(this._response){this._os=new e(this._instance,s.currentProtocolEncoding);this._os.writeBlob(s.replyHdr);this._os.writeInt(this._current.requestId);this._os.writeByte(s.replyUnknownException);this._os.writeString(i.toString()+(i.stack?"\n"+i.stack:""));this._connection.sendResponse(this._os)}else{this._connection.sendNoResponse()}if(!r){throw new Ice.ServantError(i)}}this._connection=null}},{key:"invoke",value:function e(t,r){var s=this;this._is=r;this._current.id._read(this._is);var a=Ice.StringSeqHelper.read(this._is);if(a.length>0){if(a.length>1){throw new Ice.MarshalException}this._current.facet=a[0]}else{this._current.facet=""}this._current.operation=this._is.readString();this._current.mode=Ice.OperationMode.valueOf(this._is.readByte());this._current.ctx=new i;var o=this._is.readSize();while(o-- >0){this._current.ctx.set(this._is.readString(),this._is.readString())}if(t!==null){this._servant=t.findServant(this._current.id,this._current.facet);if(this._servant===null){this._locator=t.findServantLocator(this._current.id.category);if(this._locator===null&&this._current.id.category.length>0){this._locator=t.findServantLocator("")}if(this._locator!==null){try{this._servant=this._locator.locate(this._current,this._cookie)}catch(e){this.skipReadParams();this.handleException(e,false);return}}}}if(this._servant===null){try{if(t!==null&&t.hasServant(this._current.id)){throw new Ice.FacetNotExistException(this._current.id,this._current.facet,this._current.operation)}else{throw new Ice.ObjectNotExistException(this._current.id,this._current.facet,this._current.operation)}}catch(e){this.skipReadParams();this.handleException(e,false);return}}try{n.assert(this._servant!==null);var c=this._servant._iceDispatch(this,this._current);if(c!==null){c.then(function(){return s.completed(null,true)},function(e){return s.completed(e,true)});return}n.assert(!this._response||this._os!==null);this.completed(null,false)}catch(e){this.completed(e,false)}}},{key:"startReadParams",value:function e(){this._current.encoding=this._is.startEncapsulation();return this._is}},{key:"endReadParams",value:function e(){this._is.endEncapsulation()}},{key:"readEmptyParams",value:function e(){this._current.encoding=this._is.skipEmptyEncapsulation()}},{key:"readParamEncaps",value:function e(){this._current.encoding=new Ice.EncodingVersion;return this._is.readEncapsulation(this._current.encoding)}},{key:"skipReadParams",value:function e(){this._current.encoding=this._is.skipEncapsulation()}},{key:"completed",value:function e(t,i){try{if(this._locator!==null){n.assert(this._locator!==null&&this._servant!==null);try{this._locator.finished(this._current,this._servant,this._cookie.value)}catch(e){this.handleException(e,i);return}}n.assert(this._connection!==null);if(t!==null){this.handleException(t,i)}else if(this._response){this._connection.sendResponse(this._os)}else{this._connection.sendNoResponse()}}catch(e){if(e instanceof Ice.LocalException){this._connection.invokeException(e,1)}else{throw e}}this._connection=null}}]);return o}();Ice.IncomingAsync=o})();(function(){var e=Ice.Debug;var t=Ice.HashUtil;var n=Ice.StringUtil;var i=typeof Ice.TcpTransceiver!=="undefined"?Ice.TcpTransceiver:null;var r=function(r){_inherits(s,r);function s(e,t,n,i,r,a,o){_classCallCheck(this,s);var c=_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e,t,n,i,a));c._timeout=r===undefined?e?e.defaultTimeout():undefined:r;c._compress=o===undefined?false:o;return c}_createClass(s,[{key:"getInfo",value:function e(){var t=new Ice.TCPEndpointInfo;this.fillEndpointInfo(t);return this.secure()?new IceSSL.EndpointInfo(t,t.timeout,t.compress):t}},{key:"timeout",value:function e(){return this._timeout}},{key:"changeTimeout",value:function e(t){if(t===this._timeout){return this}else{return new s(this._instance,this._host,this._port,this._sourceAddr,t,this._connectionId,this._compress)}}},{key:"changeConnectionId",value:function e(t){if(t===this._connectionId){return this}else{return new s(this._instance,this._host,this._port,this._sourceAddr,this._timeout,t,this._compress)}}},{key:"compress",value:function e(){return this._compress}},{key:"changeCompress",value:function e(t){if(t===this._compress){return this}else{return new s(this._instance,this._host,this._port,this._sourceAddr,this._timeout,this._connectionId,t)}}},{key:"datagram",value:function e(){return false}},{key:"connectable",value:function e(){return i!==null&&!this.secure()}},{key:"connect",value:function t(){e.assert(!this.secure());return i.createOutgoing(this._instance,this.getAddress(),this._sourceAddr)}},{key:"options",value:function e(){var t=_get(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"options",this).call(this);if(this._timeout==-1){t+=" -t infinite"}else{t+=" -t "+this._timeout}if(this._compress){t+=" -z"}return t}},{key:"compareTo",value:function e(t){if(this===t){return 0}if(t===null){return 1}if(!(t instanceof s)){return this.type()<t.type()?-1:1}if(this._timeout<t._timeout){return-1}else if(t._timeout<this._timeout){return 1}if(!this._compress&&t._compress){return-1}else if(!t._compress&&this._compress){return 1}return _get(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"compareTo",this).call(this,t)}},{key:"streamWriteImpl",value:function e(t){_get(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"streamWriteImpl",this).call(this,t);t.writeInt(this._timeout);t.writeBool(this._compress)}},{key:"hashInit",value:function e(n){n=_get(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"hashInit",this).call(this,n);n=t.addNumber(n,this._timeout);n=t.addBoolean(n,this._compress);return n}},{key:"fillEndpointInfo",value:function e(t){_get(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"fillEndpointInfo",this).call(this,t);t.timeout=this._timeout;t.compress=this._compress}},{key:"initWithStream",value:function e(t){_get(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"initWithStream",this).call(this,t);this._timeout=t.readInt();this._compress=t.readBool()}},{key:"checkOption",value:function e(t,i,r){if(_get(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"checkOption",this).call(this,t,i,r)){return true}if(t==="-t"){if(i===null){throw new Ice.EndpointParseException("no argument provided for -t option in endpoint "+r)}if(i=="infinite"){this._timeout=-1}else{var a=false;try{this._timeout=n.toInt(i)}catch(e){a=true}if(a||this._timeout<1){throw new Ice.EndpointParseException("invalid timeout value `"+i+"' in endpoint "+r)}}}else if(t==="-z"){if(i!==null){throw new Ice.EndpointParseException("unexpected argument `"+i+"' provided for -z option in "+r)}this._compress=true}else{return false}return true}},{key:"createEndpoint",value:function e(t,n,i){return new s(this._instance,t,n,this._sourceAddr,this._timeout,i,this._compress)}}]);return s}(Ice.IPEndpointI);Ice.TcpEndpointI=r})();(function(){var e=Ice.HashMap;var t=Ice.RouterInfo;var n=Ice.RouterPrx;var i=function(){function i(){_classCallCheck(this,i);this._table=new e(e.compareEquals)}_createClass(i,[{key:"destroy",value:function e(){var t=true;var n=false;var i=undefined;try{for(var r=this._table.values()[Symbol.iterator](),s;!(t=(s=r.next()).done);t=true){var a=s.value;a.destroy()}}catch(e){n=true;i=e}finally{try{if(!t&&r.return){r.return()}}finally{if(n){throw i}}}this._table.clear()}},{key:"find",value:function e(i){if(i===null){return null}var r=n.uncheckedCast(i.ice_router(null));var s=this._table.get(r);if(s===undefined){s=new t(r);this._table.set(r,s)}return s}},{key:"erase",value:function e(t){var i=null;if(t!==null){var r=n.uncheckedCast(t.ice_router(null));i=this._table.get(r);this._table.delete(r)}return i}}]);return i}();Ice.RouterManager=i})();(function(){var e=Ice.HashUtil;var t=Ice.EndpointI;var n=function(t){_inherits(n,t);function n(e,t,i){_classCallCheck(this,n);var r=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));r._instance=e;r._delegate=t;r._resource=i||"/";return r}_createClass(n,[{key:"getInfo",value:function e(){var t=this;var n=new Ice.WSEndpointInfo;n.type=function(){return t.type()};n.datagram=function(){return t.datagram()};n.secure=function(){return t.secure()};n.resource=this._resource;n.underlying=this._delegate.getInfo();n.timeout=n.underlying.timeout;n.compress=n.underlying.compress;return n}},{key:"type",value:function e(){return this._delegate.type()}},{key:"protocol",value:function e(){return this._delegate.protocol()}},{key:"streamWrite",value:function e(t){t.startEncapsulation();this._delegate.streamWriteImpl(t);t.writeString(this._resource);t.endEncapsulation()}},{key:"timeout",value:function e(){return this._delegate.timeout()}},{key:"changeTimeout",value:function e(t){if(t===this._delegate.timeout()){return this}else{return new n(this._instance,this._delegate.changeTimeout(t),this._resource)}}},{key:"changeConnectionId",value:function e(t){if(t===this._delegate.connectionId()){return this}else{return new n(this._instance,this._delegate.changeConnectionId(t),this._resource)}}},{key:"compress",value:function e(){return this._delegate.compress()}},{key:"changeCompress",value:function e(t){if(t===this._delegate.compress()){return this}else{return new n(this._instance,this._delegate.changeCompress(t),this._resource)}}},{key:"datagram",value:function e(){return this._delegate.datagram()}},{key:"secure",value:function e(){return this._delegate.secure()}},{key:"connect",value:function e(){return Ice.WSTransceiver.createOutgoing(this._instance,this._delegate.secure(),this._delegate.getAddress(),this._resource)}},{key:"hashCode",value:function t(){if(this._hashCode===undefined){this._hashCode=this._delegate.hashCode();this._hashCode=e.addString(this._hashCode,this._resource)}return this._hashCode}},{key:"compareTo",value:function e(t){if(this===t){return 0}if(t===null){return 1}if(!(t instanceof n)){return this.type()<t.type()?-1:1}var i=this._delegate.compareTo(t._delegate);if(i!==0){return i}if(this._resource!==t._resource){return this._resource<t._resource?-1:1}return 0}},{key:"options",value:function e(){var t=this._delegate.options();if(this._resource!==null&&this._resource.length>0){t+=" -r ";t+=this._resource.indexOf(":")!==-1?'"'+this._resource+'"':this._resource}return t}},{key:"toConnectorString",value:function e(){return this._delegate.toConnectorString()}},{key:"initWithStream",value:function e(t){this._resource=t.readString()}},{key:"checkOption",value:function e(t,n,i){if(t==="-r"){if(n===null){throw new Ice.EndpointParseException("no argument provided for -r option in endpoint "+i)}this._resource=n}else{return false}return true}}]);return n}(t);if(typeof Ice.WSTransceiver!=="undefined"){n.prototype.connectable=function(){return true}}else{n.prototype.connectable=function(){return false}}Ice.WSEndpoint=n})();(function(){var e=Ice.Base64;var t=Ice.Debug;var n=Ice.HashUtil;var i=Ice.StringUtil;var r=Ice.EndpointParseException;var s=function(s){_inherits(o,s);function o(e){_classCallCheck(this,o);var t=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));t._rawEncoding=Ice.Encoding_1_0;t._type=e===undefined?-1:e;t._rawBytes=null;return t}_createClass(o,[{key:"streamWrite",value:function e(t){t.startEncapsulation(this._rawEncoding,Ice.FormatType.DefaultFormat);t.writeBlob(this._rawBytes);t.endEncapsulation()}},{key:"getInfo",value:function e(){return new a(null,-1,false,this._rawEncoding,this._rawBytes,this._type)}},{key:"type",value:function e(){return this._type}},{key:"protocol",value:function e(){return"opaque"}},{key:"timeout",value:function e(){return-1}},{key:"changeTimeout",value:function e(t){return this}},{key:"changeConnectionId",value:function e(t){return this}},{key:"compress",value:function e(){return false}},{key:"changeCompress",value:function e(t){return this}},{key:"datagram",value:function e(){return false}},{key:"secure",value:function e(){return false}},{key:"rawBytes",value:function e(){return this._rawBytes}},{key:"transceiver",value:function e(t){t.value=null;return null}},{key:"acceptor",value:function e(t,n){t.value=this;return null}},{key:"connect",value:function e(){return null}},{key:"hashCode",value:function e(){if(this._hashCode===undefined){var t=5381;t=n.addNumber(t,this._type);t=n.addHashable(t,this._rawEncoding);t=n.addArray(t,this._rawBytes,n.addNumber);this._hashCode=t}return this._hashCode}},{key:"options",value:function t(){var n="";n+=" -t "+this._type;n+=" -e "+Ice.encodingVersionToString(this._rawEncoding);n+=" -v "+e.encode(this._rawBytes);return n}},{key:"equals",value:function e(t){if(!(t instanceof o)){return false}if(this===t){return true}if(this._type!==t._type){return false}if(!this._rawEncoding.equals(t._rawEncoding)){return false}if(this._rawBytes.length!==t._rawBytes.length){return false}for(var n=0;n<this._rawBytes.length;n++){if(this._rawBytes[n]!==t._rawBytes[n]){return false}}return true}},{key:"compareTo",value:function e(t){if(this===t){return 0}if(t===null){return 1}if(!(t instanceof o)){return this.type()<t.type()?-1:1}if(this._type<t._type){return-1}else if(t._type<this._type){return 1}if(this._rawEncoding.major<t._rawEncoding.major){return-1}else if(t._rawEncoding.major<this._rawEncoding.major){return 1}if(this._rawEncoding.minor<t._rawEncoding.minor){return-1}else if(t._rawEncoding.minor<this._rawEncoding.minor){return 1}if(this._rawBytes.length<t._rawBytes.length){return-1}else if(t._rawBytes.length<this._rawBytes.length){return 1}for(var n=0;n<this._rawBytes.length;n++){if(this._rawBytes[n]<t._rawBytes[n]){return-1}else if(t._rawBytes[n]<this._rawBytes[n]){return 1}}return 0}},{key:"checkOption",value:function t(n,s,a){switch(n.charAt(1)){case"t":{if(this._type>-1){throw new r("multiple -t options in endpoint "+a)}if(s===null){throw new r("no argument provided for -t option in endpoint "+a)}var o=void 0;try{o=i.toInt(s)}catch(e){throw new r("invalid type value `"+s+"' in endpoint "+a)}if(o<0||o>65535){throw new r("type value `"+s+"' out of range in endpoint "+a)}this._type=o;return true}case"v":{if(this._rawBytes){throw new r("multiple -v options in endpoint "+a)}if(s===null||s.length===0){throw new r("no argument provided for -v option in endpoint "+a)}for(var c=0;c<s.length;++c){if(!e.isBase64(s.charAt(c))){throw new r("invalid base64 character `"+s.charAt(c)+"' (ordinal "+s.charCodeAt(c)+") in endpoint "+a)}}this._rawBytes=e.decode(s);return true}case"e":{if(s===null){throw new r("no argument provided for -e option in endpoint "+a)}try{this._rawEncoding=Ice.stringToEncodingVersion(s)}catch(e){throw new r("invalid encoding version `"+s+"' in endpoint "+a+":\n"+e.str)}return true}default:{return false}}}},{key:"initWithOptions",value:function e(n){_get(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"initWithOptions",this).call(this,n);t.assert(this._rawEncoding);if(this._type<0){throw new r("no -t option in endpoint `"+this+"'")}if(this._rawBytes===null||this._rawBytes.length===0){throw new r("no -v option in endpoint `"+this+"'")}}},{key:"initWithStream",value:function e(t){this._rawEncoding=t.getEncoding();this._rawBytes=t.readBlob(t.getEncapsulationSize())}}]);return o}(Ice.EndpointI);var a=function(e){_inherits(t,e);function t(e,n,i,r,s){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,-1,false,i,r));a._type=s;return a}_createClass(t,[{key:"type",value:function e(){return this._type}},{key:"datagram",value:function e(){return false}},{key:"secure",value:function e(){return false}}]);return t}(Ice.OpaqueEndpointInfo);Ice.OpaqueEndpointI=s})();(function(){var e=Ice.Debug;var t=function e(t,n,i,r){_classCallCheck(this,e);if(t===undefined){this.timeout=60*1e3;this.heartbeat=Ice.ACMHeartbeat.HeartbeatOnDispatch;this.close=Ice.ACMClose.CloseOnInvocationAndIdle;return}var s=void 0;if((i=="Ice.ACM.Client"||i=="Ice.ACM.Server")&&t.getProperty(i+".Timeout").length===0){s=i}else{s=i+".Timeout"}this.timeout=t.getPropertyAsIntWithDefault(s,r.timeout/1e3)*1e3;if(this.timeout<0){n.warning("invalid value for property `"+s+"', default value will be used instead");this.timeout=r.timeout}var a=t.getPropertyAsIntWithDefault(i+".Heartbeat",r.heartbeat.value);if(a>=0&&a<=Ice.ACMHeartbeat.maxValue){this.heartbeat=Ice.ACMHeartbeat.valueOf(a)}else{n.warning("invalid value for property `"+i+".Heartbeat"+"', default value will be used instead");this.heartbeat=r.heartbeat}var o=t.getPropertyAsIntWithDefault(i+".Close",r.close.value);if(o>=0&&o<=Ice.ACMClose.maxValue){this.close=Ice.ACMClose.valueOf(o)}else{n.warning("invalid value for property `"+i+".Close"+"', default value will be used instead");this.close=r.close}};var n=function(){function n(e,t){_classCallCheck(this,n);this._instance=e;this._config=t;this._reapedConnections=[];this._connections=[]}_createClass(n,[{key:"destroy",value:function e(){if(this._instance===null){return}this._instance=null}},{key:"add",value:function e(t){var n=this;if(this._config.timeout===0){return}this._connections.push(t);if(this._connections.length==1){this._timerToken=this._instance.timer().scheduleRepeated(function(){return n.runTimerTask()},this._config.timeout/2)}}},{key:"remove",value:function t(n){if(this._config.timeout===0){return}var i=this._connections.indexOf(n);e.assert(i>=0);this._connections.splice(i,1);if(this._connections.length===0){this._instance.timer().cancel(this._timerToken)}}},{key:"reap",value:function e(t){this._reapedConnections.push(t)}},{key:"acm",value:function n(r,s,a){e.assert(this._instance!==null);var o=new t;o.timeout=this._config.timeout;o.close=this._config.close;o.heartbeat=this._config.heartbeat;if(r!==undefined){o.timeout=r*1e3}if(s!==undefined){o.close=s}if(a!==undefined){o.heartbeat=a}return new i(this,this._instance.timer(),o)}},{key:"getACM",value:function e(){return new Ice.ACM(this._config.timeout/1e3,this._config.close,this._config.heartbeat)}},{key:"swapReapedConnections",value:function e(){if(this._reapedConnections.length===0){return null}var t=this._reapedConnections;this._reapedConnections=[];return t}},{key:"runTimerTask",value:function e(){var t=this;if(this._instance===null){this._connections=null;return}var n=Date.now();this._connections.forEach(function(e){try{e.monitor(n,t._config)}catch(e){t.handleException(e)}})}},{key:"handleException",value:function e(t){if(this._instance===null){return}this._instance.initializationData().logger.error("exception in connection monitor:\n"+t)}}]);return n}();var i=function(){function t(e,n,i){_classCallCheck(this,t);this._parent=e;this._timer=n;this._config=i;this._connection=null}_createClass(t,[{key:"add",value:function t(n){var i=this;e.assert(this._connection===null);this._connection=n;if(this._config.timeout>0){this._timerToken=this._timer.scheduleRepeated(function(){return i.runTimerTask()},this._config.timeout/2)}}},{key:"remove",value:function t(n){e.assert(this._connection===n);this._connection=null;if(this._config.timeout>0){this._timer.cancel(this._timerToken)}}},{key:"reap",value:function e(t){this._parent.reap(t)}},{key:"acm",value:function e(t,n,i){return this._parent.acm(t,n,i)}},{key:"getACM",value:function e(){return new Ice.ACM(this._config.timeout/1e3,this._config.close,this._config.heartbeat)}},{key:"runTimerTask",value:function e(){try{this._connection.monitor(Date.now(),this._config)}catch(e){this._parent.handleException(e)}}}]);return t}();Ice.FactoryACMMonitor=n;Ice.ACMConfig=t})();(function(){var e=Ice.Context;var t=Ice.InitializationException;var n=function(){function n(){_classCallCheck(this,n);this._context=new e}_createClass(n,[{key:"getContext",value:function t(){return new e(this._context)}},{key:"setContext",value:function t(n){if(n!==null&&n.size>0){this._context=new e(n)}else{this._context.clear()}}},{key:"containsKey",value:function e(t){if(t===null){t=""}return this._context.has(t)}},{key:"get",value:function e(t){if(t===null){t=""}var n=this._context.get(t);if(n===null){n=""}return n}},{key:"put",value:function e(t,n){if(t===null){t=""}if(n===null){n=""}var i=this._context.get(t);if(i===null){i=""}this._context.set(t,n);return i}},{key:"remove",value:function e(t){if(t===null){t=""}var n=this._context.get(t);this._context.delete(t);if(n===null){n=""}return n}},{key:"write",value:function t(n,i){if(n.size===0){Ice.ContextHelper.write(i,this._context)}else{var r=null;if(this._context.size===0){r=n}else{r=new e(this._context);var s=true;var a=false;var o=undefined;try{for(var c=n[Symbol.iterator](),u;!(s=(u=c.next()).done);s=true){var l=_slicedToArray(u.value,2),h=l[0],f=l[1];r.set(h,f)}}catch(e){a=true;o=e}finally{try{if(!s&&c.return){c.return()}}finally{if(a){throw o}}}}Ice.ContextHelper.write(i,r)}}}],[{key:"create",value:function e(i){if(i.length===0||i==="None"){return null}else if(i==="Shared"){return new n}else{throw new t("'"+i+"' is not a valid value for Ice.ImplicitContext")}}}]);return n}();Ice.ImplicitContextI=n})();(function(){var e=Ice.ArrayUtil;var t=Ice.Debug;var n=Ice.BatchRequestQueue;var i=Ice.HashUtil;var r=Ice.OpaqueEndpointI;var s=Ice.ReferenceMode;var a=Ice.StringUtil;var o=Ice.StringSeqHelper;var c=Ice.EndpointSelectionType;var u=Ice.Identity;var l=Ice.RouterPrx;var h=Ice.LocatorPrx;var f=Ice.PropertyNames;var _=Ice.ConnectionRequestHandler;var d=Ice.MapUtil;var p=["EndpointSelection","ConnectionCached","PreferSecure","EncodingVersion","LocatorCacheTimeout","InvocationTimeout","Locator","Router","CollocationOptimized"];var v=function(){function e(t,n){_classCallCheck(this,e);this._instance=t;this._communicator=n;this._defaultRouter=null;this._defaultLocator=null}_createClass(e,[{key:"create",value:function e(t,n,i,r){if(t.name.length===0&&t.category.length===0){return null}return this.createImpl(t,n,i.getMode(),i.getSecure(),i.getProtocol(),i.getEncoding(),r,null,null)}},{key:"createWithAdapterId",value:function e(t,n,i,r){if(t.name.length===0&&t.category.length===0){return null}return this.createImpl(t,n,i.getMode(),i.getSecure(),i.getProtocol(),i.getEncoding(),null,r,null)}},{key:"createFixed",value:function e(t,n){if(t.name.length===0&&t.category.length===0){return null}return new g(this._instance,this._communicator,t,"",n.endpoint().datagram()?s.ModeDatagram:s.ModeTwoway,n.endpoint().secure(),Ice.Protocol_1_0,this._instance.defaultsAndOverrides().defaultEncoding,n,-1,null)}},{key:"copy",value:function e(t){var n=t.getIdentity();if(n.name.length===0&&n.category.length===0){return null}return t.clone()}},{key:"createFromString",value:function e(n,i){if(n===undefined||n===null||n.length===0){return null}var r=" \t\n\r";var o=0;var c=a.findFirstNotOf(n,r,o);if(c==-1){throw new Ice.ProxyParseException("no non-whitespace characters found in `"+n+"'")}var u=null;o=a.checkQuote(n,c);if(o===-1){throw new Ice.ProxyParseException("mismatched quotes around identity in `"+n+"'")}else if(o===0){o=a.findFirstOf(n,r+":@",c);if(o===-1){o=n.length}u=n.substring(c,o)}else{c++;u=n.substring(c,o);o++}if(c===o){throw new Ice.ProxyParseException("no identity in `"+n+"'")}var l=Ice.stringToIdentity(u);if(l.name.length===0){if(l.category.length>0){throw new Ice.IllegalIdentityException(l)}else if(a.findFirstNotOf(n,r,o)!=-1){throw new Ice.ProxyParseException("invalid characters after identity in `"+n+"'")}else{return null}}var h="";var f=s.ModeTwoway;var _=false;var d=this._instance.defaultsAndOverrides().defaultEncoding;var p=Ice.Protocol_1_0;var v="";while(true){c=a.findFirstNotOf(n,r,o);if(c===-1){break}if(n.charAt(c)==":"||n.charAt(c)=="@"){break}o=a.findFirstOf(n,r+":@",c);if(o==-1){o=n.length}if(c==o){break}var y=n.substring(c,o);if(y.length!=2||y.charAt(0)!="-"){throw new Ice.ProxyParseException("expected a proxy option but found `"+y+"' in `"+n+"'")}var g=null;var I=a.findFirstNotOf(n,r,o);if(I!=-1){var m=n.charAt(I);if(m!="@"&&m!=":"&&m!="-"){c=I;o=a.checkQuote(n,c);if(o==-1){throw new Ice.ProxyParseException("mismatched quotes around value for "+y+" option in `"+n+"'")}else if(o===0){o=a.findFirstOf(n,r+":@",c);if(o===-1){o=n.length}g=n.substring(c,o)}else{c++;g=n.substring(c,o);o++}}}switch(y.charAt(1)){case"f":{if(g===null){throw new Ice.ProxyParseException("no argument provided for -f option in `"+n+"'")}try{h=a.unescapeString(g,0,g.length)}catch(e){throw new Ice.ProxyParseException("invalid facet in `"+n+"': "+e.message)}break}case"t":{if(g!==null){throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -t option in `"+n+"'")}f=s.ModeTwoway;break}case"o":{if(g!==null){throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -o option in `"+n+"'")}f=s.ModeOneway;break}case"O":{if(g!==null){throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -O option in `"+n+"'")}f=s.ModeBatchOneway;break}case"d":{if(g!==null){throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -d option in `"+n+"'")}f=s.ModeDatagram;break}case"D":{if(g!==null){throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -D option in `"+n+"'")}f=s.ModeBatchDatagram;break}case"s":{if(g!==null){throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -s option in `"+n+"'")}_=true;break}case"e":{if(g===null){throw new Ice.ProxyParseException("no argument provided for -e option in `"+n+"'")}try{d=Ice.stringToEncodingVersion(g)}catch(e){throw new Ice.ProxyParseException("invalid encoding version `"+g+"' in `"+n+"':\n"+e.str)}break}case"p":{if(g===null){throw new Ice.ProxyParseException("no argument provided for -p option in `"+n+"'")}try{p=Ice.stringToProtocolVersion(g)}catch(e){throw new Ice.ProxyParseException("invalid protocol version `"+g+"' in `"+n+"':\n"+e.str)}break}default:{throw new Ice.ProxyParseException("unknown option `"+y+"' in `"+n+"'")}}}if(c===-1){return this.createImpl(l,h,f,_,p,d,null,null,i)}var k=[];if(n.charAt(c)==":"){var w=[];o=c;while(o<n.length&&n.charAt(o)==":"){c=o+1;o=c;while(true){o=n.indexOf(":",o);if(o==-1){o=n.length;break}else{var C=false;var S=c;while(true){S=n.indexOf('"',S);if(S==-1||o<S){break}else{S=n.indexOf('"',++S);if(S==-1){break}else if(o<S){C=true;break}++S}}if(!C){break}++o}}var x=n.substring(c,o);var E=this._instance.endpointFactoryManager().create(x,false);if(E!==null){k.push(E)}else{w.push(x)}}if(k.length===0){t.assert(w.length>0);throw new Ice.EndpointParseException("invalid endpoint `"+w[0]+"' in `"+n+"'")}else if(w.length!==0&&this._instance.initializationData().properties.getPropertyAsIntWithDefault("Ice.Warn.Endpoints",1)>0){var b=[];b.push("Proxy contains unknown endpoints:");w.forEach(function(e){b.push(" `");b.push(e);b.push("'")});this._instance.initializationData().logger.warning(b.join(""))}return this.createImpl(l,h,f,_,p,d,k,null,i)}else if(n.charAt(c)=="@"){c=a.findFirstNotOf(n,r,c+1);if(c==-1){throw new Ice.ProxyParseException("missing adapter id in `"+n+"'")}var O=null;o=a.checkQuote(n,c);if(o===-1){throw new Ice.ProxyParseException("mismatched quotes around adapter id in `"+n+"'")}else if(o===0){o=a.findFirstOf(n,r,c);if(o===-1){o=n.length}O=n.substring(c,o)}else{c++;O=n.substring(c,o);o++}if(o!==n.length&&a.findFirstNotOf(n,r,o)!==-1){throw new Ice.ProxyParseException("invalid trailing characters after `"+n.substring(0,o+1)+"' in `"+n+"'")}try{v=a.unescapeString(O,0,O.length)}catch(e){throw new Ice.ProxyParseException("invalid adapter id in `"+n+"': "+e.message)}if(v.length===0){throw new Ice.ProxyParseException("empty adapter id in `"+n+"'")}return this.createImpl(l,h,f,_,p,d,null,v,i)}throw new Ice.ProxyParseException("malformed proxy `"+n+"'")}},{key:"createFromStream",value:function e(t,n){if(t.name.length===0&&t.category.length===0){return null}var i=o.read(n);var r=void 0;if(i.length>0){if(i.length>1){throw new Ice.ProxyUnmarshalException}r=i[0]}else{r=""}var a=n.readByte();if(a<0||a>s.ModeLast){throw new Ice.ProxyUnmarshalException}var c=n.readBool();var u=null;var l=null;if(!n.getEncoding().equals(Ice.Encoding_1_0)){u=new Ice.ProtocolVersion;u._read(n);l=new Ice.EncodingVersion;l._read(n)}else{u=Ice.Protocol_1_0;l=Ice.Encoding_1_0}var h=null;var f=null;var _=n.readSize();if(_>0){h=[];for(var d=0;d<_;d++){h[d]=this._instance.endpointFactoryManager().read(n)}}else{f=n.readString()}return this.createImpl(t,r,a,c,u,l,h,f,null)}},{key:"setDefaultRouter",value:function t(n){if(this._defaultRouter===null?n===null:this._defaultRouter.equals(n)){return this}var i=new e(this._instance,this._communicator);i._defaultLocator=this._defaultLocator;i._defaultRouter=n;return i}},{key:"getDefaultRouter",value:function e(){return this._defaultRouter}},{key:"setDefaultLocator",value:function t(n){if(this._defaultLocator===null?n===null:this._defaultLocator.equals(n)){return this}var i=new e(this._instance,this._communicator);i._defaultRouter=this._defaultRouter;i._defaultLocator=n;return i}},{key:"getDefaultLocator",value:function e(){return this._defaultLocator}},{key:"checkForUnknownProperties",value:function e(t){var n=[];for(var i=0;i<f.clPropNames.length;++i){if(t.indexOf(f.clPropNames[i]+".")===0){return}}var r=this._instance.initializationData().properties.getPropertiesForPrefix(t+".");n=n.concat(Array.from(r.keys()).filter(function(e){return!p.some(function(n){return e===t+"."+n})}));if(n.length>0){var s=[];s.push("found unknown properties for proxy '");s.push(t);s.push("':");n.forEach(function(e){return s.push("\n    ",e)});this._instance.initializationData().logger.warning(s.join(""))}}},{key:"createImpl",value:function e(t,n,i,r,s,a,o,u,f){var _=this._instance.defaultsAndOverrides();var d=null;if(this._defaultLocator!==null){if(!this._defaultLocator._getReference().getEncoding().equals(a)){d=this._instance.locatorManager().find(this._defaultLocator.ice_encodingVersion(a))}else{d=this._instance.locatorManager().find(this._defaultLocator)}}var p=this._instance.routerManager().find(this._defaultRouter);var v=true;var y=_.defaultPreferSecure;var g=_.defaultEndpointSelection;var m=_.defaultLocatorCacheTimeout;var k=_.defaultInvocationTimeout;if(f!==null&&f.length>0){var w=this._instance.initializationData().properties;if(w.getPropertyAsIntWithDefault("Ice.Warn.UnknownProperties",1)>0){this.checkForUnknownProperties(f)}var C=f+".Locator";var S=h.uncheckedCast(this._communicator.propertyToProxy(C));if(S!==null){if(!S._getReference().getEncoding().equals(a)){d=this._instance.locatorManager().find(S.ice_encodingVersion(a))}else{d=this._instance.locatorManager().find(S)}}C=f+".Router";var x=l.uncheckedCast(this._communicator.propertyToProxy(C));if(x!==null){var E=".Router";if(f.lastIndexOf(E)==f.length-E.length){this._instance.initializationData().logger.warning("`"+C+"="+w.getProperty(C)+"': cannot set a router on a router; setting ignored")}else{p=this._instance.routerManager().find(x)}}C=f+".ConnectionCached";v=w.getPropertyAsIntWithDefault(C,v?1:0)>0;C=f+".PreferSecure";y=w.getPropertyAsIntWithDefault(C,y?1:0)>0;C=f+".EndpointSelection";if(w.getProperty(C).length>0){var b=w.getProperty(C);if(b=="Random"){g=c.Random}else if(b=="Ordered"){g=c.Ordered}else{throw new Ice.EndpointSelectionTypeParseException("illegal value `"+b+"'; expected `Random' or `Ordered'")}}C=f+".LocatorCacheTimeout";var O=w.getProperty(C);if(O.length!==0){m=w.getPropertyAsIntWithDefault(C,m);if(m<-1){m=-1;this._instance.initializationData().logger.warning("invalid value for"+C+"`"+w.getProperty(C)+"': defaulting to -1")}}C=f+".InvocationTimeout";O=w.getProperty(C);if(O.length!==0){k=w.getPropertyAsIntWithDefault(C,k);if(k<1&&k!==-1){k=-1;this._instance.initializationData().logger.warning("invalid value for"+C+"`"+w.getProperty(C)+"': defaulting to -1")}}}return new I(this._instance,this._communicator,t,n,i,r,s,a,o,u,d,p,v,y,g,m,k)}}]);return e}();Ice.ReferenceFactory=v;var y=function(){function e(n,i,r,s,a,o,c,u,l,h){_classCallCheck(this,e);t.assert(r===undefined||r.name!==null);t.assert(r===undefined||r.category!==null);t.assert(s===undefined||s!==null);this._instance=n;this._communicator=i;this._mode=a;this._secure=o;this._identity=r;this._context=h===undefined?e._emptyContext:h;this._facet=s;this._protocol=c;this._encoding=u;this._invocationTimeout=l;this._hashInitialized=false}_createClass(e,[{key:"getMode",value:function e(){return this._mode}},{key:"getSecure",value:function e(){return this._secure}},{key:"getProtocol",value:function e(){return this._protocol}},{key:"getEncoding",value:function e(){return this._encoding}},{key:"getIdentity",value:function e(){return this._identity}},{key:"getFacet",value:function e(){return this._facet}},{key:"getInstance",value:function e(){return this._instance}},{key:"getContext",value:function e(){return this._context}},{key:"getInvocationTimeout",value:function e(){return this._invocationTimeout}},{key:"getCommunicator",value:function e(){return this._communicator}},{key:"getEndpoints",value:function e(){t.assert(false);return null}},{key:"getAdapterId",value:function e(){t.assert(false);return""}},{key:"getRouterInfo",value:function e(){t.assert(false);return null}},{key:"getLocatorInfo",value:function e(){t.assert(false);return null}},{key:"getCacheConnection",value:function e(){t.assert(false);return false}},{key:"getPreferSecure",value:function e(){t.assert(false);return false}},{key:"getEndpointSelection",value:function e(){t.assert(false);return null}},{key:"getLocatorCacheTimeout",value:function e(){t.assert(false);return 0}},{key:"getConnectionId",value:function e(){t.assert(false);return""}},{key:"getTimeout",value:function e(){t.assert(false);return""}},{key:"changeContext",value:function t(n){if(n===undefined||n===null){n=e._emptyContext}var i=this._instance.referenceFactory().copy(this);if(n.size===0){i._context=e._emptyContext}else{i._context=new Map(n)}return i}},{key:"changeMode",value:function e(t){if(t===this._mode){return this}var n=this._instance.referenceFactory().copy(this);n._mode=t;return n}},{key:"changeSecure",value:function e(t){if(t===this._secure){return this}var n=this._instance.referenceFactory().copy(this);n._secure=t;return n}},{key:"changeIdentity",value:function e(t){if(t.equals(this._identity)){return this}var n=this._instance.referenceFactory().copy(this);n._identity=new u(t.name,t.category);return n}},{key:"changeFacet",value:function e(t){if(t===this._facet){return this}var n=this._instance.referenceFactory().copy(this);n._facet=t;return n}},{key:"changeInvocationTimeout",value:function e(t){if(t===this._invocationTimeout){return this}var n=this._instance.referenceFactory().copy(this);n._invocationTimeout=t;return n}},{key:"changeEncoding",value:function e(t){if(t.equals(this._encoding)){return this}var n=this._instance.referenceFactory().copy(this);n._encoding=t;return n}},{key:"changeAdapterId",value:function e(n){t.assert(false);return null}},{key:"changeEndpoints",value:function e(n){t.assert(false);return null}},{key:"changeLocator",value:function e(n){t.assert(false);return null}},{key:"changeRouter",value:function e(n){t.assert(false);return null}},{key:"changeCacheConnection",value:function e(n){t.assert(false);return null}},{key:"changePreferSecure",value:function e(n){t.assert(false);return null}},{key:"changeEndpointSelection",value:function e(n){t.assert(false);return null}},{key:"changeLocatorCacheTimeout",value:function e(n){t.assert(false);return null}},{key:"changeTimeout",value:function e(n){t.assert(false);return null}},{key:"changeConnectionId",value:function e(n){t.assert(false);return null}},{key:"changeConnection",value:function e(n){t.assert(false);return null}},{key:"hashCode",value:function e(){if(this._hashInitialized){return this._hashValue}var t=5381;t=i.addNumber(t,this._mode);t=i.addBoolean(t,this._secure);t=i.addHashable(t,this._identity);if(this._context!==null&&this._context!==undefined){var n=true;var r=false;var s=undefined;try{for(var a=this._context[Symbol.iterator](),o;!(n=(o=a.next()).done);n=true){var c=_slicedToArray(o.value,2),u=c[0],l=c[1];t=i.addString(t,u);t=i.addString(t,l)}}catch(e){r=true;s=e}finally{try{if(!n&&a.return){a.return()}}finally{if(r){throw s}}}}t=i.addString(t,this._facet);t=i.addHashable(t,this._protocol);t=i.addHashable(t,this._encoding);t=i.addNumber(t,this._invocationTimeout);this._hashValue=t;this._hashInitialized=true;return this._hashValue}},{key:"isIndirect",value:function e(){t.assert(false);return false}},{key:"isWellKnown",value:function e(){t.assert(false);return false}},{key:"streamWrite",value:function e(t){if(this._facet.length===0){t.writeSize(0)}else{t.writeSize(1);t.writeString(this._facet)}t.writeByte(this._mode);t.writeBool(this._secure);if(!t.getEncoding().equals(Ice.Encoding_1_0)){this._protocol._write(t);this._encoding._write(t)}}},{key:"toString",value:function e(){var t=[];var n=this._instance.toStringMode();var i=Ice.identityToString(this._identity,n);if(i.search(/[ :@]/)!=-1){t.push('"');t.push(i);t.push('"')}else{t.push(i)}if(this._facet.length>0){t.push(" -f ");var r=a.escapeString(this._facet,"",n);if(r.search(/[ :@]/)!=-1){t.push('"');t.push(r);t.push('"')}else{t.push(r)}}switch(this._mode){case s.ModeTwoway:{t.push(" -t");break}case s.ModeOneway:{t.push(" -o");break}case s.ModeBatchOneway:{t.push(" -O");break}case s.ModeDatagram:{t.push(" -d");break}case s.ModeBatchDatagram:{t.push(" -D");break}}if(this._secure){t.push(" -s")}if(!this._protocol.equals(Ice.Protocol_1_0)){t.push(" -p ");t.push(Ice.protocolVersionToString(this._protocol))}t.push(" -e ");t.push(Ice.encodingVersionToString(this._encoding));return t.join("")}},{key:"toProperty",value:function e(n){t.assert(false);return null}},{key:"getRequestHandler",value:function e(n){t.assert(false)}},{key:"getBatchRequestQueue",value:function e(){t.assert(false)}},{key:"equals",value:function e(t){if(this._mode!==t._mode){return false}if(this._secure!==t._secure){return false}if(!this._identity.equals(t._identity)){return false}if(!d.equals(this._context,t._context)){return false}if(this._facet!==t._facet){return false}if(!this._protocol.equals(t._protocol)){return false}if(!this._encoding.equals(t._encoding)){return false}if(this._invocationTimeout!==t._invocationTimeout){return false}return true}},{key:"clone",value:function e(){t.assert(false);return null}},{key:"copyMembers",value:function e(t){t._context=this._context}}]);return e}();y._emptyContext=new Map;y._emptyEndpoints=[];Ice.Reference=y;var g=function(e){_inherits(t,e);function t(e,n,i,r,s,a,o,c,u,l,h){_classCallCheck(this,t);var f=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,r,s,a,o,c,l,h));f._fixedConnection=u;return f}_createClass(t,[{key:"getEndpoints",value:function e(){return y._emptyEndpoints}},{key:"getAdapterId",value:function e(){return""}},{key:"getRouterInfo",value:function e(){return null}},{key:"getLocatorInfo",value:function e(){return null}},{key:"getCacheConnection",value:function e(){return true}},{key:"getPreferSecure",value:function e(){return false}},{key:"getEndpointSelection",value:function e(){return c.Random}},{key:"getLocatorCacheTimeout",value:function e(){return 0}},{key:"getConnectionId",value:function e(){return""}},{key:"getTimeout",value:function e(){return undefined}},{key:"changeAdapterId",value:function e(t){throw new Ice.FixedProxyException}},{key:"changeEndpoints",value:function e(t){throw new Ice.FixedProxyException}},{key:"changeLocato",value:function e(t){throw new Ice.FixedProxyException}},{key:"changeRouter",value:function e(t){throw new Ice.FixedProxyException}},{key:"changeCacheConnection",value:function e(t){throw new Ice.FixedProxyException}},{key:"changePreferSecure",value:function e(t){throw new Ice.FixedProxyException}},{key:"changeEndpointSelection",value:function e(t){throw new Ice.FixedProxyException}},{key:"changeLocatorCacheTimeout",value:function e(t){throw new Ice.FixedProxyException}},{key:"changeTimeout",value:function e(t){throw new Ice.FixedProxyException}},{key:"changeConnectionId",value:function e(t){throw new Ice.FixedProxyException}},{key:"changeConnection",value:function e(t){if(t==this._fixedConnection){return this}var n=this.getInstance().referenceFactory().copy(this);n._fixedConnection=t;return n}},{key:"isIndirect",value:function e(){return false}},{key:"isWellKnown",value:function e(){return false}},{key:"streamWrite",value:function e(t){throw new Ice.FixedProxyException}},{key:"toProperty",value:function e(t){throw new Ice.FixedProxyException}},{key:"clone",value:function e(){var n=new t(this.getInstance(),this.getCommunicator(),this.getIdentity(),this.getFacet(),this.getMode(),this.getSecure(),this.getProtocol(),this.getEncoding(),this._fixedConnection,this.getInvocationTimeout(),this.getContext());this.copyMembers(n);return n}},{key:"getRequestHandler",value:function e(t){switch(this.getMode()){case s.ModeTwoway:case s.ModeOneway:case s.ModeBatchOneway:{if(this._fixedConnection.endpoint().datagram()){throw new Ice.NoEndpointException(this.toString())}break}case s.ModeDatagram:case s.ModeBatchDatagram:{if(!this._fixedConnection.endpoint().datagram()){throw new Ice.NoEndpointException(this.toString())}break}}var n=this.getInstance().defaultsAndOverrides();var i=n.overrideSecure?n.overrideSecureValue:this.getSecure();if(i&&!this._fixedConnection.endpoint().secure()){throw new Ice.NoEndpointException(this.toString())}this._fixedConnection.throwException();return t._setRequestHandler(new _(this,this._fixedConnection))}},{key:"getBatchRequestQueue",value:function e(){return this._fixedConnection.getBatchRequestQueue()}},{key:"equals",value:function e(n){if(this===n){return true}if(!(n instanceof t)){return false}if(!_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"equals",this).call(this,n)){return false}return this._fixedConnection==n._fixedConnection}}]);return t}(y);Ice.FixedReference=g;var I=function(o){_inherits(u,o);function u(e,n,i,r,s,a,o,c,l,h,f,_,d,p,v,g,I,m){_classCallCheck(this,u);var k=_possibleConstructorReturn(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e,n,i,r,s,a,o,c,I,m));k._endpoints=l;k._adapterId=h;k._locatorInfo=f;k._routerInfo=_;k._cacheConnection=d;k._preferSecure=p;k._endpointSelection=v;k._locatorCacheTimeout=g;k._overrideTimeout=false;k._timeout=-1;if(k._endpoints===null){k._endpoints=y._emptyEndpoints}if(k._adapterId===null){k._adapterId=""}k._connectionId="";t.assert(k._adapterId.length===0||k._endpoints.length===0);return k}_createClass(u,[{key:"getEndpoints",value:function e(){return this._endpoints}},{key:"getAdapterId",value:function e(){return this._adapterId}},{key:"getRouterInfo",value:function e(){return this._routerInfo}},{key:"getLocatorInfo",value:function e(){return this._locatorInfo}},{key:"getCacheConnection",value:function e(){return this._cacheConnection}},{key:"getPreferSecure",value:function e(){return this._preferSecure}},{key:"getEndpointSelection",value:function e(){return this._endpointSelection}},{key:"getLocatorCacheTimeout",value:function e(){return this._locatorCacheTimeout}},{key:"getConnectionId",value:function e(){return this._connectionId}},{key:"getTimeout",value:function e(){return this._overrideTimeout?this._timeout:undefined}},{key:"changeEncoding",value:function e(t){var n=_get(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"changeEncoding",this).call(this,t);if(n!==this){if(n._locatorInfo!==null&&!n._locatorInfo.getLocator().ice_getEncodingVersion().equals(t)){n._locatorInfo=this.getInstance().locatorManager().find(n._locatorInfo.getLocator().ice_encodingVersion(t))}}return n}},{key:"changeAdapterId",value:function e(t){if(this._adapterId===t){return this}var n=this.getInstance().referenceFactory().copy(this);n._adapterId=t;n._endpoints=y._emptyEndpoints;return n}},{key:"changeEndpoints",value:function t(n){if(e.equals(n,this._endpoints,function(e,t){return e.equals(t)})){return this}var i=this.getInstance().referenceFactory().copy(this);i._endpoints=n;i._adapterId="";i.applyOverrides(i._endpoints);return i}},{key:"changeLocator",value:function e(t){var n=this.getInstance().locatorManager().find(t);if(n!==null&&this._locatorInfo!==null&&n.equals(this._locatorInfo)){return this}var i=this.getInstance().referenceFactory().copy(this);i._locatorInfo=n;return i}},{key:"changeRouter",value:function e(t){var n=this.getInstance().routerManager().find(t);if(n!==null&&this._routerInfo!==null&&n.equals(this._routerInfo)){return this}var i=this.getInstance().referenceFactory().copy(this);i._routerInfo=n;return i}},{key:"changeCacheConnection",value:function e(t){if(t===this._cacheConnection){return this}var n=this.getInstance().referenceFactory().copy(this);n._cacheConnection=t;return n}},{key:"changePreferSecure",value:function e(t){if(t===this._preferSecure){return this}var n=this.getInstance().referenceFactory().copy(this);n._preferSecure=t;return n}},{key:"changeEndpointSelection",value:function e(t){if(t===this._endpointSelection){return this}var n=this.getInstance().referenceFactory().copy(this);n._endpointSelection=t;return n}},{key:"changeLocatorCacheTimeout",value:function e(t){if(this._locatorCacheTimeout===t){return this}var n=this.getInstance().referenceFactory().copy(this);n._locatorCacheTimeout=t;return n}},{key:"changeTimeout",value:function e(t){if(this._overrideTimeout&&this._timeout===t){return this}var n=this.getInstance().referenceFactory().copy(this);n._timeout=t;n._overrideTimeout=true;n._endpoints=this._endpoints.map(function(e){return e.changeTimeout(t)});return n}},{key:"changeConnectionId",value:function e(t){if(this._connectionId===t){return this}var n=this.getInstance().referenceFactory().copy(this);n._connectionId=t;n._endpoints=this._endpoints.map(function(e){return e.changeConnectionId(t)});return n}},{key:"changeConnection",value:function e(t){return new g(this.getInstance(),this.getCommunicator(),this.getIdentity(),this.getFacet(),this.getMode(),this.getSecure(),this.getProtocol(),this.getEncoding(),t,this.getInvocationTimeout(),this.getContext())}},{key:"isIndirect",value:function e(){return this._endpoints.length===0}},{key:"isWellKnown",value:function e(){return this._endpoints.length===0&&this._adapterId.length===0}},{key:"streamWrite",value:function e(n){_get(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"streamWrite",this).call(this,n);n.writeSize(this._endpoints.length);if(this._endpoints.length>0){t.assert(this._adapterId.length===0);this._endpoints.forEach(function(e){n.writeShort(e.type());e.streamWrite(n)})}else{n.writeString(this._adapterId)}}},{key:"toString",value:function e(){var t=[];t.push(_get(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"toString",this).call(this));if(this._endpoints.length>0){this._endpoints.forEach(function(e){var n=e.toString();if(n!==null&&n.length>0){t.push(":");t.push(n)}})}else if(this._adapterId.length>0){t.push(" @ ");var n=a.escapeString(this._adapterId,null,this._instance.toStringMode());if(n.search(/[ :@]/)!=-1){t.push('"');t.push(n);t.push('"')}else{t.push(n)}}return t.join("")}},{key:"toProperty",value:function e(t){var n=new Map;n.set(t,this.toString());n.set(t+".CollocationOptimized","0");n.set(t+".ConnectionCached",this._cacheConnection?"1":"0");n.set(t+".PreferSecure",this._preferSecure?"1":"0");n.set(t+".EndpointSelection",this._endpointSelection===c.Random?"Random":"Ordered");n.set(t+".LocatorCacheTimeout",""+this._locatorCacheTimeout);n.set(t+".InvocationTimeout",""+this.getInvocationTimeout());if(this._routerInfo!==null){this._routerInfo.getRouter()._getReference().toProperty(t+".Router").forEach(function(e,t){return n.set(t,e)})}if(this._locatorInfo!==null){this._locatorInfo.getLocator()._getReference().toProperty(t+".Locator").forEach(function(e,t){return n.set(t,e)})}return n}},{key:"hashCode",value:function e(){if(!this._hashInitialized){_get(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"hashCode",this).call(this);this._hashValue=i.addString(this._hashValue,this._adapterId)}return this._hashValue}},{key:"equals",value:function t(n){if(this===n){return true}if(!(n instanceof u)){return false}if(!_get(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"equals",this).call(this,n)){return false}if(this._locatorInfo===null?n._locatorInfo!==null:!this._locatorInfo.equals(n._locatorInfo)){return false}if(this._routerInfo===null?n._routerInfo!==null:!this._routerInfo.equals(n._routerInfo)){return false}if(this._cacheConnection!==n._cacheConnection){return false}if(this._preferSecure!==n._preferSecure){return false}if(this._endpointSelection!==n._endpointSelection){return false}if(this._locatorCacheTimeout!==n._locatorCacheTimeout){return false}if(this._connectionId!==n._connectionId){return false}if(this._overrideTimeout!==n._overrideTimeout){return false}if(this._overrideTimeout&&this._timeout!==n._timeout){return false}if(!e.equals(this._endpoints,n._endpoints,function(e,t){return e.equals(t)})){return false}if(this._adapterId!==n._adapterId){return false}return true}},{key:"getRequestHandler",value:function e(t){return this._instance.requestHandlerFactory().getRequestHandler(this,t)}},{key:"getBatchRequestQueue",value:function e(){return new n(this._instance,this._mode===s.ModeBatchDatagram)}},{key:"getConnection",value:function e(){var t=this;var n=new Ice.Promise;if(this._routerInfo!==null){this._routerInfo.getClientEndpoints().then(function(e){if(e.length>0){t.applyOverrides(e);t.createConnection(e).then(n.resolve,n.reject)}else{t.getConnectionNoRouterInfo(n)}}).catch(n.reject)}else{this.getConnectionNoRouterInfo(n)}return n}},{key:"getConnectionNoRouterInfo",value:function e(n){var i=this;if(this._endpoints.length>0){this.createConnection(this._endpoints).then(n.resolve).catch(n.reject);return}if(this._locatorInfo!==null){this._locatorInfo.getEndpoints(this,null,this._locatorCacheTimeout).then(function(e){var r=_slicedToArray(e,2),s=r[0],a=r[1];if(s.length===0){n.reject(new Ice.NoEndpointException(i.toString()));return}i.applyOverrides(s);i.createConnection(s).then(n.resolve,function(e){if(e instanceof Ice.NoEndpointException){n.reject(e)}else{t.assert(i._locatorInfo!==null);i.getLocatorInfo().clearCache(i);if(a){var r=i.getInstance().traceLevels();if(r.retry>=2){i.getInstance().initializationData().logger.trace(r.retryCat,"connection to cached endpoints failed\n"+"removing endpoints from cache and trying again\n"+e.toString())}i.getConnectionNoRouterInfo(n);return}n.reject(e)}})}).catch(n.reject)}else{n.reject(new Ice.NoEndpointException(this.toString()))}}},{key:"clone",value:function e(){var t=new u(this.getInstance(),this.getCommunicator(),this.getIdentity(),this.getFacet(),this.getMode(),this.getSecure(),this.getProtocol(),this.getEncoding(),this._endpoints,this._adapterId,this._locatorInfo,this._routerInfo,this._cacheConnection,this._preferSecure,this._endpointSelection,this._locatorCacheTimeout,this._invocationTimeout);this.copyMembers(t);return t}},{key:"copyMembers",value:function e(t){_get(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"copyMembers",this).call(this,t);t._overrideTimeout=this._overrideTimeout;t._timeout=this._timeout;t._connectionId=this._connectionId}},{key:"applyOverrides",value:function e(t){for(var n=0;n<t.length;++n){t[n]=t[n].changeConnectionId(this._connectionId);if(this._overrideTimeout){t[n]=t[n].changeTimeout(this._timeout)}}}},{key:"filterEndpoints",value:function n(i){var a=i.filter(function(e){return!(e instanceof r)&&e.connectable()});switch(this.getMode()){case s.ModeTwoway:case s.ModeOneway:case s.ModeBatchOneway:{a=a.filter(function(e){return!e.datagram()});break}case s.ModeDatagram:case s.ModeBatchDatagram:{a=a.filter(function(e){return e.datagram()});break}}switch(this.getEndpointSelection()){case c.Random:{e.shuffle(a);break}case c.Ordered:{break}default:{t.assert(false);break}}var o=this.getInstance().defaultsAndOverrides();if(o.overrideSecure?o.overrideSecureValue:this.getSecure()){a=a.filter(function(e){return e.secure()})}else{var u=this.getPreferSecure();var l=function e(t,n){var i=t.secure();var r=n.secure();if(i&&r||!i&&!r){return 0}else if(!i&&r){return u?1:-1}else{return u?-1:1}};a.sort(l)}return a}},{key:"createConnection",value:function e(t){var n=this.filterEndpoints(t);if(n.length===0){return Ice.Promise.reject(new Ice.NoEndpointException(this.toString()))}var i=new Ice.Promise;var r=this.getInstance().outgoingConnectionFactory();if(this.getCacheConnection()||n.length==1){var s=new m(this,null,i);r.create(n,false,this.getEndpointSelection()).then(function(e){return s.setConnection(e)}).catch(function(e){return s.setException(e)})}else{var a=new m(this,n,i);r.create([n[0]],true,this.getEndpointSelection()).then(function(e){return a.setConnection(e)}).catch(function(e){return a.setException(e)})}return i}}]);return u}(y);Ice.RoutableReference=I;var m=function(){function e(t,n,i){_classCallCheck(this,e);this.ref=t;this.endpoints=n;this.promise=i;this.i=0;this.exception=null}_createClass(e,[{key:"setConnection",value:function e(t){if(this.ref.getRouterInfo()!==null&&this.ref.getRouterInfo().getAdapter()!==null){t.setAdapter(this.ref.getRouterInfo().getAdapter())}this.promise.resolve(t)}},{key:"setException",value:function e(t){var n=this;if(this.exception===null){this.exception=t}if(this.endpoints===null||++this.i===this.endpoints.length){this.promise.reject(this.exception);return}this.ref.getInstance().outgoingConnectionFactory().create([this.endpoints[this.i]],this.i!=this.endpoints.length-1,this.ref.getEndpointSelection()).then(function(e){return n.setConnection(e)}).catch(function(e){return n.setException(e)})}}]);return e}()})();(function(){var e=Ice.AsyncStatus;var t=Ice.AsyncResultBase;var n=Ice.InputStream;var i=Ice.OutputStream;var r=Ice.BatchRequestQueue;var s=Ice.ConnectionFlushBatch;var a=Ice.HeartbeatAsync;var o=Ice.Debug;var c=Ice.ExUtil;var u=Ice.HashMap;var l=Ice.IncomingAsync;var h=Ice.RetryException;var f=Ice.Protocol;var _=Ice.SocketOperation;var d=Ice.Timer;var p=Ice.TraceUtil;var v=Ice.ProtocolVersion;var y=Ice.EncodingVersion;var g=Ice.ACM;var I=Ice.ACMClose;var m=Ice.ACMHeartbeat;var k=Ice.ConnectionClose;var w=0;var C=1;var S=2;var x=3;var E=4;var b=5;var O=6;var P=function e(t){_classCallCheck(this,e);this.stream=new n(t,f.currentProtocolEncoding);this.invokeNum=0;this.requestId=0;this.servantManager=null;this.adapter=null;this.outAsync=null;this.heartbeatCallback=null};var M=function(){function M(e,t,s,a,o,c,l){_classCallCheck(this,M);this._communicator=e;this._instance=t;this._monitor=s;this._transceiver=a;this._desc=a.toString();this._type=a.type();this._endpoint=o;this._incoming=c;this._adapter=l;var h=t.initializationData();this._logger=h.logger;this._traceLevels=t.traceLevels();this._timer=t.timer();this._writeTimeoutId=0;this._writeTimeoutScheduled=false;this._readTimeoutId=0;this._readTimeoutScheduled=false;this._hasMoreData={value:false};this._warn=h.properties.getPropertyAsInt("Ice.Warn.Connections")>0;this._warnUdp=t.initializationData().properties.getPropertyAsInt("Ice.Warn.Datagrams")>0;this._acmLastActivity=this._monitor!==null&&this._monitor.getACM().timeout>0?Date.now():-1;this._nextRequestId=1;this._messageSizeMax=l?l.messageSizeMax():t.messageSizeMax();this._batchRequestQueue=new r(t,o.datagram());this._sendStreams=[];this._readStream=new n(t,f.currentProtocolEncoding);this._readHeader=false;this._writeStream=new i(t,f.currentProtocolEncoding);this._readStreamPos=-1;this._writeStreamPos=-1;this._dispatchCount=0;this._state=w;this._shutdownInitiated=false;this._initialized=false;this._validated=false;this._readProtocol=new v;this._readProtocolEncoding=new y;this._asyncRequests=new u;this._exception=null;this._startPromise=null;this._closePromises=[];this._finishedPromises=[];if(this._adapter!==null){this._servantManager=this._adapter.getServantManager()}else{this._servantManager=null}this._closeCallback=null;this._heartbeatCallback=null}_createClass(M,[{key:"start",value:function e(){var t=this;o.assert(this._startPromise===null);try{if(this._state>=b){o.assert(this._exception!==null);return Ice.Promise.reject(this._exception)}this._startPromise=new Ice.Promise;this._transceiver.setCallbacks(function(){t.message(_.Write)},function(){t.message(_.Read)},function(){t.message(_.Write)});this.initialize()}catch(e){var n=this._startPromise;this.exception(e);return n}return this._startPromise}},{key:"activate",value:function e(){if(this._state<=C){return}if(this._acmLastActivity>0){this._acmLastActivity=Date.now()}this.setState(S)}},{key:"hold",value:function e(){if(this._state<=C){return}this.setState(x)}},{key:"destroy",value:function e(t){switch(t){case M.ObjectAdapterDeactivated:{this.setState(E,new Ice.ObjectAdapterDeactivatedException);break}case M.CommunicatorDestroyed:{this.setState(E,new Ice.CommunicatorDestroyedException);break}}}},{key:"close",value:function e(n){var i=new t(this._communicator,"close",this,null,null);if(n==k.Forcefully){this.setState(b,new Ice.ConnectionManuallyClosedException(false));i.resolve()}else if(n==k.Gracefully){this.setState(E,new Ice.ConnectionManuallyClosedException(true));i.resolve()}else{o.assert(n==k.GracefullyWithWait);this._closePromises.push(i);this.checkClose()}return i}},{key:"checkClose",value:function e(){var t=this;if(this._asyncRequests.size===0&&this._closePromises.length>0){d.setImmediate(function(){t.setState(E,new Ice.ConnectionManuallyClosedException(true));t._closePromises.forEach(function(e){return e.resolve()});t._closePromises=[]})}}},{key:"isActiveOrHolding",value:function e(){return this._state>C&&this._state<E}},{key:"isFinished",value:function e(){if(this._state!==O||this._dispatchCount!==0){return false}o.assert(this._state===O);return true}},{key:"throwException",value:function e(){if(this._exception!==null){o.assert(this._state>=E);throw this._exception}}},{key:"waitUntilFinished",value:function e(){var t=new Ice.Promise;this._finishedPromises.push(t);this.checkState();return t}},{key:"monitor",value:function e(t,n){if(this._state!==S){return}if(n.heartbeat==Ice.ACMHeartbeat.HeartbeatAlways||n.heartbeat!=Ice.ACMHeartbeat.HeartbeatOff&&this._writeStream.isEmpty()&&t>=this._acmLastActivity+n.timeout/4){if(n.heartbeat!=Ice.ACMHeartbeat.HeartbeatOnDispatch||this._dispatchCount>0){this.sendHeartbeatNow()}}if(this._readStream.size>f.headerSize||!this._writeStream.isEmpty()){return}if(n.close!=Ice.ACMClose.CloseOff&&t>=this._acmLastActivity+n.timeout){if(n.close==Ice.ACMClose.CloseOnIdleForceful||n.close!=Ice.ACMClose.CloseOnIdle&&this._asyncRequests.size>0){this.setState(b,new Ice.ConnectionTimeoutException)}else if(n.close!=Ice.ACMClose.CloseOnInvocation&&this._dispatchCount===0&&this._batchRequestQueue.isEmpty()&&this._asyncRequests.size===0){this.setState(E,new Ice.ConnectionTimeoutException)}}}},{key:"sendAsyncRequest",value:function e(t,n,i){var r=0;var s=t.getOs();if(this._exception!==null){throw new h(this._exception)}o.assert(this._state>C);o.assert(this._state<E);this._transceiver.checkSendSize(s);t.cancelable(this);if(n){r=this._nextRequestId++;if(r<=0){this._nextRequestId=1;r=this._nextRequestId++}s.pos=f.headerSize;s.writeInt(r)}else if(i>0){s.pos=f.headerSize;s.writeInt(i)}var a=void 0;try{a=this.sendMessage(A.create(t,t.getOs(),r))}catch(e){if(e instanceof Ice.LocalException){this.setState(b,e);o.assert(this._exception!==null);throw this._exception}else{throw e}}if(n){this._asyncRequests.set(r,t)}return a}},{key:"getBatchRequestQueue",value:function e(){return this._batchRequestQueue}},{key:"flushBatchRequests",value:function e(){var t=new s(this,this._communicator,"flushBatchRequests");t.invoke();return t}},{key:"setCloseCallback",value:function e(t){var n=this;if(this._state>=b){if(t!==null){d.setImmediate(function(){try{t(n)}catch(e){n._logger.error("connection callback exception:\n"+e+"\n"+n._desc)}})}}else{this._closeCallback=t}}},{key:"setHeartbeatCallback",value:function e(t){if(this._state>=b){return}this._heartbeatCallback=t}},{key:"heartbeat",value:function e(){var t=new a(this,this._communicator);t.invoke();return t}},{key:"setACM",value:function e(t,n,i){if(t!==undefined&&t<0){throw new Error("invalid negative ACM timeout value")}if(this._monitor===null||this._state>=b){return}if(this._state==S){this._monitor.remove(this)}this._monitor=this._monitor.acm(t,n,i);if(this._state==S){this._monitor.add(this)}if(this._monitor.getACM().timeout<=0){this._acmLastActivity=-1}else if(this._state==S&&this._acmLastActivity==-1){this._acmLastActivity=Date.now()}}},{key:"getACM",value:function e(){return this._monitor!==null?this._monitor.getACM():new g(0,I.CloseOff,m.HeartbeatOff)}},{key:"asyncRequestCanceled",value:function e(t,n){for(var i=0;i<this._sendStreams.length;i++){var r=this._sendStreams[i];if(r.outAsync===t){if(r.requestId>0){this._asyncRequests.delete(r.requestId)}r.canceled();if(i!==0){this._sendStreams.splice(i,1)}t.completedEx(n);this.checkClose();return}}if(t instanceof Ice.OutgoingAsync){var s=true;var a=false;var o=undefined;try{for(var c=this._asyncRequests[Symbol.iterator](),u;!(s=(u=c.next()).done);s=true){var l=_slicedToArray(u.value,2),h=l[0],f=l[1];if(f===t){this._asyncRequests.delete(h);t.completedEx(n);this.checkClose();return}}}catch(e){a=true;o=e}finally{try{if(!s&&c.return){c.return()}}finally{if(a){throw o}}}}}},{key:"sendResponse",value:function e(t){o.assert(this._state>C);try{if(--this._dispatchCount===0){if(this._state===O){this.reap()}this.checkState()}if(this._state>=b){o.assert(this._exception!==null);throw this._exception}this.sendMessage(A.createForStream(t,true));if(this._state===E&&this._dispatchCount===0){this.initiateShutdown()}}catch(e){if(e instanceof Ice.LocalException){this.setState(b,e)}else{throw e}}}},{key:"sendNoResponse",value:function e(){o.assert(this._state>C);try{if(--this._dispatchCount===0){if(this._state===O){this.reap()}this.checkState()}if(this._state>=b){o.assert(this._exception!==null);throw this._exception}if(this._state===E&&this._dispatchCount===0){this.initiateShutdown()}}catch(e){if(e instanceof Ice.LocalException){this.setState(b,e)}else{throw e}}}},{key:"endpoint",value:function e(){return this._endpoint}},{key:"setAdapter",value:function e(t){if(t!==null){t.checkForDeactivation();if(this._state<=C||this._state>=E){return}this._adapter=t;this._servantManager=t.getServantManager()}else{if(this._state<=C||this._state>=E){return}this._adapter=null;this._servantManager=null}}},{key:"getAdapter",value:function e(){return this._adapter}},{key:"getEndpoint",value:function e(){return this._endpoint}},{key:"createProxy",value:function e(t){return this._instance.proxyFactory().referenceToProxy(this._instance.referenceFactory().createFixed(t,this))}},{key:"message",value:function e(t){var n=this;if(this._state>=b){return}this.unscheduleTimeout(t);this._hasMoreData.value=(t&_.Read)!==0;var i=null;try{if((t&_.Write)!==0&&this._writeStream.buffer.remaining>0){if(!this.write(this._writeStream.buffer)){o.assert(!this._writeStream.isEmpty());this.scheduleTimeout(_.Write);return}o.assert(this._writeStream.buffer.remaining===0)}if((t&_.Read)!==0&&!this._readStream.isEmpty()){if(this._readHeader){if(!this.read(this._readStream.buffer)){return}o.assert(this._readStream.buffer.remaining===0);this._readHeader=false;var r=this._readStream.pos;if(r<f.headerSize){throw new Ice.IllegalMessageSizeException}this._readStream.pos=0;var s=this._readStream.readByte();var a=this._readStream.readByte();var u=this._readStream.readByte();var l=this._readStream.readByte();if(s!==f.magic[0]||a!==f.magic[1]||u!==f.magic[2]||l!==f.magic[3]){throw new Ice.BadMagicException("",new Uint8Array([s,a,u,l]))}this._readProtocol._read(this._readStream);f.checkSupportedProtocol(this._readProtocol);this._readProtocolEncoding._read(this._readStream);f.checkSupportedProtocolEncoding(this._readProtocolEncoding);this._readStream.readByte();this._readStream.readByte();var h=this._readStream.readInt();if(h<f.headerSize){throw new Ice.IllegalMessageSizeException}if(h>this._messageSizeMax){c.throwMemoryLimitException(h,this._messageSizeMax)}if(h>this._readStream.size){this._readStream.resize(h)}this._readStream.pos=r}if(this._readStream.pos!=this._readStream.size){if(this._endpoint.datagram()){throw new Ice.DatagramLimitException}else{if(!this.read(this._readStream.buffer)){o.assert(!this._readStream.isEmpty());this.scheduleTimeout(_.Read);return}o.assert(this._readStream.buffer.remaining===0)}}}if(this._state<=C){if(this._state===w&&!this.initialize()){return}if(this._state<=C&&!this.validate()){return}this._transceiver.unregister();this.setState(x);if(this._startPromise!==null){++this._dispatchCount}}else{o.assert(this._state<=E);if((t&_.Read)!==0){i=this.parseMessage()}if((t&_.Write)!==0){this.sendNextMessage()}}}catch(e){if(e instanceof Ice.DatagramLimitException){if(this._warnUdp){this._logger.warning("maximum datagram size of "+this._readStream.pos+" exceeded")}this._readStream.resize(f.headerSize);this._readStream.pos=0;this._readHeader=true;return}else if(e instanceof Ice.SocketException){this.setState(b,e);return}else if(e instanceof Ice.LocalException){if(this._endpoint.datagram()){if(this._warn){this._logger.warning("datagram connection exception:\n"+e+"\n"+this._desc)}this._readStream.resize(f.headerSize);this._readStream.pos=0;this._readHeader=true}else{this.setState(b,e)}return}else{throw e}}if(this._acmLastActivity>0){this._acmLastActivity=Date.now()}this.dispatch(i);if(this._hasMoreData.value){d.setImmediate(function(){n.message(_.Read)})}}},{key:"dispatch",value:function e(t){var n=0;if(this._startPromise!==null){this._startPromise.resolve();this._startPromise=null;++n}if(t!==null){if(t.outAsync!==null){t.outAsync.completed(t.stream);++n}if(t.invokeNum>0){this.invokeAll(t.stream,t.invokeNum,t.requestId,t.servantManager,t.adapter)}if(t.heartbeatCallback){try{t.heartbeatCallback(this)}catch(e){this._logger.error("connection callback exception:\n"+e+"\n"+this._desc)}t.heartbeatCallback=null;++n}}if(n>0){this._dispatchCount-=n;if(this._dispatchCount===0){if(this._state===E){try{this.initiateShutdown()}catch(e){if(e instanceof Ice.LocalException){this.setState(b,e)}else{throw e}}}else if(this._state===O){this.reap()}this.checkState()}}}},{key:"finish",value:function e(){o.assert(this._state===b);this.unscheduleTimeout(_.Read|_.Write|_.Connect);var t=this._instance.traceLevels();if(!this._initialized){if(t.network>=2){var n=[];n.push("failed to establish ");n.push(this._endpoint.protocol());n.push(" connection\n");n.push(this.toString());n.push("\n");n.push(this._exception.toString());this._instance.initializationData().logger.trace(t.networkCat,n.join(""))}}else{if(t.network>=1){var i=[];i.push("closed ");i.push(this._endpoint.protocol());i.push(" connection\n");i.push(this.toString());if(!(this._exception instanceof Ice.CloseConnectionException||this._exception instanceof Ice.ConnectionManuallyClosedException||this._exception instanceof Ice.ConnectionTimeoutException||this._exception instanceof Ice.CommunicatorDestroyedException||this._exception instanceof Ice.ObjectAdapterDeactivatedException)){i.push("\n");i.push(this._exception.toString())}this._instance.initializationData().logger.trace(t.networkCat,i.join(""))}}if(this._startPromise!==null){this._startPromise.reject(this._exception);this._startPromise=null}if(this._sendStreams.length>0){if(!this._writeStream.isEmpty()){this._writeStream.swap(this._sendStreams[0].stream)}for(var r=0;r<this._sendStreams.length;++r){var s=this._sendStreams[r];if(s.requestId>0){this._asyncRequests.delete(s.requestId)}s.completed(this._exception)}this._sendStreams=[]}var a=true;var c=false;var u=undefined;try{for(var l=this._asyncRequests.values()[Symbol.iterator](),h;!(a=(h=l.next()).done);a=true){var f=h.value;f.completedEx(this._exception)}}catch(e){c=true;u=e}finally{try{if(!a&&l.return){l.return()}}finally{if(c){throw u}}}this._asyncRequests.clear();this.checkClose();this._readStream.clear();this._readStream.buffer.clear();this._writeStream.clear();this._writeStream.buffer.clear();if(this._closeCallback!==null){try{this._closeCallback(this)}catch(e){this._logger.error("connection callback exception:\n"+e+"\n"+this._desc)}this._closeCallback=null}this._heartbeatCallback=null;if(this._dispatchCount===0){this.reap()}this.setState(O)}},{key:"toString",value:function e(){return this._desc}},{key:"timedOut",value:function e(t){if(this._state<=C){this.setState(b,new Ice.ConnectTimeoutException)}else if(this._state<E){this.setState(b,new Ice.TimeoutException)}else if(this._state===E){this.setState(b,new Ice.CloseTimeoutException)}}},{key:"type",value:function e(){return this._type}},{key:"timeout",value:function e(){return this._endpoint.timeout()}},{key:"getInfo",value:function e(){if(this._state>=b){throw this._exception}var t=this._transceiver.getInfo();for(var n=t;n!==null;n=n.underlying){n.adapterName=this._adapter!==null?this._adapter.getName():"";n.incoming=this._incoming}return t}},{key:"setBufferSize",value:function e(t,n){if(this._state>=b){throw this._exception}this._transceiver.setBufferSize(t,n)}},{key:"exception",value:function e(t){this.setState(b,t)}},{key:"invokeException",value:function e(t,n){this.setState(b,t);if(n>0){o.assert(this._dispatchCount>0);this._dispatchCount-=n;o.assert(this._dispatchCount>=0);if(this._dispatchCount===0){if(this._state===O){this.reap()}this.checkState()}}}},{key:"setState",value:function e(t,n){if(n!==undefined){o.assert(n instanceof Ice.LocalException);o.assert(t>=E);if(this._state===t){return}if(this._exception===null){this._exception=n;if(this._warn&&this._validated){if(!(this._exception instanceof Ice.CloseConnectionException||this._exception instanceof Ice.ConnectionManuallyClosedException||this._exception instanceof Ice.ConnectionTimeoutException||this._exception instanceof Ice.CommunicatorDestroyedException||this._exception instanceof Ice.ObjectAdapterDeactivatedException||this._exception instanceof Ice.ConnectionLostException&&this._state===E)){this.warning("connection exception",this._exception)}}}}if(this._endpoint.datagram()&&t===E){t=b}if(this._state<=C&&t===E){t=b}if(this._state===t){return}try{switch(t){case w:{o.assert(false);break}case C:{if(this._state!==w){o.assert(this._state===b);return}if(!this._endpoint.datagram()&&!this._incoming){this._transceiver.register()}break}case S:{if(this._state!==x&&this._state!==C){return}this._transceiver.register();break}case x:{if(this._state!==S&&this._state!==C){return}if(this._state===S){this._transceiver.unregister()}break}case E:{if(this._state>=b){return}if(this._state===x){this._transceiver.register()}break}case b:{if(this._state===O){return}this._batchRequestQueue.destroy(this._exception);this._transceiver.unregister();break}case O:{o.assert(this._state===b);this._transceiver.close();this._communicator=null;break}}}catch(n){if(n instanceof Ice.LocalException){this._instance.initializationData().logger.error("unexpected connection exception:\n"+this._desc+"\n"+n.toString())}else{throw n}}if(this._monitor!==null){if(t===S){this._monitor.add(this);if(this._acmLastActivity>0){this._acmLastActivity=Date.now()}}else if(this._state===S){this._monitor.remove(this)}}this._state=t;if(this._state===E&&this._dispatchCount===0){try{this.initiateShutdown()}catch(n){if(n instanceof Ice.LocalException){this.setState(b,n)}else{throw n}}}else if(this._state===b){this.finish()}this.checkState()}},{key:"initiateShutdown",value:function t(){o.assert(this._state===E&&this._dispatchCount===0);if(this._shutdownInitiated){return}this._shutdownInitiated=true;if(!this._endpoint.datagram()){var n=new i(this._instance,f.currentProtocolEncoding);n.writeBlob(f.magic);f.currentProtocol._write(n);f.currentProtocolEncoding._write(n);n.writeByte(f.closeConnectionMsg);n.writeByte(0);n.writeInt(f.headerSize);if((this.sendMessage(A.createForStream(n,false))&e.Sent)>0){this.scheduleTimeout(_.Read)}}}},{key:"sendHeartbeatNow",value:function e(){o.assert(this._state===S);if(!this._endpoint.datagram()){var t=new i(this._instance,f.currentProtocolEncoding);t.writeBlob(f.magic);f.currentProtocol._write(t);f.currentProtocolEncoding._write(t);t.writeByte(f.validateConnectionMsg);t.writeByte(0);t.writeInt(f.headerSize);try{this.sendMessage(A.createForStream(t,false))}catch(e){this.setState(b,e);o.assert(this._exception!==null)}}}},{key:"initialize",value:function e(){var t=this._transceiver.initialize(this._readStream.buffer,this._writeStream.buffer);if(t!=_.None){this.scheduleTimeout(t);return false}this._desc=this._transceiver.toString();this._initialized=true;this.setState(C);return true}},{key:"validate",value:function e(){if(!this._endpoint.datagram()){if(this._adapter!==null){if(this._writeStream.size===0){this._writeStream.writeBlob(f.magic);f.currentProtocol._write(this._writeStream);f.currentProtocolEncoding._write(this._writeStream);this._writeStream.writeByte(f.validateConnectionMsg);this._writeStream.writeByte(0);this._writeStream.writeInt(f.headerSize);p.traceSend(this._writeStream,this._logger,this._traceLevels);this._writeStream.prepareWrite()}if(this._writeStream.pos!=this._writeStream.size&&!this.write(this._writeStream.buffer)){this.scheduleTimeout(_.Write);return false}}else{if(this._readStream.size===0){this._readStream.resize(f.headerSize);this._readStream.pos=0}if(this._readStream.pos!==this._readStream.size&&!this.read(this._readStream.buffer)){this.scheduleTimeout(_.Read);return false}o.assert(this._readStream.pos===f.headerSize);this._readStream.pos=0;var t=this._readStream.readBlob(4);if(t[0]!==f.magic[0]||t[1]!==f.magic[1]||t[2]!==f.magic[2]||t[3]!==f.magic[3]){throw new Ice.BadMagicException("",t)}this._readProtocol._read(this._readStream);f.checkSupportedProtocol(this._readProtocol);this._readProtocolEncoding._read(this._readStream);f.checkSupportedProtocolEncoding(this._readProtocolEncoding);var n=this._readStream.readByte();if(n!==f.validateConnectionMsg){throw new Ice.ConnectionNotValidatedException}this._readStream.readByte();if(this._readStream.readInt()!==f.headerSize){throw new Ice.IllegalMessageSizeException}p.traceRecv(this._readStream,this._logger,this._traceLevels);this._validated=true}}this._writeStream.resize(0);this._writeStream.pos=0;this._readStream.resize(f.headerSize);this._readHeader=true;this._readStream.pos=0;var i=this._instance.traceLevels();if(i.network>=1){var r=[];if(this._endpoint.datagram()){r.push("starting to send ");r.push(this._endpoint.protocol());r.push(" messages\n");r.push(this._transceiver.toDetailedString())}else{r.push("established ");r.push(this._endpoint.protocol());r.push(" connection\n");r.push(this.toString())}this._instance.initializationData().logger.trace(i.networkCat,r.join(""))}return true}},{key:"sendNextMessage",value:function e(){if(this._sendStreams.length===0){return}o.assert(!this._writeStream.isEmpty()&&this._writeStream.pos===this._writeStream.size);try{while(true){var t=this._sendStreams.shift();this._writeStream.swap(t.stream);t.sent();if(this._sendStreams.length===0){break}if(this._state>=b){return}t=this._sendStreams[0];o.assert(!t.prepared);var n=t.stream;n.pos=10;n.writeInt(n.size);n.prepareWrite();t.prepared=true;p.traceSend(n,this._logger,this._traceLevels);this._writeStream.swap(t.stream);if(this._writeStream.pos!=this._writeStream.size&&!this.write(this._writeStream.buffer)){o.assert(!this._writeStream.isEmpty());this.scheduleTimeout(_.Write);return}}}catch(e){if(e instanceof Ice.LocalException){this.setState(b,e);return}else{throw e}}o.assert(this._writeStream.isEmpty());if(this._state===E&&_shutdownInitiated){this.scheduleTimeout(_.Read)}}},{key:"sendMessage",value:function t(n){if(this._sendStreams.length>0){n.doAdopt();this._sendStreams.push(n);return e.Queued}o.assert(this._state<b);o.assert(!n.prepared);var i=n.stream;i.pos=10;i.writeInt(i.size);i.prepareWrite();n.prepared=true;p.traceSend(i,this._logger,this._traceLevels);if(this.write(i.buffer)){n.sent();if(this._acmLastActivity>0){this._acmLastActivity=Date.now()}return e.Sent}n.doAdopt();this._writeStream.swap(n.stream);this._sendStreams.push(n);this.scheduleTimeout(_.Write);return e.Queued}},{key:"parseMessage",value:function e(){o.assert(this._state>C&&this._state<b);var t=new P(this._instance);this._readStream.swap(t.stream);this._readStream.resize(f.headerSize);this._readStream.pos=0;this._readHeader=true;this._validated=true;o.assert(t.stream.pos===t.stream.size);try{t.stream.pos=8;var n=t.stream.readByte();var i=t.stream.readByte();if(i===2){throw new Ice.FeatureNotSupportedException("Cannot uncompress compressed message")}t.stream.pos=f.headerSize;switch(n){case f.closeConnectionMsg:{p.traceRecv(t.stream,this._logger,this._traceLevels);if(this._endpoint.datagram()){if(this._warn){this._logger.warning("ignoring close connection message for datagram connection:\n"+this._desc)}}else{this.setState(b,new Ice.CloseConnectionException)}break}case f.requestMsg:{if(this._state===E){p.traceIn("received request during closing\n"+"(ignored by server, client will retry)",t.stream,this._logger,this._traceLevels)}else{p.traceRecv(t.stream,this._logger,this._traceLevels);t.requestId=t.stream.readInt();t.invokeNum=1;t.servantManager=this._servantManager;t.adapter=this._adapter;++this._dispatchCount}break}case f.requestBatchMsg:{if(this._state===E){p.traceIn("received batch request during closing\n"+"(ignored by server, client will retry)",t.stream,this._logger,this._traceLevels)}else{p.traceRecv(t.stream,this._logger,this._traceLevels);t.invokeNum=t.stream.readInt();if(t.invokeNum<0){t.invokeNum=0;throw new Ice.UnmarshalOutOfBoundsException}t.servantManager=this._servantManager;t.adapter=this._adapter;this._dispatchCount+=t.invokeNum}break}case f.replyMsg:{p.traceRecv(t.stream,this._logger,this._traceLevels);t.requestId=t.stream.readInt();t.outAsync=this._asyncRequests.get(t.requestId);if(t.outAsync){this._asyncRequests.delete(t.requestId);++this._dispatchCount}else{t=null}this.checkClose();break}case f.validateConnectionMsg:{p.traceRecv(t.stream,this._logger,this._traceLevels);if(this._heartbeatCallback!==null){t.heartbeatCallback=this._heartbeatCallback;++this._dispatchCount}break}default:{p.traceIn("received unknown message\n(invalid, closing connection)",t.stream,this._logger,this._traceLevels);throw new Ice.UnknownMessageException}}}catch(e){if(e instanceof Ice.LocalException){if(this._endpoint.datagram()){if(this._warn){this._logger.warning("datagram connection exception:\n"+e+"\n"+this._desc)}}else{this.setState(b,e)}}else{throw e}}return t}},{key:"invokeAll",value:function e(t,n,i,r,s){try{while(n>0){var a=new l(this._instance,this,s,!this._endpoint.datagram()&&i!==0,i);a.invoke(r,t);--n}t.clear()}catch(e){if(e instanceof Ice.LocalException){this.invokeException(e,n)}else if(e instanceof Ice.ServantError){}else{this._logger.error("unexpected exception:\n"+e.toString());this.invokeException(new Ice.UnknownException(e),n)}}}},{key:"scheduleTimeout",value:function e(t){var n=this;var i=void 0;if(this._state<S){var r=this._instance.defaultsAndOverrides();if(r.overrideConnectTimeout){i=r.overrideConnectTimeoutValue}else{i=this._endpoint.timeout()}}else if(this._state<E){if(this._readHeader){t&=~_.Read}i=this._endpoint.timeout()}else{var s=this._instance.defaultsAndOverrides();if(s.overrideCloseTimeout){i=s.overrideCloseTimeoutValue}else{i=this._endpoint.timeout()}}if(i<0){return}if((t&_.Read)!==0){if(this._readTimeoutScheduled){this._timer.cancel(this._readTimeoutId)}this._readTimeoutId=this._timer.schedule(function(){return n.timedOut()},i);this._readTimeoutScheduled=true}if((t&(_.Write|_.Connect))!==0){if(this._writeTimeoutScheduled){this._timer.cancel(this._writeTimeoutId)}this._writeTimeoutId=this._timer.schedule(function(){return n.timedOut()},i);this._writeTimeoutScheduled=true}}},{key:"unscheduleTimeout",value:function e(t){if((t&_.Read)!==0&&this._readTimeoutScheduled){this._timer.cancel(this._readTimeoutId);this._readTimeoutScheduled=false}if((t&(_.Write|_.Connect))!==0&&this._writeTimeoutScheduled){this._timer.cancel(this._writeTimeoutId);this._writeTimeoutScheduled=false}}},{key:"warning",value:function e(t,n){this._logger.warning(t+":\n"+this._desc+"\n"+n.toString())}},{key:"checkState",value:function e(){if(this._state<x||this._dispatchCount>0){return}if(this._state===O&&this._finishedPromises.length>0){this._adapter=null;this._finishedPromises.forEach(function(e){return e.resolve()});this._finishedPromises=[]}}},{key:"reap",value:function e(){if(this._monitor!==null){this._monitor.reap(this)}}},{key:"read",value:function e(t){var n=t.position;var i=this._transceiver.read(t,this._hasMoreData);if(this._instance.traceLevels().network>=3&&t.position!=n){var r=[];r.push("received ");if(this._endpoint.datagram()){r.push(t.limit)}else{r.push(t.position-n);r.push(" of ");r.push(t.limit-n)}r.push(" bytes via ");r.push(this._endpoint.protocol());r.push("\n");r.push(this.toString());this._instance.initializationData().logger.trace(this._instance.traceLevels().networkCat,r.join(""))}return i}},{key:"write",value:function e(t){var n=t.position;var i=this._transceiver.write(t);if(this._instance.traceLevels().network>=3&&t.position!=n){var r=[];r.push("sent ");r.push(t.position-n);if(!this._endpoint.datagram()){r.push(" of ");r.push(t.limit-n)}r.push(" bytes via ");r.push(this._endpoint.protocol());r.push("\n");r.push(this.toString());this._instance.initializationData().logger.trace(this._instance.traceLevels().networkCat,r.join(""))}return i}}]);return M}();M.ObjectAdapterDeactivated=0;M.CommunicatorDestroyed=1;Ice.ConnectionI=M;var A=function(){function e(){_classCallCheck(this,e);this.stream=null;this.outAsync=null;this.requestId=0;this.prepared=false}_createClass(e,[{key:"canceled",value:function e(){o.assert(this.outAsync!==null);this.outAsync=null}},{key:"doAdopt",value:function e(){if(this.adopt){var t=new i(this.stream.instance,f.currentProtocolEncoding);t.swap(this.stream);this.stream=t;this.adopt=false}}},{key:"sent",value:function e(){if(this.outAsync!==null){this.outAsync.sent()}}},{key:"completed",value:function e(t){if(this.outAsync!==null){this.outAsync.completedEx(t)}}}],[{key:"createForStream",value:function t(n,i){var r=new e;r.stream=n;r.adopt=i;r.isSent=false;r.requestId=0;r.outAsync=null;return r}},{key:"create",value:function t(n,i,r){var s=new e;s.stream=i;s.outAsync=n;s.requestId=r;s.isSent=false;s.adopt=false;return s}}]);return e}()})();(function(){var e=Ice.AsyncResultBase;var t=Ice.ConnectionI;var n=Ice.Debug;var i=Ice.HashMap;var r=Ice.FactoryACMMonitor;var s=function(){function s(e,t){_classCallCheck(this,s);this._communicator=e;this._instance=t;this._destroyed=false;this._monitor=new r(this._instance,this._instance.clientACM());this._connectionsByEndpoint=new a;this._pending=new i(i.compareEquals);this._pendingConnectCount=0;this._waitPromise=null}_createClass(s,[{key:"destroy",value:function e(){if(this._destroyed){return}this._connectionsByEndpoint.forEach(function(e){return e.destroy(t.CommunicatorDestroyed)});this._destroyed=true;this._communicator=null;this.checkFinished()}},{key:"waitUntilFinished",value:function e(){this._waitPromise=new Ice.Promise;this.checkFinished();return this._waitPromise}},{key:"create",value:function e(t,i,r){n.assert(t.length>0);var s=this.applyOverrides(t);try{var a=this.findConnectionByEndpoint(s);if(a!==null){return Ice.Promise.resolve(a)}}catch(e){return Ice.Promise.reject(e)}return new o(this,s,i,r).start()}},{key:"setRouterInfo",value:function e(t){var n=this;return Ice.Promise.try(function(){if(n._destroyed){throw new Ice.CommunicatorDestroyedException}return t.getClientEndpoints()}).then(function(e){var i=t.getAdapter();var r=n._instance.defaultsAndOverrides();e.forEach(function(e){if(r.overrideTimeout){e=e.changeTimeout(r.overrideTimeoutValue)}e=e.changeCompress(false);n._connectionsByEndpoint.forEach(function(t){if(t.endpoint().equals(e)){t.setAdapter(i)}})})})}},{key:"removeAdapter",value:function e(t){if(this._destroyed){return}this._connectionsByEndpoint.forEach(function(e){if(e.getAdapter()===t){e.setAdapter(null)}})}},{key:"flushAsyncBatchRequests",value:function t(){var n=new e(this._communicator,"flushBatchRequests",null,null,null);if(this._destroyed){n.resolve();return n}Ice.Promise.all(this._connectionsByEndpoint.map(function(e){if(e.isActiveOrHolding()){return e.flushBatchRequests().catch(function(e){if(e instanceof Ice.LocalException){}else{throw e}})}})).then(n.resolve,n.reject);return n}},{key:"applyOverrides",value:function e(t){var n=this._instance.defaultsAndOverrides();return t.map(function(e){return n.overrideTimeout?e.changeTimeout(n.overrideTimeoutValue):e})}},{key:"findConnectionByEndpoint",value:function e(t){if(this._destroyed){throw new Ice.CommunicatorDestroyedException}n.assert(t.length>0);for(var i=0;i<t.length;++i){var r=t[i];if(this._pending.has(r)){continue}var s=this._connectionsByEndpoint.get(r);if(s===undefined){continue}for(var a=0;a<s.length;++a){if(s[a].isActiveOrHolding()){return s[a]}}}return null}},{key:"incPendingConnectCount",value:function e(){if(this._destroyed){throw new Ice.CommunicatorDestroyedException}++this._pendingConnectCount}},{key:"decPendingConnectCount",value:function e(){--this._pendingConnectCount;n.assert(this._pendingConnectCount>=0);if(this._destroyed&&this._pendingConnectCount===0){this.checkFinished()}}},{key:"getConnection",value:function e(t,n){var i=this;if(this._destroyed){throw new Ice.CommunicatorDestroyedException}var r=this._monitor.swapReapedConnections();if(r!==null){r.forEach(function(e){i._connectionsByEndpoint.removeConnection(e.endpoint(),e);i._connectionsByEndpoint.removeConnection(e.endpoint().changeCompress(true),e)})}while(true){if(this._destroyed){throw new Ice.CommunicatorDestroyedException}var s=this.findConnectionByEndpoint(t);if(s!==null){return s}if(this.addToPending(n,t)){return null}else{break}}n.nextEndpoint();return null}},{key:"createConnection",value:function e(i,r){n.assert(this._pending.has(r)&&i!==null);var s=null;try{if(this._destroyed){throw new Ice.CommunicatorDestroyedException}s=new t(this._communicator,this._instance,this._monitor,i,r.changeCompress(false),false,null)}catch(e){if(e instanceof Ice.LocalException){try{i.close()}catch(e){}}throw e}this._connectionsByEndpoint.set(s.endpoint(),s);this._connectionsByEndpoint.set(s.endpoint().changeCompress(true),s);return s}},{key:"finishGetConnection",value:function e(t,n,i,r){var s=this;var a=[];if(r!==null){a.push(r)}var o=[];t.forEach(function(e){var t=s._pending.get(e);if(t!==undefined){s._pending.delete(e);t.forEach(function(e){if(e.hasEndpoint(n)){if(a.indexOf(e)===-1){a.push(e)}}else{if(o.indexOf(e)===-1){o.push(e)}}})}});a.forEach(function(e){e.removeFromPending();var t=o.indexOf(e);if(t!==-1){o.splice(t,1)}});o.forEach(function(e){return e.removeFromPending()});o.forEach(function(e){return e.getConnection()});a.forEach(function(e){return e.setConnection(i)});this.checkFinished()}},{key:"finishGetConnectionEx",value:function e(t,i,r){var s=this;var a=[];if(r!==null){a.push(r)}var o=[];t.forEach(function(e){var n=s._pending.get(e);if(n!==undefined){s._pending.delete(e);n.forEach(function(e){if(e.removeEndpoints(t)){if(a.indexOf(e)===-1){a.push(e)}}else{if(o.indexOf(e)===-1){o.push(e)}}})}});o.forEach(function(e){n.assert(a.indexOf(e)===-1);e.removeFromPending()});this.checkFinished();o.forEach(function(e){return e.getConnection()});a.forEach(function(e){return e.setException(i)})}},{key:"addToPending",value:function e(t,n){var i=this;var r=false;if(t!==null){n.forEach(function(e){var n=i._pending.get(e);if(n!==undefined){r=true;if(n.indexOf(t)===-1){n.push(t)}}})}if(r){return true}n.forEach(function(e){if(!i._pending.has(e)){i._pending.set(e,[])}});return false}},{key:"removeFromPending",value:function e(t,n){var i=this;n.forEach(function(e){var n=i._pending.get(e);if(n!==undefined){var r=n.indexOf(t);if(r!==-1){n.splice(r,1)}}})}},{key:"handleConnectionException",value:function e(t,n){var i=this._instance.traceLevels();if(i.network>=2){var r=[];r.push("connection to endpoint failed");if(t instanceof Ice.CommunicatorDestroyedException){r.push("\n")}else{if(n){r.push(", trying next endpoint\n")}else{r.push(" and no more endpoints to try\n")}}r.push(t.toString());this._instance.initializationData().logger.trace(i.networkCat,r.join(""))}}},{key:"handleException",value:function e(t,n){var i=this._instance.traceLevels();if(i.network>=2){var r=[];r.push("couldn't resolve endpoint host");if(t instanceof Ice.CommunicatorDestroyedException){r.push("\n")}else{if(n){r.push(", trying next endpoint\n")}else{r.push(" and no more endpoints to try\n")}}r.push(t.toString());this._instance.initializationData().logger.trace(i.networkCat,r.join(""))}}},{key:"checkFinished",value:function e(){var t=this;if(!this._waitPromise||!this._destroyed||this._pending.size>0||this._pendingConnectCount>0){return}Ice.Promise.all(this._connectionsByEndpoint.map(function(e){return e.waitUntilFinished().catch(function(e){return n.assert(false)})})).then(function(){var e=t._monitor.swapReapedConnections();if(e!==null){var i=[];t._connectionsByEndpoint.forEach(function(e){if(i.indexOf(e)===-1){i.push(e)}});n.assert(e.length===i.length);t._connectionsByEndpoint.clear()}else{n.assert(t._connectionsByEndpoint.size===0)}n.assert(t._waitPromise!==null);t._waitPromise.resolve();t._monitor.destroy()})}}]);return s}();Ice.OutgoingConnectionFactory=s;var a=function(e){_inherits(r,e);function r(e){_classCallCheck(this,r);return _possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e||i.compareEquals))}_createClass(r,[{key:"set",value:function e(i,s){var a=this.get(i);if(a===undefined){a=[];_get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"set",this).call(this,i,a)}n.assert(s instanceof t);a.push(s);return undefined}},{key:"removeConnection",value:function e(t,i){var r=this.get(t);n.assert(r!==null);var s=r.indexOf(i);n.assert(s!==-1);r.splice(s,1);if(r.length===0){this.delete(t)}}},{key:"map",value:function e(t){var n=[];this.forEach(function(e){return n.push(t(e))});return n}},{key:"forEach",value:function e(t){var n=true;var i=false;var r=undefined;try{for(var s=this.values()[Symbol.iterator](),a;!(n=(a=s.next()).done);n=true){var o=a.value;o.forEach(t)}}catch(e){i=true;r=e}finally{try{if(!n&&s.return){s.return()}}finally{if(i){throw r}}}}}]);return r}(i);var o=function(){function e(t,n,i,r){_classCallCheck(this,e);this._factory=t;this._endpoints=n;this._hasMore=i;this._selType=r;this._promise=new Ice.Promise;this._index=0;this._current=null}_createClass(e,[{key:"connectionStartCompleted",value:function e(t){t.activate();this._factory.finishGetConnection(this._endpoints,this._current,t,this)}},{key:"connectionStartFailed",value:function e(t,i){n.assert(this._current!==null);if(this.connectionStartFailedImpl(i)){this.nextEndpoint()}}},{key:"setConnection",value:function e(t){this._promise.resolve(t);this._factory.decPendingConnectCount()}},{key:"setException",value:function e(t){this._promise.reject(t);this._factory.decPendingConnectCount()}},{key:"hasEndpoint",value:function e(t){return this.findEndpoint(t)!==-1}},{key:"findEndpoint",value:function e(t){return this._endpoints.findIndex(function(e){return t.equals(e)})}},{key:"removeEndpoints",value:function e(t){var n=this;t.forEach(function(e){var t=n.findEndpoint(e);if(t!==-1){n._endpoints.splice(t,1)}});this._index=0;return this._endpoints.length===0}},{key:"removeFromPending",value:function e(){this._factory.removeFromPending(this,this._endpoints)}},{key:"start",value:function e(){try{this._factory.incPendingConnectCount()}catch(e){this._promise.reject(e);return}this.getConnection();return this._promise}},{key:"getConnection",value:function e(){try{var t=this._factory.getConnection(this._endpoints,this);if(t===null){return}this._promise.resolve(t);this._factory.decPendingConnectCount()}catch(e){this._promise.reject(e);this._factory.decPendingConnectCount()}}},{key:"nextEndpoint",value:function e(){var t=this;var i=function e(n){n.start().then(function(){t.connectionStartCompleted(n)},function(e){t.connectionStartFailed(n,e)})};while(true){var r=this._factory._instance.traceLevels();try{n.assert(this._index<this._endpoints.length);this._current=this._endpoints[this._index++];if(r.network>=2){var s=[];s.push("trying to establish ");s.push(this._current.protocol());s.push(" connection to ");s.push(this._current.toConnectorString());this._factory._instance.initializationData().logger.trace(r.networkCat,s.join(""))}i(this._factory.createConnection(this._current.connect(),this._current))}catch(e){if(r.network>=2){var a=[];a.push("failed to establish ");a.push(this._current.protocol());a.push(" connection to ");a.push(this._current.toString());a.push("\n");a.push(e.toString());this._factory._instance.initializationData().logger.trace(r.networkCat,a.join(""))}if(this.connectionStartFailedImpl(e)){continue}}break}}},{key:"connectionStartFailedImpl",value:function e(t){if(t instanceof Ice.LocalException){this._factory.handleConnectionException(t,this._hasMore||this._index<this._endpoints.length);if(t instanceof Ice.CommunicatorDestroyedException){this._factory.finishGetConnectionEx(this._endpoints,t,this)}else if(this._index<this._endpoints.length){return true}else{this._factory.finishGetConnectionEx(this._endpoints,t,this)}}else{this._factory.finishGetConnectionEx(this._endpoints,t,this)}return false}}]);return e}()})();(function(){var e=Ice.FormatType;var t=Ice.EndpointSelectionType;var n=Ice.Protocol;var i=function i(r,s){_classCallCheck(this,i);this.defaultProtocol=r.getPropertyWithDefault("Ice.Default.Protocol",Ice.TcpEndpointFactory!==undefined?"tcp":"ws");var a=r.getProperty("Ice.Default.Host");this.defaultHost=a.length>0?a:null;a=r.getProperty("Ice.Default.SourceAddress");this.defaultSourceAddress=a.length>0?a:null;a=r.getProperty("Ice.Override.Timeout");if(a.length>0){this.overrideTimeout=true;this.overrideTimeoutValue=r.getPropertyAsInt("Ice.Override.Timeout");if(this.overrideTimeoutValue<1&&this.overrideTimeoutValue!==-1){this.overrideTimeoutValue=-1;s.warning("invalid value for Ice.Override.Timeout `"+r.getProperty("Ice.Override.Timeout")+"': defaulting to -1")}}else{this.overrideTimeout=false;this.overrideTimeoutValue=-1}a=r.getProperty("Ice.Override.ConnectTimeout");if(a.length>0){this.overrideConnectTimeout=true;this.overrideConnectTimeoutValue=r.getPropertyAsInt("Ice.Override.ConnectTimeout");if(this.overrideConnectTimeoutValue<1&&this.overrideConnectTimeoutValue!==-1){this.overrideConnectTimeoutValue=-1;s.warning("invalid value for Ice.Override.ConnectTimeout `"+r.getProperty("Ice.Override.ConnectTimeout")+"': defaulting to -1")}}else{this.overrideConnectTimeout=false;this.overrideConnectTimeoutValue=-1}a=r.getProperty("Ice.Override.CloseTimeout");if(a.length>0){this.overrideCloseTimeout=true;this.overrideCloseTimeoutValue=r.getPropertyAsInt("Ice.Override.CloseTimeout");if(this.overrideCloseTimeoutValue<1&&this.overrideCloseTimeoutValue!==-1){this.overrideCloseTimeoutValue=-1;s.warning("invalid value for Ice.Override.CloseTimeout `"+r.getProperty("Ice.Override.CloseTimeout")+"': defaulting to -1")}}else{this.overrideCloseTimeout=false;this.overrideCloseTimeoutValue=-1}this.overrideSecure=false;a=r.getPropertyWithDefault("Ice.Default.EndpointSelection","Random");if(a==="Random"){this.defaultEndpointSelection=t.Random}else if(a==="Ordered"){this.defaultEndpointSelection=t.Ordered}else{var o=new Ice.EndpointSelectionTypeParseException;o.str="illegal value `"+a+"'; expected `Random' or `Ordered'";throw o}this.defaultTimeout=r.getPropertyAsIntWithDefault("Ice.Default.Timeout",6e4);if(this.defaultTimeout<1&&this.defaultTimeout!==-1){this.defaultTimeout=6e4;s.warning("invalid value for Ice.Default.Timeout `"+r.getProperty("Ice.Default.Timeout")+"': defaulting to 60000")}this.defaultLocatorCacheTimeout=r.getPropertyAsIntWithDefault("Ice.Default.LocatorCacheTimeout",-1);if(this.defaultLocatorCacheTimeout<-1){this.defaultLocatorCacheTimeout=-1;s.warning("invalid value for Ice.Default.LocatorCacheTimeout `"+r.getProperty("Ice.Default.LocatorCacheTimeout")+"': defaulting to -1")}this.defaultInvocationTimeout=r.getPropertyAsIntWithDefault("Ice.Default.InvocationTimeout",-1);if(this.defaultInvocationTimeout<1&&this.defaultInvocationTimeout!==-1){this.defaultInvocationTimeout=-1;s.warning("invalid value for Ice.Default.InvocationTimeout `"+r.getProperty("Ice.Default.InvocationTimeout")+"': defaulting to -1")}this.defaultPreferSecure=r.getPropertyAsIntWithDefault("Ice.Default.PreferSecure",0)>0;a=r.getPropertyWithDefault("Ice.Default.EncodingVersion",Ice.encodingVersionToString(n.currentEncoding));this.defaultEncoding=Ice.stringToEncodingVersion(a);n.checkSupportedEncoding(this.defaultEncoding);var c=r.getPropertyAsIntWithDefault("Ice.Default.SlicedFormat",0)>0;this.defaultFormat=c?e.SlicedFormat:e.CompactFormat};Ice.DefaultsAndOverrides=i})();(function(){var e=Ice.Debug;var t=Ice.Protocol;var n=Ice.LocatorRegisterPrx;var i=Ice.HashMap;var r=function(){function t(e,n,r){_classCallCheck(this,t);this._locator=e;this._locatorRegistry=null;this._table=n;this._background=r;this._adapterRequests=new Map;this._objectRequests=new i(i.compareEquals)}_createClass(t,[{key:"destroy",value:function e(){this._locatorRegistry=null;this._table.clear()}},{key:"equals",value:function e(n){if(this===n){return true}if(n instanceof t){return this._locator.equals(n._locator)}return false}},{key:"hashCode",value:function e(){return this._locator.hashCode()}},{key:"getLocator",value:function e(){return this._locator}},{key:"getLocatorRegistry",value:function e(){var t=this;if(this._locatorRegistry!==null){return Ice.Promise.resolve(this._locatorRegistry)}return this._locator.getRegistry().then(function(e){t._locatorRegistry=n.uncheckedCast(e.ice_locator(null).ice_endpointSelection(Ice.EndpointSelectionType.Ordered));return t._locatorRegistry})}},{key:"getEndpoints",value:function t(n,i,r,s){var a=s||new Ice.Promise;e.assert(n.isIndirect());var o=null;var c={value:false};if(!n.isWellKnown()){o=this._table.getAdapterEndpoints(n.getAdapterId(),r,c);if(!c.value){if(this._background&&o!==null){this.getAdapterRequest(n).addCallback(n,i,r,null)}else{this.getAdapterRequest(n).addCallback(n,i,r,a);return a}}}else{var u=this._table.getObjectReference(n.getIdentity(),r,c);if(!c.value){if(this._background&&u!==null){this.getObjectRequest(n).addCallback(n,null,r,null)}else{this.getObjectRequest(n).addCallback(n,null,r,a);return a}}if(!u.isIndirect()){o=u.getEndpoints()}else if(!u.isWellKnown()){if(n.getInstance().traceLevels().location>=1){this.traceWellKnown("found adapter for well-known object in locator cache",n,u)}this.getEndpoints(u,n,r,a);return a}}e.assert(o!==null);if(n.getInstance().traceLevels().location>=1){this.getEndpointsTrace(n,o,true)}a.resolve([o,true]);return a}},{key:"clearCache",value:function t(n){e.assert(n.isIndirect());if(!n.isWellKnown()){var i=this._table.removeAdapterEndpoints(n.getAdapterId());if(i!==null&&n.getInstance().traceLevels().location>=2){this.trace("removed endpoints for adapter from locator cache",n,i)}}else{var r=this._table.removeObjectReference(n.getIdentity());if(r!==null){if(!r.isIndirect()){if(n.getInstance().traceLevels().location>=2){this.trace("removed endpoints for well-known object from locator cache",n,r.getEndpoints())}}else if(!r.isWellKnown()){if(n.getInstance().traceLevels().location>=2){this.traceWellKnown("removed adapter for well-known object from locator cache",n,r)}this.clearCache(r)}}}}},{key:"trace",value:function t(n,i,r){e.assert(i.isIndirect());var s=[];s.push(n);s.push("\n");if(!i.isWellKnown()){s.push("adapter = ");s.push(i.getAdapterId());s.push("\n")}else{s.push("well-known proxy = ");s.push(i.toString());s.push("\n")}s.push("endpoints = ");s.push(r.map(function(e){return e.toString()}).join(":"));i.getInstance().initializationData().logger.trace(i.getInstance().traceLevels().locationCat,s.join(""))}},{key:"traceWellKnown",value:function t(n,i,r){e.assert(i.isWellKnown());var s=[];s.push(n);s.push("\n");s.push("well-known proxy = ");s.push(i.toString());s.push("\n");s.push("adapter = ");s.push(r.getAdapterId());i.getInstance().initializationData().logger.trace(i.getInstance().traceLevels().locationCat,s.join(""))}},{key:"getEndpointsException",value:function t(n,i){e.assert(n.isIndirect());var r=n.getInstance();try{throw i}catch(t){if(t instanceof Ice.AdapterNotFoundException){if(r.traceLevels().location>=1){var s=[];s.push("adapter not found\n");s.push("adapter = ");s.push(n.getAdapterId());r.initializationData().logger.trace(r.traceLevels().locationCat,s.join(""))}var a=new Ice.NotRegisteredException;a.kindOfObject="object adapter";a.id=n.getAdapterId();throw a}else if(t instanceof Ice.ObjectNotFoundException){if(r.traceLevels().location>=1){var o=[];o.push("object not found\n");o.push("object = ");o.push(Ice.identityToString(n.getIdentity(),r.toStringMode()));r.initializationData().logger.trace(r.traceLevels().locationCat,o.join(""))}var c=new Ice.NotRegisteredException;c.kindOfObject="object";c.id=Ice.identityToString(n.getIdentity(),r.toStringMode());throw c}else if(t instanceof Ice.NotRegisteredException){throw t}else if(t instanceof Ice.LocalException){if(r.traceLevels().location>=1){var u=[];u.push("couldn't contact the locator to retrieve endpoints\n");if(n.getAdapterId().length>0){u.push("adapter = ");u.push(n.getAdapterId());u.push("\n")}else{u.push("well-known proxy = ");u.push(n.toString());u.push("\n")}u.push("reason = "+t.toString());r.initializationData().logger.trace(r.traceLevels().locationCat,u.join(""))}throw t}else{e.assert(false)}}}},{key:"getEndpointsTrace",value:function e(t,n,i){if(n!==null&&n.length>0){if(i){if(t.isWellKnown()){this.trace("found endpoints for well-known proxy in locator cache",t,n)}else{this.trace("found endpoints for adapter in locator cache",t,n)}}else{if(t.isWellKnown()){this.trace("retrieved endpoints for well-known proxy from locator, adding to locator cache",t,n)}else{this.trace("retrieved endpoints for adapter from locator, adding to locator cache",t,n)}}}else{var r=t.getInstance();var s=[];s.push("no endpoints configured for ");if(t.getAdapterId().length>0){s.push("adapter\n");s.push("adapter = ");s.push(t.getAdapterId());s.push("\n")}else{s.push("well-known object\n");s.push("well-known proxy = ");s.push(t.toString());s.push("\n")}r.initializationData().logger.trace(r.traceLevels().locationCat,s.join(""))}}},{key:"getAdapterRequest",value:function e(t){if(t.getInstance().traceLevels().location>=1){var n=t.getInstance();var i=[];i.push("searching for adapter by id\n");i.push("adapter = ");i.push(t.getAdapterId());n.initializationData().logger.trace(n.traceLevels().locationCat,i.join(""))}var r=this._adapterRequests.get(t.getAdapterId());if(r!==undefined){return r}r=new c(this,t);this._adapterRequests.set(t.getAdapterId(),r);return r}},{key:"getObjectRequest",value:function e(t){if(t.getInstance().traceLevels().location>=1){var n=t.getInstance();var i=[];i.push("searching for well-known object\n");i.push("well-known proxy = ");i.push(t.toString());n.initializationData().logger.trace(n.traceLevels().locationCat,i.join(""))}var r=this._objectRequests.get(t.getIdentity());if(r!==undefined){return r}r=new o(this,t);this._objectRequests.set(t.getIdentity(),r);return r}},{key:"finishRequest",value:function t(n,i,r,s){if(r===null||r._getReference().isIndirect()){for(var a=0;a<i.length;++a){this._table.removeObjectReference(i[a].getIdentity())}}if(!n.isWellKnown()){if(r!==null&&!r._getReference().isIndirect()){this._table.addAdapterEndpoints(n.getAdapterId(),r._getReference().getEndpoints())}else if(s){this._table.removeAdapterEndpoints(n.getAdapterId())}e.assert(this._adapterRequests.has(n.getAdapterId()));this._adapterRequests.delete(n.getAdapterId())}else{if(r!==null&&!r._getReference().isWellKnown()){this._table.addObjectReference(n.getIdentity(),r._getReference())}else if(s){this._table.removeObjectReference(n.getIdentity())}e.assert(this._objectRequests.has(n.getIdentity()));this._objectRequests.delete(n.getIdentity())}}}]);return t}();Ice.LocatorInfo=r;var s=function(){function e(t,n,i){_classCallCheck(this,e);this._ref=t;this._ttl=n;this._promise=i}_createClass(e,[{key:"response",value:function e(n,i){var r=this;var s=null;if(i!==null){var a=i._getReference();if(this._ref.isWellKnown()&&!t.isSupported(this._ref.getEncoding(),a.getEncoding())){}else if(!a.isIndirect()){s=a.getEndpoints()}else if(this._ref.isWellKnown()&&!a.isWellKnown()){if(this._ref.getInstance().traceLevels().location>=1){n.traceWellKnown("retrieved adapter for well-known object from locator, "+"adding to locator cache",this._ref,a)}n.getEndpoints(a,this._ref,this._ttl).then(function(e){if(r._promise!==null){r._promise.resolve(e)}},function(e){if(r._promise!==null){r._promise.reject(e)}});return}}if(this._ref.getInstance().traceLevels().location>=1){n.getEndpointsTrace(this._ref,s,false)}if(this._promise!==null){this._promise.resolve(s===null?[[],false]:[s,false])}}},{key:"exception",value:function e(t,n){try{t.getEndpointsException(this._ref,n)}catch(e){if(this._promise!==null){this._promise.reject(e)}}}}]);return e}();var a=function(){function e(t,n){_classCallCheck(this,e);this._locatorInfo=t;this._ref=n;this._callbacks=[];this._wellKnownRefs=[];this._sent=false;this._response=false;this._proxy=null;this._exception=null}_createClass(e,[{key:"addCallback",value:function e(t,n,i,r){var a=new s(t,i,r);if(this._response){a.response(this._locatorInfo,this._proxy)}else if(this._exception!==null){a.exception(this._locatorInfo,this._exception)}else{this._callbacks.push(a);if(n!==null){this._wellKnownRefs.push(n)}if(!this._sent){this._sent=true;this.send()}}}},{key:"response",value:function e(t){this._locatorInfo.finishRequest(this._ref,this._wellKnownRefs,t,false);this._response=true;this._proxy=t;for(var n=0;n<this._callbacks.length;++n){this._callbacks[n].response(this._locatorInfo,t)}}},{key:"exception",value:function e(t){this._locatorInfo.finishRequest(this._ref,this._wellKnownRefs,null,t instanceof Ice.UserException);this._exception=t;for(var n=0;n<this._callbacks.length;++n){this._callbacks[n].exception(this._locatorInfo,t)}}}]);return e}();var o=function(t){_inherits(n,t);function n(t,i){_classCallCheck(this,n);var r=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,i));e.assert(i.isWellKnown());return r}_createClass(n,[{key:"send",value:function e(){var t=this;try{this._locatorInfo.getLocator().findObjectById(this._ref.getIdentity()).then(function(e){return t.response(e)},function(e){return t.exception(e)})}catch(e){this.exception(e)}}}]);return n}(a);var c=function(t){_inherits(n,t);function n(t,i){_classCallCheck(this,n);var r=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,i));e.assert(i.isIndirect());return r}_createClass(n,[{key:"send",value:function e(){var t=this;try{this._locatorInfo.getLocator().findAdapterById(this._ref.getAdapterId()).then(function(e){return t.response(e)},function(e){return t.exception(e)})}catch(e){this.exception(e)}}}]);return n}(a)})();(function(){var e=Ice.AsyncResultBase;var t=Ice.Debug;var n=Ice.Identity;var i=Ice.PropertyNames;var r=Ice.ServantManager;var s=Ice.StringUtil;var a=Ice.ArrayUtil;var o=Ice.Timer;var c=["ACM","AdapterId","Endpoints","Locator","Locator.EncodingVersion","Locator.EndpointSelection","Locator.ConnectionCached","Locator.PreferSecure","Locator.CollocationOptimized","Locator.Router","MessageSizeMax","PublishedEndpoints","ReplicaGroupId","Router","Router.EncodingVersion","Router.EndpointSelection","Router.ConnectionCached","Router.PreferSecure","Router.CollocationOptimized","Router.Locator","Router.Locator.EndpointSelection","Router.Locator.ConnectionCached","Router.Locator.PreferSecure","Router.Locator.CollocationOptimized","Router.Locator.LocatorCacheTimeout","Router.Locator.InvocationTimeout","Router.LocatorCacheTimeout","Router.InvocationTimeout","ProxyOptions","ThreadPool.Size","ThreadPool.SizeMax","ThreadPool.SizeWarn","ThreadPool.StackSize","ThreadPool.Serialize"];var u=0;var l=1;var h=3;var f=5;var _=6;var d=function(){function d(e,n,i,s,a,o,c){var l=this;_classCallCheck(this,d);this._instance=e;this._communicator=n;this._objectAdapterFactory=i;this._servantManager=new r(e,s);this._name=s;this._publishedEndpoints=[];this._routerInfo=null;this._state=u;this._noConfig=o;this._statePromises=[];if(this._noConfig){this._reference=this._instance.referenceFactory().createFromString("dummy -t","");this._messageSizeMax=this._instance.messageSizeMax();c.resolve(this);return}var h=this._instance.initializationData().properties;var f=[];var _=this.filterProperties(f);if(f.length!==0&&h.getPropertyAsIntWithDefault("Ice.Warn.UnknownProperties",1)>0){var p=["found unknown properties for object adapter `"+s+"':"];f.forEach(function(e){return p.push("\n    "+e)});this._instance.initializationData().logger.warning(p.join(""))}if(a===null&&_){throw new Ice.InitializationException("object adapter `"+this._name+"' requires configuration")}var v=h.getPropertyWithDefault(this._name+".ProxyOptions","-t");try{this._reference=this._instance.referenceFactory().createFromString("dummy "+v,"")}catch(e){if(e instanceof Ice.ProxyParseException){throw new Ice.InitializationException("invalid proxy options `"+v+"' for object adapter `"+s+"'")}else{throw e}}{var y=this._instance.messageSizeMax()/1024;var g=h.getPropertyAsIntWithDefault(this._name+".MessageSizeMax",y);if(g<1||g>2147483647/1024){this._messageSizeMax=2147483647}else{this._messageSizeMax=g*1024}}try{if(a===null){a=Ice.RouterPrx.uncheckedCast(this._instance.proxyFactory().propertyToProxy(this._name+".Router"))}var I=void 0;if(a!==null){this._routerInfo=this._instance.routerManager().find(a);t.assert(this._routerInfo!==null);if(this._routerInfo.getAdapter()!==null){throw new Ice.AlreadyRegisteredException("object adapter with router",Ice.identityToString(a.ice_getIdentity(),this._instance.toStringMode()))}this._routerInfo.setAdapter(this);I=this._instance.outgoingConnectionFactory().setRouterInfo(this._routerInfo)}else{var m=h.getProperty(this._name+".Endpoints");if(m.length>0){throw new Ice.FeatureNotSupportedException("object adapter endpoints not supported")}I=Ice.Promise.resolve()}I.then(function(){return l.computePublishedEndpoints()}).then(function(e){l._publishedEndpoints=e;c.resolve(l)},function(e){l.destroy();c.reject(e)})}catch(e){this.destroy();throw e}}_createClass(d,[{key:"getName",value:function e(){return this._noConfig?"":this._name}},{key:"getCommunicator",value:function e(){return this._communicator}},{key:"activate",value:function t(){var n=new e(this._communicator,"activate",null,null,this);this.setState(h);n.resolve();return n}},{key:"hold",value:function e(){this.checkForDeactivation();this.setState(l)}},{key:"waitForHold",value:function t(){var n=new e(this._communicator,"waitForHold",null,null,this);try{this.checkForDeactivation();this.waitState(l,n)}catch(e){n.reject(e)}return n}},{key:"deactivate",value:function t(){var n=new e(this._communicator,"deactivate",null,null,this);if(this._state<f){this.setState(f);this._instance.outgoingConnectionFactory().removeAdapter(this)}n.resolve();return n}},{key:"waitForDeactivate",value:function t(){var n=new e(this._communicator,"waitForDeactivate",null,null,this);this.waitState(f,n);return n}},{key:"isDeactivated",value:function e(){return this._state>=f}},{key:"destroy",value:function t(){var n=this;return this.deactivate().then(function(){if(n._state<_){n.setState(_);n._servantManager.destroy();n._objectAdapterFactory.removeObjectAdapter(n);n._publishedEndpoints=[]}var t=new e(n._communicator,"destroy",null,null,n);t.resolve();return t})}},{key:"add",value:function e(t,n){return this.addFacet(t,n,"")}},{key:"addFacet",value:function e(t,n,i){this.checkForDeactivation();this.checkIdentity(n);this.checkServant(t);var r=n.clone();this._servantManager.addServant(t,r,i);return this.newProxy(r,i)}},{key:"addWithUUID",value:function e(t){return this.addFacetWithUUID(t,"")}},{key:"addFacetWithUUID",value:function e(t,i){return this.addFacet(t,new n(Ice.generateUUID(),""),i)}},{key:"addDefaultServant",value:function e(t,n){this.checkServant(t);this.checkForDeactivation();this._servantManager.addDefaultServant(t,n)}},{key:"remove",value:function e(t){return this.removeFacet(t,"")}},{key:"removeFacet",value:function e(t,n){this.checkForDeactivation();this.checkIdentity(t);return this._servantManager.removeServant(t,n)}},{key:"removeAllFacets",value:function e(t){this.checkForDeactivation();this.checkIdentity(t);return this._servantManager.removeAllFacets(t)}},{key:"removeDefaultServant",value:function e(t){this.checkForDeactivation();return this._servantManager.removeDefaultServant(t)}},{key:"find",value:function e(t){return this.findFacet(t,"")}},{key:"findFacet",value:function e(t,n){this.checkForDeactivation();this.checkIdentity(t);return this._servantManager.findServant(t,n)}},{key:"findAllFacets",value:function e(t){this.checkForDeactivation();this.checkIdentity(t);return this._servantManager.findAllFacets(t)}},{key:"findByProxy",value:function e(t){this.checkForDeactivation();var n=t._getReference();return this.findFacet(n.getIdentity(),n.getFacet())}},{key:"findDefaultServant",value:function e(t){this.checkForDeactivation();return this._servantManager.findDefaultServant(t)}},{key:"addServantLocator",value:function e(t,n){this.checkForDeactivation();this._servantManager.addServantLocator(t,n)}},{key:"removeServantLocator",value:function e(t){this.checkForDeactivation();return this._servantManager.removeServantLocator(t)}},{key:"findServantLocator",value:function e(t){this.checkForDeactivation();return this._servantManager.findServantLocator(t)}},{key:"createProxy",value:function e(t){this.checkForDeactivation();this.checkIdentity(t);return this.newProxy(t,"")}},{key:"createDirectProxy",value:function e(t){return this.createProxy(t)}},{key:"createIndirectProxy",value:function e(t){throw new Ice.FeatureNotSupportedException("createIndirectProxy not supported")}},{key:"setLocator",value:function e(t){throw new Ice.FeatureNotSupportedException("setLocator not supported")}},{key:"getEndpoints",value:function e(){return[]}},{key:"refreshPublishedEndpoints",value:function e(){var t=this;this.checkForDeactivation();return this.computePublishedEndpoints().then(function(e){return t._publishedEndpoints=e})}},{key:"getPublishedEndpoints",value:function e(){return a.clone(this._publishedEndpoints)}},{key:"setPublishedEndpoints",value:function e(t){this.checkForDeactivation();if(this._routerInfo!==null){throw new Error("can't set published endpoints on object adapter associated with a router")}this._publishedEndpoints=a.clone(t)}},{key:"getServantManager",value:function e(){return this._servantManager}},{key:"setAdapterOnConnection",value:function e(t){this.checkForDeactivation();t.setAdapterAndServantManager(this,_servantManager)}},{key:"messageSizeMax",value:function e(){return this._messageSizeMax}},{key:"newProxy",value:function e(t,n){return this._instance.proxyFactory().referenceToProxy(this._instance.referenceFactory().create(t,n,this._reference,this._publishedEndpoints))}},{key:"checkForDeactivation",value:function e(){if(this._state>=f){var t=new Ice.ObjectAdapterDeactivatedException;t.name=this.getName();throw t}}},{key:"checkIdentity",value:function e(t){if(t.name===undefined||t.name===null||t.name.length===0){throw new Ice.IllegalIdentityException(t)}if(t.category===undefined||t.category===null){t.category=""}}},{key:"checkServant",value:function e(t){if(t===undefined||t===null){throw new Ice.IllegalServantException("cannot add null servant to Object Adapter")}}},{key:"computePublishedEndpoints",value:function e(){var t=this;var n=void 0;if(this._routerInfo!==null){n=this._routerInfo.getServerEndpoints().then(function(e){var t=[];e.forEach(function(e){if(t.findIndex(function(t){return e.equals(t)})===-1){t.push(e)}});return t})}else{var i=[];var r=this._instance.initializationData().properties.getProperty(this._name+".PublishedEndpoints");var a=" \t\n\r";var o=0;var c=void 0;while(o<r.length){c=s.findFirstNotOf(r,a,o);if(c===-1){if(r!=""){throw new Ice.EndpointParseException("invalid empty object adapter endpoint")}break}o=c;while(true){o=r.indexOf(":",o);if(o==-1){o=r.length;break}else{var u=false;var l=c;while(true){l=r.indexOf('"',l);if(l==-1||o<l){break}else{l=r.indexOf('"',++l);if(l==-1){break}else if(o<l){u=true;break}++l}}if(!u){break}++o}}var h=r.substring(c,o);var f=this._instance.endpointFactoryManager().create(h,false);if(f==null){throw new Ice.EndpointParseException("invalid object adapter endpoint `"+r+"'")}i.push(f)}n=Ice.Promise.resolve(i)}return n.then(function(e){if(t._instance.traceLevels().network>=1&&e.length>0){var n=[];n.push("published endpoints for object adapter `");n.push(t._name);n.push("':\n");var i=true;e.forEach(function(e){if(!i){n.push(":")}n.push(e.toString());i=false});t._instance.initializationData().logger.trace(t._instance.traceLevels().networkCat,n.toString())}return e})}},{key:"filterProperties",value:function e(t){var n=true;var r=this._name+".";for(var s=0;s<i.clPropNames.length;++s){if(r.indexOf(i.clPropNames[s]+".")===0){n=false;break}}var a=true;var o=this._instance.initializationData().properties.getPropertiesForPrefix(r);var u=true;var l=false;var h=undefined;try{for(var f=o[Symbol.iterator](),_;!(u=(_=f.next()).done);u=true){var d=_slicedToArray(_.value,2),p=d[0],v=d[1];var y=false;for(var g=0;g<c.length;++g){if(p===r+c[g]){a=false;y=true;break}}if(!y&&n){t.push(p)}}}catch(e){l=true;h=e}finally{try{if(!u&&f.return){f.return()}}finally{if(l){throw h}}}return a}},{key:"setState",value:function e(t){var n=this;if(this._state===t){return}this._state=t;var i=[];(t<f?[t]:[l,f]).forEach(function(e){if(n._statePromises[e]){i=i.concat(n._statePromises[e]);delete n._statePromises[e]}});if(i.length>0){o.setImmediate(function(){return i.forEach(function(e){return e.resolve()})})}}},{key:"waitState",value:function e(t,n){if(this._state<f&&(t===l&&this._state!==l||t===f)){if(this._statePromises[t]){this._statePromises[t].push(n)}else{this._statePromises[t]=[n]}}else{n.resolve()}}}]);return d}();Ice.ObjectAdapterI=d})();(function(){var e=Ice.HashMap;var t=Ice.LocatorInfo;var n=Ice.LocatorTable;var i=Ice.LocatorPrx;var r=function(){function r(t){_classCallCheck(this,r);this._background=t.getPropertyAsInt("Ice.BackgroundLocatorCacheUpdates")>0;this._table=new e(e.compareEquals);this._locatorTables=new e(e.compareEquals)}_createClass(r,[{key:"destroy",value:function e(){var t=true;var n=false;var i=undefined;try{for(var r=this._table.values()[Symbol.iterator](),s;!(t=(s=r.next()).done);t=true){var a=s.value;a.destroy()}}catch(e){n=true;i=e}finally{try{if(!t&&r.return){r.return()}}finally{if(n){throw i}}}this._table.clear();this._locatorTables.clear()}},{key:"find",value:function e(r){if(r===null){return null}var s=i.uncheckedCast(r.ice_locator(null));var a=this._table.get(s);if(a===undefined){var o=this._locatorTables.get(s.ice_getIdentity());if(o===undefined){o=new n;this._locatorTables.set(s.ice_getIdentity(),o)}a=new t(s,o,this._background);this._table.set(s,a)}return a}}]);return r}();Ice.LocatorManager=r})();(function(){var e=Ice.Debug;var t=Ice.ObjectPrx;var n=Ice.StringUtil;var i=Ice.Identity;var r=function(){function r(e){_classCallCheck(this,r);this._instance=e;var t=this._instance.initializationData().properties.getPropertyAsList("Ice.RetryIntervals");if(t.length>0){this._retryIntervals=[];for(var i=0;i<t.length;i++){var s=void 0;try{s=n.toInt(t[i])}catch(e){s=0}if(i===0&&s===-1){break}this._retryIntervals[i]=s>0?s:0}}else{this._retryIntervals=[0]}}_createClass(r,[{key:"stringToProxy",value:function e(t){return this.referenceToProxy(this._instance.referenceFactory().createFromString(t,null))}},{key:"proxyToString",value:function e(t){return t===null?"":t._getReference().toString()}},{key:"propertyToProxy",value:function e(t){var n=this._instance.initializationData().properties.getProperty(t);var i=this._instance.referenceFactory().createFromString(n,t);return this.referenceToProxy(i)}},{key:"proxyToProperty",value:function e(t,n){return t===null?new Map:t._getReference().toProperty(n)}},{key:"streamToProxy",value:function e(t,n){var r=new i;r._read(t);return this.referenceToProxy(this._instance.referenceFactory().createFromStream(r,t),n)}},{key:"referenceToProxy",value:function e(n,i){if(n!==null){var r=i?new i:new t;r._setup(n);return r}else{return null}}},{key:"checkRetryAfterException",value:function t(n,i,r,s){var a=this._instance.traceLevels();var o=this._instance.initializationData().logger;if(i.getMode()===Ice.Reference.ModeBatchOneway||i.getMode()===Ice.Reference.ModeBatchDatagram){throw n}if(n instanceof Ice.ObjectNotExistException){if(i.getRouterInfo()!==null&&n.operation==="ice_add_proxy"){i.getRouterInfo().clearCache(i);if(a.retry>=1){o.trace(a.retryCat,"retrying operation call to add proxy to router\n"+n.toString())}if(r!==null){r.value=0}return s}else if(i.isIndirect()){if(i.isWellKnown()){var c=i.getLocatorInfo();if(c!==null){c.clearCache(i)}}}else{throw n}}else if(n instanceof Ice.RequestFailedException){throw n}if(n instanceof Ice.MarshalException){throw n}if(n instanceof Ice.CommunicatorDestroyedException||n instanceof Ice.ObjectAdapterDeactivatedException||n instanceof Ice.ConnectionManuallyClosedException){throw n}if(n instanceof Ice.InvocationTimeoutException||n instanceof Ice.InvocationCanceledException){throw n}++s;e.assert(s>0);var u=void 0;if(s===this._retryIntervals.length+1&&n instanceof Ice.CloseConnectionException){u=0}else if(s>this._retryIntervals.length){if(a.retry>=1){o.trace(a.retryCat,"cannot retry operation call because retry limit has been exceeded\n"+n.toString())}throw n}else{u=this._retryIntervals[s-1]}if(a.retry>=1){var l="retrying operation call";if(u>0){l+=" in "+u+"ms"}l+=" because of exception\n"+n.toString();o.trace(a.retryCat,l)}e.assert(r!==null);r.value=u;return s}}]);return r}();Ice.ProxyFactory=r})();(function(){var e=Ice.HashMap;var t=Ice.ConnectRequestHandler;var n=function(){function n(t){_classCallCheck(this,n);this._instance=t;this._handlers=new e(e.compareEquals)}_createClass(n,[{key:"getRequestHandler",value:function e(n,i){var r=false;var s=void 0;if(n.getCacheConnection()){s=this._handlers.get(n);if(!s){s=new t(n,i);this._handlers.set(n,s);r=true}}else{r=true;s=new t(n,i)}if(r){n.getConnection().then(function(e){s.setConnection(e)},function(e){s.setException(e)})}return i._setRequestHandler(s.connect(i))}},{key:"removeRequestHandler",value:function e(t,n){if(t.getCacheConnection()){if(this._handlers.get(t)===n){this._handlers.delete(t)}}}}]);return n}();Ice.RequestHandlerFactory=n})();(function(){var e=Ice.ObjectAdapterI;var t=Ice.Promise;var n=function(){function n(e,i){_classCallCheck(this,n);this._instance=e;this._communicator=i;this._adapters=[];this._adapterNamesInUse=[];this._shutdownPromise=new t}_createClass(n,[{key:"shutdown",value:function e(){var n=this;if(this._instance===null){return this._shutdownPromise}this._instance=null;this._communicator=null;t.all(this._adapters.map(function(e){return e.deactivate()})).then(function(){return n._shutdownPromise.resolve()});return this._shutdownPromise}},{key:"waitForShutdown",value:function e(){var n=this;return this._shutdownPromise.then(function(){return t.all(n._adapters.map(function(e){return e.waitForDeactivate()}))})}},{key:"isShutdown",value:function e(){return this._instance===null}},{key:"destroy",value:function e(){var n=this;return this.waitForShutdown().then(function(){return t.all(n._adapters.map(function(e){return e.destroy()}))})}},{key:"createObjectAdapter",value:function t(n,i,r){if(this._instance===null){throw new Ice.ObjectAdapterDeactivatedException}var s=null;try{if(n.length===0){s=new e(this._instance,this._communicator,this,Ice.generateUUID(),null,true,r)}else{if(this._adapterNamesInUse.indexOf(n)!==-1){throw new Ice.AlreadyRegisteredException("object adapter",n)}s=new e(this._instance,this._communicator,this,n,i,false,r);this._adapterNamesInUse.push(n)}this._adapters.push(s)}catch(e){r.reject(e)}}},{key:"removeObjectAdapter",value:function e(t){if(this._instance===null){return}var n=this._adapters.indexOf(t);if(n!==-1){this._adapters.splice(n,1)}n=this._adapterNamesInUse.indexOf(t.getName());if(n!==-1){this._adapterNamesInUse.splice(n,1)}}}]);return n}();Ice.ObjectAdapterFactory=n})();(function(){t.defineDictionary(IceMX,"StringIntDict","StringIntDictHelper","Ice.StringHelper","Ice.IntHelper",false,undefined,undefined);var e=["::Ice::Object","::IceMX::Metrics"];IceMX.Metrics=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new Ice.Long(0,0);var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:new Ice.Long(0,0);var s=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));a.id=e;a.total=n;a.current=i;a.totalLifetime=r;a.failures=s;return a}_createClass(t,[{key:"_iceWriteMemberImpl",value:function e(t){t.writeString(this.id);t.writeLong(this.total);t.writeInt(this.current);t.writeLong(this.totalLifetime);t.writeInt(this.failures)}},{key:"_iceReadMemberImpl",value:function e(t){this.id=t.readString();this.total=t.readLong();this.current=t.readInt();this.totalLifetime=t.readLong();this.failures=t.readInt()}}]);return t}(Ice.Value);t.defineValue(IceMX.Metrics,e[1],false);IceMX.MetricsDisp=function(e){_inherits(t,e);function t(){_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return t}(Ice.Object);t.defineOperations(IceMX.MetricsDisp,undefined,e,1);IceMX.MetricsFailures=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;_classCallCheck(this,e);this.id=t;this.failures=n}_createClass(e,[{key:"_write",value:function e(t){t.writeString(this.id);IceMX.StringIntDictHelper.write(t,this.failures)}},{key:"_read",value:function e(t){this.id=t.readString();this.failures=IceMX.StringIntDictHelper.read(t)}}],[{key:"minWireSize",get:function e(){return 2}}]);return e}();t.defineStruct(IceMX.MetricsFailures,false,true);t.defineSequence(IceMX,"MetricsFailuresSeqHelper","IceMX.MetricsFailures",false);t.defineSequence(IceMX,"MetricsMapHelper","Ice.ObjectHelper",false,"IceMX.Metrics");t.defineDictionary(IceMX,"MetricsView","MetricsViewHelper","Ice.StringHelper","IceMX.MetricsMapHelper",false,undefined,undefined,Ice.ArrayUtil.equals);IceMX.UnknownMetricsView=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}_createClass(t,[{key:"_mostDerivedType",value:function e(){return IceMX.UnknownMetricsView}}],[{key:"_parent",get:function e(){return Ice.UserException}},{key:"_id",get:function e(){return"::IceMX::UnknownMetricsView"}}]);return t}(Ice.UserException);var n=["::Ice::Object","::IceMX::MetricsAdmin"];IceMX.MetricsAdmin=function(e){_inherits(t,e);function t(){_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return t}(Ice.Object);IceMX.MetricsAdminPrx=function(e){_inherits(t,e);function t(){_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return t}(Ice.ObjectPrx);t.defineOperations(IceMX.MetricsAdmin,IceMX.MetricsAdminPrx,n,1,{getMetricsViewNames:[,,,2,["Ice.StringSeqHelper"],,[["Ice.StringSeqHelper"]],,,],enableMetricsView:[,,,2,,[[7]],,[IceMX.UnknownMetricsView],,],disableMetricsView:[,,,2,,[[7]],,[IceMX.UnknownMetricsView],,],getMetricsView:[,,,2,["IceMX.MetricsViewHelper"],[[7]],[[4]],[IceMX.UnknownMetricsView],,true],getMapMetricsFailures:[,,,2,["IceMX.MetricsFailuresSeqHelper"],[[7],[7]],,[IceMX.UnknownMetricsView],,],getMetricsFailures:[,,,2,[IceMX.MetricsFailures],[[7],[7],[7]],,[IceMX.UnknownMetricsView],,]});var i=["::Ice::Object","::IceMX::Metrics","::IceMX::ThreadMetrics"];IceMX.ThreadMetrics=function(e){_inherits(t,e);function t(e,n,i,r,s){var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;var o=arguments.length>6&&arguments[6]!==undefined?arguments[6]:0;var c=arguments.length>7&&arguments[7]!==undefined?arguments[7]:0;_classCallCheck(this,t);var u=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,r,s));u.inUseForIO=a;u.inUseForUser=o;u.inUseForOther=c;return u}_createClass(t,[{key:"_iceWriteMemberImpl",value:function e(t){t.writeInt(this.inUseForIO);t.writeInt(this.inUseForUser);t.writeInt(this.inUseForOther)}},{key:"_iceReadMemberImpl",value:function e(t){this.inUseForIO=t.readInt();this.inUseForUser=t.readInt();this.inUseForOther=t.readInt()}}]);return t}(IceMX.Metrics);t.defineValue(IceMX.ThreadMetrics,i[2],false);IceMX.ThreadMetricsDisp=function(e){_inherits(t,e);function t(){_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return t}(IceMX.MetricsDisp);t.defineOperations(IceMX.ThreadMetricsDisp,undefined,i,2);var r=["::Ice::Object","::IceMX::DispatchMetrics","::IceMX::Metrics"];IceMX.DispatchMetrics=function(e){_inherits(t,e);function t(e,n,i,r,s){var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;var o=arguments.length>6&&arguments[6]!==undefined?arguments[6]:new Ice.Long(0,0);var c=arguments.length>7&&arguments[7]!==undefined?arguments[7]:new Ice.Long(0,0);_classCallCheck(this,t);var u=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,r,s));u.userException=a;u.size=o;u.replySize=c;return u}_createClass(t,[{key:"_iceWriteMemberImpl",value:function e(t){t.writeInt(this.userException);t.writeLong(this.size);t.writeLong(this.replySize)}},{key:"_iceReadMemberImpl",value:function e(t){this.userException=t.readInt();this.size=t.readLong();this.replySize=t.readLong()}}]);return t}(IceMX.Metrics);t.defineValue(IceMX.DispatchMetrics,r[1],false);IceMX.DispatchMetricsDisp=function(e){_inherits(t,e);function t(){_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return t}(IceMX.MetricsDisp);t.defineOperations(IceMX.DispatchMetricsDisp,undefined,r,1);var s=["::Ice::Object","::IceMX::ChildInvocationMetrics","::IceMX::Metrics"];IceMX.ChildInvocationMetrics=function(e){_inherits(t,e);function t(e,n,i,r,s){var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:new Ice.Long(0,0);var o=arguments.length>6&&arguments[6]!==undefined?arguments[6]:new Ice.Long(0,0);_classCallCheck(this,t);var c=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,r,s));c.size=a;c.replySize=o;return c}_createClass(t,[{key:"_iceWriteMemberImpl",value:function e(t){t.writeLong(this.size);t.writeLong(this.replySize)}},{key:"_iceReadMemberImpl",value:function e(t){this.size=t.readLong();this.replySize=t.readLong()}}]);return t}(IceMX.Metrics);t.defineValue(IceMX.ChildInvocationMetrics,s[1],false);IceMX.ChildInvocationMetricsDisp=function(e){_inherits(t,e);function t(){_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return t}(IceMX.MetricsDisp);t.defineOperations(IceMX.ChildInvocationMetricsDisp,undefined,s,1);var a=["::Ice::Object","::IceMX::ChildInvocationMetrics","::IceMX::CollocatedMetrics","::IceMX::Metrics"];IceMX.CollocatedMetrics=function(e){_inherits(t,e);function t(e,n,i,r,s,a,o){_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,r,s,a,o))}return t}(IceMX.ChildInvocationMetrics);t.defineValue(IceMX.CollocatedMetrics,a[2],false);IceMX.CollocatedMetricsDisp=function(e){_inherits(t,e);function t(){_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return t}(IceMX.ChildInvocationMetricsDisp);t.defineOperations(IceMX.CollocatedMetricsDisp,undefined,a,2);var o=["::Ice::Object","::IceMX::ChildInvocationMetrics","::IceMX::Metrics","::IceMX::RemoteMetrics"];IceMX.RemoteMetrics=function(e){_inherits(t,e);function t(e,n,i,r,s,a,o){_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,r,s,a,o))}return t}(IceMX.ChildInvocationMetrics);t.defineValue(IceMX.RemoteMetrics,o[3],false);IceMX.RemoteMetricsDisp=function(e){_inherits(t,e);function t(){_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return t}(IceMX.ChildInvocationMetricsDisp);t.defineOperations(IceMX.RemoteMetricsDisp,undefined,o,3);var c=["::Ice::Object","::IceMX::InvocationMetrics","::IceMX::Metrics"];IceMX.InvocationMetrics=function(e){_inherits(t,e);function t(e,n,i,r,s){var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;var o=arguments.length>6&&arguments[6]!==undefined?arguments[6]:0;var c=arguments.length>7&&arguments[7]!==undefined?arguments[7]:null;var u=arguments.length>8&&arguments[8]!==undefined?arguments[8]:null;_classCallCheck(this,t);var l=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,r,s));l.retry=a;l.userException=o;l.remotes=c;l.collocated=u;return l}_createClass(t,[{key:"_iceWriteMemberImpl",value:function e(t){t.writeInt(this.retry);t.writeInt(this.userException);IceMX.MetricsMapHelper.write(t,this.remotes);IceMX.MetricsMapHelper.write(t,this.collocated)}},{key:"_iceReadMemberImpl",value:function e(t){this.retry=t.readInt();this.userException=t.readInt();this.remotes=IceMX.MetricsMapHelper.read(t);this.collocated=IceMX.MetricsMapHelper.read(t)}}]);return t}(IceMX.Metrics);t.defineValue(IceMX.InvocationMetrics,c[1],false);IceMX.InvocationMetricsDisp=function(e){_inherits(t,e);function t(){_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return t}(IceMX.MetricsDisp);t.defineOperations(IceMX.InvocationMetricsDisp,undefined,c,1);var u=["::Ice::Object","::IceMX::ConnectionMetrics","::IceMX::Metrics"];IceMX.ConnectionMetrics=function(e){_inherits(t,e);function t(e,n,i,r,s){var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:new Ice.Long(0,0);var o=arguments.length>6&&arguments[6]!==undefined?arguments[6]:new Ice.Long(0,0);_classCallCheck(this,t);var c=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,r,s));c.receivedBytes=a;c.sentBytes=o;return c}_createClass(t,[{key:"_iceWriteMemberImpl",value:function e(t){t.writeLong(this.receivedBytes);t.writeLong(this.sentBytes)}},{key:"_iceReadMemberImpl",value:function e(t){this.receivedBytes=t.readLong();this.sentBytes=t.readLong()}}]);return t}(IceMX.Metrics);t.defineValue(IceMX.ConnectionMetrics,u[1],false);IceMX.ConnectionMetricsDisp=function(e){_inherits(t,e);function t(){_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return t}(IceMX.MetricsDisp);t.defineOperations(IceMX.ConnectionMetricsDisp,undefined,u,1)})();(function(){var e=Ice.Debug;var t=Ice.InputStream;var n=Ice.OutputStream;var i=Ice.EndpointParseException;var r=Ice.OpaqueEndpointI;var s=Ice.Protocol;var a=Ice.StringUtil;var o=function(){function o(e){_classCallCheck(this,o);this._instance=e;this._factories=[]}_createClass(o,[{key:"add",value:function t(n){e.assert(this._factories.find(function(e){return n.type()==e.type()})===undefined);this._factories.push(n)}},{key:"get",value:function e(t){return this._factories.find(function(e){return t==e.type()})||null}},{key:"create",value:function e(o,c){var u=o.trim();if(u.length===0){throw new i("value has no non-whitespace characters")}var l=a.splitString(u," \t\n\r");if(l.length===0){throw new i("value has no non-whitespace characters")}var h=l[0];l.splice(0,1);if(h==="default"){h=this._instance.defaultsAndOverrides().defaultProtocol}for(var f=0,_=this._factories.length;f<_;++f){if(this._factories[f].protocol()===h){var d=this._factories[f].create(l,c);if(l.length>0){throw new i("unrecognized argument `"+l[0]+"' in endpoint `"+o+"'")}return d}}if(h==="opaque"){var p=new r;p.initWithOptions(l);if(l.length>0){throw new i("unrecognized argument `"+l[0]+"' in endpoint `"+o+"'")}for(var v=0,y=this._factories.length;v<y;++v){if(this._factories[v].type()==p.type()){var g=new n(this._instance,s.currentProtocolEncoding);g.writeShort(p.type());p.streamWrite(g);var I=new t(this._instance,s.currentProtocolEncoding,g.buffer);I.pos=0;I.readShort();I.startEncapsulation();var m=this._factories[v].read(I);I.endEncapsulation();return m}}return p}return null}},{key:"read",value:function e(t){var n=t.readShort();var i=this.get(n);var s=null;t.startEncapsulation();if(i){s=i.read(t)}if(!s){s=new r(n);s.initWithStream(t)}t.endEncapsulation();return s}},{key:"destroy",value:function e(){this._factories.forEach(function(e){return e.destroy()});this._factories=[]}}]);return o}();Ice.EndpointFactoryManager=o})();(function(){var e=Ice.TcpEndpointI;var t=function(){function t(e){_classCallCheck(this,t);this._instance=e}_createClass(t,[{key:"type",value:function e(){return this._instance.type()}},{key:"protocol",value:function e(){return this._instance.protocol()}},{key:"create",value:function t(n,i){var r=new e(this._instance);r.initWithOptions(n,i);return r}},{key:"read",value:function t(n){var i=new e(this._instance);i.initWithStream(n);return i}},{key:"destroy",value:function e(){this._instance=null}},{key:"clone",value:function e(n){return new t(n)}}]);return t}();Ice.TcpEndpointFactory=t})();(function(){})();(function(){t.defineDictionary(Ice,"PropertyDict","PropertyDictHelper","Ice.StringHelper","Ice.StringHelper",false,undefined,undefined);var e=["::Ice::Object","::Ice::PropertiesAdmin"];Ice.PropertiesAdmin=function(e){_inherits(t,e);function t(){_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return t}(Ice.Object);Ice.PropertiesAdminPrx=function(e){_inherits(t,e);function t(){_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return t}(Ice.ObjectPrx);t.defineOperations(Ice.PropertiesAdmin,Ice.PropertiesAdminPrx,e,1,{getProperty:[,,,,[7],[[7]],,,,],getPropertiesForPrefix:[,,,,["Ice.PropertyDictHelper"],[[7]],,,,],setProperties:[,,,,,[["Ice.PropertyDictHelper"]],,,,]})})();(function(){Ice.LogMessageType=t.defineEnum([["PrintMessage",0],["TraceMessage",1],["WarningMessage",2],["ErrorMessage",3]]);t.defineSequence(Ice,"LogMessageTypeSeqHelper","Ice.LogMessageType._helper",false);Ice.LogMessage=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:Ice.LogMessageType.PrintMessage;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new Ice.Long(0,0);var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"";_classCallCheck(this,e);this.type=t;this.timestamp=n;this.traceCategory=i;this.message=r}_createClass(e,[{key:"_write",value:function e(t){Ice.LogMessageType._write(t,this.type);t.writeLong(this.timestamp);t.writeString(this.traceCategory);t.writeString(this.message)}},{key:"_read",value:function e(t){this.type=Ice.LogMessageType._read(t);this.timestamp=t.readLong();this.traceCategory=t.readString();this.message=t.readString()}}],[{key:"minWireSize",get:function e(){return 11}}]);return e}();t.defineStruct(Ice.LogMessage,true,true);t.defineSequence(Ice,"LogMessageSeqHelper","Ice.LogMessage",false);var e=["::Ice::Object","::Ice::RemoteLogger"];Ice.RemoteLogger=function(e){_inherits(t,e);function t(){_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return t}(Ice.Object);Ice.RemoteLoggerPrx=function(e){_inherits(t,e);function t(){_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return t}(Ice.ObjectPrx);t.defineOperations(Ice.RemoteLogger,Ice.RemoteLoggerPrx,e,1,{init:[,,,,,[[7],["Ice.LogMessageSeqHelper"]],,,,],log:[,,,,,[[Ice.LogMessage]],,,,]});Ice.RemoteLoggerAlreadyAttachedException=function(e){_inherits(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}_createClass(t,[{key:"_mostDerivedType",value:function e(){return Ice.RemoteLoggerAlreadyAttachedException}}],[{key:"_parent",get:function e(){return Ice.UserException}},{key:"_id",get:function e(){return"::Ice::RemoteLoggerAlreadyAttachedException"}}]);return t}(Ice.UserException);var n=["::Ice::LoggerAdmin","::Ice::Object"];Ice.LoggerAdmin=function(e){_inherits(t,e);function t(){_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return t}(Ice.Object);Ice.LoggerAdminPrx=function(e){_inherits(t,e);function t(){_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return t}(Ice.ObjectPrx);t.defineOperations(Ice.LoggerAdmin,Ice.LoggerAdminPrx,n,0,{attachRemoteLogger:[,,,,,[["Ice.RemoteLoggerPrx"],["Ice.LogMessageTypeSeqHelper"],["Ice.StringSeqHelper"],[3]],,[Ice.RemoteLoggerAlreadyAttachedException],,],detachRemoteLogger:[,,,,[1],[["Ice.RemoteLoggerPrx"]],,,,],getLog:[,,,,["Ice.LogMessageSeqHelper"],[["Ice.LogMessageTypeSeqHelper"],["Ice.StringSeqHelper"],[3]],[[7]],,,]})})();(function(){var e=Ice.WSEndpoint;var t=function(t){_inherits(n,t);function n(e,t){_classCallCheck(this,n);var i=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));i._instance=e;i._delegate=t;return i}_createClass(n,[{key:"type",value:function e(){return this._instance.type()}},{key:"protocol",value:function e(){return this._instance.protocol()}},{key:"create",value:function t(n,i){var r=new e(this._instance,this._delegate.create(n,i));r.initWithOptions(n);return r}},{key:"read",value:function t(n){var i=new e(this._instance,this._delegate.read(n));i.initWithStream(n);return i}},{key:"destroy",value:function e(){this._delegate.destroy();this._instance=null}}]);return n}(e);Ice.WSEndpointFactory=t})();(function(){t.defineDictionary(Ice,"SliceChecksumDict","SliceChecksumDictHelper","Ice.StringHelper","Ice.StringHelper",false,undefined,undefined)})();(function(){var e=Ice.AsyncResultBase;var t=Ice.Debug;var n=Ice.DefaultsAndOverrides;var i=Ice.EndpointFactoryManager;var r=Ice.ImplicitContextI;var s=Ice.LocatorManager;var a=Ice.ObjectAdapterFactory;var o=Ice.ValueFactoryManagerI;var c=Ice.OutgoingConnectionFactory;var u=Ice.Properties;var l=Ice.ProxyFactory;var h=Ice.RetryQueue;var f=Ice.RouterManager;var _=Ice.Timer;var d=Ice.TraceLevels;var p=Ice.ReferenceFactory;var v=Ice.RequestHandlerFactory;var y=Ice.ACMConfig;var g=0;var I=1;var m=2;var k=function(){function k(e){_classCallCheck(this,k);this._state=g;this._initData=e;this._traceLevels=null;this._defaultsAndOverrides=null;this._messageSizeMax=0;this._batchAutoFlushSize=0;this._clientACM=null;this._toStringMode=Ice.ToStringMode.Unicode;this._implicitContext=null;this._routerManager=null;this._locatorManager=null;this._referenceFactory=null;this._requestHandlerFactory=null;this._proxyFactory=null;this._outgoingConnectionFactory=null;this._objectAdapterFactory=null;this._retryQueue=null;this._endpointHostResolver=null;this._endpointFactoryManager=null;this._objectFactoryMap=null}_createClass(k,[{key:"initializationData",value:function e(){return this._initData}},{key:"traceLevels",value:function e(){t.assert(this._traceLevels!==null);return this._traceLevels}},{key:"defaultsAndOverrides",value:function e(){t.assert(this._defaultsAndOverrides!==null);return this._defaultsAndOverrides}},{key:"routerManager",value:function e(){if(this._state===m){throw new Ice.CommunicatorDestroyedException}t.assert(this._routerManager!==null);return this._routerManager}},{key:"locatorManager",value:function e(){if(this._state===m){throw new Ice.CommunicatorDestroyedException}t.assert(this._locatorManager!==null);return this._locatorManager}},{key:"referenceFactory",value:function e(){if(this._state===m){throw new Ice.CommunicatorDestroyedException}t.assert(this._referenceFactory!==null);return this._referenceFactory}},{key:"requestHandlerFactory",value:function e(){if(this._state===m){throw new Ice.CommunicatorDestroyedException}t.assert(this._requestHandlerFactory!==null);return this._requestHandlerFactory}},{key:"proxyFactory",value:function e(){if(this._state===m){throw new Ice.CommunicatorDestroyedException}t.assert(this._proxyFactory!==null);return this._proxyFactory}},{key:"outgoingConnectionFactory",value:function e(){if(this._state===m){throw new Ice.CommunicatorDestroyedException}t.assert(this._outgoingConnectionFactory!==null);return this._outgoingConnectionFactory}},{key:"objectAdapterFactory",value:function e(){if(this._state===m){throw new Ice.CommunicatorDestroyedException}t.assert(this._objectAdapterFactory!==null);return this._objectAdapterFactory}},{key:"retryQueue",value:function e(){if(this._state===m){throw new Ice.CommunicatorDestroyedException}t.assert(this._retryQueue!==null);return this._retryQueue}},{key:"timer",value:function e(){if(this._state===m){throw new Ice.CommunicatorDestroyedException}t.assert(this._timer!==null);return this._timer}},{key:"endpointFactoryManager",value:function e(){if(this._state===m){throw new Ice.CommunicatorDestroyedException}t.assert(this._endpointFactoryManager!==null);return this._endpointFactoryManager}},{key:"messageSizeMax",value:function e(){return this._messageSizeMax}},{key:"batchAutoFlushSize",value:function e(){return this._batchAutoFlushSize}},{key:"clientACM",value:function e(){return this._clientACM}},{key:"toStringMode",value:function e(){return this._toStringMode}},{key:"getImplicitContext",value:function e(){return this._implicitContext}},{key:"setDefaultLocator",value:function e(t){if(this._state==m){throw new Ice.CommunicatorDestroyedException}this._referenceFactory=this._referenceFactory.setDefaultLocator(t)}},{key:"setDefaultRouter",value:function e(t){if(this._state==m){throw new Ice.CommunicatorDestroyedException}this._referenceFactory=this._referenceFactory.setDefaultRouter(t)}},{key:"setLogger",value:function e(t){this._initData.logger=t}},{key:"finishSetup",value:function e(t,g){try{if(this._initData.properties===null){this._initData.properties=u.createProperties()}if(Ice._oneOfDone===undefined){Ice._printStackTraces=this._initData.properties.getPropertyAsIntWithDefault("Ice.PrintStackTraces",0)>0;Ice._oneOfDone=true}if(this._initData.logger===null){this._initData.logger=Ice.getProcessLogger()}this._traceLevels=new d(this._initData.properties);this._defaultsAndOverrides=new n(this._initData.properties,this._initData.logger);var I=1024;var m=this._initData.properties.getPropertyAsIntWithDefault("Ice.MessageSizeMax",I);if(m<1||m>2147483647/1024){this._messageSizeMax=2147483647}else{this._messageSizeMax=m*1024}if(this._initData.properties.getProperty("Ice.BatchAutoFlushSize").length===0&&this._initData.properties.getProperty("Ice.BatchAutoFlush").length>0){if(this._initData.properties.getPropertyAsInt("Ice.BatchAutoFlush")>0){this._batchAutoFlushSize=this._messageSizeMax}}else{m=this._initData.properties.getPropertyAsIntWithDefault("Ice.BatchAutoFlushSize",1024);if(m<1){this._batchAutoFlushSize=m}else if(m>2147483647/1024){this._batchAutoFlushSize=2147483647}else{this._batchAutoFlushSize=m*1024}}this._clientACM=new y(this._initData.properties,this._initData.logger,"Ice.ACM.Client",new y(this._initData.properties,this._initData.logger,"Ice.ACM",new y));var k=this._initData.properties.getPropertyWithDefault("Ice.ToStringMode","Unicode");if(k==="ASCII"){this._toStringMode=Ice.ToStringMode.ASCII}else if(k==="Compat"){this._toStringMode=Ice.ToStringMode.Compat}else if(k!=="Unicode"){throw new Ice.InitializationException("The value for Ice.ToStringMode must be Unicode, ASCII or Compat")}this._implicitContext=r.create(this._initData.properties.getProperty("Ice.ImplicitContext"));this._routerManager=new f;this._locatorManager=new s(this._initData.properties);this._referenceFactory=new p(this,t);this._requestHandlerFactory=new v(this,t);this._proxyFactory=new l(this);this._endpointFactoryManager=new i(this);var w=new Ice.ProtocolInstance(this,Ice.TCPEndpointType,"tcp",false);var C=new Ice.TcpEndpointFactory(w);this._endpointFactoryManager.add(C);var S=new Ice.ProtocolInstance(this,Ice.WSEndpointType,"ws",false);var x=new Ice.WSEndpointFactory(S,C.clone(S));this._endpointFactoryManager.add(x);var E=new Ice.ProtocolInstance(this,Ice.SSLEndpointType,"ssl",true);var b=new Ice.TcpEndpointFactory(E);this._endpointFactoryManager.add(b);var O=new Ice.ProtocolInstance(this,Ice.WSSEndpointType,"wss",true);var P=new Ice.WSEndpointFactory(O,b.clone(O));this._endpointFactoryManager.add(P);this._outgoingConnectionFactory=new c(t,this);if(this._initData.valueFactoryManager===null){this._initData.valueFactoryManager=new o}this._objectAdapterFactory=new a(this,t);this._retryQueue=new h(this);this._timer=new _(this._initData.logger);var M=Ice.RouterPrx.uncheckedCast(this._proxyFactory.propertyToProxy("Ice.Default.Router"));if(M!==null){this._referenceFactory=this._referenceFactory.setDefaultRouter(M)}var A=Ice.LocatorPrx.uncheckedCast(this._proxyFactory.propertyToProxy("Ice.Default.Locator"));if(A!==null){this._referenceFactory=this._referenceFactory.setDefaultLocator(A)}if(g!==null){g.resolve(t)}}catch(e){if(g!==null){if(e instanceof Ice.LocalException){this.destroy().finally(function(){return g.reject(e)})}else{g.reject(e)}}else{if(e instanceof Ice.LocalException){this.destroy()}throw e}}}},{key:"destroy",value:function t(){var n=this;var i=new e(null,"destroy",null,this,null);if(this._state==I){if(!this._destroyPromises){this._destroyPromises=[]}this._destroyPromises.push(i);return i}this._state=I;Ice.Promise.try(function(){if(n._objectAdapterFactory){return n._objectAdapterFactory.shutdown()}}).then(function(){if(n._outgoingConnectionFactory!==null){n._outgoingConnectionFactory.destroy()}if(n._objectAdapterFactory!==null){return n._objectAdapterFactory.destroy()}}).then(function(){if(n._outgoingConnectionFactory!==null){return n._outgoingConnectionFactory.waitUntilFinished()}}).then(function(){if(n._retryQueue){n._retryQueue.destroy()}if(n._timer){n._timer.destroy()}if(n._objectFactoryMap!==null){n._objectFactoryMap.forEach(function(e){return e.destroy()});n._objectFactoryMap.clear()}if(n._routerManager){n._routerManager.destroy()}if(n._locatorManager){n._locatorManager.destroy()}if(n._endpointFactoryManager){n._endpointFactoryManager.destroy()}if(n._initData.properties.getPropertyAsInt("Ice.Warn.UnusedProperties")>0){var e=n._initData.properties.getUnusedProperties();if(e.length>0){var t=[];t.push("The following properties were set but never read:");e.forEach(function(e){return t.push("\n    ",e)});n._initData.logger.warning(t.join(""))}}n._objectAdapterFactory=null;n._outgoingConnectionFactory=null;n._retryQueue=null;n._timer=null;n._referenceFactory=null;n._requestHandlerFactory=null;n._proxyFactory=null;n._routerManager=null;n._locatorManager=null;n._endpointFactoryManager=null;n._state=m;if(n._destroyPromises){n._destroyPromises.forEach(function(e){return e.resolve()})}i.resolve()}).catch(function(e){if(n._destroyPromises){n._destroyPromises.forEach(function(t){return t.reject(e)})}i.reject(e)});return i}},{key:"addObjectFactory",value:function e(t,n){this._initData.valueFactoryManager.add(function(e){return t.create(e)},n);if(this._objectFactoryMap===null){this._objectFactoryMap=new Map}this._objectFactoryMap.set(n,t)}},{key:"findObjectFactory",value:function e(t){var n=null;if(this._objectFactoryMap!==null){n=this._objectFactoryMap.get(t)}return n!==undefined?n:null}}]);return k}();Ice.Instance=k})();(function(){var e=Ice.Instance;var t=Ice.Debug;var n=function(){function n(t){_classCallCheck(this,n);this._instance=new e(t)}_createClass(n,[{key:"finishSetup",value:function e(t){this._instance.finishSetup(this,t)}},{key:"destroy",value:function e(){return this._instance.destroy()}},{key:"shutdown",value:function e(){try{return this._instance.objectAdapterFactory().shutdown()}catch(e){t.assert(e instanceof Ice.CommunicatorDestroyedException);return Ice.Promise.resolve()}}},{key:"waitForShutdown",value:function e(){try{return this._instance.objectAdapterFactory().waitForShutdown()}catch(e){t.assert(e instanceof Ice.CommunicatorDestroyedException);return Ice.Promise.resolve()}}},{key:"isShutdown",value:function e(){try{return this._instance.objectAdapterFactory().isShutdown()}catch(e){if(!(e instanceof Ice.CommunicatorDestroyedException)){throw e}return true}}},{key:"stringToProxy",value:function e(t){return this._instance.proxyFactory().stringToProxy(t)}},{key:"proxyToString",value:function e(t){return this._instance.proxyFactory().proxyToString(t)}},{key:"propertyToProxy",value:function e(t){return this._instance.proxyFactory().propertyToProxy(t)}},{key:"proxyToProperty",value:function e(t,n){return this._instance.proxyFactory().proxyToProperty(t,n)}},{key:"stringToIdentity",value:function e(t){return Ice.stringToIdentity(t)}},{key:"identityToString",value:function e(t){return Ice.identityToString(t,this._instance.toStringMode())}},{key:"createObjectAdapter",value:function e(t){var n=new Ice.AsyncResultBase(this,"createObjectAdapter",this,null,null);this._instance.objectAdapterFactory().createObjectAdapter(t,null,n);return n}},{key:"createObjectAdapterWithEndpoints",value:function e(t,n){if(t.length===0){t=Ice.generateUUID()}this.getProperties().setProperty(t+".Endpoints",n);var i=new Ice.AsyncResultBase(this,"createObjectAdapterWithEndpoints",this,null,null);this._instance.objectAdapterFactory().createObjectAdapter(t,null,i);return i}},{key:"createObjectAdapterWithRouter",value:function e(t,n){var i=this;if(t.length===0){t=Ice.generateUUID()}var r=new Ice.AsyncResultBase(this,"createObjectAdapterWithRouter",this,null,null);this.proxyToProperty(n,t+".Router").forEach(function(e,t){i.getProperties().setProperty(t,e)});this._instance.objectAdapterFactory().createObjectAdapter(t,n,r);return r}},{key:"addObjectFactory",value:function e(t,n){this._instance.addObjectFactory(t,n)}},{key:"findObjectFactory",value:function e(t){return this._instance.findObjectFactory(t)}},{key:"getValueFactoryManager",value:function e(){return this._instance.initializationData().valueFactoryManager}},{key:"getImplicitContext",value:function e(){return this._instance.getImplicitContext()}},{key:"getProperties",value:function e(){return this._instance.initializationData().properties}},{key:"getLogger",value:function e(){return this._instance.initializationData().logger}},{key:"getDefaultRouter",value:function e(){return this._instance.referenceFactory().getDefaultRouter()}},{key:"setDefaultRouter",value:function e(t){this._instance.setDefaultRouter(t)}},{key:"getDefaultLocator",value:function e(){return this._instance.referenceFactory().getDefaultLocator()}},{key:"setDefaultLocator",value:function e(t){this._instance.setDefaultLocator(t)}},{key:"flushBatchRequests",value:function e(){return this._instance.outgoingConnectionFactory().flushAsyncBatchRequests()}},{key:"instance",get:function e(){return this._instance}}]);return n}();Ice.Communicator=n})();(function(){var e=Ice.Protocol;Ice.InitializationData=function(){this.properties=null;this.logger=null;this.valueFactoryManager=null};Ice.InitializationData.prototype.clone=function(){var e=new Ice.InitializationData;e.properties=this.properties;e.logger=this.logger;e.valueFactoryManager=this.valueFactoryManager;return e};Ice.initialize=function(e,t){var n=null;var i=null;if(e instanceof Array){n=e}else if(e instanceof Ice.InitializationData){i=e}else if(e!==undefined&&e!==null){throw new Ice.InitializationException("invalid argument to initialize")}if(t!==undefined&&t!==null){if(t instanceof Ice.InitializationData&&i===null){i=t}else{throw new Ice.InitializationException("invalid argument to initialize")}}if(i===null){i=new Ice.InitializationData}else{i=i.clone()}i.properties=Ice.createProperties(n,i.properties);var r=new Ice.Communicator(i);r.finishSetup(null);return r};Ice.createProperties=function(e,t){return new Ice.Properties(e,t)};Ice.currentProtocol=function(){return e.currentProtocol.clone()};Ice.currentEncoding=function(){return e.currentEncoding.clone()};Ice.stringVersion=function(){return"3.7.1"};Ice.intVersion=function(){return 30701}})();e.Ice=Ice;e.IceMX=IceMX;e.IceSSL=IceSSL})();