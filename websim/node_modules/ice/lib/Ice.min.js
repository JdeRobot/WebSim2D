(function(){var e=typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};e.Ice=e.Ice||{};Ice.Slice=Ice.Slice||{};e.IceMX=e.IceMX||{};e.IceSSL=e.IceSSL||{};var t=Ice.Slice;(function(){const e=typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};class t{static module(t){let n=e[t];if(n===undefined){n={};e[t]=n}return n}static require(t){return e}static type(t){if(t===undefined){return undefined}const n=t.split(".");let i=e;for(let e=0,t=n.length;e<t;++e){i=i[n[e]];if(i===undefined){return undefined}}return i}}Ice._require=function(){return e};Ice.Slice=Ice.Slice||{};Ice._ModuleRegistry=t})();(function(){const e=Ice._ModuleRegistry;const t=Ice.Slice;const n=function(e,t){if(e===t){return true}else if(e===null||e===undefined||t===null||t===undefined){return false}else if(e.prototype!==t.prototype){return false}else if(typeof e.equals=="function"){return e.equals(t)}else if(e instanceof Array){return i.equals(e,t,n)}return false};class i{static clone(e){if(e===undefined){return e}else if(e===null){return[]}else{return e.slice()}}static equals(e,t,i){if(e.length!=t.length){return false}const s=i||n;for(let n=0;n<e.length;++n){if(!s.call(s,e[n],t[n])){return false}}return true}static shuffle(e){for(let t=e.length;t>1;--t){const n=e[t-1];const i=Math.floor(Math.random()*t);e[t-1]=e[i];e[i]=n}}}i.eq=n;t.defineSequence=function(t,n,i,s,r){let o=null;Object.defineProperty(t,n,{get:function(){if(o===null){o=Ice.StreamHelpers.generateSeqHelper(e.type(i),s,e.type(r))}return o}})};Ice.ArrayUtil=i})();(function(){class e{constructor(e,t){this._name=e;this._value=t}equals(e){if(this===e){return true}if(!(e instanceof Object.getPrototypeOf(this).constructor)){return false}return this._value==e._value}hashCode(){return this._value}toString(){return this._name}get name(){return this._name}get value(){return this._value}}Ice.EnumBase=e;class t{constructor(e){this._enumType=e}write(e,t){this._enumType._write(e,t)}writeOptional(e,t,n){this._enumType._writeOpt(e,t,n)}read(e){return this._enumType._read(e)}readOptional(e,t){return this._enumType._readOpt(e,t)}}Ice.EnumHelper=t;const n=Ice.Slice;n.defineEnum=function(n){const i=class extends e{constructor(e,t){super(e,t)}};const s=[];let r=0;let o=null;for(const e in n){const t=n[e][0];const c=n[e][1];const a=new i(t,c);s[c]=a;if(!o){o=a}Object.defineProperty(i,t,{enumerable:true,value:a});if(c>r){r=c}}Object.defineProperty(i,"minWireSize",{get:function(){return 1}});i._write=function(e,t){if(t){e.writeEnum(t)}else{e.writeEnum(o)}};i._read=function(e){return e.readEnum(i)};i._writeOpt=function(e,t,n){if(n!==undefined){if(e.writeOptional(t,Ice.OptionalFormat.Size)){i._write(e,n)}}};i._readOpt=function(e,t){return e.readOptionalEnum(t,i)};i._helper=new t(i);Object.defineProperty(i,"valueOf",{value:function(e){if(e===undefined){return i}return s[e]}});Object.defineProperty(i,"maxValue",{value:r});Object.defineProperty(i.prototype,"maxValue",{value:r});return i}})();(function(){class e{constructor(t=0,n=undefined){if(!Number.isSafeInteger(t)){throw new RangeError(n===undefined?"Number must be a safe integer":"High word must be a safe integer")}if(n===undefined){this.low=t>>>0;this.high=(t-this.low)/e.HIGH_MASK>>>0}else{if(!Number.isSafeInteger(n)){throw new RangeError("Low word must be a safe integer")}if(n<0||n>e.MAX_UINT32){throw new RangeError("Low word must be between 0 and 0xFFFFFFFF")}if(t<0||t>e.MAX_UINT32){throw new RangeError("High word must be between 0 and 0xFFFFFFFF")}this.high=t;this.low=n}}hashCode(){return this.low}equals(t){if(this===t){return true}if(!(t instanceof e)){return false}return this.high===t.high&&this.low===t.low}toString(){return this.high+":"+this.low}toNumber(){if((this.high&e.SIGN_MASK)!==0){const t=~this.low>>>0;const n=~this.high>>>0;if(n>e.HIGH_MAX||n==e.HIGH_MAX&&t==e.MAX_UINT32){return Number.NEGATIVE_INFINITY}return-(n*e.HIGH_MASK+t+1)}else{if(this.high>e.HIGH_MAX){return Number.POSITIVE_INFINITY}return this.high*e.HIGH_MASK+this.low}}}e.MAX_UINT32=4294967295;e.SIGN_MASK=2147483648;e.HIGH_MASK=4294967296;e.HIGH_MAX=2097151;Ice.Long=e})();(function(){Ice.AsyncStatus={Queued:0,Sent:1}})();(function(){const e=Ice.Long;const t="BufferOverflowException";const n="BufferUnderflowException";const i="IndexOutOfBoundsException";class s{constructor(e){if(e!==undefined){this.b=e;this.v=new DataView(this.b)}else{this.b=null;this.v=null}this._position=0;this._limit=0;this._shrinkCounter=0}empty(){return this._limit===0}resize(e){if(e===0){this.clear()}else if(e>this.capacity){this.reserve(e)}this._limit=e}clear(){this.b=null;this.v=null;this._position=0;this._limit=0}expand(e){const t=this.capacity===0?e:this._position+e;if(t>this._limit){this.resize(t)}}reset(){if(this._limit>0&&this._limit*2<this.capacity){if(++this._shrinkCounter>2){this.reserve(this._limit);this._shrinkCounter=0}}else{this._shrinkCounter=0}this._limit=0;this._position=0}reserve(e){if(e>this.capacity){const t=Math.max(1024,Math.max(e,2*this.capacity));if(!this.b){this.b=new ArrayBuffer(t)}else{const e=new Uint8Array(t);e.set(new Uint8Array(this.b));this.b=e.buffer}this.v=new DataView(this.b)}else if(e<this.capacity){this.b=this.b.slice(0,this.capacity);this.v=new DataView(this.b)}}put(e){if(this._position===this._limit){throw new Error(t)}this.v.setUint8(this._position,e);this._position++}putAt(e,t){if(e>=this._limit){throw new Error(i)}this.v.setUint8(e,t)}putArray(e){if(!(e instanceof Uint8Array)){throw new TypeError("argument is not a Uint8Array")}if(e.byteLength>0){if(this._position+e.length>this._limit){throw new Error(t)}new Uint8Array(this.b,0,this.b.byteLength).set(e,this._position);this._position+=e.byteLength}}putShort(e){if(this._position+2>this._limit){throw new Error(t)}this.v.setInt16(this._position,e,true);this._position+=2}putInt(e){if(this._position+4>this._limit){throw new Error(t)}this.v.setInt32(this._position,e,true);this._position+=4}putIntAt(e,t){if(e+4>this._limit||e<0){throw new Error(i)}this.v.setInt32(e,t,true)}putFloat(e){if(this._position+4>this._limit){throw new Error(t)}this.v.setFloat32(this._position,e,true);this._position+=4}putDouble(e){if(this._position+8>this._limit){throw new Error(t)}this.v.setFloat64(this._position,e,true);this._position+=8}putLong(e){if(this._position+8>this._limit){throw new Error(t)}this.v.setInt32(this._position,e.low,true);this._position+=4;this.v.setInt32(this._position,e.high,true);this._position+=4}writeString(e,t){const n=unescape(encodeURIComponent(t));e.writeSize(n.length);e.expand(n.length);this.putString(n,n.length)}putString(e,n){if(this._position+n>this._limit){throw new Error(t)}for(let t=0;t<n;++t){this.v.setUint8(this._position,e.charCodeAt(t));this._position++}}get(){if(this._position>=this._limit){throw new Error(n)}const e=this.v.getUint8(this._position);this._position++;return e}getAt(e){if(e<0||e>=this._limit){throw new Error(i)}return this.v.getUint8(e)}getArray(e){if(this._position+e>this._limit){throw new Error(n)}const t=this.b.slice(this._position,this._position+e);this._position+=e;return new Uint8Array(t)}getArrayAt(e,t){if(e+t>this._limit){throw new Error(n)}t=t===undefined?this.b.byteLength-e:t;return new Uint8Array(this.b.slice(e,e+t))}getShort(){if(this._limit-this._position<2){throw new Error(n)}const e=this.v.getInt16(this._position,true);this._position+=2;return e}getInt(){if(this._limit-this._position<4){throw new Error(n)}const e=this.v.getInt32(this._position,true);this._position+=4;return e}getFloat(){if(this._limit-this._position<4){throw new Error(n)}const e=this.v.getFloat32(this._position,true);this._position+=4;return e}getDouble(){if(this._limit-this._position<8){throw new Error(n)}const e=this.v.getFloat64(this._position,true);this._position+=8;return e}getLong(){if(this._limit-this._position<8){throw new Error(n)}const t=this.v.getUint32(this._position,true);this._position+=4;const i=this.v.getUint32(this._position,true);this._position+=4;return new e(i,t)}getString(e){if(this._position+e>this._limit){throw new Error(n)}const t=new DataView(this.b,this._position,e);let i="";for(let n=0;n<e;++n){i+=String.fromCharCode(t.getUint8(n))}this._position+=e;return decodeURIComponent(escape(i))}get position(){return this._position}set position(e){if(e>=0&&e<=this._limit){this._position=e}}get limit(){return this._limit}set limit(e){if(e<=this.capacity){this._limit=e;if(this._position>e){this._position=e}}}get capacity(){return this.b===null?0:this.b.byteLength}get remaining(){return this._limit-this._position}}Ice.Buffer=s})();(function(){Ice.CompactIdRegistry=new Map})();(function(){const e=function(t,n,i,s){s+="  ";if(n===null){return"\n"+s+t+": (null)"}if(n===undefined){return"\n"+s+t+": (undefined)"}if(t=="stack"||typeof n=="function"){return""}if(typeof n!="object"){return"\n"+s+t+': "'+n+'"'}if(i.indexOf(n)!=-1){return"\n"+s+t+": (recursive)"}i.push(n);let r="\n"+s+t+":";for(const o in n){if(t.indexOf("_")===0){continue}if(typeof n[o]=="function"){continue}r+=s+e(o,n[o],i,s)}return r};class t extends Error{constructor(e){super();this.cause=e}}Ice.ServantError=t;class n extends Error{constructor(e){super();if(e){this.ice_cause=e}}ice_name(){return this.constructor._id.substr(2)}ice_id(){return this.constructor._id}static get _id(){return"::Ice::Exception"}toString(){if(this._inToStringAlready){return""}this._inToStringAlready=true;let t=this.ice_id();for(const n in this){if(n!="_inToStringAlready"){t+=e(n,this[n],[],"")}}if(Ice._printStackTraces===true&&this.stack){t+="\n"+this.stack}this._inToStringAlready=false;return t}static captureStackTrace(e){const t=(new Error).stack;if(t!==undefined){Object.defineProperty(e,"stack",{get:function(){return t}})}}}Ice.Exception=n;class i extends n{constructor(e){super(e);n.captureStackTrace(this)}static get _id(){return"::Ice::LocalException"}}Ice.LocalException=i;class s extends n{constructor(e){super(e);n.captureStackTrace(this)}static get _id(){return"::Ice::UserException"}ice_getSlicedData(){return null}_write(e){e.startException(null);r(this,e,this._mostDerivedType());e.endException()}_read(e){e.startException();o(this,e,this._mostDerivedType());e.endException(false)}_usesClasses(){return false}_mostDerivedType(){return Ice.UserException}}Ice.UserException=s;const r=function(e,t,n){if(n===undefined||n===s){return}t.startSlice(n._id,-1,n._parent===s);if(n.prototype.hasOwnProperty("_writeMemberImpl")){n.prototype._writeMemberImpl.call(e,t)}t.endSlice();r(e,t,n._parent)};const o=function(e,t,n){if(n===undefined||n===s){return}t.startSlice();if(n.prototype.hasOwnProperty("_readMemberImpl")){n.prototype._readMemberImpl.call(e,t)}t.endSlice();o(e,t,n._parent)};const c=function(e){e.startException(this._slicedData);r(this,e,this._mostDerivedType());e.endException()};const a=function(e){e.startException();o(this,e,this._mostDerivedType());this._slicedData=e.endException(true)};const l=function(){return this._slicedData};Ice.Slice.PreservedUserException=function(e){e.prototype.ice_getSlicedData=l;e.prototype._write=c;e.prototype._read=a}})();(function(){Ice.FormatType=Ice.Slice.defineEnum([["DefaultFormat",0],["CompactFormat",1],["SlicedFormat",2]])})();(function(){class e extends Error{constructor(e){super();Ice.Exception.captureStackTrace(this);this.message=e}}Ice.AssertionFailedException=e;class t{static assert(e,t){if(!e){console.log(t===undefined?"assertion failed":t);console.log(Error().stack);throw new Ice.AssertionFailedException(t===undefined?"assertion failed":t)}}}Ice.Debug=t})();(function(){const e=Ice.Debug;Ice.StringUtil=class{static findFirstOf(e,t,n){n=n===undefined?0:n;for(let i=n;i<e.length;i++){const n=e.charAt(i);if(t.indexOf(n)!=-1){return i}}return-1}static findFirstNotOf(e,t,n){n=n===undefined?0:n;for(let i=n;i<e.length;i++){const n=e.charAt(i);if(t.indexOf(n)==-1){return i}}return-1}static escapeString(n,i,s){i=i===undefined?null:i;if(i!==null){for(let e=0;e<i.length;++e){if(i.charCodeAt(e)<32||i.charCodeAt(e)>126){throw new Error("special characters must be in ASCII range 32-126")}}}const r=[];if(s===Ice.ToStringMode.Compat){const e=unescape(encodeURIComponent(n));for(let n=0;n<e.length;++n){const o=e.charCodeAt(n);t(o,r,i,s)}}else{for(let o=0;o<n.length;++o){const c=n.charCodeAt(o);if(s===Ice.ToStringMode.Unicode||c<55296||c>57343){t(c,r,i,s)}else{e.assert(s===Ice.ToStringMode.ASCII&&c>=55296&&c<=57343);if(o+1===n.length){throw new Error("High surrogate without low surrogate")}else{const t=n.codePointAt(o);e.assert(t>65535);o++;r.push("\\U");const i=t.toString(16);for(let e=i.length;e<8;e++){r.push("0")}r.push(i)}}}}return r.join("")}static unescapeString(t,s,r,o){s=s===undefined?0:s;r=r===undefined?t.length:r;o=o===undefined?null:o;e.assert(s>=0&&s<=r&&r<=t.length);if(o!==null){for(let e=0;e<o.length;++e){if(o.charCodeAt(e)<32||o.charCodeAt(e)>126){throw new Error("special characters must be in ASCII range 32-126")}}}let c=t.indexOf("\\",s);if(c==-1||c>=r){c=s;while(c<r){n(t,c++)}return t.substring(s,r)}else{const e=[];while(s<r){s=i(t,s,r,o,e)}return e.join("")}}static splitString(e,t){const n=[];let i="";let s=0;let r=null;while(s<e.length){if(r===null&&(e.charAt(s)==='"'||e.charAt(s)==="'")){r=e.charAt(s++);continue}else if(r===null&&e.charAt(s)==="\\"&&s+1<e.length&&(e.charAt(s+1)==='"'||e.charAt(s+1)==="'")){++s}else if(r!==null&&e.charAt(s)==="\\"&&s+1<e.length&&e.charAt(s+1)===r){++s}else if(r!==null&&e.charAt(s)===r){++s;r=null;continue}else if(t.indexOf(e.charAt(s))!==-1){if(r===null){++s;if(i.length>0){n.push(i);i=""}continue}}if(s<e.length){i+=e.charAt(s++)}}if(i.length>0){n.push(i)}if(r!==null){return null}return n}static checkQuote(e,t){t=t===undefined?0:t;const n=e.charAt(t);if(n=='"'||n=="'"){t++;let i;while(t<e.length&&(i=e.indexOf(n,t))!=-1){if(e.charAt(i-1)!="\\"){return i}t=i+1}return-1}return 0}static hashCode(e){let t=0;for(let n=0;n<e.length;n++){t=31*t+e.charCodeAt(n)}return t}static toInt(e){const t=parseInt(e,10);if(isNaN(t)){throw new Error("conversion of `"+e+"' to int failed")}return t}};function t(t,n,i,s){switch(t){case 92:{n.push("\\\\");break}case 39:{n.push("\\'");break}case 34:{n.push('\\"');break}case 7:{if(s==Ice.ToStringMode.Compat){n.push("\\007")}else{n.push("\\a")}break}case 8:{n.push("\\b");break}case 12:{n.push("\\f");break}case 10:{n.push("\\n");break}case 13:{n.push("\\r");break}case 9:{n.push("\\t");break}case 11:{if(s==Ice.ToStringMode.Compat){n.push("\\013")}else{n.push("\\v")}break}default:{const r=String.fromCharCode(t);if(i!==null&&i.indexOf(r)!==-1){n.push("\\");n.push(r)}else{if(t<32||t>126){if(s===Ice.ToStringMode.Compat){e.assert(t<256);n.push("\\");const i=t.toString(8);for(let e=i.length;e<3;e++){n.push("0")}n.push(i)}else if(t<32||t==127||s===Ice.ToStringMode.ASCII){n.push("\\u");const e=t.toString(16);for(let t=e.length;t<4;t++){n.push("0")}n.push(e)}else{n.push(r)}}else{n.push(r)}}break}}}function n(e,t){const n=e.charCodeAt(t);if(n<32||n===127){let i;if(t>0){i="character after `"+e.substring(0,t)+"'"}else{i="first character"}i+=" has invalid ordinal value"+n;throw new Error(i)}return e.charAt(t)}function i(t,i,s,r,o){e.assert(i>=0);e.assert(i<s);e.assert(s<=t.length);if(t.charAt(i)!="\\"){o.push(n(t,i++))}else if(i+1===s){++i;o.push("\\")}else{let c=t.charAt(++i);switch(c){case"\\":case"'":case'"':case"?":{++i;o.push(c);break}case"a":{++i;o.append("");break}case"b":{++i;o.push("\b");break}case"f":{++i;o.push("\f");break}case"n":{++i;o.push("\n");break}case"r":{++i;o.push("\r");break}case"t":{++i;o.push("\t");break}case"v":{++i;o.push("\v");break}case"u":case"U":{let e=0;const n=c==="u";let r=n?4:8;++i;while(r>0&&i<s){let n=t.charCodeAt(i++);if(n>=48&&n<=57){n-=48}else if(n>=97&&n<=102){n+=10-97}else if(n>=65&&n<=70){n+=10-65}else{break}e=e*16+n;--r}if(r>0){throw new Error("Invalid universal character name: too few hex digits")}if(e>=55296&&e<=57343){throw new Error("A universal character name cannot designate a surrogate")}if(n||e<=65535){o.push(String.fromCharCode(e))}else{o.push(String.fromCodePoint(e))}break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"x":{const n=[];let r=true;while(r){let o=0;if(c==="x"){let e=2;++i;while(e>0&&i<s){let n=t.charCodeAt(i++);if(n>=48&&n<=57){n-=48}else if(n>=97&&n<=102){n+=10-97}else if(n>=65&&n<=70){n+=10-65}else{break}o=o*16+n;--e}if(e===2){throw new Error("Invalid \\x escape sequence: no hex digit")}}else{for(let n=0;n<3&&i<s;++n){const s=t.charCodeAt(i++)-"0".charCodeAt(0);if(s<0||s>7){--i;e.assert(n!==0);break}o=o*8+s}if(o>255){throw new Error("octal value \\"+o.toString(8)+" ("+o+") is out of range")}}n.push(String.fromCharCode(o));r=false;if(i+1<s&&t.charAt(i)==="\\"){c=t.charAt(i+1);const e=t.charCodeAt(i+1);if(c==="x"||e>=48&&e<=57){i++;r=true}}}o.push(decodeURIComponent(escape(n.join(""))));break}default:{if(r===null||r.length===0||r.indexOf(c)===-1){o.push("\\")}o.push(n(t,i++));break}}}return i}})();(function(){Ice.ReferenceMode={ModeTwoway:0,ModeOneway:1,ModeBatchOneway:2,ModeDatagram:3,ModeBatchDatagram:4,ModeLast:4}})();(function(){Ice.OptionalFormat=Ice.Slice.defineEnum([["F1",0],["F2",1],["F4",2],["F8",3],["Size",4],["VSize",5],["FSize",6],["Class",7]])})();(function(){const e=Object.defineProperty;const t=Ice.OptionalFormat;const n={};n.FSizeOptHelper=function(){this.writeOptional=function(e,n,i){if(i!==undefined&&e.writeOptional(n,t.FSize)){const t=e.startSize();this.write(e,i);e.endSize(t)}};this.readOptional=function(e,n){let i;if(e.readOptional(n,t.FSize)){e.skip(4);i=this.read(e)}return i}};n.VSizeOptHelper=function(){this.writeOptional=function(e,n,i){if(i!==undefined&&e.writeOptional(n,t.VSize)){e.writeSize(this.minWireSize);this.write(e,i)}};this.readOptional=function(e,n){let i;if(e.readOptional(n,t.VSize)){e.skipSize();i=this.read(e)}return i}};n.VSizeContainerOptHelper=function(e){this.writeOptional=function(n,i,s){if(s!==undefined&&n.writeOptional(i,t.VSize)){const t=this.size(s);n.writeSize(t>254?t*e+5:t*e+1);this.write(n,s)}};this.readOptional=function(e,n){let i;if(e.readOptional(n,t.VSize)){e.skipSize();i=this.read(e)}return i}};n.VSizeContainer1OptHelper=function(){this.writeOptional=function(e,n,i){if(i!==undefined&&e.writeOptional(n,t.VSize)){this.write(e,i)}};this.readOptional=function(e,n){let i;if(e.readOptional(n,t.VSize)){i=this.read(e)}return i}};class i{write(e,t){if(t===null||t.length===0){e.writeSize(0)}else{const n=this.elementHelper;e.writeSize(t.length);for(let i=0;i<t.length;++i){n.write(e,t[i])}}}read(e){const t=this.elementHelper;const n=e.readAndCheckSeqSize(t.minWireSize);const i=[];i.length=n;for(let s=0;s<n;++s){i[s]=t.read(e)}return i}size(e){return e===null||e===undefined?0:e.length}get minWireSize(){return 1}}const s=new i;s.write=function(e,t){return e.writeByteSeq(t)};s.read=function(e){return e.readByteSeq()};e(s,"elementHelper",{get:function(){return Ice.ByteHelper}});n.VSizeContainer1OptHelper.call(s);const r=function(e){const t=e.readAndCheckSeqSize(1);const n=[];n.length=t;const i=this.elementType;const s=function(t){e.readValue(e=>n[t]=e,i)};for(let e=0;e<t;++e){s(e)}return n};n.generateSeqHelper=function(t,o,c){if(t===Ice.ByteHelper){return s}const a=new i;if(o){if(t.minWireSize===1){n.VSizeContainer1OptHelper.call(a)}else{n.VSizeContainerOptHelper.call(a,t.minWireSize)}}else{n.FSizeOptHelper.call(a)}e(a,"elementHelper",{get:function(){return t}});if(t==Ice.ObjectHelper){e(a,"elementType",{get:function(){return c}});a.read=r}return a};class o{write(e,t){if(t===null||t.size===0){e.writeSize(0)}else{const n=this.keyHelper;const i=this.valueHelper;e.writeSize(t.size);for(const[s,r]of t){n.write(e,s);i.write(e,r)}}}read(e){const t=this.mapType;const n=new t;const i=e.readSize();const s=this.keyHelper;const r=this.valueHelper;for(let t=0;t<i;++t){n.set(s.read(e),r.read(e))}return n}size(e){return e===null||e===undefined?0:e.size}get minWireSize(){return 1}}const c=function(e){const t=e.readSize();const n=this.mapType;const i=new n;const s=this.valueType;const r=function(t){e.readValue(e=>i.set(t,e),s)};const o=this.keyHelper;for(let n=0;n<t;++n){r(o.read(e))}return i};n.generateDictHelper=function(t,i,s,r,a){const l=new o;if(s){n.VSizeContainerOptHelper.call(l,t.minWireSize+i.minWireSize)}else{n.FSizeOptHelper.call(l)}e(l,"mapType",{get:function(){return a}});e(l,"keyHelper",{get:function(){return t}});e(l,"valueHelper",{get:function(){return i}});if(i==Ice.ObjectHelper){e(l,"valueType",{get:function(){return r}});l.read=c}return l};Ice.StreamHelpers=n})();(function(){const e=["::Ice::Object"];Ice.Object=class{ice_isA(e,t){return this._iceMostDerivedType()._iceIds.indexOf(e)>=0}ice_ping(e){}ice_ids(e){return this._iceMostDerivedType()._iceIds}ice_id(e){return this._iceMostDerivedType()._iceId}toString(){return"[object "+this.ice_id()+"]"}_iceMostDerivedType(){return Ice.Object}equals(e){return this===e}static get _iceImplements(){return[]}}})();(function(){function e(){let e=(new Date).getTime();const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const n=(e+Math.random()*16)%16|0;e=Math.floor(e/16);return(t=="x"?n:n&3|8).toString(16)});return t}Ice.generateUUID=e})();(function(){const e=Ice.StringUtil;class t{static addBoolean(e,t){return(e<<5)+e^(t?0:1)}static addString(t,n){if(n!==undefined&&n!==null){t=(t<<5)+t^e.hashCode(n)}return t}static addNumber(e,t){return(e<<5)+e^t}static addHashable(e,t){if(t!==undefined&&t!==null){e=(e<<5)+e^t.hashCode()}return e}static addArray(e,t,n){if(t!==undefined&&t!==null){for(let i=0;i<t.length;++i){e=n(e,t[i])}}return e}}Ice.HashUtil=t})();(function(){const e=Ice._ModuleRegistry;const t=Ice.StringUtil;function n(e,t,n,i,s){for(let r=e._table[s];r!==null;r=r._nextInBucket){if(r._hash===i&&e.keysEqual(t,r._key)){r._value=n;return undefined}}e.add(t,n,i,s);return undefined}function i(e,t){if(e===t){return true}if(e===undefined||e===null||t===undefined||t===null){return false}return e.equals(t)}function s(e,t){return e===t}class r{constructor(e,t){let n,i,o;if(typeof e=="function"){i=e;o=t}else if(e instanceof r){n=e;i=n.keyComparator;o=n.valueComparator}this._size=0;this._head=null;this._initialCapacity=32;this._loadFactor=.75;this._table=[];this._keyComparator=typeof i=="function"?i:s;this._valueComparator=typeof o=="function"?o:s;if(n instanceof r&&n._size>0){this._threshold=n._threshold;this._table.length=n._table.length;for(let e=0;e<n._table.length;e++){this._table[e]=null}this.merge(n)}else{this._threshold=this._initialCapacity*this._loadFactor;for(let e=0;e<this._initialCapacity;e++){this._table[e]=null}}}set(e,t){const i=this.computeHash(e);const s=this.hashIndex(i.hash,this._table.length);return n(this,i.key,t,i.hash,s)}get(e){const t=this.computeHash(e);const n=this.findEntry(t.key,t.hash);return n!==undefined?n._value:undefined}has(e){const t=this.computeHash(e);return this.findEntry(t.key,t.hash)!==undefined}delete(e){const t=this.computeHash(e);const n=this.hashIndex(t.hash,this._table.length);let i=null;for(let e=this._table[n];e!==null;e=e._nextInBucket){if(e._hash===t.hash&&this.keysEqual(t.key,e._key)){this._size--;if(i!==null){i._nextInBucket=e._nextInBucket}else{this._table[n]=e._nextInBucket}if(e._prev!==null){e._prev._next=e._next}if(e._next!==null){e._next._prev=e._prev}if(this._head===e){this._head=e._next}return e._value}i=e}return undefined}clear(){for(let e=0;e<this._table.length;++e){this._table[e]=null}this._head=null;this._size=0}forEach(e,t){t=t===undefined?e:t;for(let n=this._head;n!==null;n=n._next){e.call(t,n._value,n._key)}}*entries(){for(let e=this._head;e!==null;e=e._next){yield[e._key,e._value]}}*keys(){for(let e=this._head;e!==null;e=e._next){yield e._key}}*values(){for(let e=this._head;e!==null;e=e._next){yield e._value}}equals(e,t){if(e===null||!(e instanceof r)||this._size!==e._size){return false}const n=t||((e,t)=>{return this._valueComparator.call(this._valueComparator,e,t)});for(let t=this._head;t!==null;t=t._next){const i=e.findEntry(t._key,t._hash);if(i===undefined||!n(t._value,i._value)){return false}}return true}merge(e){for(let t=e._head;t!==null;t=t._next){n(this,t._key,t._value,t._hash,this.hashIndex(t._hash,this._table.length))}}add(e,t,n,i){const s=Object.create(null,{key:{enumerable:true,get:function(){return this._key}},value:{enumerable:true,get:function(){return this._value}},next:{enumerable:true,get:function(){return this._next}},_key:{enumerable:false,writable:true,value:e},_value:{enumerable:false,writable:true,value:t},_prev:{enumerable:false,writable:true,value:null},_next:{enumerable:false,writable:true,value:null},_nextInBucket:{enumerable:false,writable:true,value:null},_hash:{enumerable:false,writable:true,value:n}});s._nextInBucket=this._table[i];this._table[i]=s;s._next=this._head;if(this._head!==null){this._head._prev=s}this._head=s;this._size++;if(this._size>=this._threshold){this.resize(this._table.length*2)}}resize(e){const t=new Array(e).fill(null);for(let n=this._head;n!==null;n=n._next){const i=this.hashIndex(n._hash,e);n._nextInBucket=t[i];t[i]=n}this._table=t;this._threshold=e*this._loadFactor}findEntry(e,t){const n=this.hashIndex(t,this._table.length);for(let i=this._table[n];i!==null;i=i._nextInBucket){if(i._hash===t&&this.keysEqual(e,i._key)){return i}}return undefined}hashIndex(e,t){return e&t-1}computeHash(e){if(e===0||e===-0){return{key:0,hash:0}}if(e===null){if(r._null===null){const e=Ice.generateUUID();r._null={key:e,hash:t.hashCode(e)}}return r._null}if(e===undefined){throw new Error("cannot compute hash for undefined value")}if(typeof e.hashCode==="function"){return{key:e,hash:e.hashCode()}}const n=typeof e;if(n==="string"||e instanceof String){return{key:e,hash:t.hashCode(e)}}else if(n==="number"||e instanceof Number){if(isNaN(e)){if(r._nan===null){const e=Ice.generateUUID();r._nan={key:e,hash:t.hashCode(e)}}return r._nan}return{key:e,hash:e.toFixed(0)}}else if(n==="boolean"||e instanceof Boolean){return{key:e,hash:e?1:0}}throw new Error("cannot compute hash for value of type "+n)}keysEqual(e,t){return this._keyComparator.call(this._keyComparator,e,t)}get size(){return this._size}}r.prototype[Symbol.iterator]=r.prototype.entries;Ice.HashMap=r;r.compareEquals=i;r.compareIdentity=s;r._null=null;r._nan=null;const o=Ice.Slice;o.defineDictionary=function(t,n,i,s,o,c,a,l){if(a===undefined){t[n]=Map}else{t[n]=function(e){return new r(e||a)}}let h=null;Object.defineProperty(t,i,{get:function(){if(h===null){h=Ice.StreamHelpers.generateDictHelper(e.type(s),e.type(o),c,e.type(l),t[n])}return h}})}})();(function(){Ice.Value=class{ice_preMarshal(){}ice_postUnmarshal(){}ice_getSlicedData(){return null}_iceWrite(t){t.startValue(null);e(this,t,this._iceMostDerivedType());t.endValue()}_iceRead(e){e.startValue();t(this,e,this._iceMostDerivedType());e.endValue(false)}static write(e,t){e.writeValue(t)}static writeOptional(e,t,n){e.writeOptionalValue(t,n)}static read(e){const t={value:null};e.readValue(e=>t.value=e,this);return t}static readOptional(e,t){const n={value:undefined};e.readOptionalValue(t,e=>n.value=e,this);return n}};Ice.InterfaceByValue=class extends Ice.Value{constructor(e){super();this._id=e}ice_id(){return this._id}_iceWrite(e){e.startValue(null);e.startSlice(this.ice_id(),-1,true);e.endSlice();e.endValue()}_iceRead(e){e.startValue();e.startSlice();e.endSlice();e.endValue(false)}};const e=function(t,n,i){if(i===undefined||i===Ice.Value){return}n.startSlice(i.ice_staticId(),Object.prototype.hasOwnProperty.call(i,"_iceCompactId")?i._iceCompactId:-1,Object.getPrototypeOf(i)===Ice.Value);if(i.prototype.hasOwnProperty("_iceWriteMemberImpl")){i.prototype._iceWriteMemberImpl.call(t,n)}n.endSlice();e(t,n,Object.getPrototypeOf(i))};const t=function(e,n,i){if(i===undefined||i===Ice.Value){return}n.startSlice();if(i.prototype.hasOwnProperty("_iceReadMemberImpl")){i.prototype._iceReadMemberImpl.call(e,n)}n.endSlice();t(e,n,Object.getPrototypeOf(i))};function n(t){t.startValue(this._iceSlicedData);e(this,t,this._iceMostDerivedType());t.endValue()}function i(e){e.startValue();t(this,e,this._iceMostDerivedType());this._iceSlicedData=e.endValue(true)}function s(){return this._iceSlicedData}const r=Ice.Slice;r.defineValue=function(e,t,r,o=0){e.prototype.ice_id=function(){return t};e.prototype._iceMostDerivedType=function(){return e};e.ice_staticId=function(){return t};if(r){e.prototype.ice_getSlicedData=s;e.prototype._iceWrite=n;e.prototype._iceRead=i}if(o>0){Ice.CompactIdRegistry.set(o,t)}};r.defineValue(Ice.Value,"::Ice::Object")})();(function(){const e=Ice.ArrayUtil;const t=e.eq;function n(e){if(this===e){return true}if(e===null||e===undefined){return false}if(this.prototype!==e.prototype){return false}for(const n in this){const i=this[n];const s=e[n];if(typeof i=="function"){continue}else if(!t(i,s)){return false}}return true}function i(){const t=new this.constructor;for(const n in this){const i=this[n];if(i===undefined||i===null){t[n]=i}else if(typeof i=="function"){continue}else if(typeof i.clone=="function"){t[n]=i.clone()}else if(i instanceof Array){t[n]=e.clone(i)}else{t[n]=i}}return t}function s(e,t){if(typeof t.hashCode=="function"){return Ice.HashUtil.addHashable(e,t)}else if(t instanceof Array){return Ice.HashUtil.addArray(e,t,s)}else{const n=typeof t;if(t instanceof String||n=="string"){return Ice.HashUtil.addString(e,t)}else if(t instanceof Number||n=="number"){return Ice.HashUtil.addNumber(e,t)}else if(t instanceof Boolean||n=="boolean"){return Ice.HashUtil.addBoolean(e,t)}}}function r(){let e=5381;for(const t in this){const n=this[t];if(n===undefined||n===null||typeof n=="function"){continue}e=s(e,n)}return e}Ice.Slice.defineStruct=function(e,t,s){e.prototype.clone=i;e.prototype.equals=n;if(t){e.prototype.hashCode=r}if(e.prototype._write&&e.prototype._read){e.write=function(t,n){if(!n){if(!e.prototype._nullMarshalValue){e.prototype._nullMarshalValue=new this}n=e.prototype._nullMarshalValue}n._write(t)};e.read=function(e,t){if(!t||!(t instanceof this)){t=new this}t._read(e);return t};if(s){Ice.StreamHelpers.FSizeOptHelper.call(e)}else{Ice.StreamHelpers.VSizeOptHelper.call(e)}}return e}})();(function(){const e=Ice.Buffer;const t="A".charCodeAt(0);const n="a".charCodeAt(0);const i="0".charCodeAt(0);function s(e){if(e<26){return String.fromCharCode(t+e)}if(e<52){return String.fromCharCode(n+(e-26))}if(e<62){return String.fromCharCode(i+(e-52))}if(e==62){return"+"}return"/"}function r(e){if(e>="A"&&e<="Z"){return e.charCodeAt(0)-t}if(e>="a"&&e<="z"){return e.charCodeAt(0)-n+26}if(e>="0"&&e<="9"){return e.charCodeAt(0)-i+52}if(e=="+"){return 62}return 63}class o{static encode(e){if(e===null||e.length===0){return""}const t=[];let n;let i;let r;let o;let c;let a;let l;for(let h=0;h<e.length;h+=3){n=e[h]&255;i=0;r=0;if(h+1<e.length){i=e[h+1]&255}if(h+2<e.length){r=e[h+2]&255}o=n>>2&255;c=((n&3)<<4|i>>4)&255;a=((i&15)<<2|r>>6)&255;l=r&63;t.push(s(o));t.push(s(c));if(h+1<e.length){t.push(s(a))}else{t.push("=")}if(h+2<e.length){t.push(s(l))}else{t.push("=")}}const h=t.join("");const u=[];let d=0;while(h.length-d>76){u.push(h.substring(d,d+76));u.push("\r\n");d+=76}u.push(h.substring(d));return u.join("")}static decode(t){const n=[];for(let e=0;e<t.length;e++){const i=t.charAt(e);if(o.isBase64(i)){n.push(i)}}if(n.length===0){return null}const i=n.length*3/4+1;const s=new e;s.resize(i);let c;let a;let l;let h;let u;let d;let p;let _;for(let e=0;e<n.length;e+=4){u="A";d="A";p="A";_="A";u=n[e];if(e+1<n.length){d=n[e+1]}if(e+2<n.length){p=n[e+2]}if(e+3<n.length){_=n[e+3]}c=r(u)&255;a=r(d)&255;l=r(p)&255;h=r(_)&255;s.put(c<<2|a>>4);if(p!="="){s.put((a&15)<<4|l>>2)}if(_!="="){s.put((l&3)<<6|h)}}return s.remaining>0?s.getArrayAt(0,s.position):s.getArrayAt(0)}static isBase64(e){if(e>="A"&&e<="Z"){return true}if(e>="a"&&e<="z"){return true}if(e>="0"&&e<="9"){return true}if(e=="+"){return true}if(e=="/"){return true}if(e=="="){return true}return false}}Ice.Base64=o})();(function(){t.defineSequence(Ice,"BoolSeqHelper","Ice.BoolHelper",true);t.defineSequence(Ice,"ByteSeqHelper","Ice.ByteHelper",true);t.defineSequence(Ice,"ShortSeqHelper","Ice.ShortHelper",true);t.defineSequence(Ice,"IntSeqHelper","Ice.IntHelper",true);t.defineSequence(Ice,"LongSeqHelper","Ice.LongHelper",true);t.defineSequence(Ice,"FloatSeqHelper","Ice.FloatHelper",true);t.defineSequence(Ice,"DoubleSeqHelper","Ice.DoubleHelper",true);t.defineSequence(Ice,"StringSeqHelper","Ice.StringHelper",false);t.defineSequence(Ice,"ObjectSeqHelper","Ice.ObjectHelper",false,"Ice.Value");t.defineSequence(Ice,"ObjectProxySeqHelper","Ice.ObjectPrx",false)})();(function(){Ice.Identity=class{constructor(e="",t=""){this.name=e;this.category=t}_write(e){e.writeString(this.name);e.writeString(this.category)}_read(e){this.name=e.readString();this.category=e.readString()}static get minWireSize(){return 2}};t.defineStruct(Ice.Identity,true,true);t.defineDictionary(Ice,"ObjectDict","ObjectDictHelper","Ice.Identity","Ice.ObjectHelper",false,Ice.HashMap.compareEquals,"Ice.Value");t.defineSequence(Ice,"IdentitySeqHelper","Ice.Identity",false)})();(function(){})();(function(){function e(){const e=class{static setTimeout(e,t){return setTimeout.apply(null,arguments)}static clearTimeout(e){return clearTimeout.apply(null,arguments)}static setInterval(){return setInterval.apply(null,arguments)}static clearInterval(){return clearInterval.apply(null,arguments)}};if(typeof setImmediate=="function"){e.setImmediate=function(){return setImmediate.apply(null,arguments)}}else{e.setImmediate=function(){return setTimeout.apply(null,arguments)}}return e}const t=Number.MAX_SAFE_INTEGER||9007199254740991;const n=new Map;const i=0;const s=1;const r=2;const o=3;const c=4;let a;let l=0;const h=function(){if(l==t){l=0}return l++};class u{static setTimeout(e,t){const s=h();n.set(s,e);a.postMessage({type:i,id:s,ms:t});return s}static clearTimeout(e){n.delete(e);a.postMessage({type:o,id:e})}static setInterval(e,t){const i=h();n.set(i,e);a.postMessage({type:s,id:i,ms:t});return i}static clearInterval(e){n.delete(e);a.postMessage({type:c,id:e})}static setImmediate(e){const t=h();n.set(t,e);a.postMessage({type:r,id:t});return t}static onmessage(e){const t=n.get(e.data.id);if(t!==undefined){t.call();if(e.data.type!==s){n.delete(e.data.id)}}}}const d=function(){return"("+function(){const e=0;const t=1;const n=2;const i=3;const s=4;const r={};self.onmessage=(o=>{if(o.data.type==e){r[o.data.id]=setTimeout(()=>self.postMessage(o.data),o.data.ms)}else if(o.data.type==t){r[o.data.id]=setInterval(()=>self.postMessage(o.data),o.data.ms)}else if(o.data.type==n){self.postMessage(o.data)}else if(o.data.type==i){clearTimeout(r[o.data.id]);delete r[o.data.id]}else if(o.data.type==s){clearInterval(r[o.data.id]);delete r[o.data.id]}})}.toString()+"());"};if(typeof navigator!=="undefined"&&(navigator.userAgent.indexOf("MSIE")!==-1||navigator.userAgent.match(/Trident.*rv:11\./))){Ice.Timer=e()}else if(typeof WorkerGlobalScope!=="undefined"&&this instanceof WorkerGlobalScope){Ice.Timer=e()}else if(a===undefined){const e=URL.createObjectURL(new Blob([d()],{type:"text/javascript"}));a=new Worker(e);a.onmessage=u.onmessage;Ice.Timer=u}})();(function(){Ice.ProtocolVersion=class{constructor(e=0,t=0){this.major=e;this.minor=t}_write(e){e.writeByte(this.major);e.writeByte(this.minor)}_read(e){this.major=e.readByte();this.minor=e.readByte()}static get minWireSize(){return 2}};t.defineStruct(Ice.ProtocolVersion,true,false);Ice.EncodingVersion=class{constructor(e=0,t=0){this.major=e;this.minor=t}_write(e){e.writeByte(this.major);e.writeByte(this.minor)}_read(e){this.major=e.readByte();this.minor=e.readByte()}static get minWireSize(){return 2}};t.defineStruct(Ice.EncodingVersion,true,false)})();(function(){Ice.InitializationException=class extends Ice.LocalException{constructor(e="",t=""){super(t);this.reason=e}static get _parent(){return Ice.LocalException}static get _id(){return"::Ice::InitializationException"}};Ice.PluginInitializationException=class extends Ice.LocalException{constructor(e="",t=""){super(t);this.reason=e}static get _parent(){return Ice.LocalException}static get _id(){return"::Ice::PluginInitializationException"}};Ice.CollocationOptimizationException=class extends Ice.LocalException{constructor(e=""){super(e)}static get _parent(){return Ice.LocalException}static get _id(){return"::Ice::CollocationOptimizationException"}};Ice.AlreadyRegisteredException=class extends Ice.LocalException{constructor(e="",t="",n=""){super(n);this.kindOfObject=e;this.id=t}static get _parent(){return Ice.LocalException}static get _id(){return"::Ice::AlreadyRegisteredException"}};Ice.NotRegisteredException=class extends Ice.LocalException{constructor(e="",t="",n=""){super(n);this.kindOfObject=e;this.id=t}static get _parent(){return Ice.LocalException}static get _id(){return"::Ice::NotRegisteredException"}};Ice.TwowayOnlyException=class extends Ice.LocalException{constructor(e="",t=""){super(t);this.operation=e}static get _parent(){return Ice.LocalException}static get _id(){return"::Ice::TwowayOnlyException"}};Ice.CloneNotImplementedException=class extends Ice.LocalException{constructor(e=""){super(e)}static get _parent(){return Ice.LocalException}static get _id(){return"::Ice::CloneNotImplementedException"}};Ice.UnknownException=class extends Ice.LocalException{constructor(e="",t=""){super(t);this.unknown=e}static get _parent(){return Ice.LocalException}static get _id(){return"::Ice::UnknownException"}};Ice.UnknownLocalException=class extends Ice.UnknownException{constructor(e,t=""){super(e,t)}static get _parent(){return Ice.UnknownException}static get _id(){return"::Ice::UnknownLocalException"}};Ice.UnknownUserException=class extends Ice.UnknownException{constructor(e,t=""){super(e,t)}static get _parent(){return Ice.UnknownException}static get _id(){return"::Ice::UnknownUserException"}};Ice.VersionMismatchException=class extends Ice.LocalException{constructor(e=""){super(e)}static get _parent(){return Ice.LocalException}static get _id(){return"::Ice::VersionMismatchException"}};Ice.CommunicatorDestroyedException=class extends Ice.LocalException{constructor(e=""){super(e)}static get _parent(){return Ice.LocalException}static get _id(){return"::Ice::CommunicatorDestroyedException"}};Ice.ObjectAdapterDeactivatedException=class extends Ice.LocalException{constructor(e="",t=""){super(t);this.name=e}static get _parent(){return Ice.LocalException}static get _id(){return"::Ice::ObjectAdapterDeactivatedException"}};Ice.ObjectAdapterIdInUseException=class extends Ice.LocalException{constructor(e="",t=""){super(t);this.id=e}static get _parent(){return Ice.LocalException}static get _id(){return"::Ice::ObjectAdapterIdInUseException"}};Ice.NoEndpointException=class extends Ice.LocalException{constructor(e="",t=""){super(t);this.proxy=e}static get _parent(){return Ice.LocalException}static get _id(){return"::Ice::NoEndpointException"}};Ice.EndpointParseException=class extends Ice.LocalException{constructor(e="",t=""){super(t);this.str=e}static get _parent(){return Ice.LocalException}static get _id(){return"::Ice::EndpointParseException"}};Ice.EndpointSelectionTypeParseException=class extends Ice.LocalException{constructor(e="",t=""){super(t);this.str=e}static get _parent(){return Ice.LocalException}static get _id(){return"::Ice::EndpointSelectionTypeParseException"}};Ice.VersionParseException=class extends Ice.LocalException{constructor(e="",t=""){super(t);this.str=e}static get _parent(){return Ice.LocalException}static get _id(){return"::Ice::VersionParseException"}};Ice.IdentityParseException=class extends Ice.LocalException{constructor(e="",t=""){super(t);this.str=e}static get _parent(){return Ice.LocalException}static get _id(){return"::Ice::IdentityParseException"}};Ice.ProxyParseException=class extends Ice.LocalException{constructor(e="",t=""){super(t);this.str=e}static get _parent(){return Ice.LocalException}static get _id(){return"::Ice::ProxyParseException"}};Ice.IllegalIdentityException=class extends Ice.LocalException{constructor(e=new Ice.Identity,t=""){super(t);this.id=e}static get _parent(){return Ice.LocalException}static get _id(){return"::Ice::IllegalIdentityException"}};Ice.IllegalServantException=class extends Ice.LocalException{constructor(e="",t=""){super(t);this.reason=e}static get _parent(){return Ice.LocalException}static get _id(){return"::Ice::IllegalServantException"}};Ice.RequestFailedException=class extends Ice.LocalException{constructor(e=new Ice.Identity,t="",n="",i=""){super(i);this.id=e;this.facet=t;this.operation=n}static get _parent(){return Ice.LocalException}static get _id(){return"::Ice::RequestFailedException"}};Ice.ObjectNotExistException=class extends Ice.RequestFailedException{constructor(e,t,n,i=""){super(e,t,n,i)}static get _parent(){return Ice.RequestFailedException}static get _id(){return"::Ice::ObjectNotExistException"}};Ice.FacetNotExistException=class extends Ice.RequestFailedException{constructor(e,t,n,i=""){super(e,t,n,i)}static get _parent(){return Ice.RequestFailedException}static get _id(){return"::Ice::FacetNotExistException"}};Ice.OperationNotExistException=class extends Ice.RequestFailedException{constructor(e,t,n,i=""){super(e,t,n,i)}static get _parent(){return Ice.RequestFailedException}static get _id(){return"::Ice::OperationNotExistException"}};Ice.SyscallException=class extends Ice.LocalException{constructor(e=0,t=""){super(t);this.error=e}static get _parent(){return Ice.LocalException}static get _id(){return"::Ice::SyscallException"}};Ice.SocketException=class extends Ice.SyscallException{constructor(e,t=""){super(e,t)}static get _parent(){return Ice.SyscallException}static get _id(){return"::Ice::SocketException"}};Ice.CFNetworkException=class extends Ice.SocketException{constructor(e,t="",n=""){super(e,n);this.domain=t}static get _parent(){return Ice.SocketException}static get _id(){return"::Ice::CFNetworkException"}};Ice.FileException=class extends Ice.SyscallException{constructor(e,t="",n=""){super(e,n);this.path=t}static get _parent(){return Ice.SyscallException}static get _id(){return"::Ice::FileException"}};Ice.ConnectFailedException=class extends Ice.SocketException{constructor(e,t=""){super(e,t)}static get _parent(){return Ice.SocketException}static get _id(){return"::Ice::ConnectFailedException"}};Ice.ConnectionRefusedException=class extends Ice.ConnectFailedException{constructor(e,t=""){super(e,t)}static get _parent(){return Ice.ConnectFailedException}static get _id(){return"::Ice::ConnectionRefusedException"}};Ice.ConnectionLostException=class extends Ice.SocketException{constructor(e,t=""){super(e,t)}static get _parent(){return Ice.SocketException}static get _id(){return"::Ice::ConnectionLostException"}};Ice.DNSException=class extends Ice.LocalException{constructor(e=0,t="",n=""){super(n);this.error=e;this.host=t}static get _parent(){return Ice.LocalException}static get _id(){return"::Ice::DNSException"}};Ice.OperationInterruptedException=class extends Ice.LocalException{constructor(e=""){super(e)}static get _parent(){return Ice.LocalException}static get _id(){return"::Ice::OperationInterruptedException"}};Ice.TimeoutException=class extends Ice.LocalException{constructor(e=""){super(e)}static get _parent(){return Ice.LocalException}static get _id(){return"::Ice::TimeoutException"}};Ice.ConnectTimeoutException=class extends Ice.TimeoutException{constructor(e=""){super(e)}static get _parent(){return Ice.TimeoutException}static get _id(){return"::Ice::ConnectTimeoutException"}};Ice.CloseTimeoutException=class extends Ice.TimeoutException{constructor(e=""){super(e)}static get _parent(){return Ice.TimeoutException}static get _id(){return"::Ice::CloseTimeoutException"}};Ice.ConnectionTimeoutException=class extends Ice.TimeoutException{constructor(e=""){super(e)}static get _parent(){return Ice.TimeoutException}static get _id(){return"::Ice::ConnectionTimeoutException"}};Ice.InvocationTimeoutException=class extends Ice.TimeoutException{constructor(e=""){super(e)}static get _parent(){return Ice.TimeoutException}static get _id(){return"::Ice::InvocationTimeoutException"}};Ice.InvocationCanceledException=class extends Ice.LocalException{constructor(e=""){super(e)}static get _parent(){return Ice.LocalException}static get _id(){return"::Ice::InvocationCanceledException"}};Ice.ProtocolException=class extends Ice.LocalException{constructor(e="",t=""){super(t);this.reason=e}static get _parent(){return Ice.LocalException}static get _id(){return"::Ice::ProtocolException"}};Ice.BadMagicException=class extends Ice.ProtocolException{constructor(e,t=null,n=""){super(e,n);this.badMagic=t}static get _parent(){return Ice.ProtocolException}static get _id(){return"::Ice::BadMagicException"}};Ice.UnsupportedProtocolException=class extends Ice.ProtocolException{constructor(e,t=new Ice.ProtocolVersion,n=new Ice.ProtocolVersion,i=""){super(e,i);this.bad=t;this.supported=n}static get _parent(){return Ice.ProtocolException}static get _id(){return"::Ice::UnsupportedProtocolException"}};Ice.UnsupportedEncodingException=class extends Ice.ProtocolException{constructor(e,t=new Ice.EncodingVersion,n=new Ice.EncodingVersion,i=""){super(e,i);this.bad=t;this.supported=n}static get _parent(){return Ice.ProtocolException}static get _id(){return"::Ice::UnsupportedEncodingException"}};Ice.UnknownMessageException=class extends Ice.ProtocolException{constructor(e,t=""){super(e,t)}static get _parent(){return Ice.ProtocolException}static get _id(){return"::Ice::UnknownMessageException"}};Ice.ConnectionNotValidatedException=class extends Ice.ProtocolException{constructor(e,t=""){super(e,t)}static get _parent(){return Ice.ProtocolException}static get _id(){return"::Ice::ConnectionNotValidatedException"}};Ice.UnknownRequestIdException=class extends Ice.ProtocolException{constructor(e,t=""){super(e,t)}static get _parent(){return Ice.ProtocolException}static get _id(){return"::Ice::UnknownRequestIdException"}};Ice.UnknownReplyStatusException=class extends Ice.ProtocolException{constructor(e,t=""){super(e,t)}static get _parent(){return Ice.ProtocolException}static get _id(){return"::Ice::UnknownReplyStatusException"}};Ice.CloseConnectionException=class extends Ice.ProtocolException{constructor(e,t=""){super(e,t)}static get _parent(){return Ice.ProtocolException}static get _id(){return"::Ice::CloseConnectionException"}};Ice.ConnectionManuallyClosedException=class extends Ice.LocalException{constructor(e=false,t=""){super(t);this.graceful=e}static get _parent(){return Ice.LocalException}static get _id(){return"::Ice::ConnectionManuallyClosedException"}};Ice.IllegalMessageSizeException=class extends Ice.ProtocolException{constructor(e,t=""){super(e,t)}static get _parent(){return Ice.ProtocolException}static get _id(){return"::Ice::IllegalMessageSizeException"}};Ice.CompressionException=class extends Ice.ProtocolException{constructor(e,t=""){super(e,t)}static get _parent(){return Ice.ProtocolException}static get _id(){return"::Ice::CompressionException"}};Ice.DatagramLimitException=class extends Ice.ProtocolException{constructor(e,t=""){super(e,t)}static get _parent(){return Ice.ProtocolException}static get _id(){return"::Ice::DatagramLimitException"}};Ice.MarshalException=class extends Ice.ProtocolException{constructor(e,t=""){super(e,t)}static get _parent(){return Ice.ProtocolException}static get _id(){return"::Ice::MarshalException"}};Ice.ProxyUnmarshalException=class extends Ice.MarshalException{constructor(e,t=""){super(e,t)}static get _parent(){return Ice.MarshalException}static get _id(){return"::Ice::ProxyUnmarshalException"}};Ice.UnmarshalOutOfBoundsException=class extends Ice.MarshalException{constructor(e,t=""){super(e,t)}static get _parent(){return Ice.MarshalException}static get _id(){return"::Ice::UnmarshalOutOfBoundsException"}};Ice.NoValueFactoryException=class extends Ice.MarshalException{constructor(e,t="",n=""){super(e,n);this.type=t}static get _parent(){return Ice.MarshalException}static get _id(){return"::Ice::NoValueFactoryException"}};Ice.UnexpectedObjectException=class extends Ice.MarshalException{constructor(e,t="",n="",i=""){super(e,i);this.type=t;this.expectedType=n}static get _parent(){return Ice.MarshalException}static get _id(){return"::Ice::UnexpectedObjectException"}};Ice.MemoryLimitException=class extends Ice.MarshalException{constructor(e,t=""){super(e,t)}static get _parent(){return Ice.MarshalException}static get _id(){return"::Ice::MemoryLimitException"}};Ice.StringConversionException=class extends Ice.MarshalException{constructor(e,t=""){super(e,t)}static get _parent(){return Ice.MarshalException}static get _id(){return"::Ice::StringConversionException"}};Ice.EncapsulationException=class extends Ice.MarshalException{constructor(e,t=""){super(e,t)}static get _parent(){return Ice.MarshalException}static get _id(){return"::Ice::EncapsulationException"}};Ice.FeatureNotSupportedException=class extends Ice.LocalException{constructor(e="",t=""){super(t);this.unsupportedFeature=e}static get _parent(){return Ice.LocalException}static get _id(){return"::Ice::FeatureNotSupportedException"}};Ice.SecurityException=class extends Ice.LocalException{constructor(e="",t=""){super(t);this.reason=e}static get _parent(){return Ice.LocalException}static get _id(){return"::Ice::SecurityException"}};Ice.FixedProxyException=class extends Ice.LocalException{constructor(e=""){super(e)}static get _parent(){return Ice.LocalException}static get _id(){return"::Ice::FixedProxyException"}};Ice.ResponseSentException=class extends Ice.LocalException{constructor(e=""){super(e)}static get _parent(){return Ice.LocalException}static get _id(){return"::Ice::ResponseSentException"}}})();(function(){const e=Ice.StringUtil;const t=Ice.Identity;const n=Ice.IdentityParseException;Ice.stringToIdentity=function(i){const s=new t;let r=-1;let o=0;while((o=i.indexOf("/",o))!==-1){let e=0;while(o-e>0&&i.charAt(o-e-1)=="\\"){e++}if(e%2===0){if(r==-1){r=o}else{throw new n(`unescaped backslash in identity \`${i}'`)}}o++}if(r==-1){s.category="";try{s.name=e.unescapeString(i,0,i.length,"/")}catch(e){throw new n(`invalid identity name \`${i}': ${e.toString()}`)}}else{try{s.category=e.unescapeString(i,0,r,"/")}catch(e){throw new n(`invalid category in identity \`${i}': ${e.toString()}`)}if(r+1<i.length){try{s.name=e.unescapeString(i,r+1,i.length,"/")}catch(e){throw new n(`invalid name in identity \`${i}': ${e.toString()}`)}}else{s.name=""}}return s};Ice.identityToString=function(t,n=Ice.ToStringMode.Unicode){if(t.category===null||t.category.length===0){return e.escapeString(t.name,"/",n)}else{return e.escapeString(t.category,"/",n)+"/"+e.escapeString(t.name,"/",n)}};Ice.proxyIdentityCompare=function(e,t){if(e===t){return 0}else if(e===null&&t!==null){return-1}else if(e!==null&&t===null){return 1}else{const n=e.ice_getIdentity();const i=t.ice_getIdentity();const s=n.name.localeCompare(i.name);return s!==0?s:n.category.localeCompare(i.category)}};Ice.proxyIdentityAndFacetCompare=function(e,t){if(e===t){return 0}else if(e===null&&t!==null){return-1}else if(e!==null&&t===null){return 1}else{const n=e.ice_getIdentity();const i=t.ice_getIdentity();let s=n.name.localeCompare(i.name);if(s!==0){return s}s=n.category.localeCompare(i.category);if(s!==0){return s}const r=e.ice_getFacet();const o=t.ice_getFacet();if(r===null&&o===null){return 0}else if(r===null){return-1}else if(o===null){return 1}return r.localeCompare(o)}}})();(function(){class e{constructor(){this.typeId="";this.compactId=-1;this.bytes=[];this.instances=[];this.hasOptionalMembers=false;this.isLastSlice=false}}Ice.SliceInfo=e;class t{constructor(e){this.slices=e}}Ice.SlicedData=t;class n extends Ice.Value{constructor(e){super();this._unknownTypeId=e}ice_getSlicedData(){return this._slicedData}ice_id(){return this._unknownTypeId}_iceWrite(e){e.startValue(this._slicedData);e.endValue()}_iceRead(e){e.startValue();this._slicedData=e.endValue(true)}}Ice.UnknownSlicedValue=n})();(function(){class e{constructor(e){if(e!==undefined&&e.length>0){this._prefix=e+": "}else{this._prefix=""}this._dateformat={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:false}}print(e){this.write(e,false)}trace(e,t){const n=[];n.push("-- ");n.push(this.timestamp());n.push(" ");n.push(this._prefix);n.push(e);n.push(": ");n.push(t);this.write(n.join(""),true)}warning(e){const t=[];t.push("-! ");t.push(this.timestamp());t.push(" ");t.push(this._prefix);t.push("warning: ");t.push(e);this.write(t.join(""),true)}error(e){const t=[];t.push("!! ");t.push(this.timestamp());t.push(" ");t.push(this._prefix);t.push("error: ");t.push(e);this.write(t.join(""),true)}cloneWithPrefix(t){return new e(t)}write(e,t){if(t){e=e.replace(/\n/g,"\n   ")}console.log(e)}timestamp(){const e=new Date;return e.toLocaleString("en-US",this._dateformat)+"."+e.getMilliseconds()}}Ice.Logger=e})();(function(){const e=Ice.StringUtil;const t={};Ice.Encoding_1_0=new Ice.EncodingVersion(1,0);Ice.Encoding_1_1=new Ice.EncodingVersion(1,1);Ice.Protocol_1_0=new Ice.ProtocolVersion(1,0);t.headerSize=14;t.magic=new Uint8Array([73,99,101,80]);t.protocolMajor=1;t.protocolMinor=0;t.protocolEncodingMajor=1;t.protocolEncodingMinor=0;t.encodingMajor=1;t.encodingMinor=1;t.requestMsg=0;t.requestBatchMsg=1;t.replyMsg=2;t.validateConnectionMsg=3;t.closeConnectionMsg=4;t.replyOK=0;t.replyUserException=1;t.replyObjectNotExist=2;t.replyFacetNotExist=3;t.replyOperationNotExist=4;t.replyUnknownLocalException=5;t.replyUnknownUserException=6;t.replyUnknownException=7;t.requestHdr=new Uint8Array([t.magic[0],t.magic[1],t.magic[2],t.magic[3],t.protocolMajor,t.protocolMinor,t.protocolEncodingMajor,t.protocolEncodingMinor,t.requestMsg,0,0,0,0,0,0,0,0,0]);t.requestBatchHdr=new Uint8Array([t.magic[0],t.magic[1],t.magic[2],t.magic[3],t.protocolMajor,t.protocolMinor,t.protocolEncodingMajor,t.protocolEncodingMinor,t.requestBatchMsg,0,0,0,0,0,0,0,0,0]);t.replyHdr=new Uint8Array([t.magic[0],t.magic[1],t.magic[2],t.magic[3],t.protocolMajor,t.protocolMinor,t.protocolEncodingMajor,t.protocolEncodingMinor,t.replyMsg,0,0,0,0,0]);t.currentProtocol=new Ice.ProtocolVersion(t.protocolMajor,t.protocolMinor);t.currentProtocolEncoding=new Ice.EncodingVersion(t.protocolEncodingMajor,t.protocolEncodingMinor);t.currentEncoding=new Ice.EncodingVersion(t.encodingMajor,t.encodingMinor);t.checkSupportedProtocol=function(e){if(e.major!==t.currentProtocol.major||e.minor>t.currentProtocol.minor){throw new Ice.UnsupportedProtocolException("",e,t.currentProtocol)}};t.checkSupportedProtocolEncoding=function(e){if(e.major!==t.currentProtocolEncoding.major||e.minor>t.currentProtocolEncoding.minor){throw new Ice.UnsupportedEncodingException("",e,t.currentProtocolEncoding)}};t.checkSupportedEncoding=function(e){if(e.major!==t.currentEncoding.major||e.minor>t.currentEncoding.minor){throw new Ice.UnsupportedEncodingException("",e,t.currentEncoding)}};t.getCompatibleProtocol=function(e){if(e.major!==t.currentProtocol.major){return e}else if(e.minor<t.currentProtocol.minor){return e}else{return t.currentProtocol}};t.getCompatibleEncoding=function(e){if(e.major!==t.currentEncoding.major){return e}else if(e.minor<t.currentEncoding.minor){return e}else{return t.currentEncoding}};t.isSupported=function(e,t){return e.major===t.major&&e.minor<=t.minor};Ice.stringToProtocolVersion=function(e){return new Ice.ProtocolVersion(n(e),i(e))};Ice.stringToEncodingVersion=function(e){return new Ice.EncodingVersion(n(e),i(e))};Ice.protocolVersionToString=function(e){return s(e.major,e.minor)};Ice.encodingVersionToString=function(e){return s(e.major,e.minor)};t.OPTIONAL_END_MARKER=255;t.FLAG_HAS_TYPE_ID_STRING=1<<0;t.FLAG_HAS_TYPE_ID_INDEX=1<<1;t.FLAG_HAS_TYPE_ID_COMPACT=1<<1|1<<0;t.FLAG_HAS_OPTIONAL_MEMBERS=1<<2;t.FLAG_HAS_INDIRECTION_TABLE=1<<3;t.FLAG_HAS_SLICE_SIZE=1<<4;t.FLAG_IS_LAST_SLICE=1<<5;Ice.Protocol=t;function n(t){const n=t.indexOf(".");if(n===-1){throw new Ice.VersionParseException("malformed version value `"+t+"'")}try{const i=e.toInt(t.substring(0,n));if(i<1||i>255){throw new Ice.VersionParseException("range error in version `"+t+"'")}return i}catch(e){throw new Ice.VersionParseException("invalid version value `"+t+"'")}}function i(t){const n=t.indexOf(".");if(n===-1){throw new Ice.VersionParseException("malformed version value `"+t+"'")}try{const i=e.toInt(t.substring(n+1));if(i<0||i>255){throw new Ice.VersionParseException("range error in version `"+t+"'")}return i}catch(e){throw new Ice.VersionParseException("invalid version value `"+t+"'")}}function s(e,t){return e+"."+t}})();(function(){class e{static equals(e,t){if(e===t){return true}else if(e.size!=t.size){return false}else{for(const[n,i]of e){if(i===undefined){if(!t.has(n)){return false}else if(t.get(n)!==i){return false}}else if(t.get(n)!==i){return false}}}return true}}Ice.MapUtil=e})();(function(){const e=Ice.ReferenceMode;class t{constructor(t,n){this._reference=t;this._response=t.getMode()==e.ModeTwoway;this._connection=n}update(e,t){try{if(e===this){return t}else if(e.getConnection()===this._connection){return t}}catch(e){}return this}sendAsyncRequest(e){return e.invokeRemote(this._connection,this._response)}asyncRequestCanceled(e){return this._connection.asyncRequestCanceled(e)}getReference(){return this._reference}getConnection(){return this._connection}}Ice.ConnectionRequestHandler=t})();(function(){Ice.Property=class{constructor(e,t,n){this._pattern=e;this._deprecated=t;this._deprecatedBy=n}get pattern(){return this._pattern}get deprecated(){return this._deprecated}get deprecatedBy(){return this._deprecatedBy}}})();(function(){const e={};const t=Ice.Property;e.IceProps=[new t("/^Ice.ACM.Client/",true,null),new t("/^Ice.ACM.Server/",true,null),new t("/^Ice.ACM.Timeout/",false,null),new t("/^Ice.ACM.Heartbeat/",false,null),new t("/^Ice.ACM.Close/",false,null),new t("/^Ice.ACM/",false,null),new t("/^Ice.ACM.Client.Timeout/",false,null),new t("/^Ice.ACM.Client.Heartbeat/",false,null),new t("/^Ice.ACM.Client.Close/",false,null),new t("/^Ice.ACM.Client/",false,null),new t("/^Ice.ACM.Server.Timeout/",false,null),new t("/^Ice.ACM.Server.Heartbeat/",false,null),new t("/^Ice.ACM.Server.Close/",false,null),new t("/^Ice.ACM.Server/",false,null),new t("/^Ice.Admin.ACM.Timeout/",false,null),new t("/^Ice.Admin.ACM.Heartbeat/",false,null),new t("/^Ice.Admin.ACM.Close/",false,null),new t("/^Ice.Admin.ACM/",false,null),new t("/^Ice.Admin.AdapterId/",false,null),new t("/^Ice.Admin.Endpoints/",false,null),new t("/^Ice.Admin.Locator.EndpointSelection/",false,null),new t("/^Ice.Admin.Locator.ConnectionCached/",false,null),new t("/^Ice.Admin.Locator.PreferSecure/",false,null),new t("/^Ice.Admin.Locator.LocatorCacheTimeout/",false,null),new t("/^Ice.Admin.Locator.InvocationTimeout/",false,null),new t("/^Ice.Admin.Locator.Locator/",false,null),new t("/^Ice.Admin.Locator.Router/",false,null),new t("/^Ice.Admin.Locator.CollocationOptimized/",false,null),new t("/^Ice.Admin.Locator.Context../",false,null),new t("/^Ice.Admin.Locator/",false,null),new t("/^Ice.Admin.PublishedEndpoints/",false,null),new t("/^Ice.Admin.ReplicaGroupId/",false,null),new t("/^Ice.Admin.Router.EndpointSelection/",false,null),new t("/^Ice.Admin.Router.ConnectionCached/",false,null),new t("/^Ice.Admin.Router.PreferSecure/",false,null),new t("/^Ice.Admin.Router.LocatorCacheTimeout/",false,null),new t("/^Ice.Admin.Router.InvocationTimeout/",false,null),new t("/^Ice.Admin.Router.Locator/",false,null),new t("/^Ice.Admin.Router.Router/",false,null),new t("/^Ice.Admin.Router.CollocationOptimized/",false,null),new t("/^Ice.Admin.Router.Context../",false,null),new t("/^Ice.Admin.Router/",false,null),new t("/^Ice.Admin.ProxyOptions/",false,null),new t("/^Ice.Admin.ThreadPool.Size/",false,null),new t("/^Ice.Admin.ThreadPool.SizeMax/",false,null),new t("/^Ice.Admin.ThreadPool.SizeWarn/",false,null),new t("/^Ice.Admin.ThreadPool.StackSize/",false,null),new t("/^Ice.Admin.ThreadPool.Serialize/",false,null),new t("/^Ice.Admin.ThreadPool.ThreadIdleTime/",false,null),new t("/^Ice.Admin.ThreadPool.ThreadPriority/",false,null),new t("/^Ice.Admin.MessageSizeMax/",false,null),new t("/^Ice.Admin.DelayCreation/",false,null),new t("/^Ice.Admin.Enabled/",false,null),new t("/^Ice.Admin.Facets/",false,null),new t("/^Ice.Admin.InstanceName/",false,null),new t("/^Ice.Admin.Logger.KeepLogs/",false,null),new t("/^Ice.Admin.Logger.KeepTraces/",false,null),new t("/^Ice.Admin.Logger.Properties/",false,null),new t("/^Ice.Admin.ServerId/",false,null),new t("/^Ice.BackgroundLocatorCacheUpdates/",false,null),new t("/^Ice.BatchAutoFlush/",true,null),new t("/^Ice.BatchAutoFlushSize/",false,null),new t("/^Ice.ChangeUser/",false,null),new t("/^Ice.ClassGraphDepthMax/",false,null),new t("/^Ice.ClientAccessPolicyProtocol/",false,null),new t("/^Ice.Compression.Level/",false,null),new t("/^Ice.CollectObjects/",false,null),new t("/^Ice.Config/",false,null),new t("/^Ice.ConsoleListener/",false,null),new t("/^Ice.Default.CollocationOptimized/",false,null),new t("/^Ice.Default.EncodingVersion/",false,null),new t("/^Ice.Default.EndpointSelection/",false,null),new t("/^Ice.Default.Host/",false,null),new t("/^Ice.Default.Locator.EndpointSelection/",false,null),new t("/^Ice.Default.Locator.ConnectionCached/",false,null),new t("/^Ice.Default.Locator.PreferSecure/",false,null),new t("/^Ice.Default.Locator.LocatorCacheTimeout/",false,null),new t("/^Ice.Default.Locator.InvocationTimeout/",false,null),new t("/^Ice.Default.Locator.Locator/",false,null),new t("/^Ice.Default.Locator.Router/",false,null),new t("/^Ice.Default.Locator.CollocationOptimized/",false,null),new t("/^Ice.Default.Locator.Context../",false,null),new t("/^Ice.Default.Locator/",false,null),new t("/^Ice.Default.LocatorCacheTimeout/",false,null),new t("/^Ice.Default.InvocationTimeout/",false,null),new t("/^Ice.Default.Package/",false,null),new t("/^Ice.Default.PreferSecure/",false,null),new t("/^Ice.Default.Protocol/",false,null),new t("/^Ice.Default.Router.EndpointSelection/",false,null),new t("/^Ice.Default.Router.ConnectionCached/",false,null),new t("/^Ice.Default.Router.PreferSecure/",false,null),new t("/^Ice.Default.Router.LocatorCacheTimeout/",false,null),new t("/^Ice.Default.Router.InvocationTimeout/",false,null),new t("/^Ice.Default.Router.Locator/",false,null),new t("/^Ice.Default.Router.Router/",false,null),new t("/^Ice.Default.Router.CollocationOptimized/",false,null),new t("/^Ice.Default.Router.Context../",false,null),new t("/^Ice.Default.Router/",false,null),new t("/^Ice.Default.SlicedFormat/",false,null),new t("/^Ice.Default.SourceAddress/",false,null),new t("/^Ice.Default.Timeout/",false,null),new t("/^Ice.EventLog.Source/",false,null),new t("/^Ice.FactoryAssemblies/",false,null),new t("/^Ice.HTTPProxyHost/",false,null),new t("/^Ice.HTTPProxyPort/",false,null),new t("/^Ice.ImplicitContext/",false,null),new t("/^Ice.InitPlugins/",false,null),new t("/^Ice.IPv4/",false,null),new t("/^Ice.IPv6/",false,null),new t("/^Ice.LogFile/",false,null),new t("/^Ice.LogFile.SizeMax/",false,null),new t("/^Ice.LogStdErr.Convert/",false,null),new t("/^Ice.MessageSizeMax/",false,null),new t("/^Ice.Nohup/",false,null),new t("/^Ice.NullHandleAbort/",false,null),new t("/^Ice.Override.CloseTimeout/",false,null),new t("/^Ice.Override.Compress/",false,null),new t("/^Ice.Override.ConnectTimeout/",false,null),new t("/^Ice.Override.Timeout/",false,null),new t("/^Ice.Override.Secure/",false,null),new t("/^Ice.Package../",false,null),new t("/^Ice.Plugin../",false,null),new t("/^Ice.PluginLoadOrder/",false,null),new t("/^Ice.PreferIPv6Address/",false,null),new t("/^Ice.PreloadAssemblies/",false,null),new t("/^Ice.PrintAdapterReady/",false,null),new t("/^Ice.PrintProcessId/",false,null),new t("/^Ice.PrintStackTraces/",false,null),new t("/^Ice.ProgramName/",false,null),new t("/^Ice.RetryIntervals/",false,null),new t("/^Ice.ServerIdleTime/",false,null),new t("/^Ice.SOCKSProxyHost/",false,null),new t("/^Ice.SOCKSProxyPort/",false,null),new t("/^Ice.StdErr/",false,null),new t("/^Ice.StdOut/",false,null),new t("/^Ice.SyslogFacility/",false,null),new t("/^Ice.ThreadPool.Client.Size/",false,null),new t("/^Ice.ThreadPool.Client.SizeMax/",false,null),new t("/^Ice.ThreadPool.Client.SizeWarn/",false,null),new t("/^Ice.ThreadPool.Client.StackSize/",false,null),new t("/^Ice.ThreadPool.Client.Serialize/",false,null),new t("/^Ice.ThreadPool.Client.ThreadIdleTime/",false,null),new t("/^Ice.ThreadPool.Client.ThreadPriority/",false,null),new t("/^Ice.ThreadPool.Server.Size/",false,null),new t("/^Ice.ThreadPool.Server.SizeMax/",false,null),new t("/^Ice.ThreadPool.Server.SizeWarn/",false,null),new t("/^Ice.ThreadPool.Server.StackSize/",false,null),new t("/^Ice.ThreadPool.Server.Serialize/",false,null),new t("/^Ice.ThreadPool.Server.ThreadIdleTime/",false,null),new t("/^Ice.ThreadPool.Server.ThreadPriority/",false,null),new t("/^Ice.ThreadPriority/",false,null),new t("/^Ice.ToStringMode/",false,null),new t("/^Ice.Trace.Admin.Properties/",false,null),new t("/^Ice.Trace.Admin.Logger/",false,null),new t("/^Ice.Trace.Locator/",false,null),new t("/^Ice.Trace.Network/",false,null),new t("/^Ice.Trace.Protocol/",false,null),new t("/^Ice.Trace.Retry/",false,null),new t("/^Ice.Trace.Slicing/",false,null),new t("/^Ice.Trace.ThreadPool/",false,null),new t("/^Ice.UDP.RcvSize/",false,null),new t("/^Ice.UDP.SndSize/",false,null),new t("/^Ice.TCP.Backlog/",false,null),new t("/^Ice.TCP.RcvSize/",false,null),new t("/^Ice.TCP.SndSize/",false,null),new t("/^Ice.UseApplicationClassLoader/",false,null),new t("/^Ice.UseSyslog/",false,null),new t("/^Ice.Warn.AMICallback/",false,null),new t("/^Ice.Warn.Connections/",false,null),new t("/^Ice.Warn.Datagrams/",false,null),new t("/^Ice.Warn.Dispatch/",false,null),new t("/^Ice.Warn.Endpoints/",false,null),new t("/^Ice.Warn.UnknownProperties/",false,null),new t("/^Ice.Warn.UnusedProperties/",false,null),new t("/^Ice.CacheMessageBuffers/",false,null),new t("/^Ice.ThreadInterruptSafe/",false,null),new t("/^Ice.Voip/",false,null)];e.validProps=[e.IceProps];e.clPropNames=["Ice"];Ice.PropertyNames=e})();(function(){const e=Ice.UnexpectedObjectException;const t=Ice.MemoryLimitException;Ice.ExUtil={throwUOE:function(t,n){const i=n.ice_id();throw new e("expected element of type `"+t+"' but received '"+i,i,t)},throwMemoryLimitException:function(e,n){throw new t("requested "+e+" bytes, maximum allowed is "+n+" bytes (see Ice.MessageSizeMax)")}}})();(function(){})();(function(){const e=Ice.CommunicatorDestroyedException;class t{constructor(e){this._logger=e;this._destroyed=false;this._tokenId=0;this._tokens=new Map}destroy(){this._tokens.forEach((e,t)=>this.cancel(t));this._destroyed=true;this._tokens.clear()}schedule(n,i){if(this._destroyed){throw new e}const s=this._tokenId++;const r=t.setTimeout(()=>this.handleTimeout(s),i);this._tokens.set(s,{callback:n,id:r,isInterval:false});return s}scheduleRepeated(n,i){if(this._destroyed){throw new e}const s=this._tokenId++;const r=t.setInterval(()=>this.handleInterval(s),i);this._tokens.set(s,{callback:n,id:r,isInterval:true});return s}cancel(e){if(this._destroyed){return false}const n=this._tokens.get(e);if(n===undefined){return false}this._tokens.delete(e);if(n.isInterval){t.clearInterval(n.id)}else{t.clearTimeout(n.id)}return true}handleTimeout(e){if(this._destroyed){return}const t=this._tokens.get(e);if(t!==undefined){this._tokens.delete(e);try{t.callback()}catch(e){this._logger.warning("uncaught exception while executing timer:\n"+e)}}}handleInterval(e){if(this._destroyed){return}const t=this._tokens.get(e);if(t!==undefined){try{t.callback()}catch(e){this._logger.warning("uncaught exception while executing timer:\n"+e)}}}}t.setTimeout=Ice.Timer.setTimeout;t.clearTimeout=Ice.Timer.clearTimeout;t.setInterval=Ice.Timer.setInterval;t.clearInterval=Ice.Timer.clearInterval;t.setImmediate=Ice.Timer.setImmediate;Ice.Timer=t})();(function(){Ice.EndpointSelectionType=t.defineEnum([["Random",0],["Ordered",1]])})();(function(){class e extends Error{constructor(t){super();if(t instanceof Ice.LocalException){this._ex=t}else{Ice.Debug.assert(t instanceof e);this._ex=t._ex}}get inner(){return this._ex}}Ice.RetryException=e})();(function(){t.defineDictionary(Ice,"Context","ContextHelper","Ice.StringHelper","Ice.StringHelper",false,undefined,undefined);Ice.OperationMode=t.defineEnum([["Normal",0],["Nonmutating",1],["Idempotent",2]]);Ice.Current=class{constructor(e=null,t=null,n=new Ice.Identity,i="",s="",r=Ice.OperationMode.Normal,o=null,c=0,a=new Ice.EncodingVersion){this.adapter=e;this.con=t;this.id=n;this.facet=i;this.operation=s;this.mode=r;this.ctx=o;this.requestId=c;this.encoding=a}};t.defineStruct(Ice.Current,false,true)})();(function(){const e=Ice.Logger;let t=null;Ice.getProcessLogger=function(){if(t===null){t=new e("","")}return t};Ice.setProcessLogger=function(e){t=e}})();(function(){const e=Ice.Debug;const t=Ice.Protocol;const n=Ice.StringUtil;const i=Ice.OperationMode;const s=Ice.Identity;const r=new Map;function o(e,t){let i=Ice.ToStringMode.Unicode;if(t.instance!==null){i=t.instance.toStringMode()}const r=new s;r._read(t);e.push("\nidentity = "+Ice.identityToString(r,i));const o=Ice.StringSeqHelper.read(t);e.push("\nfacet = ");if(o.length>0){e.push(n.escapeString(o[0],"",i))}const c=t.readString();e.push("\noperation = "+c)}function c(e,t){const n=t.readInt();e.push("\nrequest id = "+n);if(n===0){e.push(" (oneway)")}h(e,t)}function a(e,t){const n=t.readInt();e.push("\nnumber of requests = "+n);for(let i=0;i<n;++i){e.push("\nrequest #"+i+":");h(e,t)}}function l(n,i){const s=i.readInt();n.push("\nrequest id = "+s);const r=i.readByte();n.push("\nreply status = "+r+" ");switch(r){case t.replyOK:{n.push("(ok)");break}case t.replyUserException:{n.push("(user exception)");break}case t.replyObjectNotExist:case t.replyFacetNotExist:case t.replyOperationNotExist:{switch(r){case t.replyObjectNotExist:{n.push("(object not exist)");break}case t.replyFacetNotExist:{n.push("(facet not exist)");break}case t.replyOperationNotExist:{n.push("(operation not exist)");break}default:{e.assert(false);break}}o(n,i);break}case t.replyUnknownException:case t.replyUnknownLocalException:case t.replyUnknownUserException:{switch(r){case t.replyUnknownException:{n.push("(unknown exception)");break}case t.replyUnknownLocalException:{n.push("(unknown local exception)");break}case t.replyUnknownUserException:{n.push("(unknown user exception)");break}default:{e.assert(false);break}}const s=i.readString();n.push("\nunknown = "+s);break}default:{n.push("(unknown)");break}}if(r===t.replyOK||r===t.replyUserException){const e=i.skipEncapsulation();if(!e.equals(Ice.Encoding_1_0)){n.push("\nencoding = ");n.push(Ice.encodingVersionToString(e))}}}function h(e,t){o(e,t);const n=t.readByte();e.push("\nmode = "+n+" ");switch(i.valueOf(n)){case i.Normal:{e.push("(normal)");break}case i.Nonmutating:{e.push("(nonmutating)");break}case i.Idempotent:{e.push("(idempotent)");break}default:{e.push("(unknown)");break}}let s=t.readSize();e.push("\ncontext = ");while(s-- >0){const n=t.readString();const i=t.readString();e.push(n+"/"+i);if(s>0){e.push(", ")}}const r=t.skipEncapsulation();if(!r.equals(Ice.Encoding_1_0)){e.push("\nencoding = ");e.push(Ice.encodingVersionToString(r))}}function u(e,t){t.readByte();t.readByte();t.readByte();t.readByte();t.readByte();t.readByte();t.readByte();t.readByte();const n=t.readByte();e.push("\nmessage type = "+n+" ("+p(n)+")");const i=t.readByte();e.push("\ncompression status = "+i+" ");switch(i){case 0:{e.push("(not compressed; do not compress response, if any)");break}case 1:{e.push("(not compressed; compress response, if any)");break}case 2:{e.push("(compressed; compress response, if any)");break}default:{e.push("(unknown)");break}}const s=t.readInt();e.push("\nmessage size = "+s);return n}function d(e,n){const i=u(e,n);switch(i){case t.closeConnectionMsg:case t.validateConnectionMsg:{break}case t.requestMsg:{c(e,n);break}case t.requestBatchMsg:{a(e,n);break}case t.replyMsg:{l(e,n);break}default:{break}}return i}function p(e){switch(e){case t.requestMsg:return"request";case t.requestBatchMsg:return"batch request";case t.replyMsg:return"reply";case t.closeConnectionMsg:return"close connection";case t.validateConnectionMsg:return"validate connection";default:return"unknown"}}class _{static traceSlicing(e,t,n,i){if(!r.has(t)){i.trace(n,`unknown ${e} type \`${t}'`);r.set(t,1)}}static traceSend(e,t,n){if(n.protocol>=1){const i=e.pos;const s=new Ice.InputStream(e.instance,e.getEncoding(),e.buffer);s.pos=0;const r=[];const o=d(r,s);t.trace(n.protocolCat,"sending "+p(o)+" "+r.join(""));e.pos=i}}static traceRecv(e,t,n){if(n.protocol>=1){const i=e.pos;e.pos=0;const s=[];const r=d(s,e);t.trace(n.protocolCat,"received "+p(r)+" "+s.join(""));e.pos=i}}static traceOut(e,t,n,i){if(i.protocol>=1){const s=t.pos;const r=new Ice.InputStream(t.instance,t.getEncoding(),t.buffer);r.pos=0;const o=[];o.push(e);d(o,r);n.trace(i.protocolCat,o.join(""));t.pos=s}}static traceIn(e,t,n,i){if(i.protocol>=1){const s=t.pos;t.pos=0;const r=[];r.push(e);d(r,t);n.trace(i.protocolCat,r.join(""));t.pos=s}}static dumpStream(e){const t=e.pos;e.pos=0;const n=e.readBlob(e.size());_.dumpOctets(n);e.pos=t}static dumpOctets(e){const t=8;const n=[];for(let i=0;i<e.length;i+=t){for(let s=i;s-i<t;s++){if(s<e.length){let t=e[s];if(t<0){t+=256}let i;if(t<10){i="  "+t}else if(t<100){i=" "+t}else{i=""+t}n.push(i+" ")}else{n.push("    ")}}n.push('"');for(let s=i;s<e.length&&s-i<t;s++){if(e[s]>=32&&e[s]<127){n.push(String.fromCharCode(e[s]))}else{n.push(".")}}n.push('"\n')}console.log(n.join(""))}}Ice.TraceUtil=_})();(function(){const e=Ice.StringUtil;const t=Ice.PropertyNames;const n=Ice.Debug;const i=Ice.getProcessLogger;const s=Ice.InitializationException;const r=0;const o=1;class c{constructor(e,t){this._properties=new Map;if(t!==undefined&&t!==null){for(const[e,n]of t._properties){this._properties.set(e,{value:n.value,used:false})}}if(e!==undefined&&e!==null){const t=this.parseIceCommandLineOptions(e);e.length=0;for(let n=0;n<t.length;++n){e.push(t[n])}}}getProperty(e){return this.getPropertyWithDefault(e,"")}getPropertyWithDefault(e,t){const n=this._properties.get(e);if(n!==undefined){n.used=true;return n.value}else{return t}}getPropertyAsInt(e){return this.getPropertyAsIntWithDefault(e,0)}getPropertyAsIntWithDefault(e,t){const n=this._properties.get(e);if(n!==undefined){n.used=true;return parseInt(n.value)}else{return t}}getPropertyAsList(e){return this.getPropertyAsListWithDefault(e,0)}getPropertyAsListWithDefault(t,n){if(n===undefined||n===null){n=[]}const s=this._properties.get(t);if(s!==undefined){s.used=true;let r=e.splitString(s.value,", \t\r\n");if(r===null){i().warning("mismatched quotes in property "+t+"'s value, returning default value");return n}if(r.length===0){r=n}return r}else{return n}}getPropertiesForPrefix(e=""){const t=new Map;this._properties.forEach((n,i)=>{if(i.indexOf(e)===0){n.used=true;t.set(i,n.value)}});return t}setProperty(e="",r=""){if(e!==null){e=e.trim()}const o=i();if(e===null||e.length===0){throw new s("Attempt to set property with empty key")}let c=e.indexOf(".");if(c!==-1){const i=e.substr(0,c);for(let s=0;s<t.validProps.length;++s){let r=t.validProps[s][0].pattern;c=r.indexOf(".");n.assert(c!=-1);if(r.substring(0,c-1)!=i){continue}let a=false;let l=false;let h;for(let n=0;n<t.validProps[s][n].length&&!a;++n){r=t.validProps[s][n].pattern();let i=new RegExp(r);a=i.test(e);if(a&&t.validProps[s][n].deprecated){o.warning("deprecated property: "+e);if(t.validProps[s][n].deprecatedBy!==null){e=t.validProps[s][n].deprecatedBy}}if(a){break}else{i=new RegExp(r.toUpperCase());a=i.test(e.toUpperCase());if(a){l=true;h=r.substr(2);h=h.substr(0,h.length-1);h=h.replace(/\\/g,"");break}}}if(!a){o.warning("unknown property: "+e)}else if(l){o.warning("unknown property: `"+e+"'; did you mean `"+h+"'")}}}if(r!==null&&r.length>0){const t=this._properties.get(e);if(t!==undefined){t.value=r}else{this._properties.set(e,{value:r,used:false})}}else{this._properties.delete(e)}}getCommandLineOptions(){const e=[];this._properties.forEach((t,n)=>{e.push("--"+n+"="+t.value)});return e}parseCommandLineOptions(e,t){if(e.length>0&&e.charAt(e.length-1)!="."){e+="."}e="--"+e;const n=[];t.forEach(t=>{if(t.indexOf(e)===0){if(t.indexOf("=")===-1){t+="=1"}this.parseLine(t.substring(2))}else{n.push(t)}});return n}parseIceCommandLineOptions(e){let n=e.slice();for(let e=0;e<t.clPropNames.length;++e){n=this.parseCommandLineOptions(t.clPropNames[e],n)}return n}parse(e){e.match(/[^\r\n]+/g).forEach(e=>this.parseLine(e))}parseLine(e){let t="";let n="";let s=r;let c="";let a="";let l=false;for(let i=0;i<e.length;++i){let h=e.charAt(i);switch(s){case r:{switch(h){case"\\":if(i<e.length-1){h=e.charAt(++i);switch(h){case"\\":case"#":case"=":t+=c;c="";t+=h;break;case" ":if(t.length!==0){c+=h}break;default:t+=c;c="";t+="\\";t+=h;break}}else{t+=c;t+=h}break;case" ":case"\t":case"\r":case"\n":if(t.length!==0){c+=h}break;case"=":c="";s=o;break;case"#":l=true;break;default:t+=c;c="";t+=h;break}break}case o:{switch(h){case"\\":if(i<e.length-1){h=e.charAt(++i);switch(h){case"\\":case"#":case"=":n+=n.length===0?a:c;c="";a="";n+=h;break;case" ":c+=h;a+=h;break;default:n+=n.length===0?a:c;c="";a="";n+="\\";n+=h;break}}else{n+=n.length===0?a:c;n+=h}break;case" ":case"\t":case"\r":case"\n":if(n.length!==0){c+=h}break;case"#":l=true;break;default:n+=n.length===0?a:c;c="";a="";n+=h;break}break}}if(l){break}}n+=a;if(s===r&&t.length!==0||s==o&&t.length===0){i().warning('invalid config file entry: "'+e+'"');return}else if(t.length===0){return}this.setProperty(t,n)}clone(){return new c(null,this)}getUnusedProperties(){const e=[];this._properties.forEach((t,n)=>{if(!t.used){e.push(n)}});return e}static createProperties(e,t){return new c(e,t)}}Ice.Properties=c})();(function(){const e=Ice.Debug;const t=Ice.StringUtil;const n=Ice.HashMap;class i{constructor(e,t){this._instance=e;this._adapterName=t;this._servantMapMap=new n(n.compareEquals);this._defaultServantMap=new Map;this._locatorMap=new Map}addServant(n,i,s){e.assert(this._instance!==null);if(s===null){s=""}let r=this._servantMapMap.get(i);if(r===undefined){r=new Map;this._servantMapMap.set(i,r)}else{if(r.has(s)){const e=new Ice.AlreadyRegisteredException;e.id=Ice.identityToString(i,this._instance.toStringMode());e.kindOfObject="servant";if(s.length>0){e.id+=" -f "+t.escapeString(s,"",this._instance.toStringMode())}throw e}}r.set(s,n)}addDefaultServant(t,n){e.assert(this._instance!==null);if(this._defaultServantMap.has(n)){const e=new Ice.AlreadyRegisteredException;e.kindOfObject="default servant";e.id=n;throw e}this._defaultServantMap.set(n,t)}removeServant(n,i){e.assert(this._instance!==null);if(i===null){i=""}const s=this._servantMapMap.get(n);if(s===undefined||!s.has(i)){const e=new Ice.NotRegisteredException;e.id=Ice.identityToString(n,this._instance.toStringMode());e.kindOfObject="servant";if(i.length>0){e.id+=" -f "+t.escapeString(i,"",this._instance.toStringMode())}throw e}const r=s.get(i);s.delete(i);if(s.size===0){this._servantMapMap.delete(n)}return r}removeDefaultServant(t){e.assert(this._instance!==null);const n=this._defaultServantMap.get(t);if(n===undefined){const e=new Ice.NotRegisteredException;e.kindOfObject="default servant";e.id=t;throw e}this._defaultServantMap.delete(t);return n}removeAllFacets(t){e.assert(this._instance!==null);const n=this._servantMapMap.get(t);if(n===undefined){const e=new Ice.NotRegisteredException;e.id=Ice.identityToString(t,this._instance.toStringMode());e.kindOfObject="servant";throw e}this._servantMapMap.delete(t);return n}findServant(e,t){if(t===null){t=""}const n=this._servantMapMap.get(e);let i=null;if(n===undefined){i=this._defaultServantMap.get(e.category);if(i===undefined){i=this._defaultServantMap.get("")}}else{i=n.get(t)}return i===undefined?null:i}findDefaultServant(t){e.assert(this._instance!==null);const n=this._defaultServantMap.get(t);return n===undefined?null:n}findAllFacets(t){e.assert(this._instance!==null);const n=this._servantMapMap.get(t);if(n!==undefined){return new Map(n)}return new Map}hasServant(t){const n=this._servantMapMap.get(t);if(n===undefined){return false}else{e.assert(n.size>0);return true}}addServantLocator(n,i){e.assert(this._instance!==null);if(this._locatorMap.has(i)){const e=new Ice.AlreadyRegisteredException;e.id=t.escapeString(i,"",this._instance.toStringMode());e.kindOfObject="servant locator";throw e}this._locatorMap.set(i,n)}removeServantLocator(n){e.assert(this._instance!==null);const i=this._locatorMap.get(n);if(i===undefined){const e=new Ice.NotRegisteredException;e.id=t.escapeString(n,"",this._instance.toStringMode());e.kindOfObject="servant locator";throw e}this._locatorMap.delete(n);return i}findServantLocator(e){const t=this._locatorMap.get(e);return t===undefined?null:t}destroy(){e.assert(this._instance!==null);const t=this._instance.initializationData().logger;this._servantMapMap.clear();this._defaultServantMap.clear();const n=new Map(this._locatorMap);this._locatorMap.clear();this._instance=null;for(const[e,i]of n){try{i.deactivate(e)}catch(n){t.error("exception during locator deactivation:\nobject adapter: `"+this._adapterName+"'\nlocator category: `"+e+"'\n"+n.toString())}}}}Ice.ServantManager=i})();(function(){const e=Ice.Timer;class t extends Promise{constructor(e){let t,n;super((i,s)=>{t=i;n=s;if(e!==undefined){e(i,s)}});this.resolve=t;this.reject=n}finally(e){return this.then(n=>t.resolve(e()).then(()=>n),n=>t.resolve(e()).then(()=>{throw n}))}delay(n){return this.then(i=>new t((t,s)=>e.setTimeout(()=>t(i),n)),i=>new t((t,s)=>e.setTimeout(()=>s(i),n)))}static get[Symbol.species](){return t}static delay(n,i){return new t(t=>e.setTimeout(()=>t(i),n))}static try(e){return t.resolve().then(e)}}Ice.Promise=t})();(function(){Ice.SocketOperation={None:0,Read:1,Write:2,Connect:2}})();(function(){class e{constructor(e,t,n,i){this._instance=e;this._traceLevel=e.traceLevels().network;this._traceCategory=e.traceLevels().networkCat;this._logger=e.initializationData().logger;this._properties=e.initializationData().properties;this._type=t;this._protocol=n;this._secure=i}traceLevel(){return this._traceLevel}traceCategory(){return this._traceCategory}logger(){return this._logger}protocol(){return this._protocol}type(){return this._type}secure(){return this._secure}properties(){return this._properties}defaultHost(){return this._instance.defaultsAndOverrides().defaultHost}defaultSourceAddress(){return this._instance.defaultsAndOverrides().defaultSourceAddress}defaultEncoding(){return this._instance.defaultsAndOverrides().defaultEncoding}defaultTimeout(){return this._instance.defaultsAndOverrides().defaultTimeout}messageSizeMax(){return this._instance.messageSizeMax()}}Ice.ProtocolInstance=e})();(function(){const e=Ice._ModuleRegistry;const t=Ice.Debug;const n=Ice.ExUtil;const i=Ice.FormatType;const s=Ice.OptionalFormat;const r=Ice.Protocol;const o=Ice.TraceUtil;const c=Ice.ArrayUtil;const a=Ice.SlicedData;const l={NoSlice:0,ValueSlice:1,ExceptionSlice:2};Number.isNaN=Number.isNaN||function(e){return typeof e==="number"&&isNaN(e)};class h{constructor(e,t){this.index=e;this.cb=t}}class u{constructor(e,t,n,i){this._stream=e;this._encaps=t;this._sliceValues=n;this._valueFactoryManager=i;this._patchMap=null;this._unmarshaledMap=new Map;this._typeIdMap=null;this._typeIdIndex=0;this._valueList=null}readOptional(){return false}readPendingValues(){}readTypeId(e){if(this._typeIdMap===null){this._typeIdMap=new Map}let t;if(e){t=this._typeIdMap.get(this._stream.readSize());if(t===undefined){throw new Ice.UnmarshalOutOfBoundsException}}else{t=this._stream.readString();this._typeIdMap.set(++this._typeIdIndex,t)}return t}newInstance(e){let t=this._valueFactoryManager.find(e);let n=null;if(t!==undefined){n=t(e)}if(n===null||n===undefined){t=this._valueFactoryManager.find("");if(t!==undefined){n=t(e)}}if(n===null||n===undefined){n=this._stream.createInstance(e)}return n}addPatchEntry(e,n){t.assert(e>0);const i=this._unmarshaledMap.get(e);if(i!==undefined&&i!==null){n.call(null,i);return}if(this._patchMap===null){this._patchMap=new Map}let s=this._patchMap.get(e);if(s===undefined){s=[];this._patchMap.set(e,s)}s.push(n)}unmarshal(e,n){this._unmarshaledMap.set(e,n);n._iceRead(this._stream);if(this._patchMap!==null){const i=this._patchMap.get(e);if(i!==undefined){t.assert(i.length>0);for(let e=0;e<i.length;++e){i[e](n)}this._patchMap.delete(e)}}if((this._patchMap===null||this._patchMap.size===0)&&this._valueList===null){try{n.ice_postUnmarshal()}catch(e){this._stream.instance.initializationData().logger.warning("exception raised by ice_postUnmarshal:\n"+e.toString())}}else{if(this._valueList===null){this._valueList=[]}this._valueList.push(n);if(this._patchMap===null||this._patchMap.size===0){for(let e=0;e<this._valueList.length;e++){try{this._valueList[e].ice_postUnmarshal()}catch(e){this._stream.instance.initializationData().logger.warning("exception raised by ice_postUnmarshal:\n"+e.toString())}}this._valueList=[]}}}}class d extends u{constructor(e,t,n,i){super(e,t,n,i);this._sliceType=l.NoSlice}readValue(e){t.assert(e!==null);let n=this._stream.readInt();if(n>0){throw new Ice.MarshalException("invalid object id")}n=-n;if(n===0){e.call(null,null)}else{this.addPatchEntry(n,e)}}throwException(){t.assert(this._sliceType===l.NoSlice);const e=this._stream.readBool();this._sliceType=l.ExceptionSlice;this._skipFirstSlice=false;this.startSlice();const n=this._typeId;while(true){const t=this._stream.createUserException(this._typeId);if(t!==null){t._read(this._stream);if(e){this.readPendingValues()}throw t}this.skipSlice();try{this.startSlice()}catch(e){if(e instanceof Ice.UnmarshalOutOfBoundsException){e.reason="unknown exception type `"+n+"'"}throw e}}}startInstance(e){t.assert(this._sliceType===e);this._skipFirstSlice=true}endInstance(){if(this._sliceType===l.ValueSlice){this.startSlice();const e=this._stream.readSize();if(e!==0){throw new Ice.MarshalException("invalid Object slice")}this.endSlice()}this._sliceType=l.NoSlice;return null}startSlice(){if(this._skipFirstSlice){this._skipFirstSlice=false;return this._typeId}if(this._sliceType===l.ValueSlice){const e=this._stream.readBool();this._typeId=this.readTypeId(e)}else{this._typeId=this._stream.readString()}this._sliceSize=this._stream.readInt();if(this._sliceSize<4){throw new Ice.UnmarshalOutOfBoundsException}return this._typeId}endSlice(){}skipSlice(){this._stream.traceSkipSlice(this._typeId,this._sliceType);t.assert(this._sliceSize>=4);this._stream.skip(this._sliceSize-4)}readPendingValues(){let e;do{e=this._stream.readSize();for(let t=e;t>0;--t){this.readInstance()}}while(e>0);if(this._patchMap!==null&&this._patchMap.size!==0){throw new Ice.MarshalException("index for class received, but no instance")}}readInstance(){const e=this._stream.readInt();let t=null;if(e<=0){throw new Ice.MarshalException("invalid object id")}this._sliceType=l.ValueSlice;this._skipFirstSlice=false;this.startSlice();const n=this._typeId;while(true){if(this._typeId==Ice.Value.ice_staticId()){throw new Ice.NoValueFactoryException("",n)}t=this.newInstance(this._typeId);if(t){break}if(!this._sliceValues){throw new Ice.NoValueFactoryException("no value factory found and slicing is disabled",this._typeId)}this.skipSlice();this.startSlice()}this.unmarshal(e,t)}}class p extends u{constructor(e,t,n,i,s){super(e,t,n,i);this._compactIdResolver=s;this._current=null;this._valueIdIndex=1}readValue(e){const t=this._stream.readSize();if(t<0){throw new Ice.MarshalException("invalid object id")}else if(t===0){if(e!==null){e.call(null,null)}}else if(this._current!==null&&(this._current.sliceFlags&r.FLAG_HAS_INDIRECTION_TABLE)!==0){if(e!==null){if(this._current.indirectPatchList===null){this._current.indirectPatchList=[]}this._current.indirectPatchList.push(new h(t-1,e))}}else{this.readInstance(t,e)}}throwException(){t.assert(this._current===null);this.push(l.ExceptionSlice);this.startSlice();const e=this._current.typeId;while(true){const t=this._stream.createUserException(this._current.typeId);if(t!==null){t._read(this._stream);throw t}this.skipSlice();if((this._current.sliceFlags&r.FLAG_IS_LAST_SLICE)!==0){if(e.indexOf("::")===0){throw new Ice.UnknownUserException(e.substr(2))}throw new Ice.UnknownUserException(e)}this.startSlice()}}startInstance(e){t.assert(e!==undefined);t.assert(this._current.sliceType!==null&&this._current.sliceType===e);this._current.skipFirstSlice=true}endInstance(e){let t=null;if(e){t=this.readSlicedData()}if(this._current.slices!==null){this._current.slices.length=0;this._current.indirectionTables.length=0}this._current=this._current.previous;return t}startSlice(){if(this._current.skipFirstSlice){this._current.skipFirstSlice=false;return this._current.typeId}this._current.sliceFlags=this._stream.readByte();if(this._current.sliceType===l.ValueSlice){if((this._current.sliceFlags&r.FLAG_HAS_TYPE_ID_COMPACT)===r.FLAG_HAS_TYPE_ID_COMPACT){this._current.typeId="";this._current.compactId=this._stream.readSize()}else if((this._current.sliceFlags&(r.FLAG_HAS_TYPE_ID_INDEX|r.FLAG_HAS_TYPE_ID_STRING))!==0){this._current.typeId=this.readTypeId((this._current.sliceFlags&r.FLAG_HAS_TYPE_ID_INDEX)!==0);this._current.compactId=-1}else{this._current.typeId="";this._current.compactId=-1}}else{this._current.typeId=this._stream.readString();this._current.compactId=-1}if((this._current.sliceFlags&r.FLAG_HAS_SLICE_SIZE)!==0){this._current.sliceSize=this._stream.readInt();if(this._current.sliceSize<4){throw new Ice.UnmarshalOutOfBoundsException}}else{this._current.sliceSize=0}return this._current.typeId}endSlice(){if((this._current.sliceFlags&r.FLAG_HAS_OPTIONAL_MEMBERS)!==0){this._stream.skipOptionals()}if((this._current.sliceFlags&r.FLAG_HAS_INDIRECTION_TABLE)!==0){const e=[];const n=this._stream.readAndCheckSeqSize(1);for(let t=0;t<n;++t){e[t]=this.readInstance(this._stream.readSize(),null)}if(e.length===0){throw new Ice.MarshalException("empty indirection table")}if((this._current.indirectPatchList===null||this._current.indirectPatchList.length===0)&&(this._current.sliceFlags&r.FLAG_HAS_OPTIONAL_MEMBERS)===0){throw new Ice.MarshalException("no references to indirection table")}if(this._current.indirectPatchList!==null){this._current.indirectPatchList.forEach(n=>{t.assert(n.index>=0);if(n.index>=e.length){throw new Ice.MarshalException("indirection out of range")}this.addPatchEntry(e[n.index],n.cb)});this._current.indirectPatchList.length=0}}}skipSlice(){this._stream.traceSkipSlice(this._current.typeId,this._current.sliceType);const e=this._stream.pos;if((this._current.sliceFlags&r.FLAG_HAS_SLICE_SIZE)!==0){t.assert(this._current.sliceSize>=4);this._stream.skip(this._current.sliceSize-4)}else{if(this._current.sliceType===l.ValueSlice){throw new Ice.NoValueFactoryException("no value factory found and compact format prevents slicing "+"(the sender should use the sliced format instead)",this._current.typeId)}else{if(this._current.typeId.indexOf("::")===0){throw new Ice.UnknownUserException(this._current.typeId.substring(2))}else{throw new Ice.UnknownUserException(this._current.typeId)}}}const n=new Ice.SliceInfo;n.typeId=this._current.typeId;n.compactId=this._current.compactId;n.hasOptionalMembers=(this._current.sliceFlags&r.FLAG_HAS_OPTIONAL_MEMBERS)!==0;n.isLastSlice=(this._current.sliceFlags&r.FLAG_IS_LAST_SLICE)!==0;const i=this._stream._buf;const s=i.position;let o=s;if(n.hasOptionalMembers){--o}i.position=e;n.bytes=i.getArray(o-e);i.position=s;if(this._current.slices===null){this._current.slices=[];this._current.indirectionTables=[]}if((this._current.sliceFlags&r.FLAG_HAS_INDIRECTION_TABLE)!==0){const e=this._stream.readAndCheckSeqSize(1);const t=[];for(let n=0;n<e;++n){t[n]=this.readInstance(this._stream.readSize(),null)}this._current.indirectionTables.push(t)}else{this._current.indirectionTables.push(null)}this._current.slices.push(n)}readOptional(e,t){if(this._current===null){return this._stream.readOptImpl(e,t)}else if((this._current.sliceFlags&r.FLAG_HAS_OPTIONAL_MEMBERS)!==0){return this._stream.readOptImpl(e,t)}return false}readInstance(e,n){t.assert(e>0);let i=null;if(e>1){if(n!==null){this.addPatchEntry(e,n)}return e}this.push(l.ValueSlice);e=++this._valueIdIndex;this.startSlice();const s=this._current.typeId;while(true){if(this._current.compactId>=0){this._current.typeId="";if(this._compactIdResolver!==null){try{this._current.typeId=this._compactIdResolver.call(null,this._current.compactId)}catch(e){if(!(e instanceof Ice.LocalException)){throw new Ice.MarshalException("exception in CompactIdResolver for ID "+this._current.compactId,e)}throw e}}if(this._current.typeId.length===0){this._current.typeId=this._stream.resolveCompactId(this._current.compactId)}}if(this._current.typeId.length>0){i=this.newInstance(this._current.typeId)}if(i!==null&&i!==undefined){break}if(!this._sliceValues){throw new Ice.NoValueFactoryException("no value factory found and slicing is disabled",this._current.typeId)}this.skipSlice();if((this._current.sliceFlags&r.FLAG_IS_LAST_SLICE)!==0){i=new Ice.UnknownSlicedValue(s);break}this.startSlice()}this.unmarshal(e,i);if(this._current===null&&this._patchMap!==null&&this._patchMap.size!==0){throw new Ice.MarshalException("index for class received, but no instance")}if(n!==null){n.call(null,i)}return e}readSlicedData(){if(this._current.slices===null){return null}t.assert(this._current.slices.length===this._current.indirectionTables.length);for(let e=0;e<this._current.slices.length;++e){const t=this._current.indirectionTables[e];const n=this._current.slices[e];n.instances=[];if(t){for(let e=0;e<t.length;++e){this.addPatchEntry(t[e],_(n.instances,e,Ice.Value))}}}return new a(c.clone(this._current.slices))}push(e){if(this._current===null){this._current=new p.InstanceData(null)}else{this._current=!this._current.next?new p.InstanceData(this._current):this._current.next}this._current.sliceType=e;this._current.skipFirstSlice=false}}p.InstanceData=class{constructor(e){if(e!==null){e.next=this}this.previous=e;this.next=null;this.sliceType=null;this.skipFirstSlice=false;this.slices=null;this.indirectionTables=null;this.sliceFlags=0;this.sliceSize=0;this.typeId=null;this.compactId=0;this.indirectPatchList=null}};const _=function(e,t,i){return s=>{if(s!==null&&!(s instanceof i)){n.throwUOE(i.ice_staticId(),s)}e[t]=s}};class f{constructor(){this.start=0;this.sz=0;this.encoding=null;this.encoding_1_0=false;this.decoder=null;this.next=null}reset(){this.decoder=null}setEncoding(e){this.encoding=e;this.encoding_1_0=e.equals(Ice.Encoding_1_0)}}class g{constructor(e,t,n){const i={instance:null,encoding:null,bytes:null,buffer:null};this._checkArgs([e,t,n],i);this._initialize(i)}_checkArgs(e,t){e.forEach(e=>{if(e!==null&&e!==undefined){if(e.constructor===Ice.Communicator){t.instance=e.instance}else if(e.constructor===Ice.Instance){t.instance=e}else if(e.constructor===Ice.EncodingVersion){t.encoding=e}else if(e.constructor===Ice.Buffer){t.buffer=e}else if(e.constructor===Array){t.bytes=e}else{throw new Ice.InitializationException("unknown argument to InputStream constructor")}}});if(t.buffer!==null&&t.bytes!==null){throw new Ice.InitializationException("invalid argument to InputStream constructor")}}_initialize(e){this._instance=e.instance;this._encoding=e.encoding;this._encapsStack=null;this._encapsCache=null;this._closure=null;this._sliceValues=true;this._startSeq=-1;this._sizePos=-1;this._compactIdResolver=null;if(this._instance!==null){if(this._encoding===null){this._encoding=this._instance.defaultsAndOverrides().defaultEncoding}this._traceSlicing=this._instance.traceLevels().slicing>0;this._valueFactoryManager=this._instance.initializationData().valueFactoryManager;this._logger=this._instance.initializationData().logger}else{if(this._encoding===null){this._encoding=r.currentEncoding}this._traceSlicing=false;this._valueFactoryManager=null;this._logger=null}if(e.bytes!==null){this._buf=new Ice.Buffer(e.bytes)}else if(e.buffer!==null){this._buf=e.buffer}else{this._buf=new Ice.Buffer}}reset(){this._buf.reset();this.clear()}clear(){if(this._encapsStack!==null){t.assert(this._encapsStack.next===null);this._encapsStack.next=this._encapsCache;this._encapsCache=this._encapsStack;this._encapsCache.reset();this._encapsStack=null}this._startSeq=-1;this._sliceValues=true}swap(e){t.assert(this._instance===e._instance);[e._buf,this._buf]=[this._buf,e._buf];[e._encoding,this._encoding]=[this._encoding,e._encoding];[e._traceSlicing,this._traceSlicing]=[this._traceSlicing,e._traceSlicing];[e._closure,this._closure]=[this._closure,e.closure];[e._sliceValues,this._sliceValues]=[this._sliceValues,e._sliceValues];this.resetEncapsulation();e.resetEncapsulation();[e._startSeq,this._startSeq]=[this._startSeq,e._startSeq];[e._minSeqSize,this._minSeqSize]=[this._minSeqSize,e._minSeqSize];[e._sizePos,this._sizePos]=[this._sizePos,e._sizePos];[e._valueFactoryManager,this._valueFactoryManager]=[this._valueFactoryManager,e._valueFactoryManager];[e._logger,this._logger]=[this._logger,e._logger];[e._compactIdResolver,this._compactIdResolver]=[this._compactIdResolver,e._compactIdResolver]}resetEncapsulation(){this._encapsStack=null}resize(e){this._buf.resize(e);this._buf.position=e}startValue(){t.assert(this._encapsStack!==null&&this._encapsStack.decoder!==null);this._encapsStack.decoder.startInstance(l.ValueSlice)}endValue(e){t.assert(this._encapsStack!==null&&this._encapsStack.decoder!==null);return this._encapsStack.decoder.endInstance(e)}startException(){t.assert(this._encapsStack!==null&&this._encapsStack.decoder!==null);this._encapsStack.decoder.startInstance(l.ExceptionSlice)}endException(e){t.assert(this._encapsStack!==null&&this._encapsStack.decoder!==null);return this._encapsStack.decoder.endInstance(e)}startEncapsulation(){let e=this._encapsCache;if(e!==null){e.reset();this._encapsCache=this._encapsCache.next}else{e=new f}e.next=this._encapsStack;this._encapsStack=e;this._encapsStack.start=this._buf.position;const t=this.readInt();if(t<6){throw new Ice.UnmarshalOutOfBoundsException}if(t-4>this._buf.remaining){throw new Ice.UnmarshalOutOfBoundsException}this._encapsStack.sz=t;const n=new Ice.EncodingVersion;n._read(this);r.checkSupportedEncoding(n);this._encapsStack.setEncoding(n);return n}endEncapsulation(){t.assert(this._encapsStack!==null);if(!this._encapsStack.encoding_1_0){this.skipOptionals();if(this._buf.position!==this._encapsStack.start+this._encapsStack.sz){throw new Ice.EncapsulationException}}else if(this._buf.position!==this._encapsStack.start+this._encapsStack.sz){if(this._buf.position+1!==this._encapsStack.start+this._encapsStack.sz){throw new Ice.EncapsulationException}try{this._buf.get()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}}const e=this._encapsStack;this._encapsStack=e.next;e.next=this._encapsCache;this._encapsCache=e;this._encapsCache.reset()}skipEmptyEncapsulation(){const e=this.readInt();if(e<6){throw new Ice.EncapsulationException}if(e-4>this._buf.remaining){throw new Ice.UnmarshalOutOfBoundsException}const t=new Ice.EncodingVersion;t._read(this);r.checkSupportedEncoding(t);if(t.equals(Ice.Encoding_1_0)){if(e!=6){throw new Ice.EncapsulationException}}else{this._buf.position=this._buf.position+e-6}return t}readEncapsulation(e){t.assert(e!==undefined);const n=this.readInt();if(n<6){throw new Ice.UnmarshalOutOfBoundsException}if(n-4>this._buf.remaining){throw new Ice.UnmarshalOutOfBoundsException}if(e!==null){e._read(this);this._buf.position=this._buf.position-6}else{this._buf.position=this._buf.position-4}try{return this._buf.getArray(n)}catch(e){throw new Ice.UnmarshalOutOfBoundsException}}getEncoding(){return this._encapsStack!==null?this._encapsStack.encoding:this._encoding}getEncapsulationSize(){t.assert(this._encapsStack!==null);return this._encapsStack.sz-6}skipEncapsulation(){const e=this.readInt();if(e<6){throw new Ice.UnmarshalOutOfBoundsException}const t=new Ice.EncodingVersion;t._read(this);try{this._buf.position=this._buf.position+e-6}catch(e){throw new Ice.UnmarshalOutOfBoundsException}return t}startSlice(){t.assert(this._encapsStack!==null&&this._encapsStack.decoder!==null);return this._encapsStack.decoder.startSlice()}endSlice(){t.assert(this._encapsStack!==null&&this._encapsStack.decoder!==null);this._encapsStack.decoder.endSlice()}skipSlice(){t.assert(this._encapsStack!==null&&this._encapsStack.decoder!==null);this._encapsStack.decoder.skipSlice()}readPendingValues(){if(this._encapsStack!==null&&this._encapsStack.decoder!==null){this._encapsStack.decoder.readPendingValues()}else if(this._encapsStack!==null&&this._encapsStack.encoding_1_0||this._encapsStack===null&&this._encoding.equals(Ice.Encoding_1_0)){this.skipSize()}}readSize(){try{const e=this._buf.get();if(e===255){const e=this._buf.getInt();if(e<0){throw new Ice.UnmarshalOutOfBoundsException}return e}return e}catch(e){throw new Ice.UnmarshalOutOfBoundsException}}readAndCheckSeqSize(e){const t=this.readSize();if(t===0){return t}if(this._startSeq===-1||this._buf.position>this._startSeq+this._minSeqSize){this._startSeq=this._buf.position;this._minSeqSize=t*e}else{this._minSeqSize+=t*e}if(this._startSeq+this._minSeqSize>this._buf.limit){throw new Ice.UnmarshalOutOfBoundsException}return t}readBlob(e){if(this._buf.remaining<e){throw new Ice.UnmarshalOutOfBoundsException}try{return this._buf.getArray(e)}catch(e){throw new Ice.UnmarshalOutOfBoundsException}}readOptional(e,n){t.assert(this._encapsStack!==null);if(this._encapsStack.decoder!==null){return this._encapsStack.decoder.readOptional(e,n)}return this.readOptImpl(e,n)}readOptionalHelper(e,t,n){if(this.readOptional(e,t)){return n.call(this)}else{return undefined}}readByte(){try{return this._buf.get()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}}readByteSeq(){return this._buf.getArray(this.readAndCheckSeqSize(1))}readBool(){try{return this._buf.get()===1}catch(e){throw new Ice.UnmarshalOutOfBoundsException}}readShort(){try{return this._buf.getShort()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}}readInt(){try{return this._buf.getInt()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}}readLong(){try{return this._buf.getLong()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}}readFloat(){try{return this._buf.getFloat()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}}readDouble(){try{return this._buf.getDouble()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}}readString(){const e=this.readSize();if(e===0){return""}if(this._buf.remaining<e){throw new Ice.UnmarshalOutOfBoundsException}try{return this._buf.getString(e)}catch(e){throw new Ice.UnmarshalOutOfBoundsException}}readProxy(e){return this._instance.proxyFactory().streamToProxy(this,e)}readOptionalProxy(e,t){if(this.readOptional(e,s.FSize)){this.skip(4);return this.readProxy(t)}else{return undefined}}readEnum(e){let t;if(this.getEncoding().equals(Ice.Encoding_1_0)){if(e.maxValue<127){t=this.readByte()}else if(e.maxValue<32767){t=this.readShort()}else{t=this.readInt()}}else{t=this.readSize()}const n=e.valueOf(t);if(n===undefined){throw new Ice.MarshalException("enumerator value "+t+" is out of range")}return n}readOptionalEnum(e,t){if(this.readOptional(e,s.Size)){return this.readEnum(t)}else{return undefined}}readValue(e,t){this.initEncaps();this._encapsStack.decoder.readValue.call(this._encapsStack.decoder,e===null?null:i=>{if(i!==null&&!(i instanceof t)){n.throwUOE(t.ice_staticId(),i)}e(i)})}readOptionalValue(e,t,n){if(this.readOptional(e,s.Class)){this.readValue(t,n)}else{t(undefined)}}throwException(){this.initEncaps();this._encapsStack.decoder.throwException()}readOptImpl(e,t){if(this.isEncoding_1_0()){return false}while(true){if(this._buf.position>=this._encapsStack.start+this._encapsStack.sz){return false}const n=this.readByte();if(n===r.OPTIONAL_END_MARKER){this._buf.position-=1;return false}const i=s.valueOf(n&7);let o=n>>3;if(o===30){o=this.readSize()}if(o>e){const e=o<30?1:o<255?2:6;this._buf.position-=e;return false}else if(o<e){this.skipOptional(i)}else{if(i!==t){throw new Ice.MarshalException("invalid optional data member `"+o+"': unexpected format")}return true}}}skipOptional(e){switch(e){case s.F1:this.skip(1);break;case s.F2:this.skip(2);break;case s.F4:this.skip(4);break;case s.F8:this.skip(8);break;case s.Size:this.skipSize();break;case s.VSize:this.skip(this.readSize());break;case s.FSize:this.skip(this.readInt());break;case s.Class:this.readValue(null,Ice.Value);break}}skipOptionals(){while(true){if(this._buf.position>=this._encapsStack.start+this._encapsStack.sz){return}const e=this.readByte();const t=e<0?e+256:e;if(t===r.OPTIONAL_END_MARKER){return}const n=s.valueOf(t&7);if(t>>3===30){this.skipSize()}this.skipOptional(n)}}skip(e){if(e>this._buf.remaining){throw new Ice.UnmarshalOutOfBoundsException}this._buf.position+=e}skipSize(){const e=this.readByte();if(e===255){this.skip(4)}}isEmpty(){return this._buf.empty()}expand(e){this._buf.expand(e)}createInstance(t){let n=null;try{const i=t.length>2?t.substr(2).replace(/::/g,"."):"";const s=e.type(i);if(s!==undefined){n=new s}}catch(e){throw new Ice.NoValueFactoryException("no value factory",t,e)}return n}createUserException(t){let n=null,i;try{const i=t.length>2?t.substr(2).replace(/::/g,"."):"";const s=e.type(i);if(s!==undefined){n=new s}}catch(e){throw new Ice.MarshalException(e)}return n}resolveCompactId(e){const t=Ice.CompactIdRegistry.get(e);return t===undefined?"":t}isEncoding_1_0(){return this._encapsStack!==null?this._encapsStack.encoding_1_0:this._encoding.equals(Ice.Encoding_1_0)}initEncaps(){if(this._encapsStack===null){this._encapsStack=this._encapsCache;if(this._encapsStack!==null){this._encapsCache=this._encapsCache.next}else{this._encapsStack=new f}this._encapsStack.setEncoding(this._encoding);this._encapsStack.sz=this._buf.limit}if(this._encapsStack.decoder===null){if(this._encapsStack.encoding_1_0){this._encapsStack.decoder=new d(this,this._encapsStack,this._sliceValues,this._valueFactoryManager)}else{this._encapsStack.decoder=new p(this,this._encapsStack,this._sliceValues,this._valueFactoryManager,this._compactIdResolver)}}}traceSkipSlice(e,t){if(this._traceSlicing&&this._logger!==null){o.traceSlicing(t===l.ExceptionSlice?"exception":"object",e,"Slicing",this._logger)}}get valueFactoryManager(){return this._valueFactoryManager}set valueFactoryManager(e){this._valueFactoryManager=e!==undefined?e:null}get logger(){return this._logger}set logger(e){this._logger=e!==undefined?e:null}get compactIdResolver(){return this._compactIdResolver}set compactIdResolver(e){this._compactIdResolver=e!==undefined?e:null}get sliceValues(){return this._sliceValues}set sliceValues(e){this._sliceValues=e}get traceSlicing(){return this._traceSlicing}set traceSlicing(e){this._traceSlicing=e}get pos(){return this._buf.position}set pos(e){this._buf.position=e}get size(){return this._buf.limit}get instance(){return this._instance}get closure(){return this._type}set closure(e){this._type=e}get buffer(){return this._buf}}class I{constructor(e,t){this._stream=e;this._encaps=t;this._marshaledMap=new Map;this._typeIdMap=null;this._typeIdIndex=0}writeOptional(){return false}writePendingValues(){return undefined}registerTypeId(e){if(this._typeIdMap===null){this._typeIdMap=new Map}const t=this._typeIdMap.get(e);if(t!==undefined){return t}else{this._typeIdMap.set(e,++this._typeIdIndex);return-1}}}class m extends I{constructor(e,t){super(e,t);this._sliceType=l.NoSlice;this._writeSlice=0;this._valueIdIndex=0;this._toBeMarshaledMap=new Map}writeValue(e){t.assert(e!==undefined);if(e!==null){this._stream.writeInt(-this.registerValue(e))}else{this._stream.writeInt(0)}}writeUserException(e){t.assert(e!==null&&e!==undefined);const n=e._usesClasses();this._stream.writeBool(n);e._write(this._stream);if(n){this.writePendingValues()}}startInstance(e){this._sliceType=e}endInstance(){if(this._sliceType===l.ValueSlice){this.startSlice(Ice.Value.ice_staticId(),-1,true);this._stream.writeSize(0);this.endSlice()}this._sliceType=l.NoSlice}startSlice(e){if(this._sliceType===l.ValueSlice){const t=this.registerTypeId(e);if(t<0){this._stream.writeBool(false);this._stream.writeString(e)}else{this._stream.writeBool(true);this._stream.writeSize(t)}}else{this._stream.writeString(e)}this._stream.writeInt(0);this._writeSlice=this._stream.pos}endSlice(){const e=this._stream.pos-this._writeSlice+4;this._stream.rewriteInt(e,this._writeSlice-4)}writePendingValues(){const e=(e,t)=>{this._stream.writeInt(e);try{t.ice_preMarshal()}catch(e){this._stream.instance.initializationData().logger.warning("exception raised by ice_preMarshal:\n"+e.toString())}t._iceWrite(this._stream)};while(this._toBeMarshaledMap.size>0){this._toBeMarshaledMap.forEach((e,t)=>this._marshaledMap.set(t,e));const t=this._toBeMarshaledMap;this._toBeMarshaledMap=new Map;this._stream.writeSize(t.size);t.forEach(e)}this._stream.writeSize(0)}registerValue(e){t.assert(e!==null);let n=this._toBeMarshaledMap.get(e);if(n!==undefined){return n}n=this._marshaledMap.get(e);if(n!==undefined){return n}this._toBeMarshaledMap.set(e,++this._valueIdIndex);return this._valueIdIndex}}class w extends I{constructor(e,t){super(e,t);this._current=null;this._valueIdIndex=1}writeValue(e){t.assert(e!==undefined);if(e===null){this._stream.writeSize(0)}else if(this._current!==null&&this._encaps.format===i.SlicedFormat){if(this._current.indirectionTable===null){this._current.indirectionTable=[];this._current.indirectionMap=new Map}const t=this._current.indirectionMap.get(e);if(t===undefined){this._current.indirectionTable.push(e);const t=this._current.indirectionTable.length;this._current.indirectionMap.set(e,t);this._stream.writeSize(t)}else{this._stream.writeSize(t)}}else{this.writeInstance(e)}}writePendingValues(){return undefined}writeUserException(e){t.assert(e!==null&&e!==undefined);e._write(this._stream)}startInstance(e,t){if(this._current===null){this._current=new w.InstanceData(null)}else{this._current=this._current.next===null?new w.InstanceData(this._current):this._current.next}this._current.sliceType=e;this._current.firstSlice=true;if(t!==null&&t!==undefined){this.writeSlicedData(t)}}endInstance(){this._current=this._current.previous}startSlice(e,n,s){t.assert((this._current.indirectionTable===null||this._current.indirectionTable.length===0)&&(this._current.indirectionMap===null||this._current.indirectionMap.size===0));this._current.sliceFlagsPos=this._stream.pos;this._current.sliceFlags=0;if(this._encaps.format===i.SlicedFormat){this._current.sliceFlags|=r.FLAG_HAS_SLICE_SIZE}if(s){this._current.sliceFlags|=r.FLAG_IS_LAST_SLICE}this._stream.writeByte(0);if(this._current.sliceType===l.ValueSlice){if(this._encaps.format===i.SlicedFormat||this._current.firstSlice){if(n>=0){this._current.sliceFlags|=r.FLAG_HAS_TYPE_ID_COMPACT;this._stream.writeSize(n)}else{const t=this.registerTypeId(e);if(t<0){this._current.sliceFlags|=r.FLAG_HAS_TYPE_ID_STRING;this._stream.writeString(e)}else{this._current.sliceFlags|=r.FLAG_HAS_TYPE_ID_INDEX;this._stream.writeSize(t)}}}}else{this._stream.writeString(e)}if((this._current.sliceFlags&r.FLAG_HAS_SLICE_SIZE)!==0){this._stream.writeInt(0)}this._current.writeSlice=this._stream.pos;this._current.firstSlice=false}endSlice(){if((this._current.sliceFlags&r.FLAG_HAS_OPTIONAL_MEMBERS)!==0){this._stream.writeByte(r.OPTIONAL_END_MARKER)}if((this._current.sliceFlags&r.FLAG_HAS_SLICE_SIZE)!==0){const e=this._stream.pos-this._current.writeSlice+4;this._stream.rewriteInt(e,this._current.writeSlice-4)}if(this._current.indirectionTable!==null&&this._current.indirectionTable.length!==0){t.assert(this._encaps.format===i.SlicedFormat);this._current.sliceFlags|=r.FLAG_HAS_INDIRECTION_TABLE;this._stream.writeSize(this._current.indirectionTable.length);this._current.indirectionTable.forEach(e=>this.writeInstance(e));this._current.indirectionTable.length=0;this._current.indirectionMap.clear()}this._stream.rewriteByte(this._current.sliceFlags,this._current.sliceFlagsPos)}writeOptional(e,t){if(this._current===null){return this._stream.writeOptImpl(e,t)}if(this._stream.writeOptImpl(e,t)){this._current.sliceFlags|=r.FLAG_HAS_OPTIONAL_MEMBERS;return true}return false}writeSlicedData(e){t.assert(e!==null&&e!==undefined);if(this._encaps.format!==i.SlicedFormat){return}e.slices.forEach(e=>{this.startSlice(e.typeId,e.compactId,e.isLastSlice);this._stream.writeBlob(e.bytes);if(e.hasOptionalMembers){this._current.sliceFlags|=r.FLAG_HAS_OPTIONAL_MEMBERS}if(e.instances!==null&&e.instances.length>0){if(this._current.indirectionTable===null){this._current.indirectionTable=[];this._current.indirectionMap=new Map}e.instances.forEach(e=>this._current.indirectionTable.push(e))}this.endSlice()})}writeInstance(e){t.assert(e!==null&&e!==undefined);const n=this._marshaledMap.get(e);if(n!==undefined){this._stream.writeSize(n);return}this._marshaledMap.set(e,++this._valueIdIndex);try{e.ice_preMarshal()}catch(e){this._stream.instance.initializationData().logger.warning("exception raised by ice_preMarshal:\n"+e.toString())}this._stream.writeSize(1);e._iceWrite(this._stream)}}w.InstanceData=class{constructor(e){t.assert(e!==undefined);if(e!==null){e.next=this}this.previous=e;this.next=null;this.sliceType=null;this.firstSlice=false;this.sliceFlags=0;this.writeSlice=0;this.sliceFlagsPos=0;this.indirectionTable=null;this.indirectionMap=null}};class y{constructor(){this.start=0;this.format=i.DefaultFormat;this.encoding=null;this.encoding_1_0=false;this.encoder=null;this.next=null}reset(){this.encoder=null}setEncoding(e){this.encoding=e;this.encoding_1_0=e.equals(Ice.Encoding_1_0)}}class x{constructor(e,t){this._instance=null;this._encoding=null;if(e!==undefined&&e!==null){if(e.constructor==Ice.Communicator){this._instance=e.instance}else if(e.constructor==Ice.Instance){this._instance=e}else if(e.constructor==Ice.EncodingVersion){this._encoding=e}else{throw new Ice.InitializationException("unknown argument to OutputStream constructor")}}if(t!==undefined&&t!==null){if(t.constructor==Ice.EncodingVersion){this._encoding=t}else{throw new Ice.InitializationException("unknown argument to OutputStream constructor")}}this._buf=new Ice.Buffer;this._closure=null;this._encapsStack=null;this._encapsCache=null;if(this._instance!==null){if(this._encoding===null){this._encoding=this._instance.defaultsAndOverrides().defaultEncoding}this._format=this._instance.defaultsAndOverrides().defaultFormat}else{if(this._encoding===null){this._encoding=r.currentEncoding}this._format=i.CompactFormat}}reset(){this._buf.reset();this.clear()}clear(){if(this._encapsStack!==null){t.assert(this._encapsStack.next);this._encapsStack.next=this._encapsCache;this._encapsCache=this._encapsStack;this._encapsCache.reset();this._encapsStack=null}}finished(){return this.prepareWrite().getArray(this.size)}swap(e){t.assert(this._instance===e._instance);[e._buf,this._buf]=[this._buf,e._buf];[e._encoding,this._encoding]=[this._encoding,e._encoding];[e._closure,this._closure]=[this._closure,e._closure];this.resetEncapsulation();e.resetEncapsulation()}resetEncapsulation(){this._encapsStack=null}resize(e){this._buf.resize(e);this._buf.position=e}prepareWrite(){this._buf.position=0;return this._buf}startValue(e){t.assert(this._encapsStack!==null&&this._encapsStack.encoder!==null);this._encapsStack.encoder.startInstance(l.ValueSlice,e)}endValue(){t.assert(this._encapsStack!==null&&this._encapsStack.encoder!==null);this._encapsStack.encoder.endInstance()}startException(e){t.assert(this._encapsStack!==null&&this._encapsStack.encoder!==null);this._encapsStack.encoder.startInstance(l.ExceptionSlice,e)}endException(){t.assert(this._encapsStack!==null&&this._encapsStack.encoder!==null);this._encapsStack.encoder.endInstance()}startEncapsulation(e,t){if(e===undefined){if(this._encapsStack!==null){e=this._encapsStack.encoding;t=this._encapsStack.format}else{e=this._encoding;t=i.DefaultFormat}}r.checkSupportedEncoding(e);let n=this._encapsCache;if(n!==null){n.reset();this._encapsCache=this._encapsCache.next}else{n=new y}n.next=this._encapsStack;this._encapsStack=n;this._encapsStack.format=t;this._encapsStack.setEncoding(e);this._encapsStack.start=this._buf.limit;this.writeInt(0);this._encapsStack.encoding._write(this)}endEncapsulation(){t.assert(this._encapsStack);const e=this._encapsStack.start;const n=this._buf.limit-e;this._buf.putIntAt(e,n);const i=this._encapsStack;this._encapsStack=i.next;i.next=this._encapsCache;this._encapsCache=i;this._encapsCache.reset()}writeEmptyEncapsulation(e){r.checkSupportedEncoding(e);this.writeInt(6);e._write(this)}writeEncapsulation(e){if(e.length<6){throw new Ice.EncapsulationException}this.expand(e.length);this._buf.putArray(e)}getEncoding(){return this._encapsStack!==null?this._encapsStack.encoding:this._encoding}startSlice(e,n,i){t.assert(this._encapsStack!==null&&this._encapsStack.encoder!==null);this._encapsStack.encoder.startSlice(e,n,i)}endSlice(){t.assert(this._encapsStack!==null&&this._encapsStack.encoder!==null);this._encapsStack.encoder.endSlice()}writePendingValues(){if(this._encapsStack!==null&&this._encapsStack.encoder!==null){this._encapsStack.encoder.writePendingValues()}else if(this._encapsStack!==null&&this._encapsStack.encoding_1_0||this._encapsStack===null&&this._encoding.equals(Ice.Encoding_1_0)){this.writeSize(0)}}writeSize(e){if(e>254){this.expand(5);this._buf.put(255);this._buf.putInt(e)}else{this.expand(1);this._buf.put(e)}}startSize(){const e=this._buf.position;this.writeInt(0);return e}endSize(e){t.assert(e>=0);this.rewriteInt(this._buf.position-e-4,e)}writeBlob(e){if(e===null){return}this.expand(e.length);this._buf.putArray(e)}writeOptional(e,n){t.assert(this._encapsStack!==null);if(this._encapsStack.encoder!==null){return this._encapsStack.encoder.writeOptional(e,n)}return this.writeOptImpl(e,n)}writeOptionalHelper(e,t,n,i){if(i!==undefined){if(this.writeOptional(e,t)){n.call(this,i)}}}writeByte(e){this.expand(1);this._buf.put(e)}rewriteByte(e,t){this._buf.putAt(t,e)}writeByteSeq(e){if(e===null||e.length===0){this.writeSize(0)}else{this.writeSize(e.length);this.expand(e.length);this._buf.putArray(e)}}writeBool(e){this.expand(1);this._buf.put(e?1:0)}rewriteBool(e,t){this._buf.putAt(t,e?1:0)}writeShort(e){this.expand(2);this._buf.putShort(e)}writeInt(e){this.expand(4);this._buf.putInt(e)}rewriteInt(e,t){this._buf.putIntAt(t,e)}writeLong(e){this.expand(8);this._buf.putLong(e)}writeFloat(e){this.expand(4);this._buf.putFloat(e)}writeDouble(e){this.expand(8);this._buf.putDouble(e)}writeString(e){if(e===null||e.length===0){this.writeSize(0)}else{this._buf.writeString(this,e)}}writeProxy(e){if(e!==null){e._write(this)}else{const e=new Ice.Identity;e._write(this)}}writeOptionalProxy(e,t){if(t!==undefined){if(this.writeOptional(e,s.FSize)){const e=this.startSize();this.writeProxy(t);this.endSize(e)}}}writeEnum(e){if(this.isEncoding_1_0()){if(e.maxValue<127){this.writeByte(e.value)}else if(e.maxValue<32767){this.writeShort(e.value)}else{this.writeInt(e.value)}}else{this.writeSize(e.value)}}writeValue(e){this.initEncaps();this._encapsStack.encoder.writeValue(e)}writeOptionalValue(e,t){if(t!==undefined){if(this.writeOptional(e,s.Class)){this.writeValue(t)}}}writeUserException(e){this.initEncaps();this._encapsStack.encoder.writeUserException(e)}writeOptImpl(e,t){if(this.isEncoding_1_0()){return false}let n=t.value;if(e<30){n|=e<<3;this.writeByte(n)}else{n|=240;this.writeByte(n);this.writeSize(e)}return true}isEmpty(){return this._buf.empty()}expand(e){this._buf.expand(e)}isEncoding_1_0(){return this._encapsStack?this._encapsStack.encoding_1_0:this._encoding.equals(Ice.Encoding_1_0)}initEncaps(){if(!this._encapsStack){this._encapsStack=this._encapsCache;if(this._encapsStack){this._encapsCache=this._encapsCache.next}else{this._encapsStack=new y}this._encapsStack.setEncoding(this._encoding)}if(this._encapsStack.format===i.DefaultFormat){this._encapsStack.format=this._instance.defaultsAndOverrides().defaultFormat}if(!this._encapsStack.encoder){if(this._encapsStack.encoding_1_0){this._encapsStack.encoder=new m(this,this._encapsStack)}else{this._encapsStack.encoder=new w(this,this._encapsStack)}}}get format(){return this._format}set format(e){this._format=e}get pos(){return this._buf.position}set pos(e){this._buf.position=e}get size(){return this._buf.limit}get instance(){return this._instance}get closure(){return this._closure}set closure(e){this._closure=e}get buffer(){return this._buf}}const S=function(e,t,n,i,s,r){const o=class{static write(t,n){return e.call(t,n)}static read(e){return t.call(e)}static writeOptional(t,n,s){t.writeOptionalHelper(n,i,e,s)}static readOptional(e,n){return e.readOptionalHelper(n,i,t)}static get minWireSize(){return n}};if(s!==undefined&&r!==undefined){o.validate=function(e){return e>=s&&e<=r}}return o};const E=g.prototype;const b=x.prototype;const v=0;const C=255;const M=-32768;const P=32767;const k=0;const A=4294967295;const O=-2147483648;const T=2147483647;const F=-3.4028234664e38;const L=3.4028234664e38;Ice.ByteHelper=S(b.writeByte,E.readByte,1,Ice.OptionalFormat.F1,v,C);Ice.ShortHelper=S(b.writeShort,E.readShort,2,Ice.OptionalFormat.F2,M,P);Ice.IntHelper=S(b.writeInt,E.readInt,4,Ice.OptionalFormat.F4,O,T);Ice.FloatHelper=S(b.writeFloat,E.readFloat,4,Ice.OptionalFormat.F4,F,L);Ice.FloatHelper.validate=function(e){return Number.isNaN(e)||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY||e>=F&&e<=L};Ice.DoubleHelper=S(b.writeDouble,E.readDouble,8,Ice.OptionalFormat.F8,-Number.MAX_VALUE,Number.MAX_VALUE);Ice.DoubleHelper.validate=function(e){return Number.isNaN(e)||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY||e>=-Number.MAX_VALUE&&e<=Number.MAX_VALUE};Ice.BoolHelper=S(b.writeBool,E.readBool,1,Ice.OptionalFormat.F1);Ice.LongHelper=S(b.writeLong,E.readLong,8,Ice.OptionalFormat.F8);Ice.LongHelper.validate=function(e){return e.low>=k&&e.low<=A&&e.high>=k&&e.high<=A};Ice.StringHelper=S(b.writeString,E.readString,1,Ice.OptionalFormat.VSize);Ice.ObjectHelper=class{static write(e,t){e.writeValue(t)}static read(e){let t;e.readValue(e=>t=e,Ice.Value);return t}static writeOptional(e,t,n){e.writeOptionalValue(t,Ice.OptionalFormat.Class,b.writeValue,n)}static readOptional(e,t){let n;e.readOptionalValue(t,e=>n=e,Ice.Value);return n}static get minWireSize(){return 1}};Ice.InputStream=g;Ice.OutputStream=x})();(function(){class e extends Ice.Promise{constructor(e,t,n,i,s){super();this._communicator=e;this._instance=e!==null?e.instance:null;this._operation=t;this._connection=n;this._proxy=i;this._adapter=s}get communicator(){return this._communicator}get connection(){return this._connection}get proxy(){return this._proxy}get adapter(){return this._adapter}get operation(){return this._operation}}Ice.AsyncResultBase=e})();(function(){const e=Ice.AsyncStatus;const t=Ice.ConnectionRequestHandler;const n=Ice.Debug;const i=Ice.RetryException;const s=Ice.ReferenceMode;const r=Ice.LocalException;class o{constructor(e,t){this._reference=e;this._response=e.getMode()===s.ModeTwoway;this._proxy=t;this._proxies=[];this._initialized=false;this._connection=null;this._exception=null;this._requests=[]}connect(e){if(!this.initialized()){this._proxies.push(e)}return this._requestHandler?this._requestHandler:this}update(e,t){return e===this?t:this}sendAsyncRequest(t){if(!this._initialized){t.cancelable(this)}if(!this.initialized()){this._requests.push(t);return e.Queued}return t.invokeRemote(this._connection,this._response)}asyncRequestCanceled(e,t){if(this._exception!==null){return}if(!this.initialized()){for(let n=0;n<this._requests.length;n++){if(this._requests[n]===e){e.completedEx(t);this._requests.splice(n,1);return}}n.assert(false)}this._connection.asyncRequestCanceled(e,t)}getReference(){return this._reference}getConnection(){if(this._exception!==null){throw this._exception}else{return this._connection}}setConnection(e){n.assert(this._exception===null&&this._connection===null);this._connection=e;const t=this._reference.getRouterInfo();if(t!==null){t.addProxy(this._proxy).then(()=>this.flushRequests(),e=>this.setException(e));return}this.flushRequests()}setException(e){n.assert(!this._initialized&&this._exception===null);this._exception=e;this._proxies.length=0;this._proxy=null;try{this._reference.getInstance().requestHandlerFactory().removeRequestHandler(this._reference,this)}catch(e){}this._requests.forEach(e=>{if(e!==null){e.completedEx(this._exception)}});this._requests.length=0}initialized(){if(this._initialized){n.assert(this._connection!==null);return true}else{if(this._exception!==null){if(this._connection!==null){return true}throw this._exception}else{return this._initialized}}}flushRequests(){n.assert(this._connection!==null&&!this._initialized);let e=null;this._requests.forEach(t=>{try{t.invokeRemote(this._connection,this._response)}catch(s){if(s instanceof i){e=s.inner;this._reference.getInstance().requestHandlerFactory().removeRequestHandler(this._reference,this);t.retryException(s.inner)}else{n.assert(s instanceof r);e=s;t.out.completedEx(s)}}});this._requests.length=0;if(this._reference.getCacheConnection()&&e===null){this._requestHandler=new t(this._reference,this._connection);this._proxies.forEach(e=>e._updateRequestHandler(this,this._requestHandler))}n.assert(!this._initialized);this._exception=e;this._initialized=this._exception===null;this._reference.getInstance().requestHandlerFactory().removeRequestHandler(this._reference,this);this._proxies.length=0;this._proxy=null}}Ice.ConnectRequestHandler=o})();(function(){const e=Ice.OutputStream;const t=Ice.Debug;const n=Ice.Protocol;const i=20+8;class s{constructor(t,s){this._batchStreamInUse=false;this._batchRequestNum=0;this._batchStream=new e(t,n.currentProtocolEncoding);this._batchStream.writeBlob(n.requestBatchHdr);this._batchMarker=this._batchStream.size;this._exception=null;this._maxSize=t.batchAutoFlushSize();if(this._maxSize>0&&s){const e=t.initializationData().properties.getPropertyAsIntWithDefault("Ice.UDP.SndSize",65535-i);if(e<this._maxSize){this._maxSize=e}}}prepareBatchRequest(e){if(this._exception){throw this._exception}this._batchStream.swap(e)}finishBatchRequest(e,n,i){this._batchStream.swap(e);try{if(this._maxSize>0&&this._batchStream.size>=this._maxSize){n.ice_flushBatchRequests()}t.assert(this._batchMarker<this._batchStream.size);this._batchMarker=this._batchStream.size;++this._batchRequestNum}finally{this._batchStream.resize(this._batchMarker)}}abortBatchRequest(e){this._batchStream.swap(e);this._batchStream.resize(this._batchMarker)}swap(e){if(this._batchRequestNum===0){return 0}let t=null;if(this._batchMarker<this._batchStream.size){const e=this._batchStream.size-this._batchMarker;this._batchStream.pos=this._batchMarker;t=this._batchStream.buffer.getArray(e);this._batchStream.resize(this._batchMarker)}const i=this._batchRequestNum;this._batchStream.swap(e);this._batchRequestNum=0;this._batchStream.writeBlob(n.requestBatchHdr);this._batchMarker=this._batchStream.size;if(t!==null){this._batchStream.writeBlob(t)}return i}destroy(e){this._exception=e}isEmpty(){return this._batchStream.size===n.requestBatchHdr.length}}Ice.BatchRequestQueue=s})();(function(){t.defineSequence(Ice,"EndpointSeqHelper","Ice.ObjectHelper",false,"Ice.Endpoint")})();(function(){class e{constructor(e,t,n,i){this._instance=e;this._queue=t;this._outAsync=n}run(){this._outAsync.retry();this._queue.remove(this)}destroy(){try{this._outAsync.abort(new Ice.CommunicatorDestroyedException)}catch(e){}}asyncRequestCanceled(e,t){if(this._queue.cancel(this)){if(this._instance.traceLevels().retry>=1){this._instance.initializationData().logger.trace(this._instance.traceLevels().retryCat,"operation retry canceled\n"+t.toString())}this._outAsync.completedEx(t)}}}class t{constructor(e){this._instance=e;this._requests=[]}add(t,n){if(this._instance===null){throw new Ice.CommunicatorDestroyedException}const i=new e(this._instance,this,t);t.cancelable(i);i.token=this._instance.timer().schedule(()=>i.run(),n);this._requests.push(i)}destroy(){this._requests.forEach(e=>{this._instance.timer().cancel(e.token);e.destroy()});this._requests=[];this._instance=null}remove(e){const t=this._requests.indexOf(e);if(t>=0){this._requests.splice(t,1)}}cancel(e){const t=this._requests.indexOf(e);if(t>=0){this._requests.splice(t,1);return this._instance.timer().cancel(e.token)}return false}}Ice.RetryQueue=t})();(function(){const e=Ice.Debug;const t=Ice.HashMap;class n{constructor(n){this._router=n;e.assert(this._router!==null);this._clientEndpoints=null;this._adapter=null;this._identities=new t(t.compareEquals);this._evictedIdentities=[];this._hasRoutingTable=false}destroy(){this._clientEndpoints=[];this._adapter=null;this._identities.clear()}equals(e){if(this===e){return true}if(e instanceof n){return this._router.equals(e._router)}return false}hashCode(){return this._router.hashCode()}getRouter(){return this._router}getClientEndpoints(){const e=new Ice.Promise;if(this._clientEndpoints!==null){e.resolve(this._clientEndpoints)}else{this._router.getClientProxy().then(t=>this.setClientEndpoints(t[0],t[1]!==undefined?t[1]:true,e)).catch(e.reject)}return e}getServerEndpoints(){return this._router.getServerProxy().then(e=>{if(e===null){throw new Ice.NoEndpointException}e=e.ice_router(null);return e._getReference().getEndpoints()})}addProxy(t){e.assert(t!==null);if(!this._hasRoutingTable){return Ice.Promise.resolve()}else if(this._identities.has(t.ice_getIdentity())){return Ice.Promise.resolve()}else{return this._router.addProxies([t]).then(e=>{this.addAndEvictProxies(t,e)})}}setAdapter(e){this._adapter=e}getAdapter(){return this._adapter}clearCache(e){this._identities.delete(e.getIdentity())}setClientEndpoints(e,t,n){if(this._clientEndpoints===null){this._hasRoutingTable=t;if(e===null){this._clientEndpoints=this._router._getReference().getEndpoints();n.resolve(this._clientEndpoints)}else{e=e.ice_router(null);this._router.ice_getConnection().then(t=>{this._clientEndpoints=e.ice_timeout(t.timeout())._getReference().getEndpoints();n.resolve(this._clientEndpoints)}).catch(n.reject)}}else{n.resolve(this._clientEndpoints)}}addAndEvictProxies(e,t){const n=this._evictedIdentities.findIndex(t=>t.equals(e.ice_getIdentity()));if(n>=0){this._evictedIdentities.splice(n,1)}else{this._identities.set(e.ice_getIdentity(),1)}t.forEach(e=>{this._identities.delete(e.ice_getIdentity())})}}Ice.RouterInfo=n})();(function(){const e=Ice.AsyncResultBase;const t=Ice.Debug;const n=Ice.Protocol;const i=Ice.UserException;const s=Ice.OutputStream;class r extends e{constructor(e,t,i,r,o,c){super(e,t,i,r,o);this._completed=c;this._is=null;this._os=e!==null?new s(this._instance,n.currentProtocolEncoding):null;this._state=0;this._exception=null;this._sentSynchronously=false}cancel(){this.cancelWithException(new Ice.InvocationCanceledException)}isCompleted(){return(this._state&r.Done)>0}isSent(){return(this._state&r.Sent)>0}throwLocalException(){if(this._exception!==null){throw this._exception}}sentSynchronously(){return this._sentSynchronously}markSent(e){t.assert((this._state&r.Done)===0);this._state|=r.Sent;if(e){this._state|=r.Done|r.OK;this._cancellationHandler=null;this.resolve()}}markFinished(e,n){t.assert((this._state&r.Done)===0);this._state|=r.Done;if(e){this._state|=r.OK}this._cancellationHandler=null;if(n){n(this)}else{this.resolve()}}markFinishedEx(e){t.assert((this._state&r.Done)===0);this._exception=e;this._state|=r.Done;this._cancellationHandler=null;this.reject(e)}cancelWithException(e){this._cancellationException=e;if(this._cancellationHandler){this._cancellationHandler.asyncRequestCanceled(this,e)}}cancelable(e){if(this._cancellationException){try{throw this._cancellationException}finally{this._cancellationException=null}}this._cancellationHandler=e}getOs(){return this._os}startReadParams(){this._is.startEncapsulation();return this._is}endReadParams(){this._is.endEncapsulation()}readEmptyParams(){this._is.skipEmptyEncapsulation()}throwUserException(){t.assert((this._state&r.Done)!==0);if((this._state&r.OK)===0){try{this._is.startEncapsulation();this._is.throwException()}catch(e){if(e instanceof i){this._is.endEncapsulation()}throw e}}}}r.OK=1;r.Done=2;r.Sent=4;Ice.AsyncResult=r})();(function(){const e=Ice.AsyncStatus;const t=Ice.AsyncResult;const n=Ice.InputStream;const i=Ice.OutputStream;const s=Ice.Debug;const r=Ice.RetryException;const o=Ice.Protocol;const c=Ice.Identity;class a extends t{constructor(e,t,n,s,r){super(e,t,n,s,r);this._os=new i(this._instance,o.currentProtocolEncoding)}getOs(){return this._os}sent(){this.markSent(true)}completedEx(e){this.markFinishedEx(e)}}class l extends a{constructor(e,t){super(e.ice_getCommunicator(),t,null,e,null);this._mode=null;this._cnt=0;this._sent=false;this._handler=null}completedEx(e){try{this._instance.retryQueue().add(this,this.handleException(e))}catch(e){this.markFinishedEx(e)}}retryException(e){try{this._proxy._updateRequestHandler(this._handler,null);this._instance.retryQueue().add(this,0)}catch(e){this.completedEx(e)}}retry(){this.invokeImpl(false)}abort(e){this.markFinishedEx(e)}invokeImpl(t){try{if(t){const e=this._proxy._getReference().getInvocationTimeout();if(e>0){this._timeoutToken=this._instance.timer().schedule(()=>{this.cancelWithException(new Ice.InvocationTimeoutException)},e)}}while(true){try{this._sent=false;this._handler=this._proxy._getRequestHandler();if((this._handler.sendAsyncRequest(this)&e.Sent)>0){if(t){this._sentSynchronously=true}}return}catch(e){if(e instanceof r){this._proxy._updateRequestHandler(this._handler,null)}else{const t=this.handleException(e);if(t>0){this._instance.retryQueue().add(this,t);return}}}}}catch(e){this.markFinishedEx(e)}}markSent(e){this._sent=true;if(e){if(this._timeoutToken){this._instance.timer().cancel(this._timeoutToken)}}super.markSent.call(this,e)}markFinishedEx(e){if(this._timeoutToken){this._instance.timer().cancel(this._timeoutToken)}super.markFinishedEx.call(this,e)}handleException(e){const t={value:0};this._cnt=this._proxy._handleException(e,this._handler,this._mode,this._sent,t,this._cnt);return t.value}}class h extends l{constructor(e,t,n){super(e,t);this._encoding=o.getCompatibleEncoding(this._proxy._getReference().getEncoding());this._completed=n}prepare(e,t,n){o.checkSupportedProtocol(o.getCompatibleProtocol(this._proxy._getReference().getProtocol()));this._mode=t;if(n===null){n=h._emptyContext}if(this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram()){this._proxy._getBatchRequestQueue().prepareBatchRequest(this._os)}else{this._os.writeBlob(o.requestHdr)}const i=this._proxy._getReference();i.getIdentity()._write(this._os);const s=i.getFacet();if(s===null||s.length===0){Ice.StringSeqHelper.write(this._os,null)}else{Ice.StringSeqHelper.write(this._os,[s])}this._os.writeString(this._operation);this._os.writeByte(t.value);if(n!==undefined){if(n!==null&&!(n instanceof Map)){throw new Error("illegal context value, expecting null or Map")}Ice.ContextHelper.write(this._os,n)}else{const e=i.getInstance().getImplicitContext();const t=i.getContext();if(e===null){Ice.ContextHelper.write(this._os,t)}else{e.write(t,this._os)}}}sent(){this.markSent(!this._proxy.ice_isTwoway())}invokeRemote(e,t){return e.sendAsyncRequest(this,t,0)}abort(e){if(this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram()){this._proxy._getBatchRequestQueue().abortBatchRequest(this._os)}super.abort(e)}invoke(){if(this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram()){this._sentSynchronously=true;this._proxy._getBatchRequestQueue().finishBatchRequest(this._os,this._proxy,this._operation);this.markFinished(true);return}this.invokeImpl(true)}completed(e){s.assert(this._proxy.ice_isTwoway());let t;try{if(this._is===null){this._is=new n(this._instance,o.currentProtocolEncoding)}this._is.swap(e);t=this._is.readByte();switch(t){case o.replyOK:case o.replyUserException:{break}case o.replyObjectNotExist:case o.replyFacetNotExist:case o.replyOperationNotExist:{const e=new c;e._read(this._is);const n=Ice.StringSeqHelper.read(this._is);let i;if(n.length>0){if(n.length>1){throw new Ice.MarshalException}i=n[0]}else{i=""}const r=this._is.readString();let a=null;switch(t){case o.replyObjectNotExist:{a=new Ice.ObjectNotExistException;break}case o.replyFacetNotExist:{a=new Ice.FacetNotExistException;break}case o.replyOperationNotExist:{a=new Ice.OperationNotExistException;break}default:{s.assert(false);break}}a.id=e;a.facet=i;a.operation=r;throw a}case o.replyUnknownException:case o.replyUnknownLocalException:case o.replyUnknownUserException:{const e=this._is.readString();let n=null;switch(t){case o.replyUnknownException:{n=new Ice.UnknownException;break}case o.replyUnknownLocalException:{n=new Ice.UnknownLocalException;break}case o.replyUnknownUserException:{n=new Ice.UnknownUserException;break}default:{s.assert(false);break}}n.unknown=e;throw n}default:{throw new Ice.UnknownReplyStatusException}}this.markFinished(t==o.replyOK,this._completed)}catch(e){this.completedEx(e)}}startWriteParams(e){this._os.startEncapsulation(this._encoding,e);return this._os}endWriteParams(){this._os.endEncapsulation()}writeEmptyParams(){this._os.writeEmptyEncapsulation(this._encoding)}startReadParams(){this._is.startEncapsulation();return this._is}endReadParams(){this._is.endEncapsulation()}readEmptyParams(){this._is.skipEmptyEncapsulation()}throwUserException(){s.assert((this._state&t.Done)!==0);if((this._state&t.OK)===0){try{this._is.startEncapsulation();this._is.throwException()}catch(e){if(e instanceof Ice.UserException){this._is.endEncapsulation()}throw e}}}}h._emptyContext=new Map;class u extends l{constructor(e,t){super(e,t);this._batchRequestNum=e._getBatchRequestQueue().swap(this._os)}invokeRemote(t,n){if(this._batchRequestNum===0){this.sent();return e.Sent}return t.sendAsyncRequest(this,n,this._batchRequestNum)}invoke(){o.checkSupportedProtocol(o.getCompatibleProtocol(this._proxy._getReference().getProtocol()));this.invokeImpl(true)}}class d extends l{constructor(e,t){super(e,t)}invokeRemote(t,n){this.markFinished(true,e=>e.resolve(t));return e.Sent}invoke(){this.invokeImpl(true)}}class p extends a{constructor(e,t,n){super(t,n,e,null,null)}invoke(){try{const t=this._connection.getBatchRequestQueue().swap(this._os);let n;if(t===0){this.sent();n=e.Sent}else{n=this._connection.sendAsyncRequest(this,false,t)}if((n&e.Sent)>0){this._sentSynchronously=true}}catch(e){this.completedEx(e)}}}class _ extends a{constructor(e,t){super(t,"heartbeat",e,null,null)}invoke(){try{this._os.writeBlob(o.magic);o.currentProtocol._write(this._os);o.currentProtocolEncoding._write(this._os);this._os.writeByte(o.validateConnectionMsg);this._os.writeByte(0);this._os.writeInt(o.headerSize);const t=this._connection.sendAsyncRequest(this,false,0);if((t&e.Sent)>0){this._sentSynchronously=true}}catch(e){this.completedEx(e)}}}Ice.OutgoingAsync=h;Ice.ProxyFlushBatch=u;Ice.ProxyGetConnection=d;Ice.ConnectionFlushBatch=p;Ice.HeartbeatAsync=_})();(function(){const e=Ice.ArrayUtil;const t=Ice.AsyncResultBase;const n=Ice.AsyncResult;const i=Ice.Debug;const s=Ice.FormatType;const r=Ice.OutgoingAsync;const o=Ice.ProxyFlushBatch;const c=Ice.ProxyGetConnection;const a=Ice.ReferenceMode;const l=Ice.OperationMode;class h{constructor(){this._reference=null;this._requestHandler=null}hashCode(e){return this._reference.hashCode()}ice_getCommunicator(){return this._reference.getCommunicator()}toString(){return this._reference.toString()}ice_getIdentity(){return this._reference.getIdentity().clone()}ice_identity(e){if(e===undefined||e===null||e.name.length===0){throw new Ice.IllegalIdentityException}if(e.equals(this._reference.getIdentity())){return this}else{const t=new h;t._setup(this._reference.changeIdentity(e));return t}}ice_getContext(){return new Map(this._reference.getContext())}ice_context(e){return this._newInstance(this._reference.changeContext(e))}ice_getFacet(){return this._reference.getFacet()}ice_facet(e){if(e===undefined||e===null){e=""}if(e===this._reference.getFacet()){return this}else{const t=new h;t._setup(this._reference.changeFacet(e));return t}}ice_getAdapterId(){return this._reference.getAdapterId()}ice_adapterId(e){if(e===undefined||e===null){e=""}if(e===this._reference.getAdapterId()){return this}else{return this._newInstance(this._reference.changeAdapterId(e))}}ice_getEndpoints(){return e.clone(this._reference.getEndpoints())}ice_endpoints(t){if(t===undefined||t===null){t=[]}if(e.equals(t,this._reference.getEndpoints())){return this}else{return this._newInstance(this._reference.changeEndpoints(t))}}ice_getLocatorCacheTimeout(){return this._reference.getLocatorCacheTimeout()}ice_locatorCacheTimeout(e){if(e<-1){throw new Error("invalid value passed to ice_locatorCacheTimeout: "+e)}if(e===this._reference.getLocatorCacheTimeout()){return this}else{return this._newInstance(this._reference.changeLocatorCacheTimeout(e))}}ice_getInvocationTimeout(){return this._reference.getInvocationTimeout()}ice_invocationTimeout(e){if(e<1&&e!==-1){throw new Error("invalid value passed to ice_invocationTimeout: "+e)}if(e===this._reference.getInvocationTimeout()){return this}else{return this._newInstance(this._reference.changeInvocationTimeout(e))}}ice_isConnectionCached(){return this._reference.getCacheConnection()}ice_connectionCached(e){if(e===this._reference.getCacheConnection()){return this}else{return this._newInstance(this._reference.changeCacheConnection(e))}}ice_getEndpointSelection(){return this._reference.getEndpointSelection()}ice_endpointSelection(e){if(e===this._reference.getEndpointSelection()){return this}else{return this._newInstance(this._reference.changeEndpointSelection(e))}}ice_isSecure(){return this._reference.getSecure()}ice_secure(e){if(e===this._reference.getSecure()){return this}else{return this._newInstance(this._reference.changeSecure(e))}}ice_getEncodingVersion(){return this._reference.getEncoding().clone()}ice_encodingVersion(e){if(e.equals(this._reference.getEncoding())){return this}else{return this._newInstance(this._reference.changeEncoding(e))}}ice_isPreferSecure(){return this._reference.getPreferSecure()}ice_preferSecure(e){if(e===this._reference.getPreferSecure()){return this}else{return this._newInstance(this._reference.changePreferSecure(e))}}ice_getRouter(){const e=this._reference.getRouterInfo();return e!==null?e.getRouter():null}ice_router(e){const t=this._reference.changeRouter(e);if(t.equals(this._reference)){return this}else{return this._newInstance(t)}}ice_getLocator(){const e=this._reference.getLocatorInfo();return e!==null?e.getLocator():null}ice_locator(e){const t=this._reference.changeLocator(e);if(t.equals(this._reference)){return this}else{return this._newInstance(t)}}ice_isTwoway(){return this._reference.getMode()===a.ModeTwoway}ice_twoway(){if(this._reference.getMode()===a.ModeTwoway){return this}else{return this._newInstance(this._reference.changeMode(a.ModeTwoway))}}ice_isOneway(){return this._reference.getMode()===a.ModeOneway}ice_oneway(){if(this._reference.getMode()===a.ModeOneway){return this}else{return this._newInstance(this._reference.changeMode(a.ModeOneway))}}ice_isBatchOneway(){return this._reference.getMode()===a.ModeBatchOneway}ice_batchOneway(){if(this._reference.getMode()===a.ModeBatchOneway){return this}else{return this._newInstance(this._reference.changeMode(a.ModeBatchOneway))}}ice_isDatagram(){return this._reference.getMode()===a.ModeDatagram}ice_datagram(){if(this._reference.getMode()===a.ModeDatagram){return this}else{return this._newInstance(this._reference.changeMode(a.ModeDatagram))}}ice_isBatchDatagram(){return this._reference.getMode()===a.ModeBatchDatagram}ice_batchDatagram(){if(this._reference.getMode()===a.ModeBatchDatagram){return this}else{return this._newInstance(this._reference.changeMode(a.ModeBatchDatagram))}}ice_timeout(e){if(e<1&&e!==-1){throw new Error("invalid value passed to ice_timeout: "+e)}const t=this._reference.changeTimeout(e);if(t.equals(this._reference)){return this}else{return this._newInstance(t)}}ice_getTimeout(){return this._reference.getTimeout()}ice_fixed(e){if(e===null){throw new Error("invalid null connection passed to ice_fixed")}if(!(e instanceof Ice.ConnectionI)){throw new Error("invalid connection passed to ice_fixed")}const t=this._reference.changeConnection(e);if(t.equals(this._reference)){return this}else{return this._newInstance(t)}}ice_getConnectionId(){return this._reference.getConnectionId()}ice_connectionId(e){const t=this._reference.changeConnectionId(e);if(t.equals(this._reference)){return this}else{return this._newInstance(t)}}ice_getConnection(){const e=new c(this,"ice_getConnection");try{e.invoke()}catch(t){e.abort(t)}return e}ice_getCachedConnection(){return this._requestHandler?this._requestHandler.getConnection():null}ice_flushBatchRequests(){const e=new o(this,"ice_flushBatchRequests");try{e.invoke()}catch(t){e.abort(t)}return e}equals(e){if(this===e){return true}if(e instanceof h){return this._reference.equals(e._reference)}return false}_write(e){this._reference.getIdentity()._write(e);this._reference.streamWrite(e)}_getReference(){return this._reference}_copyFrom(e){i.assert(this._reference===null);i.assert(this._requestHandler===null);this._reference=e._reference;this._requestHandler=e._requestHandler}_handleException(e,t,n,i,s,r){this._updateRequestHandler(t,null);if(e instanceof Ice.LocalException&&(!i||n==l.Nonmutating||n==l.Idempotent||e instanceof Ice.CloseConnectionException||e instanceof Ice.ObjectNotExistException)){try{return this._reference.getInstance().proxyFactory().checkRetryAfterException(e,this._reference,s,r)}catch(t){if(t instanceof Ice.CommunicatorDestroyedException){throw e}else{throw t}}}else{throw e}}_checkAsyncTwowayOnly(e){if(!this.ice_isTwoway()){throw new Ice.TwowayOnlyException(e)}}_getRequestHandler(){if(this._reference.getCacheConnection()){if(this._requestHandler){return this._requestHandler}}return this._reference.getRequestHandler(this)}_getBatchRequestQueue(){if(!this._batchRequestQueue){this._batchRequestQueue=this._reference.getBatchRequestQueue()}return this._batchRequestQueue}_setRequestHandler(e){if(this._reference.getCacheConnection()){if(!this._requestHandler){this._requestHandler=e}return this._requestHandler}return e}_updateRequestHandler(e,t){if(this._reference.getCacheConnection()&&e!==null){if(this._requestHandler&&this._requestHandler!==t){this._requestHandler=this._requestHandler.update(e,t)}}}_setup(e){i.assert(this._reference===null);this._reference=e}_newInstance(e){const t=new this.constructor;t._setup(e);return t}ice_instanceof(e){if(e){if(this instanceof e){return true}return this.constructor._instanceof(e)}return false}static _invoke(e,t,n,i,s,o,c,a,l){if(c!==null||a.length>0){e._checkAsyncTwowayOnly(t)}const h=new r(e,t,e=>{this._completed(e,c,a)});try{h.prepare(t,n,s);if(o===null){h.writeEmptyParams()}else{const e=h.startWriteParams(i);o.call(null,e,l);h.endWriteParams()}h.invoke()}catch(e){h.abort(e)}return h}static _completed(e,t,n){if(!this._check(e,n)){return}try{if(t===null){e.readEmptyParams();e.resolve()}else{e.resolve(t(e))}}catch(t){this.dispatchLocalException(e,t);return}}static _check(e,t){try{e.throwUserException()}catch(n){if(n instanceof Ice.UserException){if(t!==null){for(let i=0;i<t.length;++i){if(n instanceof t[i]){e.reject(n);return false}}}e.reject(new Ice.UnknownUserException(n.ice_id()));return false}else{e.reject(n);return false}}return true}static dispatchLocalException(e,t){e.reject(t)}static checkedCast(e,n,i){let s=null;if(e===undefined||e===null){s=new t(null,"checkedCast",null,null,null);s.resolve(null)}else{if(n!==undefined){e=e.ice_facet(n)}s=new t(e.ice_getCommunicator(),"checkedCast",null,e,null);e.ice_isA(this.ice_staticId(),i).then(t=>{if(t){const t=new this;t._copyFrom(e);s.resolve(t)}else{s.resolve(null)}}).catch(e=>{if(e instanceof Ice.FacetNotExistException){s.resolve(null)}else{s.reject(e)}})}return s}static uncheckedCast(e,t){let n=null;if(e!==undefined&&e!==null){n=new this;if(t!==undefined){e=e.ice_facet(t)}n._copyFrom(e)}return n}static get minWireSize(){return 2}static write(e,t){e.writeProxy(t)}static read(e){return e.readProxy(this)}static writeOptional(e,t,n){e.writeOptionalProxy(t,n)}static readOptional(e,t){return e.readOptionalProxy(t,this)}static _instanceof(e){if(e===this){return true}for(const t in this._implements){if(this._implements[t]._instanceof(e)){return true}}return false}static ice_staticId(){return this._id}static get _implements(){return[]}}Ice.ObjectPrx=h})();(function(){Object.defineProperty(Ice,"TCPEndpointType",{value:1});Object.defineProperty(Ice,"SSLEndpointType",{value:2});Object.defineProperty(Ice,"UDPEndpointType",{value:3});Object.defineProperty(Ice,"WSEndpointType",{value:4});Object.defineProperty(Ice,"WSSEndpointType",{value:5});Object.defineProperty(Ice,"BTEndpointType",{value:6});Object.defineProperty(Ice,"BTSEndpointType",{value:7});Object.defineProperty(Ice,"iAPEndpointType",{value:8});Object.defineProperty(Ice,"iAPSEndpointType",{value:9});Ice.EndpointInfo=class{constructor(e=null,t=0,n=false){this.underlying=e;this.timeout=t;this.compress=n}};Ice.IPEndpointInfo=class extends Ice.EndpointInfo{constructor(e,t,n,i="",s=0,r=""){super(e,t,n);this.host=i;this.port=s;this.sourceAddress=r}};Ice.TCPEndpointInfo=class extends Ice.IPEndpointInfo{constructor(e,t,n,i,s,r){super(e,t,n,i,s,r)}};Ice.UDPEndpointInfo=class extends Ice.IPEndpointInfo{constructor(e,t,n,i,s,r,o="",c=0){super(e,t,n,i,s,r);this.mcastInterface=o;this.mcastTtl=c}};Ice.WSEndpointInfo=class extends Ice.EndpointInfo{constructor(e,t,n,i=""){super(e,t,n);this.resource=i}};Ice.OpaqueEndpointInfo=class extends Ice.EndpointInfo{constructor(e,t,n,i=new Ice.EncodingVersion,s=null){super(e,t,n);this.rawEncoding=i;this.rawBytes=s}}})();(function(){const e=Ice._ModuleRegistry;const t=[Ice.ByteHelper,Ice.BoolHelper,Ice.ShortHelper,Ice.IntHelper,Ice.LongHelper,Ice.FloatHelper,Ice.DoubleHelper,Ice.StringHelper,Ice.Value,Ice.ObjectPrx];function n(n){let i=n[0];const s=typeof i;if(s==="number"){i=t[n[0]]}else if(s==="string"){i=e.type(i)}return{type:i,isObject:n[1]===true,tag:n[2]}}function i(e,t){const i={};i.name=e;i.servantMethod=t[0]?t[0]:e;i.mode=t[1]?Ice.OperationMode.valueOf(t[1]):Ice.OperationMode.Normal;i.sendMode=t[2]?Ice.OperationMode.valueOf(t[2]):Ice.OperationMode.Normal;i.format=t[3]?Ice.FormatType.valueOf(t[3]):Ice.FormatType.DefaultFormat;let s;if(t[4]){s=n(t[4]);s.pos=0}i.returns=s;const r=[];const o=[];if(t[5]){for(let e=0;e<t[5].length;++e){const i=n(t[5][e]);i.pos=e;r.push(i);if(i.tag){o.push(i)}}}o.sort((e,t)=>e.tag-t.tag);i.inParams=r;i.inParamsOpt=o;const c=[];const a=[];if(t[6]){const e=s?1:0;for(let i=0;i<t[6].length;++i){const s=n(t[6][i]);s.pos=i+e;c.push(s);if(s.tag){a.push(s)}}}if(s&&s.tag){a.push(s)}a.sort((e,t)=>e.tag-t.tag);i.outParams=c;i.outParamsOpt=a;const l=[];if(t[7]){for(let e=0;e<t[7].length;++e){l.push(t[7][e])}}i.exceptions=l;i.sendsClasses=t[8]===true;i.returnsClasses=t[9]===true;return i}class s{constructor(e){this.raw=e;this.parsed={}}find(e){let t=this.parsed[e];if(t===undefined&&this.raw[e]!==undefined){t=i(e,this.raw[e]);this.parsed[e]=t}return t}}function r(e,t,n,i,s,r,o){const c=(t,n)=>{if(n){if(t.isObject){e.readOptionalValue(t.tag,e=>r[t.pos+o]=e,t.type)}else{r[t.pos+o]=t.type.readOptional(e,t.tag)}}else{if(t.isObject){e.readValue(e=>r[t.pos+o]=e,t.type)}else{r[t.pos+o]=t.type.read(e)}}};for(let e=0;e<n.length;++e){if(!n[e].tag){c(n[e],false)}}if(t){c(t,false)}for(let e=0;e<i.length;++e){c(i[e],true)}if(s){e.readPendingValues()}}function o(e,t,n,i,s,r){for(let n=0;n<i.length;++n){const s=i[n];if(!s.tag){s.type.write(e,t[s.pos])}}if(n){n.type.write(e,t[n.pos])}for(let n=0;n<s.length;++n){const i=s[n];i.type.writeOptional(e,i.tag,t[i.pos])}if(r){e.writePendingValues()}}function c(e,t,n,i){const s=e[t.servantMethod];if(s===undefined||typeof s!=="function"){throw new Ice.UnknownException("servant for identity "+i.adapter.getCommunicator().identityToString(i.id)+" does not define operation `"+t.servantMethod+"'")}const c=[];if(t.inParams.length===0){n.readEmptyParams()}else{const e=n.startReadParams();r(e,undefined,t.inParams,t.inParamsOpt,t.sendsClasses,c,0);n.endReadParams()}c.push(i);n.setFormat(t.format);const a=function(e){const i=t.outParams.length+(t.returns?1:0);if(i>1&&!(e instanceof Array)){throw new Ice.MarshalException("operation `"+t.servantMethod+"' should return an array")}else if(i===1){e=[e]}if(t.returns===undefined&&t.outParams.length===0){if(e&&e.length>0){throw new Ice.MarshalException("operation `"+t.servantMethod+"' shouldn't return any value")}else{n.writeEmptyParams()}}else{let i;if(t.returns&&!t.returns.tag){i=t.returns}const s=n.startWriteParams();o(s,e,i,t.outParams,t.outParamsOpt,t.returnsClasses);n.endWriteParams()}};const l=s.apply(e,c);if(l instanceof Promise){return l.then(a)}else{a(l);return null}}function a(e,t,n){let i;for(let s=0;i===undefined&&s<e.length;++s){const r=e[s];i=r[t];if(i===undefined){if(n.indexOf(r)===-1){n.push(r)}if(r._iceImplements){i=a(r._iceImplements,t,n)}}}return i}const l="_iceD_";function h(e,t){const n=l+t;let i=e[n];let s;if(i===undefined){s=[];let t=e;while(t&&i===undefined){if(t._iceImplements){i=a(t._iceImplements,n,s)}t=Object.getPrototypeOf(t)}if(i!==undefined){e[n]=i}}if(i===undefined){let r;if(e._iceOps){r=e._iceOps.find(t)}let o;if(r===undefined){let n=Object.getPrototypeOf(e);while(r===undefined&&n){if(n._iceOps){if((r=n._iceOps.find(t))!==undefined){o=n}}n=Object.getPrototypeOf(n)}for(let e=0;r===undefined&&e<s.length;++e){const n=s[e];if(n._iceOps){if((r=n._iceOps.find(t))!==undefined){o=n}}}}if(r!==undefined){i=function(e,t,n){return c(e,r,t,n)};e[n]=i;if(o){o[n]=i}}}return i}function u(e,t,n){const s=n[0]?n[0]:t;let c=null;e.prototype[s]=function(){const e=arguments;if(c===null){c=i(t,n)}const s=e[c.inParams.length];let a=null;if(c.inParams.length>0){a=function(e,t){for(let e=0;e<c.inParams.length;++e){const n=c.inParams[e];const i=t[n.pos];if(!n.tag||i!==undefined){if(typeof n.type.validate==="function"){if(!n.type.validate(i)){throw new Ice.MarshalException("invalid value for argument "+(e+1)+" in operation `"+c.servantMethod+"'")}}}}o(e,t,undefined,c.inParams,c.inParamsOpt,c.sendsClasses)}}let l=null;if(c.returns||c.outParams.length>0){l=function(e){const t=[];const n=e.startReadParams();let i;if(c.returns&&!c.returns.tag){i=c.returns}r(n,i,c.outParams,c.outParamsOpt,c.returnsClasses,t,0);e.endReadParams();return t.length==1?t[0]:t}}return Ice.ObjectPrx._invoke(this,c.name,c.sendMode,c.format,s,a,l,c.exceptions,Array.prototype.slice.call(e))}}const d=Ice.Slice;d.defineOperations=function(e,t,n,i,r){if(r){e._iceOps=new s(r)}e.prototype._iceDispatch=function(t,n){const i=h(e,n.operation);if(i===undefined||typeof i!=="function"){throw new Ice.OperationNotExistException(n.id,n.facet,n.operation)}return i.call(i,this,t,n)};e.prototype._iceMostDerivedType=function(){return e};Object.defineProperty(e,"_iceIds",{get:()=>n});Object.defineProperty(e,"_iceId",{get:()=>n[i]});e.ice_staticId=function(){return e._iceId};if(t!==undefined){if(r){for(const e in r){u(t,e,r[e])}}if(t._implements){for(const e in t._implements){const n=t._implements[e].prototype;for(const e in n){if(typeof n[e]=="function"&&t.prototype[e]===undefined){t.prototype[e]=n[e]}}}}Object.defineProperty(t,"_id",{get:function(){return n[i]}})}};d.defineOperations(Ice.Object,Ice.ObjectPrx,["::Ice::Object"],0,{ice_ping:[,1,1,,,,,],ice_isA:[,1,1,,[1],[[7]],,],ice_id:[,1,1,,[7],,,],ice_ids:[,1,1,,["Ice.StringSeqHelper"],,,]})})();(function(){const e=Ice.HashMap;const t=Ice.Debug;class n{constructor(e,t){this.time=e;this.endpoints=t}}class i{constructor(e,t){this.time=e;this.reference=t}}class s{constructor(){this._adapterEndpointsTable=new Map;this._objectTable=new e(e.compareEquals)}clear(){this._adapterEndpointsTable.clear();this._objectTable.clear()}getAdapterEndpoints(e,t,n){if(t===0){n.value=false;return null}const i=this._adapterEndpointsTable.get(e);if(i!==undefined){n.value=this.checkTTL(i.time,t);return i.endpoints}n.value=false;return null}addAdapterEndpoints(e,t){this._adapterEndpointsTable.set(e,new n(Date.now(),t))}removeAdapterEndpoints(e){const t=this._adapterEndpointsTable.get(e);this._adapterEndpointsTable.delete(e);return t!==undefined?t.endpoints:null}getObjectReference(e,t,n){if(t===0){n.value=false;return null}const i=this._objectTable.get(e);if(i!==undefined){n.value=this.checkTTL(i.time,t);return i.reference}n.value=false;return null}addObjectReference(e,t){this._objectTable.set(e,new i(Date.now(),t))}removeObjectReference(e){const t=this._objectTable.get(e);this._objectTable.delete(e);return t!==undefined?t.reference:null}checkTTL(e,n){t.assert(n!==0);if(n<0){return true}else{return Date.now()-e<=n*1e3}}}Ice.LocatorTable=s})();(function(){class e{toString(){return this.protocol()+this.options()}initWithOptions(e){const t=[];let n="`"+this.protocol();for(let t=0;t<e.length;++t){if(e[t].search(/[ \t\n\r]+/)!==-1){n+=' "'+e[t]+'"'}else{n+=" "+e[t]}}n+="'";for(let i=0;i<e.length;){const s=e[i++];if(s.length<2||s.charAt(0)!="-"){t.push(s);continue}let r=null;if(i<e.length&&e[i].charAt(0)!="-"){r=e[i++]}if(!this.checkOption(s,r,n)){t.push(s);if(r!==null){t.push(r)}}}e.length=0;for(let n=0;n<t.length;n++){e.push(t[n])}}equals(t){if(!(t instanceof e)){return false}return this.compareTo(t)===0}checkOption(){return false}}Ice.EndpointI=e})();(function(){class e{constructor(e,t){this.host=e;this.port=t}}Ice.Address=e})();(function(){const e=Ice.Address;const t=Ice.HashUtil;const n=Ice.StringUtil;const i=Ice.EndpointParseException;class s extends Ice.EndpointI{constructor(e,t,n,i,s){super();this._instance=e;this._host=t===undefined?null:t;this._port=n===undefined?null:n;this._sourceAddr=i===undefined?null:i;this._connectionId=s===undefined?"":s}streamWrite(e){e.startEncapsulation();this.streamWriteImpl(e);e.endEncapsulation()}getInfo(){const e=new Ice.IPEndpointInfo;this.fillEndpointInfo(e);return e}type(){return this._instance.type()}protocol(){return this._instance.protocol()}secure(){return this._instance.secure()}connectionId(){return this._connectionId}changeConnectionId(e){if(e===this._connectionId){return this}else{return this.createEndpoint(this._host,this._port,e)}}hashCode(){if(this._hashCode===undefined){this._hashCode=this.hashInit(5381)}return this._hashCode}options(){let e="";if(this._host!==null&&this._host.length>0){e+=" -h ";const t=this._host.indexOf(":")!=-1;if(t){e+='"'}e+=this._host;if(t){e+='"'}}e+=" -p "+this._port;if(this._sourceAddr!==null&&this._sourceAddr.length>0){e+=" --sourceAddr "+this._sourceAddr}return e}compareTo(e){if(this===e){return 0}if(e===null){return 1}if(!(e instanceof s)){return this.type()<e.type()?-1:1}if(this._port<e._port){return-1}else if(e._port<this._port){return 1}if(this._host!=e._host){return this._host<e._host?-1:1}if(this._sourceAddr!=e._sourceAddr){return this._sourceAddr<e._sourceAddr?-1:1}if(this._connectionId!=e._connectionId){return this._connectionId<e._connectionId?-1:1}return 0}getAddress(){return new e(this._host,this._port)}toConnectorString(){return this._host+":"+this._port}streamWriteImpl(e){e.writeString(this._host);e.writeInt(this._port)}hashInit(e){e=t.addNumber(e,this.type());e=t.addString(e,this._host);e=t.addNumber(e,this._port);e=t.addString(e,this._sourceAddr);e=t.addString(e,this._connectionId);return e}fillEndpointInfo(e){e.type=(()=>this.type());e.datagram=(()=>this.datagram());e.secure=(()=>this.secure());e.host=this._host;e.port=this._port;e.sourceAddress=this._sourceAddr}initWithOptions(e,t){super.initWithOptions(e);if(this._host===null||this._host.length===0){this._host=this._instance.defaultHost()}else if(this._host=="*"){if(t){this._host=""}else{throw new i("`-h *' not valid for proxy endpoint `"+this+"'")}}if(this._host===null){this._host=""}if(this._sourceAddr===null){if(!t){this._sourceAddr=this._instance.defaultSourceAddress()}}else if(t){throw new i("`--sourceAddress not valid for object adapter endpoint `"+this+"'")}}initWithStream(e){this._host=e.readString();this._port=e.readInt()}checkOption(e,t,s){if(e==="-h"){if(t===null){throw new i("no argument provided for -h option in endpoint "+s)}this._host=t}else if(e==="-p"){if(t===null){throw new i("no argument provided for -p option in endpoint "+s)}try{this._port=n.toInt(t)}catch(e){throw new i("invalid port value `"+t+"' in endpoint "+s)}if(this._port<0||this._port>65535){throw new i("port value `"+t+"' out of range in endpoint "+s)}}else if(e==="--sourceAddress"){if(t===null){throw new i("no argument provided for --sourceAddress option in endpoint "+s)}this._sourceAddr=t}else{return false}return true}}Ice.IPEndpointI=s})();(function(){IceSSL.EndpointInfo=class extends Ice.EndpointInfo{constructor(e,t,n){super(e,t,n)}}})();(function(){Ice.ToStringMode=Ice.Slice.defineEnum([["Unicode",0],["ASCII",1],["Compat",2]])})();(function(){Ice.TraceLevels=function(e){const t="Network";const n="Protocol";const i="Retry";const s="Locator";const r="Slicing";const o="Ice.Trace.";const c=e.getPropertyAsInt(o+t);const a=e.getPropertyAsInt(o+n);const l=e.getPropertyAsInt(o+i);const h=e.getPropertyAsInt(o+s);const u=e.getPropertyAsInt(o+r);e.getPropertyAsInt(o+"ThreadPool");return class{static get network(){return c}static get networkCat(){return t}static get protocol(){return a}static get protocolCat(){return n}static get retry(){return l}static get retryCat(){return i}static get location(){return h}static get locationCat(){return s}static get slicing(){return u}static get slicingCat(){return r}}}})();(function(){const e=["::Ice::Object","::Ice::Router"];Ice.Router=class extends Ice.Object{};Ice.RouterPrx=class extends Ice.ObjectPrx{};t.defineOperations(Ice.Router,Ice.RouterPrx,e,1,{getClientProxy:[,2,1,,[9],,[[1,,1]],,,],getServerProxy:[,2,1,,[9],,,,,],addProxies:[,2,2,,["Ice.ObjectProxySeqHelper"],[["Ice.ObjectProxySeqHelper"]],,,,]});const n=["::Ice::Object","::Ice::RouterFinder"];Ice.RouterFinder=class extends Ice.Object{};Ice.RouterFinderPrx=class extends Ice.ObjectPrx{};t.defineOperations(Ice.RouterFinder,Ice.RouterFinderPrx,n,1,{getRouter:[,,,,["Ice.RouterPrx"],,,,,]})})();(function(){const e=["::Ice::Object","::Ice::Process"];Ice.Process=class extends Ice.Object{};Ice.ProcessPrx=class extends Ice.ObjectPrx{};t.defineOperations(Ice.Process,Ice.ProcessPrx,e,1,{shutdown:[,,,,,,,,,],writeMessage:[,,,,,[[7],[3]],,,,]})})();(function(){Ice.AdapterNotFoundException=class extends Ice.UserException{constructor(e=""){super(e)}static get _parent(){return Ice.UserException}static get _id(){return"::Ice::AdapterNotFoundException"}_mostDerivedType(){return Ice.AdapterNotFoundException}};Ice.InvalidReplicaGroupIdException=class extends Ice.UserException{constructor(e=""){super(e)}static get _parent(){return Ice.UserException}static get _id(){return"::Ice::InvalidReplicaGroupIdException"}_mostDerivedType(){return Ice.InvalidReplicaGroupIdException}};Ice.AdapterAlreadyActiveException=class extends Ice.UserException{constructor(e=""){super(e)}static get _parent(){return Ice.UserException}static get _id(){return"::Ice::AdapterAlreadyActiveException"}_mostDerivedType(){return Ice.AdapterAlreadyActiveException}};Ice.ObjectNotFoundException=class extends Ice.UserException{constructor(e=""){super(e)}static get _parent(){return Ice.UserException}static get _id(){return"::Ice::ObjectNotFoundException"}_mostDerivedType(){return Ice.ObjectNotFoundException}};Ice.ServerNotFoundException=class extends Ice.UserException{constructor(e=""){super(e)}static get _parent(){return Ice.UserException}static get _id(){return"::Ice::ServerNotFoundException"}_mostDerivedType(){return Ice.ServerNotFoundException}};const e=["::Ice::Locator","::Ice::Object"];Ice.Locator=class extends Ice.Object{};Ice.LocatorPrx=class extends Ice.ObjectPrx{};t.defineOperations(Ice.Locator,Ice.LocatorPrx,e,0,{findObjectById:[,2,1,,[9],[[Ice.Identity]],,[Ice.ObjectNotFoundException],,],findAdapterById:[,2,1,,[9],[[7]],,[Ice.AdapterNotFoundException],,],getRegistry:[,2,1,,["Ice.LocatorRegistryPrx"],,,,,]});const n=["::Ice::LocatorRegistry","::Ice::Object"];Ice.LocatorRegistry=class extends Ice.Object{};Ice.LocatorRegistryPrx=class extends Ice.ObjectPrx{};t.defineOperations(Ice.LocatorRegistry,Ice.LocatorRegistryPrx,n,0,{setAdapterDirectProxy:[,2,2,,,[[7],[9]],,[Ice.AdapterAlreadyActiveException,Ice.AdapterNotFoundException],,],setReplicatedAdapterDirectProxy:[,2,2,,,[[7],[7],[9]],,[Ice.AdapterAlreadyActiveException,Ice.AdapterNotFoundException,Ice.InvalidReplicaGroupIdException],,],setServerProcessProxy:[,2,2,,,[[7],["Ice.ProcessPrx"]],,[Ice.ServerNotFoundException],,]});const i=["::Ice::LocatorFinder","::Ice::Object"];Ice.LocatorFinder=class extends Ice.Object{};Ice.LocatorFinderPrx=class extends Ice.ObjectPrx{};t.defineOperations(Ice.LocatorFinder,Ice.LocatorFinderPrx,i,0,{getLocator:[,,,,["Ice.LocatorPrx"],,,,,]})})();(function(){Ice.CompressBatch=t.defineEnum([["Yes",0],["No",1],["BasedOnProxy",2]]);Ice.ConnectionInfo=class{constructor(e=null,t=false,n="",i=""){this.underlying=e;this.incoming=t;this.adapterName=n;this.connectionId=i}};Ice.ACMClose=t.defineEnum([["CloseOff",0],["CloseOnIdle",1],["CloseOnInvocation",2],["CloseOnInvocationAndIdle",3],["CloseOnIdleForceful",4]]);Ice.ACMHeartbeat=t.defineEnum([["HeartbeatOff",0],["HeartbeatOnDispatch",1],["HeartbeatOnIdle",2],["HeartbeatAlways",3]]);Ice.ACM=class{constructor(e=0,t=Ice.ACMClose.CloseOff,n=Ice.ACMHeartbeat.HeartbeatOff){this.timeout=e;this.close=t;this.heartbeat=n}};t.defineStruct(Ice.ACM,true,true);Ice.ConnectionClose=t.defineEnum([["Forcefully",0],["Gracefully",1],["GracefullyWithWait",2]]);Ice.IPConnectionInfo=class extends Ice.ConnectionInfo{constructor(e,t,n,i,s="",r=-1,o="",c=-1){super(e,t,n,i);this.localAddress=s;this.localPort=r;this.remoteAddress=o;this.remotePort=c}};Ice.TCPConnectionInfo=class extends Ice.IPConnectionInfo{constructor(e,t,n,i,s,r,o,c,a=0,l=0){super(e,t,n,i,s,r,o,c);this.rcvSize=a;this.sndSize=l}};Ice.UDPConnectionInfo=class extends Ice.IPConnectionInfo{constructor(e,t,n,i,s,r,o,c,a="",l=-1,h=0,u=0){super(e,t,n,i,s,r,o,c);this.mcastAddress=a;this.mcastPort=l;this.rcvSize=h;this.sndSize=u}};t.defineDictionary(Ice,"HeaderDict","HeaderDictHelper","Ice.StringHelper","Ice.StringHelper",false,undefined,undefined);Ice.WSConnectionInfo=class extends Ice.ConnectionInfo{constructor(e,t,n,i,s=null){super(e,t,n,i);this.headers=s}}})();(function(){const e=Ice.AlreadyRegisteredException;class t{constructor(){this._factoryMap=new Map}add(t,n){if(this._factoryMap.has(n)){throw new e("value factory",n)}this._factoryMap.set(n,t)}find(e){return this._factoryMap.get(e)}destroy(){this._factoryMap=new Map}}Ice.ValueFactoryManagerI=t})();(function(){IceSSL.ConnectionInfo=class extends Ice.ConnectionInfo{constructor(e,t,n,i,s="",r=null,o=false){super(e,t,n,i);this.cipher=s;this.certs=r;this.verified=o}}})();(function(){const e=Ice._ModuleRegistry.module("IceSSL");const t=navigator.userAgent.indexOf("Edge/")===-1&&navigator.userAgent.indexOf("Chrome/")!==-1;const n=/^((?!chrome).)*safari/i.test(navigator.userAgent);const i=Ice.Debug;const s=Ice.SocketOperation;const r=Ice.Timer;const o=0;const c=1;const a=2;const l=3;const h=4;class u{constructor(e){this._readBuffers=[];this._readPosition=0;this._maxSendPacketSize=e.properties().getPropertyAsIntWithDefault("Ice.TCP.SndSize",512*1024);this._writeReadyTimeout=0}writeReadyTimeout(){const e=Math.round(this._writeReadyTimeout);this._writeReadyTimeout+=this._writeReadyTimeout>=5?5:.2;return Math.min(e,25)}setCallbacks(e,t,n){this._connectedCallback=e;this._bytesAvailableCallback=t;this._bytesWrittenCallback=n}initialize(e,t){try{if(this._exception){throw this._exception}if(this._state===o){this._state=c;this._fd=new WebSocket(this._url,"ice.zeroc.com");this._fd.binaryType="arraybuffer";this._fd.onopen=(e=>this.socketConnected(e));this._fd.onmessage=(e=>this.socketBytesAvailable(e.data));this._fd.onclose=(e=>this.socketClosed(e));return s.Connect}else if(this._state===c){this._desc=d(this._addr);this._state=a}}catch(e){if(!this._exception){this._exception=p(this._state,e)}throw this._exception}i.assert(this._state===a);return s.None}register(){this._registered=true;if(this._hasBytesAvailable||this._exception){this._hasBytesAvailable=false;r.setTimeout(()=>this._bytesAvailableCallback(),0)}}unregister(){this._registered=false}close(){if(this._fd===null){i.assert(this._exception);return}if((t||n)&&this._fd.readyState===WebSocket.CONNECTING){this._state=l;return}i.assert(this._fd!==null);try{this._state=h;this._fd.close()}catch(e){throw p(this._state,e)}finally{this._fd=null}}write(e){if(this._exception){throw this._exception}else if(e.remaining===0){return true}i.assert(this._fd);const t=()=>{if(this._fd){const n=this._maxSendPacketSize>0&&e.remaining>this._maxSendPacketSize?this._maxSendPacketSize:e.remaining;if(this._fd.bufferedAmount+n<=this._maxSendPacketSize){this._bytesWrittenCallback(0,0)}else{r.setTimeout(t,this.writeReadyTimeout())}}};while(true){const s=this._maxSendPacketSize>0&&e.remaining>this._maxSendPacketSize?this._maxSendPacketSize:e.remaining;if(e.remaining===0){break}i.assert(s>0);if(this._fd.bufferedAmount+s>this._maxSendPacketSize){r.setTimeout(t,this.writeReadyTimeout());return false}this._writeReadyTimeout=0;const o=e.b.slice(e.position,e.position+s);this._fd.send(o);e.position+=s;if(n&&e.remaining>0){r.setTimeout(t,this.writeReadyTimeout());return false}}return true}read(e,t){if(this._exception){throw this._exception}t.value=false;if(this._readBuffers.length===0){return false}let n=this._readBuffers[0].byteLength-this._readPosition;i.assert(n>0);while(e.remaining>0){if(n>e.remaining){n=e.remaining}new Uint8Array(e.b).set(new Uint8Array(this._readBuffers[0],this._readPosition,n),e.position);e.position+=n;this._readPosition+=n;if(this._readPosition===this._readBuffers[0].byteLength){this._readPosition=0;this._readBuffers.shift();if(this._readBuffers.length===0){break}else{n=this._readBuffers[0].byteLength}}}t.value=this._readBuffers.byteLength>0;return e.remaining===0}type(){return this._secure?"wss":"ws"}getInfo(){i.assert(this._fd!==null);const t=new Ice.WSConnectionInfo;const n=new Ice.TCPConnectionInfo;n.localAddress="";n.localPort=-1;n.remoteAddress=this._addr.host;n.remotePort=this._addr.port;t.underlying=this._secure?new e.ConnectionInfo(n,n.timeout,n.compress):n;t.rcvSize=-1;t.sndSize=this._maxSendPacketSize;t.headers={};return t}checkSendSize(e){}setBufferSize(e,t){this._maxSendPacketSize=t}toString(){return this._desc}socketConnected(e){if(this._state==l){this.close();return}i.assert(this._connectedCallback!==null);this._connectedCallback()}socketBytesAvailable(e){i.assert(this._bytesAvailableCallback!==null);if(e.byteLength>0){this._readBuffers.push(e);if(this._registered){this._bytesAvailableCallback()}else if(!this._hasBytesAvailable){this._hasBytesAvailable=true}}}socketClosed(e){if(this._state==l){this.close();return}this._exception=p(this._state,e);if(this._state<a){this._connectedCallback()}else if(this._registered){this._bytesAvailableCallback()}}static createOutgoing(e,t,n,i){const s=new u(e);let r=t?"wss":"ws";r+="://"+n.host;if(n.port!==80){r+=":"+n.port}r+=i?i:"/";s._url=r;s._fd=null;s._addr=n;s._desc="local address = <not available>\nremote address = "+n.host+":"+n.port;s._state=o;s._secure=t;s._exception=null;return s}}function d(e){return"local address = <not available>\nremote address = "+e.host+":"+e.port}function p(e,t){if(e<a){return new Ice.ConnectFailedException(t.code,t)}else{if(t.code===1e3||t.code===1006){return new Ice.ConnectionLostException}return new Ice.SocketException(t.code,t)}}Ice.WSTransceiver=u})();(function(){const e=Ice.OutputStream;const t=Ice.Current;const n=Ice.Debug;const i=Ice.Context;const s=Ice.Identity;const r=Ice.Protocol;const o=Ice.StringUtil;class c{constructor(e,n,i,r,o){this._instance=e;this._response=r;this._connection=n;this._format=Ice.FormatType.DefaultFormat;this._current=new t;this._current.id=new s;this._current.adapter=i;this._current.con=this._connection;this._current.requestId=o;this._servant=null;this._locator=null;this._cookie={value:null};this._os=null;this._is=null}startWriteParams(){if(!this._response){throw new Ice.MarshalException("can't marshal out parameters for oneway dispatch")}n.assert(this._current.encoding!==null);this._os=new e(this._instance,r.currentProtocolEncoding);this._os.writeBlob(r.replyHdr);this._os.writeInt(this._current.requestId);this._os.writeByte(0);this._os.startEncapsulation(this._current.encoding,this._format);return this._os}endWriteParams(){if(this._response){this._os.endEncapsulation()}}writeEmptyParams(){if(this._response){n.assert(this._current.encoding!==null);this._os=new e(this._instance,r.currentProtocolEncoding);this._os.writeBlob(r.replyHdr);this._os.writeInt(this._current.requestId);this._os.writeByte(r.replyOK);this._os.writeEmptyEncapsulation(this._current.encoding)}}writeParamEncaps(t,i){if(this._response){n.assert(this._current.encoding!==null);this._os=new e(this._instance,r.currentProtocolEncoding);this._os.writeBlob(r.replyHdr);this._os.writeInt(this._current.requestId);this._os.writeByte(i?r.replyOK:r.replyUserException);if(t===null||t.length===0){this._os.writeEmptyEncapsulation(this._current.encoding)}else{this._os.writeEncapsulation(t)}}}setFormat(e){this._format=e}warning(e){n.assert(this._instance!==null);const t=[];t.push("dispatch exception:");t.push("\nidentity: "+Ice.identityToString(this._current.id,this._instance.toStringMode()));t.push("\nfacet: "+o.escapeString(this._current.facet,"",this._instance.toStringMode()));t.push("\noperation: "+this._current.operation);if(this._connection!==null){try{for(let e=this._connection.getInfo();e;e=e.underlying){if(e instanceof Ice.IPConnectionInfo){t.push("\nremote host: "+e.remoteAddress+" remote port: "+e.remotePort)}}}catch(e){}}if(e.stack){t.push("\n");t.push(e.stack)}this._instance.initializationData().logger.warning(t.join(""))}handleException(t,i){n.assert(this._connection!==null);const s=this._instance.initializationData().properties;if(t instanceof Ice.RequestFailedException){if(t.id===null){t.id=this._current.id}if(t.facet===null){t.facet=this._current.facet}if(t.operation===null||t.operation.length===0){t.operation=this._current.operation}if(s.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>1){this.warning(t)}if(this._response){this._os=new e(this._instance,r.currentProtocolEncoding);this._os.writeBlob(r.replyHdr);this._os.writeInt(this._current.requestId);if(t instanceof Ice.ObjectNotExistException){this._os.writeByte(r.replyObjectNotExist)}else if(t instanceof Ice.FacetNotExistException){this._os.writeByte(r.replyFacetNotExist)}else if(t instanceof Ice.OperationNotExistException){this._os.writeByte(r.replyOperationNotExist)}else{n.assert(false)}t.id._write(this._os);if(t.facet===null||t.facet.length===0){Ice.StringSeqHelper.write(this._os,null)}else{Ice.StringSeqHelper.write(this._os,[t.facet])}this._os.writeString(t.operation);this._connection.sendResponse(this._os)}else{this._connection.sendNoResponse()}}else if(t instanceof Ice.UnknownLocalException){if(s.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0){this.warning(t)}if(this._response){this._os=new e(this._instance,r.currentProtocolEncoding);this._os.writeBlob(r.replyHdr);this._os.writeInt(this._current.requestId);this._os.writeByte(r.replyUnknownLocalException);this._os.writeString(t.unknown);this._connection.sendResponse(this._os)}else{this._connection.sendNoResponse()}}else if(t instanceof Ice.UnknownUserException){if(s.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0){this.warning(t)}if(this._response){this._os=new e(this._instance,r.currentProtocolEncoding);this._os.writeBlob(r.replyHdr);this._os.writeInt(this._current.requestId);this._os.writeByte(r.replyUnknownUserException);this._os.writeString(t.unknown);this._connection.sendResponse(this._os)}else{this._connection.sendNoResponse()}}else if(t instanceof Ice.UnknownException){if(s.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0){this.warning(t)}if(this._response){this._os=new e(this._instance,r.currentProtocolEncoding);this._os.writeBlob(r.replyHdr);this._os.writeInt(this._current.requestId);this._os.writeByte(r.replyUnknownException);this._os.writeString(t.unknown);this._connection.sendResponse(this._os)}else{this._connection.sendNoResponse()}}else if(t instanceof Ice.LocalException){if(s.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0){this.warning(t)}if(this._response){this._os=new e(this._instance,r.currentProtocolEncoding);this._os.writeBlob(r.replyHdr);this._os.writeInt(this._current.requestId);this._os.writeByte(r.replyUnknownLocalException);const n=[t.ice_id()];if(t.stack){n.push("\n");n.push(t.stack)}this._os.writeString(n.join(""));this._connection.sendResponse(this._os)}else{this._connection.sendNoResponse()}}else if(t instanceof Ice.UserException){if(this._response){this._os=new e(this._instance,r.currentProtocolEncoding);this._os.writeBlob(r.replyHdr);this._os.writeInt(this._current.requestId);this._os.writeByte(r.replyUserException);this._os.startEncapsulation(this._current.encoding,this._format);this._os.writeUserException(t);this._os.endEncapsulation();this._connection.sendResponse(this._os)}else{this._connection.sendNoResponse()}}else{if(s.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0){this.warning(t)}if(this._response){this._os=new e(this._instance,r.currentProtocolEncoding);this._os.writeBlob(r.replyHdr);this._os.writeInt(this._current.requestId);this._os.writeByte(r.replyUnknownException);this._os.writeString(t.toString()+(t.stack?"\n"+t.stack:""));this._connection.sendResponse(this._os)}else{this._connection.sendNoResponse()}if(!i){throw new Ice.ServantError(t)}}this._connection=null}invoke(e,t){this._is=t;this._current.id._read(this._is);const s=Ice.StringSeqHelper.read(this._is);if(s.length>0){if(s.length>1){throw new Ice.MarshalException}this._current.facet=s[0]}else{this._current.facet=""}this._current.operation=this._is.readString();this._current.mode=Ice.OperationMode.valueOf(this._is.readByte());this._current.ctx=new i;let r=this._is.readSize();while(r-- >0){this._current.ctx.set(this._is.readString(),this._is.readString())}if(e!==null){this._servant=e.findServant(this._current.id,this._current.facet);if(this._servant===null){this._locator=e.findServantLocator(this._current.id.category);if(this._locator===null&&this._current.id.category.length>0){this._locator=e.findServantLocator("")}if(this._locator!==null){try{this._servant=this._locator.locate(this._current,this._cookie)}catch(e){this.skipReadParams();this.handleException(e,false);return}}}}if(this._servant===null){try{if(e!==null&&e.hasServant(this._current.id)){throw new Ice.FacetNotExistException(this._current.id,this._current.facet,this._current.operation)}else{throw new Ice.ObjectNotExistException(this._current.id,this._current.facet,this._current.operation)}}catch(e){this.skipReadParams();this.handleException(e,false);return}}try{n.assert(this._servant!==null);const e=this._servant._iceDispatch(this,this._current);if(e!==null){e.then(()=>this.completed(null,true),e=>this.completed(e,true));return}n.assert(!this._response||this._os!==null);this.completed(null,false)}catch(e){this.completed(e,false)}}startReadParams(){this._current.encoding=this._is.startEncapsulation();return this._is}endReadParams(){this._is.endEncapsulation()}readEmptyParams(){this._current.encoding=this._is.skipEmptyEncapsulation()}readParamEncaps(){this._current.encoding=new Ice.EncodingVersion;return this._is.readEncapsulation(this._current.encoding)}skipReadParams(){this._current.encoding=this._is.skipEncapsulation()}completed(e,t){try{if(this._locator!==null){n.assert(this._locator!==null&&this._servant!==null);try{this._locator.finished(this._current,this._servant,this._cookie.value)}catch(e){this.handleException(e,t);return}}n.assert(this._connection!==null);if(e!==null){this.handleException(e,t)}else if(this._response){this._connection.sendResponse(this._os)}else{this._connection.sendNoResponse()}}catch(e){if(e instanceof Ice.LocalException){this._connection.invokeException(e,1)}else{throw e}}this._connection=null}}Ice.IncomingAsync=c})();(function(){const e=Ice.Debug;const t=Ice.HashUtil;const n=Ice.StringUtil;const i=typeof Ice.TcpTransceiver!=="undefined"?Ice.TcpTransceiver:null;class s extends Ice.IPEndpointI{constructor(e,t,n,i,s,r,o){super(e,t,n,i,r);this._timeout=s===undefined?e?e.defaultTimeout():undefined:s;this._compress=o===undefined?false:o}getInfo(){const e=new Ice.TCPEndpointInfo;this.fillEndpointInfo(e);return this.secure()?new IceSSL.EndpointInfo(e,e.timeout,e.compress):e}timeout(){return this._timeout}changeTimeout(e){if(e===this._timeout){return this}else{return new s(this._instance,this._host,this._port,this._sourceAddr,e,this._connectionId,this._compress)}}changeConnectionId(e){if(e===this._connectionId){return this}else{return new s(this._instance,this._host,this._port,this._sourceAddr,this._timeout,e,this._compress)}}compress(){return this._compress}changeCompress(e){if(e===this._compress){return this}else{return new s(this._instance,this._host,this._port,this._sourceAddr,this._timeout,this._connectionId,e)}}datagram(){return false}connectable(){return i!==null&&!this.secure()}connect(){e.assert(!this.secure());return i.createOutgoing(this._instance,this.getAddress(),this._sourceAddr)}options(){let e=super.options();if(this._timeout==-1){e+=" -t infinite"}else{e+=" -t "+this._timeout}if(this._compress){e+=" -z"}return e}compareTo(e){if(this===e){return 0}if(e===null){return 1}if(!(e instanceof s)){return this.type()<e.type()?-1:1}if(this._timeout<e._timeout){return-1}else if(e._timeout<this._timeout){return 1}if(!this._compress&&e._compress){return-1}else if(!e._compress&&this._compress){return 1}return super.compareTo(e)}streamWriteImpl(e){super.streamWriteImpl(e);e.writeInt(this._timeout);e.writeBool(this._compress)}hashInit(e){e=super.hashInit(e);e=t.addNumber(e,this._timeout);e=t.addBoolean(e,this._compress);return e}fillEndpointInfo(e){super.fillEndpointInfo(e);e.timeout=this._timeout;e.compress=this._compress}initWithStream(e){super.initWithStream(e);this._timeout=e.readInt();this._compress=e.readBool()}checkOption(e,t,i){if(super.checkOption(e,t,i)){return true}if(e==="-t"){if(t===null){throw new Ice.EndpointParseException("no argument provided for -t option in endpoint "+i)}if(t=="infinite"){this._timeout=-1}else{let e=false;try{this._timeout=n.toInt(t)}catch(t){e=true}if(e||this._timeout<1){throw new Ice.EndpointParseException("invalid timeout value `"+t+"' in endpoint "+i)}}}else if(e==="-z"){if(t!==null){throw new Ice.EndpointParseException("unexpected argument `"+t+"' provided for -z option in "+i)}this._compress=true}else{return false}return true}createEndpoint(e,t,n){return new s(this._instance,e,t,this._sourceAddr,this._timeout,n,this._compress)}}Ice.TcpEndpointI=s})();(function(){const e=Ice.HashMap;const t=Ice.RouterInfo;const n=Ice.RouterPrx;class i{constructor(){this._table=new e(e.compareEquals)}destroy(){for(const e of this._table.values()){e.destroy()}this._table.clear()}find(e){if(e===null){return null}const i=n.uncheckedCast(e.ice_router(null));let s=this._table.get(i);if(s===undefined){s=new t(i);this._table.set(i,s)}return s}erase(e){let t=null;if(e!==null){const i=n.uncheckedCast(e.ice_router(null));t=this._table.get(i);this._table.delete(i)}return t}}Ice.RouterManager=i})();(function(){const e=Ice.HashUtil;const t=Ice.EndpointI;class n extends t{constructor(e,t,n){super();this._instance=e;this._delegate=t;this._resource=n||"/"}getInfo(){const e=new Ice.WSEndpointInfo;e.type=(()=>this.type());e.datagram=(()=>this.datagram());e.secure=(()=>this.secure());e.resource=this._resource;e.underlying=this._delegate.getInfo();e.timeout=e.underlying.timeout;e.compress=e.underlying.compress;return e}type(){return this._delegate.type()}protocol(){return this._delegate.protocol()}streamWrite(e){e.startEncapsulation();this._delegate.streamWriteImpl(e);e.writeString(this._resource);e.endEncapsulation()}timeout(){return this._delegate.timeout()}changeTimeout(e){if(e===this._delegate.timeout()){return this}else{return new n(this._instance,this._delegate.changeTimeout(e),this._resource)}}changeConnectionId(e){if(e===this._delegate.connectionId()){return this}else{return new n(this._instance,this._delegate.changeConnectionId(e),this._resource)}}compress(){return this._delegate.compress()}changeCompress(e){if(e===this._delegate.compress()){return this}else{return new n(this._instance,this._delegate.changeCompress(e),this._resource)}}datagram(){return this._delegate.datagram()}secure(){return this._delegate.secure()}connect(){return Ice.WSTransceiver.createOutgoing(this._instance,this._delegate.secure(),this._delegate.getAddress(),this._resource)}hashCode(){if(this._hashCode===undefined){this._hashCode=this._delegate.hashCode();this._hashCode=e.addString(this._hashCode,this._resource)}return this._hashCode}compareTo(e){if(this===e){return 0}if(e===null){return 1}if(!(e instanceof n)){return this.type()<e.type()?-1:1}const t=this._delegate.compareTo(e._delegate);if(t!==0){return t}if(this._resource!==e._resource){return this._resource<e._resource?-1:1}return 0}options(){let e=this._delegate.options();if(this._resource!==null&&this._resource.length>0){e+=" -r ";e+=this._resource.indexOf(":")!==-1?'"'+this._resource+'"':this._resource}return e}toConnectorString(){return this._delegate.toConnectorString()}initWithStream(e){this._resource=e.readString()}checkOption(e,t,n){if(e==="-r"){if(t===null){throw new Ice.EndpointParseException("no argument provided for -r option in endpoint "+n)}this._resource=t}else{return false}return true}}if(typeof Ice.WSTransceiver!=="undefined"){n.prototype.connectable=function(){return true}}else{n.prototype.connectable=function(){return false}}Ice.WSEndpoint=n})();(function(){const e=Ice.Base64;const t=Ice.Debug;const n=Ice.HashUtil;const i=Ice.StringUtil;const s=Ice.EndpointParseException;class r extends Ice.EndpointI{constructor(e){super();this._rawEncoding=Ice.Encoding_1_0;this._type=e===undefined?-1:e;this._rawBytes=null}streamWrite(e){e.startEncapsulation(this._rawEncoding,Ice.FormatType.DefaultFormat);e.writeBlob(this._rawBytes);e.endEncapsulation()}getInfo(){return new o(null,-1,false,this._rawEncoding,this._rawBytes,this._type)}type(){return this._type}protocol(){return"opaque"}timeout(){return-1}changeTimeout(e){return this}changeConnectionId(e){return this}compress(){return false}changeCompress(e){return this}datagram(){return false}secure(){return false}rawBytes(){return this._rawBytes}transceiver(e){e.value=null;return null}acceptor(e,t){e.value=this;return null}connect(){return null}hashCode(){if(this._hashCode===undefined){let e=5381;e=n.addNumber(e,this._type);e=n.addHashable(e,this._rawEncoding);e=n.addArray(e,this._rawBytes,n.addNumber);this._hashCode=e}return this._hashCode}options(){let t="";t+=" -t "+this._type;t+=" -e "+Ice.encodingVersionToString(this._rawEncoding);t+=" -v "+e.encode(this._rawBytes);return t}equals(e){if(!(e instanceof r)){return false}if(this===e){return true}if(this._type!==e._type){return false}if(!this._rawEncoding.equals(e._rawEncoding)){return false}if(this._rawBytes.length!==e._rawBytes.length){return false}for(let t=0;t<this._rawBytes.length;t++){if(this._rawBytes[t]!==e._rawBytes[t]){return false}}return true}compareTo(e){if(this===e){return 0}if(e===null){return 1}if(!(e instanceof r)){return this.type()<e.type()?-1:1}if(this._type<e._type){return-1}else if(e._type<this._type){return 1}if(this._rawEncoding.major<e._rawEncoding.major){return-1}else if(e._rawEncoding.major<this._rawEncoding.major){return 1}if(this._rawEncoding.minor<e._rawEncoding.minor){return-1}else if(e._rawEncoding.minor<this._rawEncoding.minor){return 1}if(this._rawBytes.length<e._rawBytes.length){return-1}else if(e._rawBytes.length<this._rawBytes.length){return 1}for(let t=0;t<this._rawBytes.length;t++){if(this._rawBytes[t]<e._rawBytes[t]){return-1}else if(e._rawBytes[t]<this._rawBytes[t]){return 1}}return 0}checkOption(t,n,r){switch(t.charAt(1)){case"t":{if(this._type>-1){throw new s("multiple -t options in endpoint "+r)}if(n===null){throw new s("no argument provided for -t option in endpoint "+r)}let e;try{e=i.toInt(n)}catch(e){throw new s("invalid type value `"+n+"' in endpoint "+r)}if(e<0||e>65535){throw new s("type value `"+n+"' out of range in endpoint "+r)}this._type=e;return true}case"v":{if(this._rawBytes){throw new s("multiple -v options in endpoint "+r)}if(n===null||n.length===0){throw new s("no argument provided for -v option in endpoint "+r)}for(let t=0;t<n.length;++t){if(!e.isBase64(n.charAt(t))){throw new s("invalid base64 character `"+n.charAt(t)+"' (ordinal "+n.charCodeAt(t)+") in endpoint "+r)}}this._rawBytes=e.decode(n);return true}case"e":{if(n===null){throw new s("no argument provided for -e option in endpoint "+r)}try{this._rawEncoding=Ice.stringToEncodingVersion(n)}catch(e){throw new s("invalid encoding version `"+n+"' in endpoint "+r+":\n"+e.str)}return true}default:{return false}}}initWithOptions(e){super.initWithOptions(e);t.assert(this._rawEncoding);if(this._type<0){throw new s("no -t option in endpoint `"+this+"'")}if(this._rawBytes===null||this._rawBytes.length===0){throw new s("no -v option in endpoint `"+this+"'")}}initWithStream(e){this._rawEncoding=e.getEncoding();this._rawBytes=e.readBlob(e.getEncapsulationSize())}}class o extends Ice.OpaqueEndpointInfo{constructor(e,t,n,i,s){super(-1,false,n,i);this._type=s}type(){return this._type}datagram(){return false}secure(){return false}}Ice.OpaqueEndpointI=r})();(function(){const e=Ice.Debug;class t{constructor(e,t,n,i){if(e===undefined){this.timeout=60*1e3;this.heartbeat=Ice.ACMHeartbeat.HeartbeatOnDispatch;this.close=Ice.ACMClose.CloseOnInvocationAndIdle;return}let s;if((n=="Ice.ACM.Client"||n=="Ice.ACM.Server")&&e.getProperty(n+".Timeout").length===0){s=n}else{s=n+".Timeout"}this.timeout=e.getPropertyAsIntWithDefault(s,i.timeout/1e3)*1e3;if(this.timeout<0){t.warning("invalid value for property `"+s+"', default value will be used instead");this.timeout=i.timeout}const r=e.getPropertyAsIntWithDefault(n+".Heartbeat",i.heartbeat.value);if(r>=0&&r<=Ice.ACMHeartbeat.maxValue){this.heartbeat=Ice.ACMHeartbeat.valueOf(r)}else{t.warning("invalid value for property `"+n+".Heartbeat"+"', default value will be used instead");this.heartbeat=i.heartbeat}const o=e.getPropertyAsIntWithDefault(n+".Close",i.close.value);if(o>=0&&o<=Ice.ACMClose.maxValue){this.close=Ice.ACMClose.valueOf(o)}else{t.warning("invalid value for property `"+n+".Close"+"', default value will be used instead");this.close=i.close}}}class n{constructor(e,t){this._instance=e;this._config=t;this._reapedConnections=[];this._connections=[]}destroy(){if(this._instance===null){return}this._instance=null}add(e){if(this._config.timeout===0){return}this._connections.push(e);if(this._connections.length==1){this._timerToken=this._instance.timer().scheduleRepeated(()=>this.runTimerTask(),this._config.timeout/2)}}remove(t){if(this._config.timeout===0){return}const n=this._connections.indexOf(t);e.assert(n>=0);this._connections.splice(n,1);if(this._connections.length===0){this._instance.timer().cancel(this._timerToken)}}reap(e){this._reapedConnections.push(e)}acm(n,s,r){e.assert(this._instance!==null);const o=new t;o.timeout=this._config.timeout;o.close=this._config.close;o.heartbeat=this._config.heartbeat;if(n!==undefined){o.timeout=n*1e3}if(s!==undefined){o.close=s}if(r!==undefined){o.heartbeat=r}return new i(this,this._instance.timer(),o)}getACM(){return new Ice.ACM(this._config.timeout/1e3,this._config.close,this._config.heartbeat)}swapReapedConnections(){if(this._reapedConnections.length===0){return null}const e=this._reapedConnections;this._reapedConnections=[];return e}runTimerTask(){if(this._instance===null){this._connections=null;return}const e=Date.now();this._connections.forEach(t=>{try{t.monitor(e,this._config)}catch(e){this.handleException(e)}})}handleException(e){if(this._instance===null){return}this._instance.initializationData().logger.error("exception in connection monitor:\n"+e)}}class i{constructor(e,t,n){this._parent=e;this._timer=t;this._config=n;this._connection=null}add(t){e.assert(this._connection===null);this._connection=t;if(this._config.timeout>0){this._timerToken=this._timer.scheduleRepeated(()=>this.runTimerTask(),this._config.timeout/2)}}remove(t){e.assert(this._connection===t);this._connection=null;if(this._config.timeout>0){this._timer.cancel(this._timerToken)}}reap(e){this._parent.reap(e)}acm(e,t,n){return this._parent.acm(e,t,n)}getACM(){return new Ice.ACM(this._config.timeout/1e3,this._config.close,this._config.heartbeat)}runTimerTask(){try{this._connection.monitor(Date.now(),this._config)}catch(e){this._parent.handleException(e)}}}Ice.FactoryACMMonitor=n;Ice.ACMConfig=t})();(function(){const e=Ice.Context;const t=Ice.InitializationException;class n{constructor(){this._context=new e}getContext(){return new e(this._context)}setContext(t){if(t!==null&&t.size>0){this._context=new e(t)}else{this._context.clear()}}containsKey(e){if(e===null){e=""}return this._context.has(e)}get(e){if(e===null){e=""}let t=this._context.get(e);if(t===null){t=""}return t}put(e,t){if(e===null){e=""}if(t===null){t=""}let n=this._context.get(e);if(n===null){n=""}this._context.set(e,t);return n}remove(e){if(e===null){e=""}let t=this._context.get(e);this._context.delete(e);if(t===null){t=""}return t}write(t,n){if(t.size===0){Ice.ContextHelper.write(n,this._context)}else{let i=null;if(this._context.size===0){i=t}else{i=new e(this._context);for(const[e,n]of t){i.set(e,n)}}Ice.ContextHelper.write(n,i)}}static create(e){if(e.length===0||e==="None"){return null}else if(e==="Shared"){return new n}else{throw new t("'"+e+"' is not a valid value for Ice.ImplicitContext")}}}Ice.ImplicitContextI=n})();(function(){const e=Ice.ArrayUtil;const t=Ice.Debug;const n=Ice.BatchRequestQueue;const i=Ice.HashUtil;const s=Ice.OpaqueEndpointI;const r=Ice.ReferenceMode;const o=Ice.StringUtil;const c=Ice.StringSeqHelper;const a=Ice.EndpointSelectionType;const l=Ice.Identity;const h=Ice.RouterPrx;const u=Ice.LocatorPrx;const d=Ice.PropertyNames;const p=Ice.ConnectionRequestHandler;const _=Ice.MapUtil;const f=["EndpointSelection","ConnectionCached","PreferSecure","EncodingVersion","LocatorCacheTimeout","InvocationTimeout","Locator","Router","CollocationOptimized"];class g{constructor(e,t){this._instance=e;this._communicator=t;this._defaultRouter=null;this._defaultLocator=null}create(e,t,n,i){if(e.name.length===0&&e.category.length===0){return null}return this.createImpl(e,t,n.getMode(),n.getSecure(),n.getProtocol(),n.getEncoding(),i,null,null)}createWithAdapterId(e,t,n,i){if(e.name.length===0&&e.category.length===0){return null}return this.createImpl(e,t,n.getMode(),n.getSecure(),n.getProtocol(),n.getEncoding(),null,i,null)}createFixed(e,t){if(e.name.length===0&&e.category.length===0){return null}return new m(this._instance,this._communicator,e,"",t.endpoint().datagram()?r.ModeDatagram:r.ModeTwoway,t.endpoint().secure(),Ice.Protocol_1_0,this._instance.defaultsAndOverrides().defaultEncoding,t,-1,null)}copy(e){const t=e.getIdentity();if(t.name.length===0&&t.category.length===0){return null}return e.clone()}createFromString(e,n){if(e===undefined||e===null||e.length===0){return null}const i=" \t\n\r";let s=0;let c=o.findFirstNotOf(e,i,s);if(c==-1){throw new Ice.ProxyParseException("no non-whitespace characters found in `"+e+"'")}let a=null;s=o.checkQuote(e,c);if(s===-1){throw new Ice.ProxyParseException("mismatched quotes around identity in `"+e+"'")}else if(s===0){s=o.findFirstOf(e,i+":@",c);if(s===-1){s=e.length}a=e.substring(c,s)}else{c++;a=e.substring(c,s);s++}if(c===s){throw new Ice.ProxyParseException("no identity in `"+e+"'")}const l=Ice.stringToIdentity(a);if(l.name.length===0){if(l.category.length>0){throw new Ice.IllegalIdentityException(l)}else if(o.findFirstNotOf(e,i,s)!=-1){throw new Ice.ProxyParseException("invalid characters after identity in `"+e+"'")}else{return null}}let h="";let u=r.ModeTwoway;let d=false;let p=this._instance.defaultsAndOverrides().defaultEncoding;let _=Ice.Protocol_1_0;let f="";while(true){c=o.findFirstNotOf(e,i,s);if(c===-1){break}if(e.charAt(c)==":"||e.charAt(c)=="@"){break}s=o.findFirstOf(e,i+":@",c);if(s==-1){s=e.length}if(c==s){break}const t=e.substring(c,s);if(t.length!=2||t.charAt(0)!="-"){throw new Ice.ProxyParseException("expected a proxy option but found `"+t+"' in `"+e+"'")}let n=null;const a=o.findFirstNotOf(e,i,s);if(a!=-1){const r=e.charAt(a);if(r!="@"&&r!=":"&&r!="-"){c=a;s=o.checkQuote(e,c);if(s==-1){throw new Ice.ProxyParseException("mismatched quotes around value for "+t+" option in `"+e+"'")}else if(s===0){s=o.findFirstOf(e,i+":@",c);if(s===-1){s=e.length}n=e.substring(c,s)}else{c++;n=e.substring(c,s);s++}}}switch(t.charAt(1)){case"f":{if(n===null){throw new Ice.ProxyParseException("no argument provided for -f option in `"+e+"'")}try{h=o.unescapeString(n,0,n.length)}catch(t){throw new Ice.ProxyParseException("invalid facet in `"+e+"': "+t.message)}break}case"t":{if(n!==null){throw new Ice.ProxyParseException("unexpected argument `"+n+"' provided for -t option in `"+e+"'")}u=r.ModeTwoway;break}case"o":{if(n!==null){throw new Ice.ProxyParseException("unexpected argument `"+n+"' provided for -o option in `"+e+"'")}u=r.ModeOneway;break}case"O":{if(n!==null){throw new Ice.ProxyParseException("unexpected argument `"+n+"' provided for -O option in `"+e+"'")}u=r.ModeBatchOneway;break}case"d":{if(n!==null){throw new Ice.ProxyParseException("unexpected argument `"+n+"' provided for -d option in `"+e+"'")}u=r.ModeDatagram;break}case"D":{if(n!==null){throw new Ice.ProxyParseException("unexpected argument `"+n+"' provided for -D option in `"+e+"'")}u=r.ModeBatchDatagram;break}case"s":{if(n!==null){throw new Ice.ProxyParseException("unexpected argument `"+n+"' provided for -s option in `"+e+"'")}d=true;break}case"e":{if(n===null){throw new Ice.ProxyParseException("no argument provided for -e option in `"+e+"'")}try{p=Ice.stringToEncodingVersion(n)}catch(t){throw new Ice.ProxyParseException("invalid encoding version `"+n+"' in `"+e+"':\n"+t.str)}break}case"p":{if(n===null){throw new Ice.ProxyParseException("no argument provided for -p option in `"+e+"'")}try{_=Ice.stringToProtocolVersion(n)}catch(t){throw new Ice.ProxyParseException("invalid protocol version `"+n+"' in `"+e+"':\n"+t.str)}break}default:{throw new Ice.ProxyParseException("unknown option `"+t+"' in `"+e+"'")}}}if(c===-1){return this.createImpl(l,h,u,d,_,p,null,null,n)}const g=[];if(e.charAt(c)==":"){const i=[];s=c;while(s<e.length&&e.charAt(s)==":"){c=s+1;s=c;while(true){s=e.indexOf(":",s);if(s==-1){s=e.length;break}else{let t=false;let n=c;while(true){n=e.indexOf('"',n);if(n==-1||s<n){break}else{n=e.indexOf('"',++n);if(n==-1){break}else if(s<n){t=true;break}++n}}if(!t){break}++s}}const t=e.substring(c,s);const n=this._instance.endpointFactoryManager().create(t,false);if(n!==null){g.push(n)}else{i.push(t)}}if(g.length===0){t.assert(i.length>0);throw new Ice.EndpointParseException("invalid endpoint `"+i[0]+"' in `"+e+"'")}else if(i.length!==0&&this._instance.initializationData().properties.getPropertyAsIntWithDefault("Ice.Warn.Endpoints",1)>0){const e=[];e.push("Proxy contains unknown endpoints:");i.forEach(t=>{e.push(" `");e.push(t);e.push("'")});this._instance.initializationData().logger.warning(e.join(""))}return this.createImpl(l,h,u,d,_,p,g,null,n)}else if(e.charAt(c)=="@"){c=o.findFirstNotOf(e,i,c+1);if(c==-1){throw new Ice.ProxyParseException("missing adapter id in `"+e+"'")}let t=null;s=o.checkQuote(e,c);if(s===-1){throw new Ice.ProxyParseException("mismatched quotes around adapter id in `"+e+"'")}else if(s===0){s=o.findFirstOf(e,i,c);if(s===-1){s=e.length}t=e.substring(c,s)}else{c++;t=e.substring(c,s);s++}if(s!==e.length&&o.findFirstNotOf(e,i,s)!==-1){throw new Ice.ProxyParseException("invalid trailing characters after `"+e.substring(0,s+1)+"' in `"+e+"'")}try{f=o.unescapeString(t,0,t.length)}catch(t){throw new Ice.ProxyParseException("invalid adapter id in `"+e+"': "+t.message)}if(f.length===0){throw new Ice.ProxyParseException("empty adapter id in `"+e+"'")}return this.createImpl(l,h,u,d,_,p,null,f,n)}throw new Ice.ProxyParseException("malformed proxy `"+e+"'")}createFromStream(e,t){if(e.name.length===0&&e.category.length===0){return null}const n=c.read(t);let i;if(n.length>0){if(n.length>1){throw new Ice.ProxyUnmarshalException}i=n[0]}else{i=""}const s=t.readByte();if(s<0||s>r.ModeLast){throw new Ice.ProxyUnmarshalException}const o=t.readBool();let a=null;let l=null;if(!t.getEncoding().equals(Ice.Encoding_1_0)){a=new Ice.ProtocolVersion;a._read(t);l=new Ice.EncodingVersion;l._read(t)}else{a=Ice.Protocol_1_0;l=Ice.Encoding_1_0}let h=null;let u=null;const d=t.readSize();if(d>0){h=[];for(let e=0;e<d;e++){h[e]=this._instance.endpointFactoryManager().read(t)}}else{u=t.readString()}return this.createImpl(e,i,s,o,a,l,h,u,null)}setDefaultRouter(e){if(this._defaultRouter===null?e===null:this._defaultRouter.equals(e)){return this}const t=new g(this._instance,this._communicator);t._defaultLocator=this._defaultLocator;t._defaultRouter=e;return t}getDefaultRouter(){return this._defaultRouter}setDefaultLocator(e){if(this._defaultLocator===null?e===null:this._defaultLocator.equals(e)){return this}const t=new g(this._instance,this._communicator);t._defaultRouter=this._defaultRouter;t._defaultLocator=e;return t}getDefaultLocator(){return this._defaultLocator}checkForUnknownProperties(e){let t=[];for(let t=0;t<d.clPropNames.length;++t){if(e.indexOf(d.clPropNames[t]+".")===0){return}}const n=this._instance.initializationData().properties.getPropertiesForPrefix(e+".");t=t.concat(Array.from(n.keys()).filter(t=>!f.some(n=>t===e+"."+n)));if(t.length>0){const n=[];n.push("found unknown properties for proxy '");n.push(e);n.push("':");t.forEach(e=>n.push("\n    ",e));this._instance.initializationData().logger.warning(n.join(""))}}createImpl(e,t,n,i,s,r,o,c,l){const d=this._instance.defaultsAndOverrides();let p=null;if(this._defaultLocator!==null){if(!this._defaultLocator._getReference().getEncoding().equals(r)){p=this._instance.locatorManager().find(this._defaultLocator.ice_encodingVersion(r))}else{p=this._instance.locatorManager().find(this._defaultLocator)}}let _=this._instance.routerManager().find(this._defaultRouter);let f=true;let g=d.defaultPreferSecure;let I=d.defaultEndpointSelection;let m=d.defaultLocatorCacheTimeout;let y=d.defaultInvocationTimeout;if(l!==null&&l.length>0){const e=this._instance.initializationData().properties;if(e.getPropertyAsIntWithDefault("Ice.Warn.UnknownProperties",1)>0){this.checkForUnknownProperties(l)}let t=l+".Locator";const n=u.uncheckedCast(this._communicator.propertyToProxy(t));if(n!==null){if(!n._getReference().getEncoding().equals(r)){p=this._instance.locatorManager().find(n.ice_encodingVersion(r))}else{p=this._instance.locatorManager().find(n)}}t=l+".Router";const i=h.uncheckedCast(this._communicator.propertyToProxy(t));if(i!==null){const n=".Router";if(l.lastIndexOf(n)==l.length-n.length){this._instance.initializationData().logger.warning("`"+t+"="+e.getProperty(t)+"': cannot set a router on a router; setting ignored")}else{_=this._instance.routerManager().find(i)}}t=l+".ConnectionCached";f=e.getPropertyAsIntWithDefault(t,f?1:0)>0;t=l+".PreferSecure";g=e.getPropertyAsIntWithDefault(t,g?1:0)>0;t=l+".EndpointSelection";if(e.getProperty(t).length>0){const n=e.getProperty(t);if(n=="Random"){I=a.Random}else if(n=="Ordered"){I=a.Ordered}else{throw new Ice.EndpointSelectionTypeParseException("illegal value `"+n+"'; expected `Random' or `Ordered'")}}t=l+".LocatorCacheTimeout";let s=e.getProperty(t);if(s.length!==0){m=e.getPropertyAsIntWithDefault(t,m);if(m<-1){m=-1;this._instance.initializationData().logger.warning("invalid value for"+t+"`"+e.getProperty(t)+"': defaulting to -1")}}t=l+".InvocationTimeout";s=e.getProperty(t);if(s.length!==0){y=e.getPropertyAsIntWithDefault(t,y);if(y<1&&y!==-1){y=-1;this._instance.initializationData().logger.warning("invalid value for"+t+"`"+e.getProperty(t)+"': defaulting to -1")}}}return new w(this._instance,this._communicator,e,t,n,i,s,r,o,c,p,_,f,g,I,m,y)}}Ice.ReferenceFactory=g;class I{constructor(e,n,i,s,r,o,c,a,l,h){t.assert(i===undefined||i.name!==null);t.assert(i===undefined||i.category!==null);t.assert(s===undefined||s!==null);this._instance=e;this._communicator=n;this._mode=r;this._secure=o;this._identity=i;this._context=h===undefined?I._emptyContext:h;this._facet=s;this._protocol=c;this._encoding=a;this._invocationTimeout=l;this._hashInitialized=false}getMode(){return this._mode}getSecure(){return this._secure}getProtocol(){return this._protocol}getEncoding(){return this._encoding}getIdentity(){return this._identity}getFacet(){return this._facet}getInstance(){return this._instance}getContext(){return this._context}getInvocationTimeout(){return this._invocationTimeout}getCommunicator(){return this._communicator}getEndpoints(){t.assert(false);return null}getAdapterId(){t.assert(false);return""}getRouterInfo(){t.assert(false);return null}getLocatorInfo(){t.assert(false);return null}getCacheConnection(){t.assert(false);return false}getPreferSecure(){t.assert(false);return false}getEndpointSelection(){t.assert(false);return null}getLocatorCacheTimeout(){t.assert(false);return 0}getConnectionId(){t.assert(false);return""}getTimeout(){t.assert(false);return""}changeContext(e){if(e===undefined||e===null){e=I._emptyContext}const t=this._instance.referenceFactory().copy(this);if(e.size===0){t._context=I._emptyContext}else{t._context=new Map(e)}return t}changeMode(e){if(e===this._mode){return this}const t=this._instance.referenceFactory().copy(this);t._mode=e;return t}changeSecure(e){if(e===this._secure){return this}const t=this._instance.referenceFactory().copy(this);t._secure=e;return t}changeIdentity(e){if(e.equals(this._identity)){return this}const t=this._instance.referenceFactory().copy(this);t._identity=new l(e.name,e.category);return t}changeFacet(e){if(e===this._facet){return this}const t=this._instance.referenceFactory().copy(this);t._facet=e;return t}changeInvocationTimeout(e){if(e===this._invocationTimeout){return this}const t=this._instance.referenceFactory().copy(this);t._invocationTimeout=e;return t}changeEncoding(e){if(e.equals(this._encoding)){return this}const t=this._instance.referenceFactory().copy(this);t._encoding=e;return t}changeAdapterId(e){t.assert(false);return null}changeEndpoints(e){t.assert(false);return null}changeLocator(e){t.assert(false);return null}changeRouter(e){t.assert(false);return null}changeCacheConnection(e){t.assert(false);return null}changePreferSecure(e){t.assert(false);return null}changeEndpointSelection(e){t.assert(false);return null}changeLocatorCacheTimeout(e){t.assert(false);return null}changeTimeout(e){t.assert(false);return null}changeConnectionId(e){t.assert(false);return null}changeConnection(e){t.assert(false);return null}hashCode(){if(this._hashInitialized){return this._hashValue}let e=5381;e=i.addNumber(e,this._mode);e=i.addBoolean(e,this._secure);e=i.addHashable(e,this._identity);if(this._context!==null&&this._context!==undefined){for(const[t,n]of this._context){e=i.addString(e,t);e=i.addString(e,n)}}e=i.addString(e,this._facet);e=i.addHashable(e,this._protocol);e=i.addHashable(e,this._encoding);e=i.addNumber(e,this._invocationTimeout);this._hashValue=e;this._hashInitialized=true;return this._hashValue}isIndirect(){t.assert(false);return false}isWellKnown(){t.assert(false);return false}streamWrite(e){if(this._facet.length===0){e.writeSize(0)}else{e.writeSize(1);e.writeString(this._facet)}e.writeByte(this._mode);e.writeBool(this._secure);if(!e.getEncoding().equals(Ice.Encoding_1_0)){this._protocol._write(e);this._encoding._write(e)}}toString(){const e=[];const t=this._instance.toStringMode();const n=Ice.identityToString(this._identity,t);if(n.search(/[ :@]/)!=-1){e.push('"');e.push(n);e.push('"')}else{e.push(n)}if(this._facet.length>0){e.push(" -f ");const n=o.escapeString(this._facet,"",t);if(n.search(/[ :@]/)!=-1){e.push('"');e.push(n);e.push('"')}else{e.push(n)}}switch(this._mode){case r.ModeTwoway:{e.push(" -t");break}case r.ModeOneway:{e.push(" -o");break}case r.ModeBatchOneway:{e.push(" -O");break}case r.ModeDatagram:{e.push(" -d");break}case r.ModeBatchDatagram:{e.push(" -D");break}}if(this._secure){e.push(" -s")}if(!this._protocol.equals(Ice.Protocol_1_0)){e.push(" -p ");e.push(Ice.protocolVersionToString(this._protocol))}e.push(" -e ");e.push(Ice.encodingVersionToString(this._encoding));return e.join("")}toProperty(e){t.assert(false);return null}getRequestHandler(e){t.assert(false)}getBatchRequestQueue(){t.assert(false)}equals(e){if(this._mode!==e._mode){return false}if(this._secure!==e._secure){return false}if(!this._identity.equals(e._identity)){return false}if(!_.equals(this._context,e._context)){return false}if(this._facet!==e._facet){return false}if(!this._protocol.equals(e._protocol)){return false}if(!this._encoding.equals(e._encoding)){return false}if(this._invocationTimeout!==e._invocationTimeout){return false}return true}clone(){t.assert(false);return null}copyMembers(e){e._context=this._context}}I._emptyContext=new Map;I._emptyEndpoints=[];Ice.Reference=I;class m extends I{constructor(e,t,n,i,s,r,o,c,a,l,h){super(e,t,n,i,s,r,o,c,l,h);this._fixedConnection=a}getEndpoints(){return I._emptyEndpoints}getAdapterId(){return""}getRouterInfo(){return null}getLocatorInfo(){return null}getCacheConnection(){return true}getPreferSecure(){return false}getEndpointSelection(){return a.Random}getLocatorCacheTimeout(){return 0}getConnectionId(){return""}getTimeout(){return undefined}changeAdapterId(e){throw new Ice.FixedProxyException}changeEndpoints(e){throw new Ice.FixedProxyException}changeLocato(e){throw new Ice.FixedProxyException}changeRouter(e){throw new Ice.FixedProxyException}changeCacheConnection(e){throw new Ice.FixedProxyException}changePreferSecure(e){throw new Ice.FixedProxyException}changeEndpointSelection(e){throw new Ice.FixedProxyException}changeLocatorCacheTimeout(e){throw new Ice.FixedProxyException}changeTimeout(e){throw new Ice.FixedProxyException}changeConnectionId(e){throw new Ice.FixedProxyException}changeConnection(e){if(e==this._fixedConnection){return this}const t=this.getInstance().referenceFactory().copy(this);t._fixedConnection=e;return t}isIndirect(){return false}isWellKnown(){return false}streamWrite(e){throw new Ice.FixedProxyException}toProperty(e){throw new Ice.FixedProxyException}clone(){const e=new m(this.getInstance(),this.getCommunicator(),this.getIdentity(),this.getFacet(),this.getMode(),this.getSecure(),this.getProtocol(),this.getEncoding(),this._fixedConnection,this.getInvocationTimeout(),this.getContext());this.copyMembers(e);return e}getRequestHandler(e){switch(this.getMode()){case r.ModeTwoway:case r.ModeOneway:case r.ModeBatchOneway:{if(this._fixedConnection.endpoint().datagram()){throw new Ice.NoEndpointException(this.toString())}break}case r.ModeDatagram:case r.ModeBatchDatagram:{if(!this._fixedConnection.endpoint().datagram()){throw new Ice.NoEndpointException(this.toString())}break}}const t=this.getInstance().defaultsAndOverrides();const n=t.overrideSecure?t.overrideSecureValue:this.getSecure();if(n&&!this._fixedConnection.endpoint().secure()){throw new Ice.NoEndpointException(this.toString())}this._fixedConnection.throwException();return e._setRequestHandler(new p(this,this._fixedConnection))}getBatchRequestQueue(){return this._fixedConnection.getBatchRequestQueue()}equals(e){if(this===e){return true}if(!(e instanceof m)){return false}if(!super.equals(e)){return false}return this._fixedConnection==e._fixedConnection}}Ice.FixedReference=m;class w extends I{constructor(e,n,i,s,r,o,c,a,l,h,u,d,p,_,f,g,m,w){super(e,n,i,s,r,o,c,a,m,w);this._endpoints=l;this._adapterId=h;this._locatorInfo=u;this._routerInfo=d;this._cacheConnection=p;this._preferSecure=_;this._endpointSelection=f;this._locatorCacheTimeout=g;this._overrideTimeout=false;this._timeout=-1;if(this._endpoints===null){this._endpoints=I._emptyEndpoints}if(this._adapterId===null){this._adapterId=""}this._connectionId="";t.assert(this._adapterId.length===0||this._endpoints.length===0)}getEndpoints(){return this._endpoints}getAdapterId(){return this._adapterId}getRouterInfo(){return this._routerInfo}getLocatorInfo(){return this._locatorInfo}getCacheConnection(){return this._cacheConnection}getPreferSecure(){return this._preferSecure}getEndpointSelection(){return this._endpointSelection}getLocatorCacheTimeout(){return this._locatorCacheTimeout}getConnectionId(){return this._connectionId}getTimeout(){return this._overrideTimeout?this._timeout:undefined}changeEncoding(e){const t=super.changeEncoding(e);if(t!==this){if(t._locatorInfo!==null&&!t._locatorInfo.getLocator().ice_getEncodingVersion().equals(e)){t._locatorInfo=this.getInstance().locatorManager().find(t._locatorInfo.getLocator().ice_encodingVersion(e))}}return t}changeAdapterId(e){if(this._adapterId===e){return this}const t=this.getInstance().referenceFactory().copy(this);t._adapterId=e;t._endpoints=I._emptyEndpoints;return t}changeEndpoints(t){if(e.equals(t,this._endpoints,(e,t)=>e.equals(t))){return this}const n=this.getInstance().referenceFactory().copy(this);n._endpoints=t;n._adapterId="";n.applyOverrides(n._endpoints);return n}changeLocator(e){const t=this.getInstance().locatorManager().find(e);if(t!==null&&this._locatorInfo!==null&&t.equals(this._locatorInfo)){return this}const n=this.getInstance().referenceFactory().copy(this);n._locatorInfo=t;return n}changeRouter(e){const t=this.getInstance().routerManager().find(e);if(t!==null&&this._routerInfo!==null&&t.equals(this._routerInfo)){return this}const n=this.getInstance().referenceFactory().copy(this);n._routerInfo=t;return n}changeCacheConnection(e){if(e===this._cacheConnection){return this}const t=this.getInstance().referenceFactory().copy(this);t._cacheConnection=e;return t}changePreferSecure(e){if(e===this._preferSecure){return this}const t=this.getInstance().referenceFactory().copy(this);t._preferSecure=e;return t}changeEndpointSelection(e){if(e===this._endpointSelection){return this}const t=this.getInstance().referenceFactory().copy(this);t._endpointSelection=e;return t}changeLocatorCacheTimeout(e){if(this._locatorCacheTimeout===e){return this}const t=this.getInstance().referenceFactory().copy(this);t._locatorCacheTimeout=e;return t}changeTimeout(e){if(this._overrideTimeout&&this._timeout===e){return this}const t=this.getInstance().referenceFactory().copy(this);t._timeout=e;t._overrideTimeout=true;t._endpoints=this._endpoints.map(t=>t.changeTimeout(e));return t}changeConnectionId(e){if(this._connectionId===e){return this}const t=this.getInstance().referenceFactory().copy(this);t._connectionId=e;t._endpoints=this._endpoints.map(t=>t.changeConnectionId(e));return t}changeConnection(e){return new m(this.getInstance(),this.getCommunicator(),this.getIdentity(),this.getFacet(),this.getMode(),this.getSecure(),this.getProtocol(),this.getEncoding(),e,this.getInvocationTimeout(),this.getContext())}isIndirect(){return this._endpoints.length===0}isWellKnown(){return this._endpoints.length===0&&this._adapterId.length===0}streamWrite(e){super.streamWrite(e);e.writeSize(this._endpoints.length);if(this._endpoints.length>0){t.assert(this._adapterId.length===0);this._endpoints.forEach(t=>{e.writeShort(t.type());t.streamWrite(e)})}else{e.writeString(this._adapterId)}}toString(){const e=[];e.push(super.toString());if(this._endpoints.length>0){this._endpoints.forEach(t=>{const n=t.toString();if(n!==null&&n.length>0){e.push(":");e.push(n)}})}else if(this._adapterId.length>0){e.push(" @ ");const t=o.escapeString(this._adapterId,null,this._instance.toStringMode());if(t.search(/[ :@]/)!=-1){e.push('"');e.push(t);e.push('"')}else{e.push(t)}}return e.join("")}toProperty(e){const t=new Map;t.set(e,this.toString());t.set(e+".CollocationOptimized","0");t.set(e+".ConnectionCached",this._cacheConnection?"1":"0");t.set(e+".PreferSecure",this._preferSecure?"1":"0");t.set(e+".EndpointSelection",this._endpointSelection===a.Random?"Random":"Ordered");t.set(e+".LocatorCacheTimeout",""+this._locatorCacheTimeout);t.set(e+".InvocationTimeout",""+this.getInvocationTimeout());if(this._routerInfo!==null){this._routerInfo.getRouter()._getReference().toProperty(e+".Router").forEach((e,n)=>t.set(n,e))}if(this._locatorInfo!==null){this._locatorInfo.getLocator()._getReference().toProperty(e+".Locator").forEach((e,n)=>t.set(n,e))}return t}hashCode(){if(!this._hashInitialized){super.hashCode();this._hashValue=i.addString(this._hashValue,this._adapterId)}return this._hashValue}equals(t){if(this===t){return true}if(!(t instanceof w)){return false}if(!super.equals(t)){return false}if(this._locatorInfo===null?t._locatorInfo!==null:!this._locatorInfo.equals(t._locatorInfo)){return false}if(this._routerInfo===null?t._routerInfo!==null:!this._routerInfo.equals(t._routerInfo)){return false}if(this._cacheConnection!==t._cacheConnection){return false}if(this._preferSecure!==t._preferSecure){return false}if(this._endpointSelection!==t._endpointSelection){return false}if(this._locatorCacheTimeout!==t._locatorCacheTimeout){return false}if(this._connectionId!==t._connectionId){return false}if(this._overrideTimeout!==t._overrideTimeout){return false}if(this._overrideTimeout&&this._timeout!==t._timeout){return false}if(!e.equals(this._endpoints,t._endpoints,(e,t)=>e.equals(t))){return false}if(this._adapterId!==t._adapterId){return false}return true}getRequestHandler(e){return this._instance.requestHandlerFactory().getRequestHandler(this,e)}getBatchRequestQueue(){return new n(this._instance,this._mode===r.ModeBatchDatagram)}getConnection(){const e=new Ice.Promise;if(this._routerInfo!==null){this._routerInfo.getClientEndpoints().then(t=>{if(t.length>0){this.applyOverrides(t);this.createConnection(t).then(e.resolve,e.reject)}else{this.getConnectionNoRouterInfo(e)}}).catch(e.reject)}else{this.getConnectionNoRouterInfo(e)}return e}getConnectionNoRouterInfo(e){if(this._endpoints.length>0){this.createConnection(this._endpoints).then(e.resolve).catch(e.reject);return}if(this._locatorInfo!==null){this._locatorInfo.getEndpoints(this,null,this._locatorCacheTimeout).then(n=>{const[i,s]=n;if(i.length===0){e.reject(new Ice.NoEndpointException(this.toString()));return}this.applyOverrides(i);this.createConnection(i).then(e.resolve,n=>{if(n instanceof Ice.NoEndpointException){e.reject(n)}else{t.assert(this._locatorInfo!==null);this.getLocatorInfo().clearCache(this);if(s){const t=this.getInstance().traceLevels();if(t.retry>=2){this.getInstance().initializationData().logger.trace(t.retryCat,"connection to cached endpoints failed\n"+"removing endpoints from cache and trying again\n"+n.toString())}this.getConnectionNoRouterInfo(e);return}e.reject(n)}})}).catch(e.reject)}else{e.reject(new Ice.NoEndpointException(this.toString()))}}clone(){const e=new w(this.getInstance(),this.getCommunicator(),this.getIdentity(),this.getFacet(),this.getMode(),this.getSecure(),this.getProtocol(),this.getEncoding(),this._endpoints,this._adapterId,this._locatorInfo,this._routerInfo,this._cacheConnection,this._preferSecure,this._endpointSelection,this._locatorCacheTimeout,this._invocationTimeout);this.copyMembers(e);return e}copyMembers(e){super.copyMembers(e);e._overrideTimeout=this._overrideTimeout;e._timeout=this._timeout;e._connectionId=this._connectionId}applyOverrides(e){for(let t=0;t<e.length;++t){e[t]=e[t].changeConnectionId(this._connectionId);if(this._overrideTimeout){e[t]=e[t].changeTimeout(this._timeout)}}}filterEndpoints(n){let i=n.filter(e=>!(e instanceof s)&&e.connectable());switch(this.getMode()){case r.ModeTwoway:case r.ModeOneway:case r.ModeBatchOneway:{i=i.filter(e=>!e.datagram());break}case r.ModeDatagram:case r.ModeBatchDatagram:{i=i.filter(e=>e.datagram());break}}switch(this.getEndpointSelection()){case a.Random:{e.shuffle(i);break}case a.Ordered:{break}default:{t.assert(false);break}}const o=this.getInstance().defaultsAndOverrides();if(o.overrideSecure?o.overrideSecureValue:this.getSecure()){i=i.filter(e=>e.secure())}else{const e=this.getPreferSecure();const t=(t,n)=>{const i=t.secure();const s=n.secure();if(i&&s||!i&&!s){return 0}else if(!i&&s){return e?1:-1}else{return e?-1:1}};i.sort(t)}return i}createConnection(e){const t=this.filterEndpoints(e);if(t.length===0){return Ice.Promise.reject(new Ice.NoEndpointException(this.toString()))}const n=new Ice.Promise;const i=this.getInstance().outgoingConnectionFactory();if(this.getCacheConnection()||t.length==1){const e=new y(this,null,n);i.create(t,false,this.getEndpointSelection()).then(t=>e.setConnection(t)).catch(t=>e.setException(t))}else{const e=new y(this,t,n);i.create([t[0]],true,this.getEndpointSelection()).then(t=>e.setConnection(t)).catch(t=>e.setException(t))}return n}}Ice.RoutableReference=w;class y{constructor(e,t,n){this.ref=e;this.endpoints=t;this.promise=n;this.i=0;this.exception=null}setConnection(e){if(this.ref.getRouterInfo()!==null&&this.ref.getRouterInfo().getAdapter()!==null){e.setAdapter(this.ref.getRouterInfo().getAdapter())}this.promise.resolve(e)}setException(e){if(this.exception===null){this.exception=e}if(this.endpoints===null||++this.i===this.endpoints.length){this.promise.reject(this.exception);return}this.ref.getInstance().outgoingConnectionFactory().create([this.endpoints[this.i]],this.i!=this.endpoints.length-1,this.ref.getEndpointSelection()).then(e=>this.setConnection(e)).catch(e=>this.setException(e))}}})();(function(){const e=Ice.AsyncStatus;const t=Ice.AsyncResultBase;const n=Ice.InputStream;const i=Ice.OutputStream;const s=Ice.BatchRequestQueue;const r=Ice.ConnectionFlushBatch;const o=Ice.HeartbeatAsync;const c=Ice.Debug;const a=Ice.ExUtil;const l=Ice.HashMap;const h=Ice.IncomingAsync;const u=Ice.RetryException;const d=Ice.Protocol;const p=Ice.SocketOperation;const _=Ice.Timer;const f=Ice.TraceUtil;const g=Ice.ProtocolVersion;const I=Ice.EncodingVersion;const m=Ice.ACM;const w=Ice.ACMClose;const y=Ice.ACMHeartbeat;const x=Ice.ConnectionClose;const S=0;const E=1;const b=2;const v=3;const C=4;const M=5;const P=6;class k{constructor(e){this.stream=new n(e,d.currentProtocolEncoding);this.invokeNum=0;this.requestId=0;this.servantManager=null;this.adapter=null;this.outAsync=null;this.heartbeatCallback=null}}class A{constructor(e,t,r,o,c,a,h){this._communicator=e;this._instance=t;this._monitor=r;this._transceiver=o;this._desc=o.toString();this._type=o.type();this._endpoint=c;this._incoming=a;this._adapter=h;const u=t.initializationData();this._logger=u.logger;this._traceLevels=t.traceLevels();this._timer=t.timer();this._writeTimeoutId=0;this._writeTimeoutScheduled=false;this._readTimeoutId=0;this._readTimeoutScheduled=false;this._hasMoreData={value:false};this._warn=u.properties.getPropertyAsInt("Ice.Warn.Connections")>0;this._warnUdp=t.initializationData().properties.getPropertyAsInt("Ice.Warn.Datagrams")>0;this._acmLastActivity=this._monitor!==null&&this._monitor.getACM().timeout>0?Date.now():-1;this._nextRequestId=1;this._messageSizeMax=h?h.messageSizeMax():t.messageSizeMax();this._batchRequestQueue=new s(t,c.datagram());this._sendStreams=[];this._readStream=new n(t,d.currentProtocolEncoding);this._readHeader=false;this._writeStream=new i(t,d.currentProtocolEncoding);this._readStreamPos=-1;this._writeStreamPos=-1;this._dispatchCount=0;this._state=S;this._shutdownInitiated=false;this._initialized=false;this._validated=false;this._readProtocol=new g;this._readProtocolEncoding=new I;this._asyncRequests=new l;this._exception=null;this._startPromise=null;this._closePromises=[];this._finishedPromises=[];if(this._adapter!==null){this._servantManager=this._adapter.getServantManager()}else{this._servantManager=null}this._closeCallback=null;this._heartbeatCallback=null}start(){c.assert(this._startPromise===null);try{if(this._state>=M){c.assert(this._exception!==null);return Ice.Promise.reject(this._exception)}this._startPromise=new Ice.Promise;this._transceiver.setCallbacks(()=>{this.message(p.Write)},()=>{this.message(p.Read)},()=>{this.message(p.Write)});this.initialize()}catch(e){const t=this._startPromise;this.exception(e);return t}return this._startPromise}activate(){if(this._state<=E){return}if(this._acmLastActivity>0){this._acmLastActivity=Date.now()}this.setState(b)}hold(){if(this._state<=E){return}this.setState(v)}destroy(e){switch(e){case A.ObjectAdapterDeactivated:{this.setState(C,new Ice.ObjectAdapterDeactivatedException);break}case A.CommunicatorDestroyed:{this.setState(C,new Ice.CommunicatorDestroyedException);break}}}close(e){const n=new t(this._communicator,"close",this,null,null);if(e==x.Forcefully){this.setState(M,new Ice.ConnectionManuallyClosedException(false));n.resolve()}else if(e==x.Gracefully){this.setState(C,new Ice.ConnectionManuallyClosedException(true));n.resolve()}else{c.assert(e==x.GracefullyWithWait);this._closePromises.push(n);this.checkClose()}return n}checkClose(){if(this._asyncRequests.size===0&&this._closePromises.length>0){_.setImmediate(()=>{this.setState(C,new Ice.ConnectionManuallyClosedException(true));this._closePromises.forEach(e=>e.resolve());this._closePromises=[]})}}isActiveOrHolding(){return this._state>E&&this._state<C}isFinished(){if(this._state!==P||this._dispatchCount!==0){return false}c.assert(this._state===P);return true}throwException(){if(this._exception!==null){c.assert(this._state>=C);throw this._exception}}waitUntilFinished(){const e=new Ice.Promise;this._finishedPromises.push(e);this.checkState();return e}monitor(e,t){if(this._state!==b){return}if(t.heartbeat==Ice.ACMHeartbeat.HeartbeatAlways||t.heartbeat!=Ice.ACMHeartbeat.HeartbeatOff&&this._writeStream.isEmpty()&&e>=this._acmLastActivity+t.timeout/4){if(t.heartbeat!=Ice.ACMHeartbeat.HeartbeatOnDispatch||this._dispatchCount>0){this.sendHeartbeatNow()}}if(this._readStream.size>d.headerSize||!this._writeStream.isEmpty()){return}if(t.close!=Ice.ACMClose.CloseOff&&e>=this._acmLastActivity+t.timeout){if(t.close==Ice.ACMClose.CloseOnIdleForceful||t.close!=Ice.ACMClose.CloseOnIdle&&this._asyncRequests.size>0){this.setState(M,new Ice.ConnectionTimeoutException)}else if(t.close!=Ice.ACMClose.CloseOnInvocation&&this._dispatchCount===0&&this._batchRequestQueue.isEmpty()&&this._asyncRequests.size===0){this.setState(C,new Ice.ConnectionTimeoutException)}}}sendAsyncRequest(e,t,n){let i=0;const s=e.getOs();if(this._exception!==null){throw new u(this._exception)}c.assert(this._state>E);c.assert(this._state<C);this._transceiver.checkSendSize(s);e.cancelable(this);if(t){i=this._nextRequestId++;if(i<=0){this._nextRequestId=1;i=this._nextRequestId++}s.pos=d.headerSize;s.writeInt(i)}else if(n>0){s.pos=d.headerSize;s.writeInt(n)}let r;try{r=this.sendMessage(O.create(e,e.getOs(),i))}catch(e){if(e instanceof Ice.LocalException){this.setState(M,e);c.assert(this._exception!==null);throw this._exception}else{throw e}}if(t){this._asyncRequests.set(i,e)}return r}getBatchRequestQueue(){return this._batchRequestQueue}flushBatchRequests(){const e=new r(this,this._communicator,"flushBatchRequests");e.invoke();return e}setCloseCallback(e){if(this._state>=M){if(e!==null){_.setImmediate(()=>{try{e(this)}catch(e){this._logger.error("connection callback exception:\n"+e+"\n"+this._desc)}})}}else{this._closeCallback=e}}setHeartbeatCallback(e){if(this._state>=M){return}this._heartbeatCallback=e}heartbeat(){const e=new o(this,this._communicator);e.invoke();return e}setACM(e,t,n){if(e!==undefined&&e<0){throw new Error("invalid negative ACM timeout value")}if(this._monitor===null||this._state>=M){return}if(this._state==b){this._monitor.remove(this)}this._monitor=this._monitor.acm(e,t,n);if(this._state==b){this._monitor.add(this)}if(this._monitor.getACM().timeout<=0){this._acmLastActivity=-1}else if(this._state==b&&this._acmLastActivity==-1){this._acmLastActivity=Date.now()}}getACM(){return this._monitor!==null?this._monitor.getACM():new m(0,w.CloseOff,y.HeartbeatOff)}asyncRequestCanceled(e,t){for(let n=0;n<this._sendStreams.length;n++){const i=this._sendStreams[n];if(i.outAsync===e){if(i.requestId>0){this._asyncRequests.delete(i.requestId)}i.canceled();if(n!==0){this._sendStreams.splice(n,1)}e.completedEx(t);this.checkClose();return}}if(e instanceof Ice.OutgoingAsync){for(const[n,i]of this._asyncRequests){if(i===e){this._asyncRequests.delete(n);e.completedEx(t);this.checkClose();return}}}}sendResponse(e){c.assert(this._state>E);try{if(--this._dispatchCount===0){if(this._state===P){this.reap()}this.checkState()}if(this._state>=M){c.assert(this._exception!==null);throw this._exception}this.sendMessage(O.createForStream(e,true));if(this._state===C&&this._dispatchCount===0){this.initiateShutdown()}}catch(e){if(e instanceof Ice.LocalException){this.setState(M,e)}else{throw e}}}sendNoResponse(){c.assert(this._state>E);try{if(--this._dispatchCount===0){if(this._state===P){this.reap()}this.checkState()}if(this._state>=M){c.assert(this._exception!==null);throw this._exception}if(this._state===C&&this._dispatchCount===0){this.initiateShutdown()}}catch(e){if(e instanceof Ice.LocalException){this.setState(M,e)}else{throw e}}}endpoint(){return this._endpoint}setAdapter(e){if(e!==null){e.checkForDeactivation();if(this._state<=E||this._state>=C){return}this._adapter=e;this._servantManager=e.getServantManager()}else{if(this._state<=E||this._state>=C){return}this._adapter=null;this._servantManager=null}}getAdapter(){return this._adapter}getEndpoint(){return this._endpoint}createProxy(e){return this._instance.proxyFactory().referenceToProxy(this._instance.referenceFactory().createFixed(e,this))}message(e){if(this._state>=M){return}this.unscheduleTimeout(e);this._hasMoreData.value=(e&p.Read)!==0;let t=null;try{if((e&p.Write)!==0&&this._writeStream.buffer.remaining>0){if(!this.write(this._writeStream.buffer)){c.assert(!this._writeStream.isEmpty());this.scheduleTimeout(p.Write);return}c.assert(this._writeStream.buffer.remaining===0)}if((e&p.Read)!==0&&!this._readStream.isEmpty()){if(this._readHeader){if(!this.read(this._readStream.buffer)){return}c.assert(this._readStream.buffer.remaining===0);this._readHeader=false;const e=this._readStream.pos;if(e<d.headerSize){throw new Ice.IllegalMessageSizeException}this._readStream.pos=0;const t=this._readStream.readByte();const n=this._readStream.readByte();const i=this._readStream.readByte();const s=this._readStream.readByte();if(t!==d.magic[0]||n!==d.magic[1]||i!==d.magic[2]||s!==d.magic[3]){throw new Ice.BadMagicException("",new Uint8Array([t,n,i,s]))}this._readProtocol._read(this._readStream);d.checkSupportedProtocol(this._readProtocol);this._readProtocolEncoding._read(this._readStream);d.checkSupportedProtocolEncoding(this._readProtocolEncoding);this._readStream.readByte();this._readStream.readByte();const r=this._readStream.readInt();if(r<d.headerSize){throw new Ice.IllegalMessageSizeException}if(r>this._messageSizeMax){a.throwMemoryLimitException(r,this._messageSizeMax)}if(r>this._readStream.size){this._readStream.resize(r)}this._readStream.pos=e}if(this._readStream.pos!=this._readStream.size){if(this._endpoint.datagram()){throw new Ice.DatagramLimitException}else{if(!this.read(this._readStream.buffer)){c.assert(!this._readStream.isEmpty());this.scheduleTimeout(p.Read);return}c.assert(this._readStream.buffer.remaining===0)}}}if(this._state<=E){if(this._state===S&&!this.initialize()){return}if(this._state<=E&&!this.validate()){return}this._transceiver.unregister();this.setState(v);if(this._startPromise!==null){++this._dispatchCount}}else{c.assert(this._state<=C);if((e&p.Read)!==0){t=this.parseMessage()}if((e&p.Write)!==0){this.sendNextMessage()}}}catch(e){if(e instanceof Ice.DatagramLimitException){if(this._warnUdp){this._logger.warning("maximum datagram size of "+this._readStream.pos+" exceeded")}this._readStream.resize(d.headerSize);this._readStream.pos=0;this._readHeader=true;return}else if(e instanceof Ice.SocketException){this.setState(M,e);return}else if(e instanceof Ice.LocalException){if(this._endpoint.datagram()){if(this._warn){this._logger.warning("datagram connection exception:\n"+e+"\n"+this._desc)}this._readStream.resize(d.headerSize);this._readStream.pos=0;this._readHeader=true}else{this.setState(M,e)}return}else{throw e}}if(this._acmLastActivity>0){this._acmLastActivity=Date.now()}this.dispatch(t);if(this._hasMoreData.value){_.setImmediate(()=>{this.message(p.Read)})}}dispatch(e){let t=0;if(this._startPromise!==null){this._startPromise.resolve();this._startPromise=null;++t}if(e!==null){if(e.outAsync!==null){e.outAsync.completed(e.stream);++t}if(e.invokeNum>0){this.invokeAll(e.stream,e.invokeNum,e.requestId,e.servantManager,e.adapter)}if(e.heartbeatCallback){try{e.heartbeatCallback(this)}catch(e){this._logger.error("connection callback exception:\n"+e+"\n"+this._desc)}e.heartbeatCallback=null;++t}}if(t>0){this._dispatchCount-=t;if(this._dispatchCount===0){if(this._state===C){try{this.initiateShutdown()}catch(e){if(e instanceof Ice.LocalException){this.setState(M,e)}else{throw e}}}else if(this._state===P){this.reap()}this.checkState()}}}finish(){c.assert(this._state===M);this.unscheduleTimeout(p.Read|p.Write|p.Connect);const e=this._instance.traceLevels();if(!this._initialized){if(e.network>=2){const t=[];t.push("failed to establish ");t.push(this._endpoint.protocol());t.push(" connection\n");t.push(this.toString());t.push("\n");t.push(this._exception.toString());this._instance.initializationData().logger.trace(e.networkCat,t.join(""))}}else{if(e.network>=1){const t=[];t.push("closed ");t.push(this._endpoint.protocol());t.push(" connection\n");t.push(this.toString());if(!(this._exception instanceof Ice.CloseConnectionException||this._exception instanceof Ice.ConnectionManuallyClosedException||this._exception instanceof Ice.ConnectionTimeoutException||this._exception instanceof Ice.CommunicatorDestroyedException||this._exception instanceof Ice.ObjectAdapterDeactivatedException)){t.push("\n");t.push(this._exception.toString())}this._instance.initializationData().logger.trace(e.networkCat,t.join(""))}}if(this._startPromise!==null){this._startPromise.reject(this._exception);this._startPromise=null}if(this._sendStreams.length>0){if(!this._writeStream.isEmpty()){this._writeStream.swap(this._sendStreams[0].stream)}for(let e=0;e<this._sendStreams.length;++e){const t=this._sendStreams[e];if(t.requestId>0){this._asyncRequests.delete(t.requestId)}t.completed(this._exception)}this._sendStreams=[]}for(const e of this._asyncRequests.values()){e.completedEx(this._exception)}this._asyncRequests.clear();this.checkClose();this._readStream.clear();this._readStream.buffer.clear();this._writeStream.clear();this._writeStream.buffer.clear();if(this._closeCallback!==null){try{this._closeCallback(this)}catch(e){this._logger.error("connection callback exception:\n"+e+"\n"+this._desc)}this._closeCallback=null}this._heartbeatCallback=null;if(this._dispatchCount===0){this.reap()}this.setState(P)}toString(){return this._desc}timedOut(e){if(this._state<=E){this.setState(M,new Ice.ConnectTimeoutException)}else if(this._state<C){this.setState(M,new Ice.TimeoutException)}else if(this._state===C){this.setState(M,new Ice.CloseTimeoutException)}}type(){return this._type}timeout(){return this._endpoint.timeout()}getInfo(){if(this._state>=M){throw this._exception}const e=this._transceiver.getInfo();for(let t=e;t!==null;t=t.underlying){t.adapterName=this._adapter!==null?this._adapter.getName():"";t.incoming=this._incoming}return e}setBufferSize(e,t){if(this._state>=M){throw this._exception}this._transceiver.setBufferSize(e,t)}exception(e){this.setState(M,e)}invokeException(e,t){this.setState(M,e);if(t>0){c.assert(this._dispatchCount>0);this._dispatchCount-=t;c.assert(this._dispatchCount>=0);if(this._dispatchCount===0){if(this._state===P){this.reap()}this.checkState()}}}setState(e,t){if(t!==undefined){c.assert(t instanceof Ice.LocalException);c.assert(e>=C);if(this._state===e){return}if(this._exception===null){this._exception=t;if(this._warn&&this._validated){if(!(this._exception instanceof Ice.CloseConnectionException||this._exception instanceof Ice.ConnectionManuallyClosedException||this._exception instanceof Ice.ConnectionTimeoutException||this._exception instanceof Ice.CommunicatorDestroyedException||this._exception instanceof Ice.ObjectAdapterDeactivatedException||this._exception instanceof Ice.ConnectionLostException&&this._state===C)){this.warning("connection exception",this._exception)}}}}if(this._endpoint.datagram()&&e===C){e=M}if(this._state<=E&&e===C){e=M}if(this._state===e){return}try{switch(e){case S:{c.assert(false);break}case E:{if(this._state!==S){c.assert(this._state===M);return}if(!this._endpoint.datagram()&&!this._incoming){this._transceiver.register()}break}case b:{if(this._state!==v&&this._state!==E){return}this._transceiver.register();break}case v:{if(this._state!==b&&this._state!==E){return}if(this._state===b){this._transceiver.unregister()}break}case C:{if(this._state>=M){return}if(this._state===v){this._transceiver.register()}break}case M:{if(this._state===P){return}this._batchRequestQueue.destroy(this._exception);this._transceiver.unregister();break}case P:{c.assert(this._state===M);this._transceiver.close();this._communicator=null;break}}}catch(t){if(t instanceof Ice.LocalException){this._instance.initializationData().logger.error(`unexpected connection exception:\n${this._desc}\n${t.toString()}`)}else{throw t}}if(this._monitor!==null){if(e===b){this._monitor.add(this);if(this._acmLastActivity>0){this._acmLastActivity=Date.now()}}else if(this._state===b){this._monitor.remove(this)}}this._state=e;if(this._state===C&&this._dispatchCount===0){try{this.initiateShutdown()}catch(t){if(t instanceof Ice.LocalException){this.setState(M,t)}else{throw t}}}else if(this._state===M){this.finish()}this.checkState()}initiateShutdown(){c.assert(this._state===C&&this._dispatchCount===0);if(this._shutdownInitiated){return}this._shutdownInitiated=true;if(!this._endpoint.datagram()){const t=new i(this._instance,d.currentProtocolEncoding);t.writeBlob(d.magic);d.currentProtocol._write(t);d.currentProtocolEncoding._write(t);t.writeByte(d.closeConnectionMsg);t.writeByte(0);t.writeInt(d.headerSize);if((this.sendMessage(O.createForStream(t,false))&e.Sent)>0){this.scheduleTimeout(p.Read)}}}sendHeartbeatNow(){c.assert(this._state===b);if(!this._endpoint.datagram()){const e=new i(this._instance,d.currentProtocolEncoding);e.writeBlob(d.magic);d.currentProtocol._write(e);d.currentProtocolEncoding._write(e);e.writeByte(d.validateConnectionMsg);e.writeByte(0);e.writeInt(d.headerSize);try{this.sendMessage(O.createForStream(e,false))}catch(e){this.setState(M,e);c.assert(this._exception!==null)}}}initialize(){const e=this._transceiver.initialize(this._readStream.buffer,this._writeStream.buffer);if(e!=p.None){this.scheduleTimeout(e);return false}this._desc=this._transceiver.toString();this._initialized=true;this.setState(E);return true}validate(){if(!this._endpoint.datagram()){if(this._adapter!==null){if(this._writeStream.size===0){this._writeStream.writeBlob(d.magic);d.currentProtocol._write(this._writeStream);d.currentProtocolEncoding._write(this._writeStream);this._writeStream.writeByte(d.validateConnectionMsg);this._writeStream.writeByte(0);this._writeStream.writeInt(d.headerSize);f.traceSend(this._writeStream,this._logger,this._traceLevels);this._writeStream.prepareWrite()}if(this._writeStream.pos!=this._writeStream.size&&!this.write(this._writeStream.buffer)){this.scheduleTimeout(p.Write);return false}}else{if(this._readStream.size===0){this._readStream.resize(d.headerSize);this._readStream.pos=0}if(this._readStream.pos!==this._readStream.size&&!this.read(this._readStream.buffer)){this.scheduleTimeout(p.Read);return false}c.assert(this._readStream.pos===d.headerSize);this._readStream.pos=0;const e=this._readStream.readBlob(4);if(e[0]!==d.magic[0]||e[1]!==d.magic[1]||e[2]!==d.magic[2]||e[3]!==d.magic[3]){throw new Ice.BadMagicException("",e)}this._readProtocol._read(this._readStream);d.checkSupportedProtocol(this._readProtocol);this._readProtocolEncoding._read(this._readStream);d.checkSupportedProtocolEncoding(this._readProtocolEncoding);const t=this._readStream.readByte();if(t!==d.validateConnectionMsg){throw new Ice.ConnectionNotValidatedException}this._readStream.readByte();if(this._readStream.readInt()!==d.headerSize){throw new Ice.IllegalMessageSizeException}f.traceRecv(this._readStream,this._logger,this._traceLevels);this._validated=true}}this._writeStream.resize(0);this._writeStream.pos=0;this._readStream.resize(d.headerSize);this._readHeader=true;this._readStream.pos=0;const e=this._instance.traceLevels();if(e.network>=1){const t=[];if(this._endpoint.datagram()){t.push("starting to send ");t.push(this._endpoint.protocol());t.push(" messages\n");t.push(this._transceiver.toDetailedString())}else{t.push("established ");t.push(this._endpoint.protocol());t.push(" connection\n");t.push(this.toString())}this._instance.initializationData().logger.trace(e.networkCat,t.join(""))}return true}sendNextMessage(){if(this._sendStreams.length===0){return}c.assert(!this._writeStream.isEmpty()&&this._writeStream.pos===this._writeStream.size);try{while(true){let e=this._sendStreams.shift();this._writeStream.swap(e.stream);e.sent();if(this._sendStreams.length===0){break}if(this._state>=M){return}e=this._sendStreams[0];c.assert(!e.prepared);const t=e.stream;t.pos=10;t.writeInt(t.size);t.prepareWrite();e.prepared=true;f.traceSend(t,this._logger,this._traceLevels);this._writeStream.swap(e.stream);if(this._writeStream.pos!=this._writeStream.size&&!this.write(this._writeStream.buffer)){c.assert(!this._writeStream.isEmpty());this.scheduleTimeout(p.Write);return}}}catch(e){if(e instanceof Ice.LocalException){this.setState(M,e);return}else{throw e}}c.assert(this._writeStream.isEmpty());if(this._state===C&&_shutdownInitiated){this.scheduleTimeout(p.Read)}}sendMessage(t){if(this._sendStreams.length>0){t.doAdopt();this._sendStreams.push(t);return e.Queued}c.assert(this._state<M);c.assert(!t.prepared);const n=t.stream;n.pos=10;n.writeInt(n.size);n.prepareWrite();t.prepared=true;f.traceSend(n,this._logger,this._traceLevels);if(this.write(n.buffer)){t.sent();if(this._acmLastActivity>0){this._acmLastActivity=Date.now()}return e.Sent}t.doAdopt();this._writeStream.swap(t.stream);this._sendStreams.push(t);this.scheduleTimeout(p.Write);return e.Queued}parseMessage(){c.assert(this._state>E&&this._state<M);let e=new k(this._instance);this._readStream.swap(e.stream);this._readStream.resize(d.headerSize);this._readStream.pos=0;this._readHeader=true;this._validated=true;c.assert(e.stream.pos===e.stream.size);try{e.stream.pos=8;const t=e.stream.readByte();const n=e.stream.readByte();if(n===2){throw new Ice.FeatureNotSupportedException("Cannot uncompress compressed message")}e.stream.pos=d.headerSize;switch(t){case d.closeConnectionMsg:{f.traceRecv(e.stream,this._logger,this._traceLevels);if(this._endpoint.datagram()){if(this._warn){this._logger.warning("ignoring close connection message for datagram connection:\n"+this._desc)}}else{this.setState(M,new Ice.CloseConnectionException)}break}case d.requestMsg:{if(this._state===C){f.traceIn("received request during closing\n"+"(ignored by server, client will retry)",e.stream,this._logger,this._traceLevels)}else{f.traceRecv(e.stream,this._logger,this._traceLevels);e.requestId=e.stream.readInt();e.invokeNum=1;e.servantManager=this._servantManager;e.adapter=this._adapter;++this._dispatchCount}break}case d.requestBatchMsg:{if(this._state===C){f.traceIn("received batch request during closing\n"+"(ignored by server, client will retry)",e.stream,this._logger,this._traceLevels)}else{f.traceRecv(e.stream,this._logger,this._traceLevels);e.invokeNum=e.stream.readInt();if(e.invokeNum<0){e.invokeNum=0;throw new Ice.UnmarshalOutOfBoundsException}e.servantManager=this._servantManager;e.adapter=this._adapter;this._dispatchCount+=e.invokeNum}break}case d.replyMsg:{f.traceRecv(e.stream,this._logger,this._traceLevels);e.requestId=e.stream.readInt();e.outAsync=this._asyncRequests.get(e.requestId);if(e.outAsync){this._asyncRequests.delete(e.requestId);++this._dispatchCount}else{e=null}this.checkClose();break}case d.validateConnectionMsg:{f.traceRecv(e.stream,this._logger,this._traceLevels);if(this._heartbeatCallback!==null){e.heartbeatCallback=this._heartbeatCallback;++this._dispatchCount}break}default:{f.traceIn("received unknown message\n(invalid, closing connection)",e.stream,this._logger,this._traceLevels);throw new Ice.UnknownMessageException}}}catch(e){if(e instanceof Ice.LocalException){if(this._endpoint.datagram()){if(this._warn){this._logger.warning("datagram connection exception:\n"+e+"\n"+this._desc)}}else{this.setState(M,e)}}else{throw e}}return e}invokeAll(e,t,n,i,s){try{while(t>0){const r=new h(this._instance,this,s,!this._endpoint.datagram()&&n!==0,n);r.invoke(i,e);--t}e.clear()}catch(e){if(e instanceof Ice.LocalException){this.invokeException(e,t)}else if(e instanceof Ice.ServantError){}else{this._logger.error("unexpected exception:\n"+e.toString());this.invokeException(new Ice.UnknownException(e),t)}}}scheduleTimeout(e){let t;if(this._state<b){const e=this._instance.defaultsAndOverrides();if(e.overrideConnectTimeout){t=e.overrideConnectTimeoutValue}else{t=this._endpoint.timeout()}}else if(this._state<C){if(this._readHeader){e&=~p.Read}t=this._endpoint.timeout()}else{const e=this._instance.defaultsAndOverrides();if(e.overrideCloseTimeout){t=e.overrideCloseTimeoutValue}else{t=this._endpoint.timeout()}}if(t<0){return}if((e&p.Read)!==0){if(this._readTimeoutScheduled){this._timer.cancel(this._readTimeoutId)}this._readTimeoutId=this._timer.schedule(()=>this.timedOut(),t);this._readTimeoutScheduled=true}if((e&(p.Write|p.Connect))!==0){if(this._writeTimeoutScheduled){this._timer.cancel(this._writeTimeoutId)}this._writeTimeoutId=this._timer.schedule(()=>this.timedOut(),t);this._writeTimeoutScheduled=true}}unscheduleTimeout(e){if((e&p.Read)!==0&&this._readTimeoutScheduled){this._timer.cancel(this._readTimeoutId);this._readTimeoutScheduled=false}if((e&(p.Write|p.Connect))!==0&&this._writeTimeoutScheduled){this._timer.cancel(this._writeTimeoutId);this._writeTimeoutScheduled=false}}warning(e,t){this._logger.warning(e+":\n"+this._desc+"\n"+t.toString())}checkState(){if(this._state<v||this._dispatchCount>0){return}if(this._state===P&&this._finishedPromises.length>0){this._adapter=null;this._finishedPromises.forEach(e=>e.resolve());this._finishedPromises=[]}}reap(){if(this._monitor!==null){this._monitor.reap(this)}}read(e){const t=e.position;const n=this._transceiver.read(e,this._hasMoreData);if(this._instance.traceLevels().network>=3&&e.position!=t){const n=[];n.push("received ");if(this._endpoint.datagram()){n.push(e.limit)}else{n.push(e.position-t);n.push(" of ");n.push(e.limit-t)}n.push(" bytes via ");n.push(this._endpoint.protocol());n.push("\n");n.push(this.toString());this._instance.initializationData().logger.trace(this._instance.traceLevels().networkCat,n.join(""))}return n}write(e){const t=e.position;const n=this._transceiver.write(e);if(this._instance.traceLevels().network>=3&&e.position!=t){const n=[];n.push("sent ");n.push(e.position-t);if(!this._endpoint.datagram()){n.push(" of ");n.push(e.limit-t)}n.push(" bytes via ");n.push(this._endpoint.protocol());n.push("\n");n.push(this.toString());this._instance.initializationData().logger.trace(this._instance.traceLevels().networkCat,n.join(""))}return n}}A.ObjectAdapterDeactivated=0;A.CommunicatorDestroyed=1;Ice.ConnectionI=A;class O{constructor(){this.stream=null;this.outAsync=null;this.requestId=0;this.prepared=false}canceled(){c.assert(this.outAsync!==null);this.outAsync=null}doAdopt(){if(this.adopt){const e=new i(this.stream.instance,d.currentProtocolEncoding);e.swap(this.stream);this.stream=e;this.adopt=false}}sent(){if(this.outAsync!==null){this.outAsync.sent()}}completed(e){if(this.outAsync!==null){this.outAsync.completedEx(e)}}static createForStream(e,t){const n=new O;n.stream=e;n.adopt=t;n.isSent=false;n.requestId=0;n.outAsync=null;return n}static create(e,t,n){const i=new O;i.stream=t;i.outAsync=e;i.requestId=n;i.isSent=false;i.adopt=false;return i}}})();(function(){const e=Ice.AsyncResultBase;const t=Ice.ConnectionI;const n=Ice.Debug;const i=Ice.HashMap;const s=Ice.FactoryACMMonitor;class r{constructor(e,t){this._communicator=e;this._instance=t;this._destroyed=false;this._monitor=new s(this._instance,this._instance.clientACM());this._connectionsByEndpoint=new o;this._pending=new i(i.compareEquals);this._pendingConnectCount=0;this._waitPromise=null}destroy(){if(this._destroyed){return}this._connectionsByEndpoint.forEach(e=>e.destroy(t.CommunicatorDestroyed));this._destroyed=true;this._communicator=null;this.checkFinished()}waitUntilFinished(){this._waitPromise=new Ice.Promise;this.checkFinished();return this._waitPromise}create(e,t,i){n.assert(e.length>0);const s=this.applyOverrides(e);try{const e=this.findConnectionByEndpoint(s);if(e!==null){return Ice.Promise.resolve(e)}}catch(e){return Ice.Promise.reject(e)}return new c(this,s,t,i).start()}setRouterInfo(e){return Ice.Promise.try(()=>{if(this._destroyed){throw new Ice.CommunicatorDestroyedException}return e.getClientEndpoints()}).then(t=>{const n=e.getAdapter();const i=this._instance.defaultsAndOverrides();t.forEach(e=>{if(i.overrideTimeout){e=e.changeTimeout(i.overrideTimeoutValue)}e=e.changeCompress(false);this._connectionsByEndpoint.forEach(t=>{if(t.endpoint().equals(e)){t.setAdapter(n)}})})})}removeAdapter(e){if(this._destroyed){return}this._connectionsByEndpoint.forEach(t=>{if(t.getAdapter()===e){t.setAdapter(null)}})}flushAsyncBatchRequests(){const t=new e(this._communicator,"flushBatchRequests",null,null,null);if(this._destroyed){t.resolve();return t}Ice.Promise.all(this._connectionsByEndpoint.map(e=>{if(e.isActiveOrHolding()){return e.flushBatchRequests().catch(e=>{if(e instanceof Ice.LocalException){}else{throw e}})}})).then(t.resolve,t.reject);return t}applyOverrides(e){const t=this._instance.defaultsAndOverrides();return e.map(e=>{return t.overrideTimeout?e.changeTimeout(t.overrideTimeoutValue):e})}findConnectionByEndpoint(e){if(this._destroyed){throw new Ice.CommunicatorDestroyedException}n.assert(e.length>0);for(let t=0;t<e.length;++t){const n=e[t];if(this._pending.has(n)){continue}const i=this._connectionsByEndpoint.get(n);if(i===undefined){continue}for(let e=0;e<i.length;++e){if(i[e].isActiveOrHolding()){return i[e]}}}return null}incPendingConnectCount(){if(this._destroyed){throw new Ice.CommunicatorDestroyedException}++this._pendingConnectCount}decPendingConnectCount(){--this._pendingConnectCount;n.assert(this._pendingConnectCount>=0);if(this._destroyed&&this._pendingConnectCount===0){this.checkFinished()}}getConnection(e,t){if(this._destroyed){throw new Ice.CommunicatorDestroyedException}const n=this._monitor.swapReapedConnections();if(n!==null){n.forEach(e=>{this._connectionsByEndpoint.removeConnection(e.endpoint(),e);this._connectionsByEndpoint.removeConnection(e.endpoint().changeCompress(true),e)})}while(true){if(this._destroyed){throw new Ice.CommunicatorDestroyedException}const n=this.findConnectionByEndpoint(e);if(n!==null){return n}if(this.addToPending(t,e)){return null}else{break}}t.nextEndpoint();return null}createConnection(e,i){n.assert(this._pending.has(i)&&e!==null);let s=null;try{if(this._destroyed){throw new Ice.CommunicatorDestroyedException}s=new t(this._communicator,this._instance,this._monitor,e,i.changeCompress(false),false,null)}catch(t){if(t instanceof Ice.LocalException){try{e.close()}catch(e){}}throw t}this._connectionsByEndpoint.set(s.endpoint(),s);this._connectionsByEndpoint.set(s.endpoint().changeCompress(true),s);return s}finishGetConnection(e,t,n,i){const s=[];if(i!==null){s.push(i)}const r=[];e.forEach(e=>{const n=this._pending.get(e);if(n!==undefined){this._pending.delete(e);n.forEach(e=>{if(e.hasEndpoint(t)){if(s.indexOf(e)===-1){s.push(e)}}else{if(r.indexOf(e)===-1){r.push(e)}}})}});s.forEach(e=>{e.removeFromPending();const t=r.indexOf(e);if(t!==-1){r.splice(t,1)}});r.forEach(e=>e.removeFromPending());r.forEach(e=>e.getConnection());s.forEach(e=>e.setConnection(n));this.checkFinished()}finishGetConnectionEx(e,t,i){const s=[];if(i!==null){s.push(i)}const r=[];e.forEach(t=>{const n=this._pending.get(t);if(n!==undefined){this._pending.delete(t);n.forEach(t=>{if(t.removeEndpoints(e)){if(s.indexOf(t)===-1){s.push(t)}}else{if(r.indexOf(t)===-1){r.push(t)}}})}});r.forEach(e=>{n.assert(s.indexOf(e)===-1);e.removeFromPending()});this.checkFinished();r.forEach(e=>e.getConnection());s.forEach(e=>e.setException(t))}addToPending(e,t){let n=false;if(e!==null){t.forEach(t=>{const i=this._pending.get(t);if(i!==undefined){n=true;if(i.indexOf(e)===-1){i.push(e)}}})}if(n){return true}t.forEach(e=>{if(!this._pending.has(e)){this._pending.set(e,[])}});return false}removeFromPending(e,t){t.forEach(t=>{const n=this._pending.get(t);if(n!==undefined){const t=n.indexOf(e);if(t!==-1){n.splice(t,1)}}})}handleConnectionException(e,t){const n=this._instance.traceLevels();if(n.network>=2){const i=[];i.push("connection to endpoint failed");if(e instanceof Ice.CommunicatorDestroyedException){i.push("\n")}else{if(t){i.push(", trying next endpoint\n")}else{i.push(" and no more endpoints to try\n")}}i.push(e.toString());this._instance.initializationData().logger.trace(n.networkCat,i.join(""))}}handleException(e,t){const n=this._instance.traceLevels();if(n.network>=2){const i=[];i.push("couldn't resolve endpoint host");if(e instanceof Ice.CommunicatorDestroyedException){i.push("\n")}else{if(t){i.push(", trying next endpoint\n")}else{i.push(" and no more endpoints to try\n")}}i.push(e.toString());this._instance.initializationData().logger.trace(n.networkCat,i.join(""))}}checkFinished(){if(!this._waitPromise||!this._destroyed||this._pending.size>0||this._pendingConnectCount>0){return}Ice.Promise.all(this._connectionsByEndpoint.map(e=>e.waitUntilFinished().catch(e=>n.assert(false)))).then(()=>{const e=this._monitor.swapReapedConnections();if(e!==null){const t=[];this._connectionsByEndpoint.forEach(e=>{if(t.indexOf(e)===-1){t.push(e)}});n.assert(e.length===t.length);this._connectionsByEndpoint.clear()}else{n.assert(this._connectionsByEndpoint.size===0)}n.assert(this._waitPromise!==null);this._waitPromise.resolve();this._monitor.destroy()})}}Ice.OutgoingConnectionFactory=r;class o extends i{constructor(e){super(e||i.compareEquals)}set(e,i){let s=this.get(e);if(s===undefined){s=[];super.set(e,s)}n.assert(i instanceof t);s.push(i);return undefined}removeConnection(e,t){const i=this.get(e);n.assert(i!==null);const s=i.indexOf(t);n.assert(s!==-1);i.splice(s,1);if(i.length===0){this.delete(e)}}map(e){const t=[];this.forEach(n=>t.push(e(n)));return t}forEach(e){for(const t of this.values()){t.forEach(e)}}}class c{constructor(e,t,n,i){this._factory=e;this._endpoints=t;this._hasMore=n;this._selType=i;this._promise=new Ice.Promise;this._index=0;this._current=null}connectionStartCompleted(e){e.activate();this._factory.finishGetConnection(this._endpoints,this._current,e,this)}connectionStartFailed(e,t){n.assert(this._current!==null);if(this.connectionStartFailedImpl(t)){this.nextEndpoint()}}setConnection(e){this._promise.resolve(e);this._factory.decPendingConnectCount()}setException(e){this._promise.reject(e);this._factory.decPendingConnectCount()}hasEndpoint(e){return this.findEndpoint(e)!==-1}findEndpoint(e){return this._endpoints.findIndex(t=>e.equals(t))}removeEndpoints(e){e.forEach(e=>{const t=this.findEndpoint(e);if(t!==-1){this._endpoints.splice(t,1)}});this._index=0;return this._endpoints.length===0}removeFromPending(){this._factory.removeFromPending(this,this._endpoints)}start(){try{this._factory.incPendingConnectCount()}catch(e){this._promise.reject(e);return}this.getConnection();return this._promise}getConnection(){try{const e=this._factory.getConnection(this._endpoints,this);if(e===null){return}this._promise.resolve(e);this._factory.decPendingConnectCount()}catch(e){this._promise.reject(e);this._factory.decPendingConnectCount()}}nextEndpoint(){const e=e=>{e.start().then(()=>{this.connectionStartCompleted(e)},t=>{this.connectionStartFailed(e,t)})};while(true){const t=this._factory._instance.traceLevels();try{n.assert(this._index<this._endpoints.length);this._current=this._endpoints[this._index++];if(t.network>=2){const e=[];e.push("trying to establish ");e.push(this._current.protocol());e.push(" connection to ");e.push(this._current.toConnectorString());this._factory._instance.initializationData().logger.trace(t.networkCat,e.join(""))}e(this._factory.createConnection(this._current.connect(),this._current))}catch(e){if(t.network>=2){const n=[];n.push("failed to establish ");n.push(this._current.protocol());n.push(" connection to ");n.push(this._current.toString());n.push("\n");n.push(e.toString());this._factory._instance.initializationData().logger.trace(t.networkCat,n.join(""))}if(this.connectionStartFailedImpl(e)){continue}}break}}connectionStartFailedImpl(e){if(e instanceof Ice.LocalException){this._factory.handleConnectionException(e,this._hasMore||this._index<this._endpoints.length);if(e instanceof Ice.CommunicatorDestroyedException){this._factory.finishGetConnectionEx(this._endpoints,e,this)}else if(this._index<this._endpoints.length){return true}else{this._factory.finishGetConnectionEx(this._endpoints,e,this)}}else{this._factory.finishGetConnectionEx(this._endpoints,e,this)}return false}}})();(function(){const e=Ice.FormatType;const t=Ice.EndpointSelectionType;const n=Ice.Protocol;class i{constructor(i,s){this.defaultProtocol=i.getPropertyWithDefault("Ice.Default.Protocol",Ice.TcpEndpointFactory!==undefined?"tcp":"ws");let r=i.getProperty("Ice.Default.Host");this.defaultHost=r.length>0?r:null;r=i.getProperty("Ice.Default.SourceAddress");this.defaultSourceAddress=r.length>0?r:null;r=i.getProperty("Ice.Override.Timeout");if(r.length>0){this.overrideTimeout=true;this.overrideTimeoutValue=i.getPropertyAsInt("Ice.Override.Timeout");if(this.overrideTimeoutValue<1&&this.overrideTimeoutValue!==-1){this.overrideTimeoutValue=-1;s.warning("invalid value for Ice.Override.Timeout `"+i.getProperty("Ice.Override.Timeout")+"': defaulting to -1")}}else{this.overrideTimeout=false;this.overrideTimeoutValue=-1}r=i.getProperty("Ice.Override.ConnectTimeout");if(r.length>0){this.overrideConnectTimeout=true;this.overrideConnectTimeoutValue=i.getPropertyAsInt("Ice.Override.ConnectTimeout");if(this.overrideConnectTimeoutValue<1&&this.overrideConnectTimeoutValue!==-1){this.overrideConnectTimeoutValue=-1;s.warning("invalid value for Ice.Override.ConnectTimeout `"+i.getProperty("Ice.Override.ConnectTimeout")+"': defaulting to -1")}}else{this.overrideConnectTimeout=false;this.overrideConnectTimeoutValue=-1}r=i.getProperty("Ice.Override.CloseTimeout");if(r.length>0){this.overrideCloseTimeout=true;this.overrideCloseTimeoutValue=i.getPropertyAsInt("Ice.Override.CloseTimeout");if(this.overrideCloseTimeoutValue<1&&this.overrideCloseTimeoutValue!==-1){this.overrideCloseTimeoutValue=-1;s.warning("invalid value for Ice.Override.CloseTimeout `"+i.getProperty("Ice.Override.CloseTimeout")+"': defaulting to -1")}}else{this.overrideCloseTimeout=false;this.overrideCloseTimeoutValue=-1}this.overrideSecure=false;r=i.getPropertyWithDefault("Ice.Default.EndpointSelection","Random");if(r==="Random"){this.defaultEndpointSelection=t.Random}else if(r==="Ordered"){this.defaultEndpointSelection=t.Ordered}else{const e=new Ice.EndpointSelectionTypeParseException;e.str="illegal value `"+r+"'; expected `Random' or `Ordered'";throw e}this.defaultTimeout=i.getPropertyAsIntWithDefault("Ice.Default.Timeout",6e4);if(this.defaultTimeout<1&&this.defaultTimeout!==-1){this.defaultTimeout=6e4;s.warning("invalid value for Ice.Default.Timeout `"+i.getProperty("Ice.Default.Timeout")+"': defaulting to 60000")}this.defaultLocatorCacheTimeout=i.getPropertyAsIntWithDefault("Ice.Default.LocatorCacheTimeout",-1);if(this.defaultLocatorCacheTimeout<-1){this.defaultLocatorCacheTimeout=-1;s.warning("invalid value for Ice.Default.LocatorCacheTimeout `"+i.getProperty("Ice.Default.LocatorCacheTimeout")+"': defaulting to -1")}this.defaultInvocationTimeout=i.getPropertyAsIntWithDefault("Ice.Default.InvocationTimeout",-1);if(this.defaultInvocationTimeout<1&&this.defaultInvocationTimeout!==-1){this.defaultInvocationTimeout=-1;s.warning("invalid value for Ice.Default.InvocationTimeout `"+i.getProperty("Ice.Default.InvocationTimeout")+"': defaulting to -1")}this.defaultPreferSecure=i.getPropertyAsIntWithDefault("Ice.Default.PreferSecure",0)>0;r=i.getPropertyWithDefault("Ice.Default.EncodingVersion",Ice.encodingVersionToString(n.currentEncoding));this.defaultEncoding=Ice.stringToEncodingVersion(r);n.checkSupportedEncoding(this.defaultEncoding);const o=i.getPropertyAsIntWithDefault("Ice.Default.SlicedFormat",0)>0;this.defaultFormat=o?e.SlicedFormat:e.CompactFormat}}Ice.DefaultsAndOverrides=i})();(function(){const e=Ice.Debug;const t=Ice.Protocol;const n=Ice.LocatorRegisterPrx;const i=Ice.HashMap;class s{constructor(e,t,n){this._locator=e;this._locatorRegistry=null;this._table=t;this._background=n;this._adapterRequests=new Map;this._objectRequests=new i(i.compareEquals)}destroy(){this._locatorRegistry=null;this._table.clear()}equals(e){if(this===e){return true}if(e instanceof s){return this._locator.equals(e._locator)}return false}hashCode(){return this._locator.hashCode()}getLocator(){return this._locator}getLocatorRegistry(){if(this._locatorRegistry!==null){return Ice.Promise.resolve(this._locatorRegistry)}return this._locator.getRegistry().then(e=>{this._locatorRegistry=n.uncheckedCast(e.ice_locator(null).ice_endpointSelection(Ice.EndpointSelectionType.Ordered));return this._locatorRegistry})}getEndpoints(t,n,i,s){const r=s||new Ice.Promise;e.assert(t.isIndirect());let o=null;const c={value:false};if(!t.isWellKnown()){o=this._table.getAdapterEndpoints(t.getAdapterId(),i,c);if(!c.value){if(this._background&&o!==null){this.getAdapterRequest(t).addCallback(t,n,i,null)}else{this.getAdapterRequest(t).addCallback(t,n,i,r);return r}}}else{const e=this._table.getObjectReference(t.getIdentity(),i,c);if(!c.value){if(this._background&&e!==null){this.getObjectRequest(t).addCallback(t,null,i,null)}else{this.getObjectRequest(t).addCallback(t,null,i,r);return r}}if(!e.isIndirect()){o=e.getEndpoints()}else if(!e.isWellKnown()){if(t.getInstance().traceLevels().location>=1){this.traceWellKnown("found adapter for well-known object in locator cache",t,e)}this.getEndpoints(e,t,i,r);return r}}e.assert(o!==null);if(t.getInstance().traceLevels().location>=1){this.getEndpointsTrace(t,o,true)}r.resolve([o,true]);return r}clearCache(t){e.assert(t.isIndirect());if(!t.isWellKnown()){const e=this._table.removeAdapterEndpoints(t.getAdapterId());if(e!==null&&t.getInstance().traceLevels().location>=2){this.trace("removed endpoints for adapter from locator cache",t,e)}}else{const e=this._table.removeObjectReference(t.getIdentity());if(e!==null){if(!e.isIndirect()){if(t.getInstance().traceLevels().location>=2){this.trace("removed endpoints for well-known object from locator cache",t,e.getEndpoints())}}else if(!e.isWellKnown()){if(t.getInstance().traceLevels().location>=2){this.traceWellKnown("removed adapter for well-known object from locator cache",t,e)}this.clearCache(e)}}}}trace(t,n,i){e.assert(n.isIndirect());const s=[];s.push(t);s.push("\n");if(!n.isWellKnown()){s.push("adapter = ");s.push(n.getAdapterId());s.push("\n")}else{s.push("well-known proxy = ");s.push(n.toString());s.push("\n")}s.push("endpoints = ");s.push(i.map(e=>e.toString()).join(":"));n.getInstance().initializationData().logger.trace(n.getInstance().traceLevels().locationCat,s.join(""))}traceWellKnown(t,n,i){e.assert(n.isWellKnown());const s=[];s.push(t);s.push("\n");s.push("well-known proxy = ");s.push(n.toString());s.push("\n");s.push("adapter = ");s.push(i.getAdapterId());n.getInstance().initializationData().logger.trace(n.getInstance().traceLevels().locationCat,s.join(""))}getEndpointsException(t,n){e.assert(t.isIndirect());const i=t.getInstance();try{throw n}catch(n){if(n instanceof Ice.AdapterNotFoundException){if(i.traceLevels().location>=1){const e=[];e.push("adapter not found\n");e.push("adapter = ");e.push(t.getAdapterId());i.initializationData().logger.trace(i.traceLevels().locationCat,e.join(""))}const e=new Ice.NotRegisteredException;e.kindOfObject="object adapter";e.id=t.getAdapterId();throw e}else if(n instanceof Ice.ObjectNotFoundException){if(i.traceLevels().location>=1){const e=[];e.push("object not found\n");e.push("object = ");e.push(Ice.identityToString(t.getIdentity(),i.toStringMode()));i.initializationData().logger.trace(i.traceLevels().locationCat,e.join(""))}const e=new Ice.NotRegisteredException;e.kindOfObject="object";e.id=Ice.identityToString(t.getIdentity(),i.toStringMode());throw e}else if(n instanceof Ice.NotRegisteredException){throw n}else if(n instanceof Ice.LocalException){if(i.traceLevels().location>=1){const e=[];e.push("couldn't contact the locator to retrieve endpoints\n");if(t.getAdapterId().length>0){e.push("adapter = ");e.push(t.getAdapterId());e.push("\n")}else{e.push("well-known proxy = ");e.push(t.toString());e.push("\n")}e.push("reason = "+n.toString());i.initializationData().logger.trace(i.traceLevels().locationCat,e.join(""))}throw n}else{e.assert(false)}}}getEndpointsTrace(e,t,n){if(t!==null&&t.length>0){if(n){if(e.isWellKnown()){this.trace("found endpoints for well-known proxy in locator cache",e,t)}else{this.trace("found endpoints for adapter in locator cache",e,t)}}else{if(e.isWellKnown()){this.trace("retrieved endpoints for well-known proxy from locator, adding to locator cache",e,t)}else{this.trace("retrieved endpoints for adapter from locator, adding to locator cache",e,t)}}}else{const t=e.getInstance();const n=[];n.push("no endpoints configured for ");if(e.getAdapterId().length>0){n.push("adapter\n");n.push("adapter = ");n.push(e.getAdapterId());n.push("\n")}else{n.push("well-known object\n");n.push("well-known proxy = ");n.push(e.toString());n.push("\n")}t.initializationData().logger.trace(t.traceLevels().locationCat,n.join(""))}}getAdapterRequest(e){if(e.getInstance().traceLevels().location>=1){const t=e.getInstance();const n=[];n.push("searching for adapter by id\n");n.push("adapter = ");n.push(e.getAdapterId());t.initializationData().logger.trace(t.traceLevels().locationCat,n.join(""))}let t=this._adapterRequests.get(e.getAdapterId());if(t!==undefined){return t}t=new a(this,e);this._adapterRequests.set(e.getAdapterId(),t);return t}getObjectRequest(e){if(e.getInstance().traceLevels().location>=1){const t=e.getInstance();const n=[];n.push("searching for well-known object\n");n.push("well-known proxy = ");n.push(e.toString());t.initializationData().logger.trace(t.traceLevels().locationCat,n.join(""))}let t=this._objectRequests.get(e.getIdentity());if(t!==undefined){return t}t=new c(this,e);this._objectRequests.set(e.getIdentity(),t);return t}finishRequest(t,n,i,s){if(i===null||i._getReference().isIndirect()){for(let e=0;e<n.length;++e){this._table.removeObjectReference(n[e].getIdentity())}}if(!t.isWellKnown()){if(i!==null&&!i._getReference().isIndirect()){this._table.addAdapterEndpoints(t.getAdapterId(),i._getReference().getEndpoints())}else if(s){this._table.removeAdapterEndpoints(t.getAdapterId())}e.assert(this._adapterRequests.has(t.getAdapterId()));this._adapterRequests.delete(t.getAdapterId())}else{if(i!==null&&!i._getReference().isWellKnown()){this._table.addObjectReference(t.getIdentity(),i._getReference())}else if(s){this._table.removeObjectReference(t.getIdentity())}e.assert(this._objectRequests.has(t.getIdentity()));this._objectRequests.delete(t.getIdentity())}}}Ice.LocatorInfo=s;class r{constructor(e,t,n){this._ref=e;this._ttl=t;this._promise=n}response(e,n){let i=null;if(n!==null){const s=n._getReference();if(this._ref.isWellKnown()&&!t.isSupported(this._ref.getEncoding(),s.getEncoding())){}else if(!s.isIndirect()){i=s.getEndpoints()}else if(this._ref.isWellKnown()&&!s.isWellKnown()){if(this._ref.getInstance().traceLevels().location>=1){e.traceWellKnown("retrieved adapter for well-known object from locator, "+"adding to locator cache",this._ref,s)}e.getEndpoints(s,this._ref,this._ttl).then(e=>{if(this._promise!==null){this._promise.resolve(e)}},e=>{if(this._promise!==null){this._promise.reject(e)}});return}}if(this._ref.getInstance().traceLevels().location>=1){e.getEndpointsTrace(this._ref,i,false)}if(this._promise!==null){this._promise.resolve(i===null?[[],false]:[i,false])}}exception(e,t){try{e.getEndpointsException(this._ref,t)}catch(e){if(this._promise!==null){this._promise.reject(e)}}}}class o{constructor(e,t){this._locatorInfo=e;this._ref=t;this._callbacks=[];this._wellKnownRefs=[];this._sent=false;this._response=false;this._proxy=null;this._exception=null}addCallback(e,t,n,i){const s=new r(e,n,i);if(this._response){s.response(this._locatorInfo,this._proxy)}else if(this._exception!==null){s.exception(this._locatorInfo,this._exception)}else{this._callbacks.push(s);if(t!==null){this._wellKnownRefs.push(t)}if(!this._sent){this._sent=true;this.send()}}}response(e){this._locatorInfo.finishRequest(this._ref,this._wellKnownRefs,e,false);this._response=true;this._proxy=e;for(let t=0;t<this._callbacks.length;++t){this._callbacks[t].response(this._locatorInfo,e)}}exception(e){this._locatorInfo.finishRequest(this._ref,this._wellKnownRefs,null,e instanceof Ice.UserException);this._exception=e;for(let t=0;t<this._callbacks.length;++t){this._callbacks[t].exception(this._locatorInfo,e)}}}class c extends o{constructor(t,n){super(t,n);e.assert(n.isWellKnown())}send(){try{this._locatorInfo.getLocator().findObjectById(this._ref.getIdentity()).then(e=>this.response(e),e=>this.exception(e))}catch(e){this.exception(e)}}}class a extends o{constructor(t,n){super(t,n);e.assert(n.isIndirect())}send(){try{this._locatorInfo.getLocator().findAdapterById(this._ref.getAdapterId()).then(e=>this.response(e),e=>this.exception(e))}catch(e){this.exception(e)}}}})();(function(){const e=Ice.AsyncResultBase;const t=Ice.Debug;const n=Ice.Identity;const i=Ice.PropertyNames;const s=Ice.ServantManager;const r=Ice.StringUtil;const o=Ice.ArrayUtil;const c=Ice.Timer;const a=["ACM","AdapterId","Endpoints","Locator","Locator.EncodingVersion","Locator.EndpointSelection","Locator.ConnectionCached","Locator.PreferSecure","Locator.CollocationOptimized","Locator.Router","MessageSizeMax","PublishedEndpoints","ReplicaGroupId","Router","Router.EncodingVersion","Router.EndpointSelection","Router.ConnectionCached","Router.PreferSecure","Router.CollocationOptimized","Router.Locator","Router.Locator.EndpointSelection","Router.Locator.ConnectionCached","Router.Locator.PreferSecure","Router.Locator.CollocationOptimized","Router.Locator.LocatorCacheTimeout","Router.Locator.InvocationTimeout","Router.LocatorCacheTimeout","Router.InvocationTimeout","ProxyOptions","ThreadPool.Size","ThreadPool.SizeMax","ThreadPool.SizeWarn","ThreadPool.StackSize","ThreadPool.Serialize"];const l=0;const h=1;const u=3;const d=5;const p=6;class _{constructor(e,n,i,r,o,c,a){this._instance=e;this._communicator=n;this._objectAdapterFactory=i;this._servantManager=new s(e,r);this._name=r;this._publishedEndpoints=[];this._routerInfo=null;this._state=l;this._noConfig=c;this._statePromises=[];if(this._noConfig){this._reference=this._instance.referenceFactory().createFromString("dummy -t","");this._messageSizeMax=this._instance.messageSizeMax();a.resolve(this);return}const h=this._instance.initializationData().properties;const u=[];const d=this.filterProperties(u);if(u.length!==0&&h.getPropertyAsIntWithDefault("Ice.Warn.UnknownProperties",1)>0){const e=["found unknown properties for object adapter `"+r+"':"];u.forEach(t=>e.push("\n    "+t));this._instance.initializationData().logger.warning(e.join(""))}if(o===null&&d){throw new Ice.InitializationException(`object adapter \`${this._name}' requires configuration`)}const p=h.getPropertyWithDefault(this._name+".ProxyOptions","-t");try{this._reference=this._instance.referenceFactory().createFromString("dummy "+p,"")}catch(e){if(e instanceof Ice.ProxyParseException){throw new Ice.InitializationException(`invalid proxy options \`${p}' for object adapter \`${r}'`)}else{throw e}}{const e=this._instance.messageSizeMax()/1024;const t=h.getPropertyAsIntWithDefault(this._name+".MessageSizeMax",e);if(t<1||t>2147483647/1024){this._messageSizeMax=2147483647}else{this._messageSizeMax=t*1024}}try{if(o===null){o=Ice.RouterPrx.uncheckedCast(this._instance.proxyFactory().propertyToProxy(this._name+".Router"))}let e;if(o!==null){this._routerInfo=this._instance.routerManager().find(o);t.assert(this._routerInfo!==null);if(this._routerInfo.getAdapter()!==null){throw new Ice.AlreadyRegisteredException("object adapter with router",Ice.identityToString(o.ice_getIdentity(),this._instance.toStringMode()))}this._routerInfo.setAdapter(this);e=this._instance.outgoingConnectionFactory().setRouterInfo(this._routerInfo)}else{const t=h.getProperty(this._name+".Endpoints");if(t.length>0){throw new Ice.FeatureNotSupportedException("object adapter endpoints not supported")}e=Ice.Promise.resolve()}e.then(()=>this.computePublishedEndpoints()).then(e=>{this._publishedEndpoints=e;a.resolve(this)},e=>{this.destroy();a.reject(e)})}catch(e){this.destroy();throw e}}getName(){return this._noConfig?"":this._name}getCommunicator(){return this._communicator}activate(){const t=new e(this._communicator,"activate",null,null,this);this.setState(u);t.resolve();return t}hold(){this.checkForDeactivation();this.setState(h)}waitForHold(){const t=new e(this._communicator,"waitForHold",null,null,this);try{this.checkForDeactivation();this.waitState(h,t)}catch(e){t.reject(e)}return t}deactivate(){const t=new e(this._communicator,"deactivate",null,null,this);if(this._state<d){this.setState(d);this._instance.outgoingConnectionFactory().removeAdapter(this)}t.resolve();return t}waitForDeactivate(){const t=new e(this._communicator,"waitForDeactivate",null,null,this);this.waitState(d,t);return t}isDeactivated(){return this._state>=d}destroy(){return this.deactivate().then(()=>{if(this._state<p){this.setState(p);this._servantManager.destroy();this._objectAdapterFactory.removeObjectAdapter(this);this._publishedEndpoints=[]}const t=new e(this._communicator,"destroy",null,null,this);t.resolve();return t})}add(e,t){return this.addFacet(e,t,"")}addFacet(e,t,n){this.checkForDeactivation();this.checkIdentity(t);this.checkServant(e);const i=t.clone();this._servantManager.addServant(e,i,n);return this.newProxy(i,n)}addWithUUID(e){return this.addFacetWithUUID(e,"")}addFacetWithUUID(e,t){return this.addFacet(e,new n(Ice.generateUUID(),""),t)}addDefaultServant(e,t){this.checkServant(e);this.checkForDeactivation();this._servantManager.addDefaultServant(e,t)}remove(e){return this.removeFacet(e,"")}removeFacet(e,t){this.checkForDeactivation();this.checkIdentity(e);return this._servantManager.removeServant(e,t)}removeAllFacets(e){this.checkForDeactivation();this.checkIdentity(e);return this._servantManager.removeAllFacets(e)}removeDefaultServant(e){this.checkForDeactivation();return this._servantManager.removeDefaultServant(e)}find(e){return this.findFacet(e,"")}findFacet(e,t){this.checkForDeactivation();this.checkIdentity(e);return this._servantManager.findServant(e,t)}findAllFacets(e){this.checkForDeactivation();this.checkIdentity(e);return this._servantManager.findAllFacets(e)}findByProxy(e){this.checkForDeactivation();const t=e._getReference();return this.findFacet(t.getIdentity(),t.getFacet())}findDefaultServant(e){this.checkForDeactivation();return this._servantManager.findDefaultServant(e)}addServantLocator(e,t){this.checkForDeactivation();this._servantManager.addServantLocator(e,t)}removeServantLocator(e){this.checkForDeactivation();return this._servantManager.removeServantLocator(e)}findServantLocator(e){this.checkForDeactivation();return this._servantManager.findServantLocator(e)}createProxy(e){this.checkForDeactivation();this.checkIdentity(e);return this.newProxy(e,"")}createDirectProxy(e){return this.createProxy(e)}createIndirectProxy(e){throw new Ice.FeatureNotSupportedException("createIndirectProxy not supported")}setLocator(e){throw new Ice.FeatureNotSupportedException("setLocator not supported")}getEndpoints(){return[]}refreshPublishedEndpoints(){this.checkForDeactivation();return this.computePublishedEndpoints().then(e=>this._publishedEndpoints=e)}getPublishedEndpoints(){return o.clone(this._publishedEndpoints)}setPublishedEndpoints(e){this.checkForDeactivation();if(this._routerInfo!==null){throw new Error("can't set published endpoints on object adapter associated with a router")}this._publishedEndpoints=o.clone(e)}getServantManager(){return this._servantManager}setAdapterOnConnection(e){this.checkForDeactivation();e.setAdapterAndServantManager(this,_servantManager)}messageSizeMax(){return this._messageSizeMax}newProxy(e,t){return this._instance.proxyFactory().referenceToProxy(this._instance.referenceFactory().create(e,t,this._reference,this._publishedEndpoints))}checkForDeactivation(){if(this._state>=d){const e=new Ice.ObjectAdapterDeactivatedException;e.name=this.getName();throw e}}checkIdentity(e){if(e.name===undefined||e.name===null||e.name.length===0){throw new Ice.IllegalIdentityException(e)}if(e.category===undefined||e.category===null){e.category=""}}checkServant(e){if(e===undefined||e===null){throw new Ice.IllegalServantException("cannot add null servant to Object Adapter")}}computePublishedEndpoints(){let e;if(this._routerInfo!==null){e=this._routerInfo.getServerEndpoints().then(e=>{const t=[];e.forEach(e=>{if(t.findIndex(t=>e.equals(t))===-1){t.push(e)}});return t})}else{const t=[];const n=this._instance.initializationData().properties.getProperty(this._name+".PublishedEndpoints");const i=" \t\n\r";let s=0;let o;while(s<n.length){o=r.findFirstNotOf(n,i,s);if(o===-1){if(n!=""){throw new Ice.EndpointParseException("invalid empty object adapter endpoint")}break}s=o;while(true){s=n.indexOf(":",s);if(s==-1){s=n.length;break}else{let e=false;let t=o;while(true){t=n.indexOf('"',t);if(t==-1||s<t){break}else{t=n.indexOf('"',++t);if(t==-1){break}else if(s<t){e=true;break}++t}}if(!e){break}++s}}const e=n.substring(o,s);const c=this._instance.endpointFactoryManager().create(e,false);if(c==null){throw new Ice.EndpointParseException("invalid object adapter endpoint `"+n+"'")}t.push(c)}e=Ice.Promise.resolve(t)}return e.then(e=>{if(this._instance.traceLevels().network>=1&&e.length>0){const t=[];t.push("published endpoints for object adapter `");t.push(this._name);t.push("':\n");let n=true;e.forEach(e=>{if(!n){t.push(":")}t.push(e.toString());n=false});this._instance.initializationData().logger.trace(this._instance.traceLevels().networkCat,t.toString())}return e})}filterProperties(e){let t=true;const n=this._name+".";for(let e=0;e<i.clPropNames.length;++e){if(n.indexOf(i.clPropNames[e]+".")===0){t=false;break}}let s=true;const r=this._instance.initializationData().properties.getPropertiesForPrefix(n);for(const[i,o]of r){let r=false;for(let e=0;e<a.length;++e){if(i===n+a[e]){s=false;r=true;break}}if(!r&&t){e.push(i)}}return s}setState(e){if(this._state===e){return}this._state=e;let t=[];(e<d?[e]:[h,d]).forEach(e=>{if(this._statePromises[e]){t=t.concat(this._statePromises[e]);delete this._statePromises[e]}});if(t.length>0){c.setImmediate(()=>t.forEach(e=>e.resolve()))}}waitState(e,t){if(this._state<d&&(e===h&&this._state!==h||e===d)){if(this._statePromises[e]){this._statePromises[e].push(t)}else{this._statePromises[e]=[t]}}else{t.resolve()}}}Ice.ObjectAdapterI=_})();(function(){const e=Ice.HashMap;const t=Ice.LocatorInfo;const n=Ice.LocatorTable;const i=Ice.LocatorPrx;class s{constructor(t){this._background=t.getPropertyAsInt("Ice.BackgroundLocatorCacheUpdates")>0;this._table=new e(e.compareEquals);this._locatorTables=new e(e.compareEquals)}destroy(){for(const e of this._table.values()){e.destroy()}this._table.clear();this._locatorTables.clear()}find(e){if(e===null){return null}const s=i.uncheckedCast(e.ice_locator(null));let r=this._table.get(s);if(r===undefined){let e=this._locatorTables.get(s.ice_getIdentity());if(e===undefined){e=new n;this._locatorTables.set(s.ice_getIdentity(),e)}r=new t(s,e,this._background);this._table.set(s,r)}return r}}Ice.LocatorManager=s})();(function(){const e=Ice.Debug;const t=Ice.ObjectPrx;const n=Ice.StringUtil;const i=Ice.Identity;class s{constructor(e){this._instance=e;const t=this._instance.initializationData().properties.getPropertyAsList("Ice.RetryIntervals");if(t.length>0){this._retryIntervals=[];for(let e=0;e<t.length;e++){let i;try{i=n.toInt(t[e])}catch(e){i=0}if(e===0&&i===-1){break}this._retryIntervals[e]=i>0?i:0}}else{this._retryIntervals=[0]}}stringToProxy(e){return this.referenceToProxy(this._instance.referenceFactory().createFromString(e,null))}proxyToString(e){return e===null?"":e._getReference().toString()}propertyToProxy(e){const t=this._instance.initializationData().properties.getProperty(e);const n=this._instance.referenceFactory().createFromString(t,e);return this.referenceToProxy(n)}proxyToProperty(e,t){return e===null?new Map:e._getReference().toProperty(t)}streamToProxy(e,t){const n=new i;n._read(e);return this.referenceToProxy(this._instance.referenceFactory().createFromStream(n,e),t)}referenceToProxy(e,n){if(e!==null){const i=n?new n:new t;i._setup(e);return i}else{return null}}checkRetryAfterException(t,n,i,s){const r=this._instance.traceLevels();const o=this._instance.initializationData().logger;if(n.getMode()===Ice.Reference.ModeBatchOneway||n.getMode()===Ice.Reference.ModeBatchDatagram){throw t}if(t instanceof Ice.ObjectNotExistException){if(n.getRouterInfo()!==null&&t.operation==="ice_add_proxy"){n.getRouterInfo().clearCache(n);if(r.retry>=1){o.trace(r.retryCat,"retrying operation call to add proxy to router\n"+t.toString())}if(i!==null){i.value=0}return s}else if(n.isIndirect()){if(n.isWellKnown()){const e=n.getLocatorInfo();if(e!==null){e.clearCache(n)}}}else{throw t}}else if(t instanceof Ice.RequestFailedException){throw t}if(t instanceof Ice.MarshalException){throw t}if(t instanceof Ice.CommunicatorDestroyedException||t instanceof Ice.ObjectAdapterDeactivatedException||t instanceof Ice.ConnectionManuallyClosedException){throw t}if(t instanceof Ice.InvocationTimeoutException||t instanceof Ice.InvocationCanceledException){throw t}++s;e.assert(s>0);let c;if(s===this._retryIntervals.length+1&&t instanceof Ice.CloseConnectionException){c=0}else if(s>this._retryIntervals.length){if(r.retry>=1){o.trace(r.retryCat,"cannot retry operation call because retry limit has been exceeded\n"+t.toString())}throw t}else{c=this._retryIntervals[s-1]}if(r.retry>=1){let e="retrying operation call";if(c>0){e+=" in "+c+"ms"}e+=" because of exception\n"+t.toString();o.trace(r.retryCat,e)}e.assert(i!==null);i.value=c;return s}}Ice.ProxyFactory=s})();(function(){const e=Ice.HashMap;const t=Ice.ConnectRequestHandler;class n{constructor(t){this._instance=t;this._handlers=new e(e.compareEquals)}getRequestHandler(e,n){let i=false;let s;if(e.getCacheConnection()){s=this._handlers.get(e);if(!s){s=new t(e,n);this._handlers.set(e,s);i=true}}else{i=true;s=new t(e,n)}if(i){e.getConnection().then(e=>{s.setConnection(e)},e=>{s.setException(e)})}return n._setRequestHandler(s.connect(n))}removeRequestHandler(e,t){if(e.getCacheConnection()){if(this._handlers.get(e)===t){this._handlers.delete(e)}}}}Ice.RequestHandlerFactory=n})();(function(){const e=Ice.ObjectAdapterI;const t=Ice.Promise;class n{constructor(e,n){this._instance=e;this._communicator=n;this._adapters=[];this._adapterNamesInUse=[];this._shutdownPromise=new t}shutdown(){if(this._instance===null){return this._shutdownPromise}this._instance=null;this._communicator=null;t.all(this._adapters.map(e=>e.deactivate())).then(()=>this._shutdownPromise.resolve());return this._shutdownPromise}waitForShutdown(){return this._shutdownPromise.then(()=>t.all(this._adapters.map(e=>e.waitForDeactivate())))}isShutdown(){return this._instance===null}destroy(){return this.waitForShutdown().then(()=>t.all(this._adapters.map(e=>e.destroy())))}createObjectAdapter(t,n,i){if(this._instance===null){throw new Ice.ObjectAdapterDeactivatedException}let s=null;try{if(t.length===0){s=new e(this._instance,this._communicator,this,Ice.generateUUID(),null,true,i)}else{if(this._adapterNamesInUse.indexOf(t)!==-1){throw new Ice.AlreadyRegisteredException("object adapter",t)}s=new e(this._instance,this._communicator,this,t,n,false,i);this._adapterNamesInUse.push(t)}this._adapters.push(s)}catch(e){i.reject(e)}}removeObjectAdapter(e){if(this._instance===null){return}let t=this._adapters.indexOf(e);if(t!==-1){this._adapters.splice(t,1)}t=this._adapterNamesInUse.indexOf(e.getName());if(t!==-1){this._adapterNamesInUse.splice(t,1)}}}Ice.ObjectAdapterFactory=n})();(function(){t.defineDictionary(IceMX,"StringIntDict","StringIntDictHelper","Ice.StringHelper","Ice.IntHelper",false,undefined,undefined);const e=["::Ice::Object","::IceMX::Metrics"];IceMX.Metrics=class extends Ice.Value{constructor(e="",t=new Ice.Long(0,0),n=0,i=new Ice.Long(0,0),s=0){super();this.id=e;this.total=t;this.current=n;this.totalLifetime=i;this.failures=s}_iceWriteMemberImpl(e){e.writeString(this.id);e.writeLong(this.total);e.writeInt(this.current);e.writeLong(this.totalLifetime);e.writeInt(this.failures)}_iceReadMemberImpl(e){this.id=e.readString();this.total=e.readLong();this.current=e.readInt();this.totalLifetime=e.readLong();this.failures=e.readInt()}};t.defineValue(IceMX.Metrics,e[1],false);IceMX.MetricsDisp=class extends Ice.Object{};t.defineOperations(IceMX.MetricsDisp,undefined,e,1);IceMX.MetricsFailures=class{constructor(e="",t=null){this.id=e;this.failures=t}_write(e){e.writeString(this.id);IceMX.StringIntDictHelper.write(e,this.failures)}_read(e){this.id=e.readString();this.failures=IceMX.StringIntDictHelper.read(e)}static get minWireSize(){return 2}};t.defineStruct(IceMX.MetricsFailures,false,true);t.defineSequence(IceMX,"MetricsFailuresSeqHelper","IceMX.MetricsFailures",false);t.defineSequence(IceMX,"MetricsMapHelper","Ice.ObjectHelper",false,"IceMX.Metrics");t.defineDictionary(IceMX,"MetricsView","MetricsViewHelper","Ice.StringHelper","IceMX.MetricsMapHelper",false,undefined,undefined,Ice.ArrayUtil.equals);IceMX.UnknownMetricsView=class extends Ice.UserException{constructor(e=""){super(e)}static get _parent(){return Ice.UserException}static get _id(){return"::IceMX::UnknownMetricsView"}_mostDerivedType(){return IceMX.UnknownMetricsView}};const n=["::Ice::Object","::IceMX::MetricsAdmin"];IceMX.MetricsAdmin=class extends Ice.Object{};IceMX.MetricsAdminPrx=class extends Ice.ObjectPrx{};t.defineOperations(IceMX.MetricsAdmin,IceMX.MetricsAdminPrx,n,1,{getMetricsViewNames:[,,,2,["Ice.StringSeqHelper"],,[["Ice.StringSeqHelper"]],,,],enableMetricsView:[,,,2,,[[7]],,[IceMX.UnknownMetricsView],,],disableMetricsView:[,,,2,,[[7]],,[IceMX.UnknownMetricsView],,],getMetricsView:[,,,2,["IceMX.MetricsViewHelper"],[[7]],[[4]],[IceMX.UnknownMetricsView],,true],getMapMetricsFailures:[,,,2,["IceMX.MetricsFailuresSeqHelper"],[[7],[7]],,[IceMX.UnknownMetricsView],,],getMetricsFailures:[,,,2,[IceMX.MetricsFailures],[[7],[7],[7]],,[IceMX.UnknownMetricsView],,]});const i=["::Ice::Object","::IceMX::Metrics","::IceMX::ThreadMetrics"];IceMX.ThreadMetrics=class extends IceMX.Metrics{constructor(e,t,n,i,s,r=0,o=0,c=0){super(e,t,n,i,s);this.inUseForIO=r;this.inUseForUser=o;this.inUseForOther=c}_iceWriteMemberImpl(e){e.writeInt(this.inUseForIO);e.writeInt(this.inUseForUser);e.writeInt(this.inUseForOther)}_iceReadMemberImpl(e){this.inUseForIO=e.readInt();this.inUseForUser=e.readInt();this.inUseForOther=e.readInt()}};t.defineValue(IceMX.ThreadMetrics,i[2],false);IceMX.ThreadMetricsDisp=class extends IceMX.MetricsDisp{};t.defineOperations(IceMX.ThreadMetricsDisp,undefined,i,2);const s=["::Ice::Object","::IceMX::DispatchMetrics","::IceMX::Metrics"];IceMX.DispatchMetrics=class extends IceMX.Metrics{constructor(e,t,n,i,s,r=0,o=new Ice.Long(0,0),c=new Ice.Long(0,0)){super(e,t,n,i,s);this.userException=r;this.size=o;this.replySize=c}_iceWriteMemberImpl(e){e.writeInt(this.userException);e.writeLong(this.size);e.writeLong(this.replySize)}_iceReadMemberImpl(e){this.userException=e.readInt();this.size=e.readLong();this.replySize=e.readLong()}};t.defineValue(IceMX.DispatchMetrics,s[1],false);IceMX.DispatchMetricsDisp=class extends IceMX.MetricsDisp{};t.defineOperations(IceMX.DispatchMetricsDisp,undefined,s,1);const r=["::Ice::Object","::IceMX::ChildInvocationMetrics","::IceMX::Metrics"];IceMX.ChildInvocationMetrics=class extends IceMX.Metrics{constructor(e,t,n,i,s,r=new Ice.Long(0,0),o=new Ice.Long(0,0)){super(e,t,n,i,s);this.size=r;this.replySize=o}_iceWriteMemberImpl(e){e.writeLong(this.size);e.writeLong(this.replySize)}_iceReadMemberImpl(e){this.size=e.readLong();this.replySize=e.readLong()}};t.defineValue(IceMX.ChildInvocationMetrics,r[1],false);IceMX.ChildInvocationMetricsDisp=class extends IceMX.MetricsDisp{};t.defineOperations(IceMX.ChildInvocationMetricsDisp,undefined,r,1);const o=["::Ice::Object","::IceMX::ChildInvocationMetrics","::IceMX::CollocatedMetrics","::IceMX::Metrics"];IceMX.CollocatedMetrics=class extends IceMX.ChildInvocationMetrics{constructor(e,t,n,i,s,r,o){super(e,t,n,i,s,r,o)}};t.defineValue(IceMX.CollocatedMetrics,o[2],false);IceMX.CollocatedMetricsDisp=class extends IceMX.ChildInvocationMetricsDisp{};t.defineOperations(IceMX.CollocatedMetricsDisp,undefined,o,2);const c=["::Ice::Object","::IceMX::ChildInvocationMetrics","::IceMX::Metrics","::IceMX::RemoteMetrics"];IceMX.RemoteMetrics=class extends IceMX.ChildInvocationMetrics{constructor(e,t,n,i,s,r,o){super(e,t,n,i,s,r,o)}};t.defineValue(IceMX.RemoteMetrics,c[3],false);IceMX.RemoteMetricsDisp=class extends IceMX.ChildInvocationMetricsDisp{};t.defineOperations(IceMX.RemoteMetricsDisp,undefined,c,3);const a=["::Ice::Object","::IceMX::InvocationMetrics","::IceMX::Metrics"];IceMX.InvocationMetrics=class extends IceMX.Metrics{constructor(e,t,n,i,s,r=0,o=0,c=null,a=null){super(e,t,n,i,s);this.retry=r;this.userException=o;this.remotes=c;this.collocated=a}_iceWriteMemberImpl(e){e.writeInt(this.retry);e.writeInt(this.userException);IceMX.MetricsMapHelper.write(e,this.remotes);IceMX.MetricsMapHelper.write(e,this.collocated)}_iceReadMemberImpl(e){this.retry=e.readInt();this.userException=e.readInt();this.remotes=IceMX.MetricsMapHelper.read(e);this.collocated=IceMX.MetricsMapHelper.read(e)}};t.defineValue(IceMX.InvocationMetrics,a[1],false);IceMX.InvocationMetricsDisp=class extends IceMX.MetricsDisp{};t.defineOperations(IceMX.InvocationMetricsDisp,undefined,a,1);const l=["::Ice::Object","::IceMX::ConnectionMetrics","::IceMX::Metrics"];IceMX.ConnectionMetrics=class extends IceMX.Metrics{constructor(e,t,n,i,s,r=new Ice.Long(0,0),o=new Ice.Long(0,0)){super(e,t,n,i,s);this.receivedBytes=r;this.sentBytes=o}_iceWriteMemberImpl(e){e.writeLong(this.receivedBytes);e.writeLong(this.sentBytes)}_iceReadMemberImpl(e){this.receivedBytes=e.readLong();this.sentBytes=e.readLong()}};t.defineValue(IceMX.ConnectionMetrics,l[1],false);IceMX.ConnectionMetricsDisp=class extends IceMX.MetricsDisp{};t.defineOperations(IceMX.ConnectionMetricsDisp,undefined,l,1)})();(function(){const e=Ice.Debug;const t=Ice.InputStream;const n=Ice.OutputStream;const i=Ice.EndpointParseException;const s=Ice.OpaqueEndpointI;const r=Ice.Protocol;const o=Ice.StringUtil;class c{constructor(e){this._instance=e;this._factories=[]}add(t){e.assert(this._factories.find(e=>t.type()==e.type())===undefined);this._factories.push(t)}get(e){return this._factories.find(t=>e==t.type())||null}create(e,c){const a=e.trim();if(a.length===0){throw new i("value has no non-whitespace characters")}const l=o.splitString(a," \t\n\r");if(l.length===0){throw new i("value has no non-whitespace characters")}let h=l[0];l.splice(0,1);if(h==="default"){h=this._instance.defaultsAndOverrides().defaultProtocol}for(let t=0,n=this._factories.length;t<n;++t){if(this._factories[t].protocol()===h){const n=this._factories[t].create(l,c);if(l.length>0){throw new i("unrecognized argument `"+l[0]+"' in endpoint `"+e+"'")}return n}}if(h==="opaque"){const o=new s;o.initWithOptions(l);if(l.length>0){throw new i("unrecognized argument `"+l[0]+"' in endpoint `"+e+"'")}for(let e=0,i=this._factories.length;e<i;++e){if(this._factories[e].type()==o.type()){const i=new n(this._instance,r.currentProtocolEncoding);i.writeShort(o.type());o.streamWrite(i);const s=new t(this._instance,r.currentProtocolEncoding,i.buffer);s.pos=0;s.readShort();s.startEncapsulation();const c=this._factories[e].read(s);s.endEncapsulation();return c}}return o}return null}read(e){const t=e.readShort();const n=this.get(t);let i=null;e.startEncapsulation();if(n){i=n.read(e)}if(!i){i=new s(t);i.initWithStream(e)}e.endEncapsulation();return i}destroy(){this._factories.forEach(e=>e.destroy());this._factories=[]}}Ice.EndpointFactoryManager=c})();(function(){const e=Ice.TcpEndpointI;class t{constructor(e){this._instance=e}type(){return this._instance.type()}protocol(){return this._instance.protocol()}create(t,n){const i=new e(this._instance);i.initWithOptions(t,n);return i}read(t){const n=new e(this._instance);n.initWithStream(t);return n}destroy(){this._instance=null}clone(e){return new t(e)}}Ice.TcpEndpointFactory=t})();(function(){})();(function(){t.defineDictionary(Ice,"PropertyDict","PropertyDictHelper","Ice.StringHelper","Ice.StringHelper",false,undefined,undefined);const e=["::Ice::Object","::Ice::PropertiesAdmin"];Ice.PropertiesAdmin=class extends Ice.Object{};Ice.PropertiesAdminPrx=class extends Ice.ObjectPrx{};t.defineOperations(Ice.PropertiesAdmin,Ice.PropertiesAdminPrx,e,1,{getProperty:[,,,,[7],[[7]],,,,],getPropertiesForPrefix:[,,,,["Ice.PropertyDictHelper"],[[7]],,,,],setProperties:[,,,,,[["Ice.PropertyDictHelper"]],,,,]})})();(function(){Ice.LogMessageType=t.defineEnum([["PrintMessage",0],["TraceMessage",1],["WarningMessage",2],["ErrorMessage",3]]);t.defineSequence(Ice,"LogMessageTypeSeqHelper","Ice.LogMessageType._helper",false);Ice.LogMessage=class{constructor(e=Ice.LogMessageType.PrintMessage,t=new Ice.Long(0,0),n="",i=""){this.type=e;this.timestamp=t;this.traceCategory=n;this.message=i}_write(e){Ice.LogMessageType._write(e,this.type);e.writeLong(this.timestamp);e.writeString(this.traceCategory);e.writeString(this.message)}_read(e){this.type=Ice.LogMessageType._read(e);this.timestamp=e.readLong();this.traceCategory=e.readString();this.message=e.readString()}static get minWireSize(){return 11}};t.defineStruct(Ice.LogMessage,true,true);t.defineSequence(Ice,"LogMessageSeqHelper","Ice.LogMessage",false);const e=["::Ice::Object","::Ice::RemoteLogger"];Ice.RemoteLogger=class extends Ice.Object{};Ice.RemoteLoggerPrx=class extends Ice.ObjectPrx{};t.defineOperations(Ice.RemoteLogger,Ice.RemoteLoggerPrx,e,1,{init:[,,,,,[[7],["Ice.LogMessageSeqHelper"]],,,,],log:[,,,,,[[Ice.LogMessage]],,,,]});Ice.RemoteLoggerAlreadyAttachedException=class extends Ice.UserException{constructor(e=""){super(e)}static get _parent(){return Ice.UserException}static get _id(){return"::Ice::RemoteLoggerAlreadyAttachedException"}_mostDerivedType(){return Ice.RemoteLoggerAlreadyAttachedException}};const n=["::Ice::LoggerAdmin","::Ice::Object"];Ice.LoggerAdmin=class extends Ice.Object{};Ice.LoggerAdminPrx=class extends Ice.ObjectPrx{};t.defineOperations(Ice.LoggerAdmin,Ice.LoggerAdminPrx,n,0,{attachRemoteLogger:[,,,,,[["Ice.RemoteLoggerPrx"],["Ice.LogMessageTypeSeqHelper"],["Ice.StringSeqHelper"],[3]],,[Ice.RemoteLoggerAlreadyAttachedException],,],detachRemoteLogger:[,,,,[1],[["Ice.RemoteLoggerPrx"]],,,,],getLog:[,,,,["Ice.LogMessageSeqHelper"],[["Ice.LogMessageTypeSeqHelper"],["Ice.StringSeqHelper"],[3]],[[7]],,,]})})();(function(){const e=Ice.WSEndpoint;class t extends e{constructor(e,t){super();this._instance=e;this._delegate=t}type(){return this._instance.type()}protocol(){return this._instance.protocol()}create(t,n){const i=new e(this._instance,this._delegate.create(t,n));i.initWithOptions(t);return i}read(t){const n=new e(this._instance,this._delegate.read(t));n.initWithStream(t);return n}destroy(){this._delegate.destroy();this._instance=null}}Ice.WSEndpointFactory=t})();(function(){t.defineDictionary(Ice,"SliceChecksumDict","SliceChecksumDictHelper","Ice.StringHelper","Ice.StringHelper",false,undefined,undefined)})();(function(){const e=Ice.AsyncResultBase;const t=Ice.Debug;const n=Ice.DefaultsAndOverrides;const i=Ice.EndpointFactoryManager;const s=Ice.ImplicitContextI;const r=Ice.LocatorManager;const o=Ice.ObjectAdapterFactory;const c=Ice.ValueFactoryManagerI;const a=Ice.OutgoingConnectionFactory;const l=Ice.Properties;const h=Ice.ProxyFactory;const u=Ice.RetryQueue;const d=Ice.RouterManager;const p=Ice.Timer;const _=Ice.TraceLevels;const f=Ice.ReferenceFactory;const g=Ice.RequestHandlerFactory;const I=Ice.ACMConfig;const m=0;const w=1;const y=2;class x{constructor(e){this._state=m;this._initData=e;this._traceLevels=null;this._defaultsAndOverrides=null;this._messageSizeMax=0;this._batchAutoFlushSize=0;this._clientACM=null;this._toStringMode=Ice.ToStringMode.Unicode;this._implicitContext=null;this._routerManager=null;this._locatorManager=null;this._referenceFactory=null;this._requestHandlerFactory=null;this._proxyFactory=null;this._outgoingConnectionFactory=null;this._objectAdapterFactory=null;this._retryQueue=null;this._endpointHostResolver=null;this._endpointFactoryManager=null;this._objectFactoryMap=null}initializationData(){return this._initData}traceLevels(){t.assert(this._traceLevels!==null);return this._traceLevels}defaultsAndOverrides(){t.assert(this._defaultsAndOverrides!==null);return this._defaultsAndOverrides}routerManager(){if(this._state===y){throw new Ice.CommunicatorDestroyedException}t.assert(this._routerManager!==null);return this._routerManager}locatorManager(){if(this._state===y){throw new Ice.CommunicatorDestroyedException}t.assert(this._locatorManager!==null);return this._locatorManager}referenceFactory(){if(this._state===y){throw new Ice.CommunicatorDestroyedException}t.assert(this._referenceFactory!==null);return this._referenceFactory}requestHandlerFactory(){if(this._state===y){throw new Ice.CommunicatorDestroyedException}t.assert(this._requestHandlerFactory!==null);return this._requestHandlerFactory}proxyFactory(){if(this._state===y){throw new Ice.CommunicatorDestroyedException}t.assert(this._proxyFactory!==null);return this._proxyFactory}outgoingConnectionFactory(){if(this._state===y){throw new Ice.CommunicatorDestroyedException}t.assert(this._outgoingConnectionFactory!==null);return this._outgoingConnectionFactory}objectAdapterFactory(){if(this._state===y){throw new Ice.CommunicatorDestroyedException}t.assert(this._objectAdapterFactory!==null);return this._objectAdapterFactory}retryQueue(){if(this._state===y){throw new Ice.CommunicatorDestroyedException}t.assert(this._retryQueue!==null);return this._retryQueue}timer(){if(this._state===y){throw new Ice.CommunicatorDestroyedException}t.assert(this._timer!==null);return this._timer}endpointFactoryManager(){if(this._state===y){throw new Ice.CommunicatorDestroyedException}t.assert(this._endpointFactoryManager!==null);return this._endpointFactoryManager}messageSizeMax(){return this._messageSizeMax}batchAutoFlushSize(){return this._batchAutoFlushSize}clientACM(){return this._clientACM}toStringMode(){return this._toStringMode}getImplicitContext(){return this._implicitContext}setDefaultLocator(e){if(this._state==y){throw new Ice.CommunicatorDestroyedException}this._referenceFactory=this._referenceFactory.setDefaultLocator(e)}setDefaultRouter(e){if(this._state==y){throw new Ice.CommunicatorDestroyedException}this._referenceFactory=this._referenceFactory.setDefaultRouter(e)}setLogger(e){this._initData.logger=e}finishSetup(e,t){try{if(this._initData.properties===null){this._initData.properties=l.createProperties()}if(Ice._oneOfDone===undefined){Ice._printStackTraces=this._initData.properties.getPropertyAsIntWithDefault("Ice.PrintStackTraces",0)>0;Ice._oneOfDone=true}if(this._initData.logger===null){this._initData.logger=Ice.getProcessLogger()}this._traceLevels=new _(this._initData.properties);this._defaultsAndOverrides=new n(this._initData.properties,this._initData.logger);const m=1024;let w=this._initData.properties.getPropertyAsIntWithDefault("Ice.MessageSizeMax",m);if(w<1||w>2147483647/1024){this._messageSizeMax=2147483647}else{this._messageSizeMax=w*1024}if(this._initData.properties.getProperty("Ice.BatchAutoFlushSize").length===0&&this._initData.properties.getProperty("Ice.BatchAutoFlush").length>0){if(this._initData.properties.getPropertyAsInt("Ice.BatchAutoFlush")>0){this._batchAutoFlushSize=this._messageSizeMax}}else{w=this._initData.properties.getPropertyAsIntWithDefault("Ice.BatchAutoFlushSize",1024);if(w<1){this._batchAutoFlushSize=w}else if(w>2147483647/1024){this._batchAutoFlushSize=2147483647}else{this._batchAutoFlushSize=w*1024}}this._clientACM=new I(this._initData.properties,this._initData.logger,"Ice.ACM.Client",new I(this._initData.properties,this._initData.logger,"Ice.ACM",new I));const y=this._initData.properties.getPropertyWithDefault("Ice.ToStringMode","Unicode");if(y==="ASCII"){this._toStringMode=Ice.ToStringMode.ASCII}else if(y==="Compat"){this._toStringMode=Ice.ToStringMode.Compat}else if(y!=="Unicode"){throw new Ice.InitializationException("The value for Ice.ToStringMode must be Unicode, ASCII or Compat")}this._implicitContext=s.create(this._initData.properties.getProperty("Ice.ImplicitContext"));this._routerManager=new d;this._locatorManager=new r(this._initData.properties);this._referenceFactory=new f(this,e);this._requestHandlerFactory=new g(this,e);this._proxyFactory=new h(this);this._endpointFactoryManager=new i(this);const x=new Ice.ProtocolInstance(this,Ice.TCPEndpointType,"tcp",false);const S=new Ice.TcpEndpointFactory(x);this._endpointFactoryManager.add(S);const E=new Ice.ProtocolInstance(this,Ice.WSEndpointType,"ws",false);const b=new Ice.WSEndpointFactory(E,S.clone(E));this._endpointFactoryManager.add(b);const v=new Ice.ProtocolInstance(this,Ice.SSLEndpointType,"ssl",true);const C=new Ice.TcpEndpointFactory(v);this._endpointFactoryManager.add(C);const M=new Ice.ProtocolInstance(this,Ice.WSSEndpointType,"wss",true);const P=new Ice.WSEndpointFactory(M,C.clone(M));this._endpointFactoryManager.add(P);this._outgoingConnectionFactory=new a(e,this);if(this._initData.valueFactoryManager===null){this._initData.valueFactoryManager=new c}this._objectAdapterFactory=new o(this,e);this._retryQueue=new u(this);this._timer=new p(this._initData.logger);const k=Ice.RouterPrx.uncheckedCast(this._proxyFactory.propertyToProxy("Ice.Default.Router"));if(k!==null){this._referenceFactory=this._referenceFactory.setDefaultRouter(k)}const A=Ice.LocatorPrx.uncheckedCast(this._proxyFactory.propertyToProxy("Ice.Default.Locator"));if(A!==null){this._referenceFactory=this._referenceFactory.setDefaultLocator(A)}if(t!==null){t.resolve(e)}}catch(e){if(t!==null){if(e instanceof Ice.LocalException){this.destroy().finally(()=>t.reject(e))}else{t.reject(e)}}else{if(e instanceof Ice.LocalException){this.destroy()}throw e}}}destroy(){const t=new e(null,"destroy",null,this,null);if(this._state==w){if(!this._destroyPromises){this._destroyPromises=[]}this._destroyPromises.push(t);return t}this._state=w;Ice.Promise.try(()=>{if(this._objectAdapterFactory){return this._objectAdapterFactory.shutdown()}}).then(()=>{if(this._outgoingConnectionFactory!==null){this._outgoingConnectionFactory.destroy()}if(this._objectAdapterFactory!==null){return this._objectAdapterFactory.destroy()}}).then(()=>{if(this._outgoingConnectionFactory!==null){return this._outgoingConnectionFactory.waitUntilFinished()}}).then(()=>{if(this._retryQueue){this._retryQueue.destroy()}if(this._timer){this._timer.destroy()}if(this._objectFactoryMap!==null){this._objectFactoryMap.forEach(e=>e.destroy());this._objectFactoryMap.clear()}if(this._routerManager){this._routerManager.destroy()}if(this._locatorManager){this._locatorManager.destroy()}if(this._endpointFactoryManager){this._endpointFactoryManager.destroy()}if(this._initData.properties.getPropertyAsInt("Ice.Warn.UnusedProperties")>0){const e=this._initData.properties.getUnusedProperties();if(e.length>0){const t=[];t.push("The following properties were set but never read:");e.forEach(e=>t.push("\n    ",e));this._initData.logger.warning(t.join(""))}}this._objectAdapterFactory=null;this._outgoingConnectionFactory=null;this._retryQueue=null;this._timer=null;this._referenceFactory=null;this._requestHandlerFactory=null;this._proxyFactory=null;this._routerManager=null;this._locatorManager=null;this._endpointFactoryManager=null;this._state=y;if(this._destroyPromises){this._destroyPromises.forEach(e=>e.resolve())}t.resolve()}).catch(e=>{if(this._destroyPromises){this._destroyPromises.forEach(t=>t.reject(e))}t.reject(e)});return t}addObjectFactory(e,t){this._initData.valueFactoryManager.add(t=>e.create(t),t);if(this._objectFactoryMap===null){this._objectFactoryMap=new Map}this._objectFactoryMap.set(t,e)}findObjectFactory(e){let t=null;if(this._objectFactoryMap!==null){t=this._objectFactoryMap.get(e)}return t!==undefined?t:null}}Ice.Instance=x})();(function(){const e=Ice.Instance;const t=Ice.Debug;class n{constructor(t){this._instance=new e(t)}finishSetup(e){this._instance.finishSetup(this,e)}destroy(){return this._instance.destroy()}shutdown(){try{return this._instance.objectAdapterFactory().shutdown()}catch(e){t.assert(e instanceof Ice.CommunicatorDestroyedException);return Ice.Promise.resolve()}}waitForShutdown(){try{return this._instance.objectAdapterFactory().waitForShutdown()}catch(e){t.assert(e instanceof Ice.CommunicatorDestroyedException);return Ice.Promise.resolve()}}isShutdown(){try{return this._instance.objectAdapterFactory().isShutdown()}catch(e){if(!(e instanceof Ice.CommunicatorDestroyedException)){throw e}return true}}stringToProxy(e){return this._instance.proxyFactory().stringToProxy(e)}proxyToString(e){return this._instance.proxyFactory().proxyToString(e)}propertyToProxy(e){return this._instance.proxyFactory().propertyToProxy(e)}proxyToProperty(e,t){return this._instance.proxyFactory().proxyToProperty(e,t)}stringToIdentity(e){return Ice.stringToIdentity(e)}identityToString(e){return Ice.identityToString(e,this._instance.toStringMode())}createObjectAdapter(e){const t=new Ice.AsyncResultBase(this,"createObjectAdapter",this,null,null);this._instance.objectAdapterFactory().createObjectAdapter(e,null,t);return t}createObjectAdapterWithEndpoints(e,t){if(e.length===0){e=Ice.generateUUID()}this.getProperties().setProperty(e+".Endpoints",t);const n=new Ice.AsyncResultBase(this,"createObjectAdapterWithEndpoints",this,null,null);this._instance.objectAdapterFactory().createObjectAdapter(e,null,n);return n}createObjectAdapterWithRouter(e,t){if(e.length===0){e=Ice.generateUUID()}const n=new Ice.AsyncResultBase(this,"createObjectAdapterWithRouter",this,null,null);this.proxyToProperty(t,e+".Router").forEach((e,t)=>{this.getProperties().setProperty(t,e)});this._instance.objectAdapterFactory().createObjectAdapter(e,t,n);return n}addObjectFactory(e,t){this._instance.addObjectFactory(e,t)}findObjectFactory(e){return this._instance.findObjectFactory(e)}getValueFactoryManager(){return this._instance.initializationData().valueFactoryManager}getImplicitContext(){return this._instance.getImplicitContext()}getProperties(){return this._instance.initializationData().properties}getLogger(){return this._instance.initializationData().logger}getDefaultRouter(){return this._instance.referenceFactory().getDefaultRouter()}setDefaultRouter(e){this._instance.setDefaultRouter(e)}getDefaultLocator(){return this._instance.referenceFactory().getDefaultLocator()}setDefaultLocator(e){this._instance.setDefaultLocator(e)}flushBatchRequests(){return this._instance.outgoingConnectionFactory().flushAsyncBatchRequests()}get instance(){return this._instance}}Ice.Communicator=n})();(function(){const e=Ice.Protocol;Ice.InitializationData=function(){this.properties=null;this.logger=null;this.valueFactoryManager=null};Ice.InitializationData.prototype.clone=function(){const e=new Ice.InitializationData;e.properties=this.properties;e.logger=this.logger;e.valueFactoryManager=this.valueFactoryManager;return e};Ice.initialize=function(e,t){let n=null;let i=null;if(e instanceof Array){n=e}else if(e instanceof Ice.InitializationData){i=e}else if(e!==undefined&&e!==null){throw new Ice.InitializationException("invalid argument to initialize")}if(t!==undefined&&t!==null){if(t instanceof Ice.InitializationData&&i===null){i=t}else{throw new Ice.InitializationException("invalid argument to initialize")}}if(i===null){i=new Ice.InitializationData}else{i=i.clone()}i.properties=Ice.createProperties(n,i.properties);const s=new Ice.Communicator(i);s.finishSetup(null);return s};Ice.createProperties=function(e,t){return new Ice.Properties(e,t)};Ice.currentProtocol=function(){return e.currentProtocol.clone()};Ice.currentEncoding=function(){return e.currentEncoding.clone()};Ice.stringVersion=function(){return"3.7.1"};Ice.intVersion=function(){return 30701}})();e.Ice=Ice;e.IceMX=IceMX;e.IceSSL=IceSSL})();